if (self.CavalryLogger) { CavalryLogger.start_js(["T4izS"]); }

__d("XMeEndpointController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/me/{*view}/",{view:{type:"String",defaultValue:""}})}),null);
__d("ReactComposerMediaDialog.react",["cx","fbt","Arbiter","DialogExpansion","DOMContainer.react","FBConfirmDialog.react","LayerFadeOnShow","React","ReactComponentWithPureRenderMixin","ReactComposerEvents","ReactComposerHandleUnsavedChanges","SubscriptionsHandler","XMeEndpointController","XUICloseButton.react","XUIDialog.react","XUIDialogBody.react","XUIDialogTitle.react","goURI","throttle"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;var i=500,j=500;c=b("React").createClass({displayName:"ReactComposerMediaDialog",_subscriptions:b("SubscriptionsHandler"),mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{composerDOM:a.any.isRequired,composerID:a.string.isRequired,onDismiss:a.func.isRequired},getInitialState:function(){return{shown:!0,showConfirmDialog:!1}},UNSAFE_componentWillMount:function(){this._subscriptions=new(b("SubscriptionsHandler"))(),this._subscriptions.addSubscriptions(b("Arbiter").subscribe(b("ReactComposerEvents").POST_SUCCEEDED+this.props.composerID,b("throttle")(this._success,j)))},componentWillUnmount:function(){this._subscriptions.release()},render:function(){var a=this.state.showConfirmDialog?this._renderDismissConfirmation():null;return b("React").createElement("div",null,a,b("React").createElement(b("XUIDialog.react"),{behaviors:{DialogExpansion:b("DialogExpansion"),LayerFadeOnShow:b("LayerFadeOnShow")},className:"_51ly",shown:this.state.shown,width:i,layerHideOnBlur:!1},b("React").createElement(b("XUIDialogTitle.react"),{showCloseButton:!1},h._("Upload Photos\/Videos"),b("React").createElement(b("XUICloseButton.react"),{className:"_51-t",label:h._("Close"),onClick:this._showConfirmDialog})),b("React").createElement(b("XUIDialogBody.react"),{className:"_51lz"},b("React").createElement(b("DOMContainer.react"),null,this.props.composerDOM))))},_renderDismissConfirmation:function(){return b("React").createElement(b("FBConfirmDialog.react"),{content:b("ReactComposerHandleUnsavedChanges").getUnsavedChangesMessage(this.props.composerID),onCancel:this._cancelDismiss,onConfirm:this._dismiss,onToggle:this._cancelDismiss,shown:!0,title:h._("Discard Changes"),cancelButtonText:h._("No"),confirmButtonText:h._("Discard Changes")})},_showConfirmDialog:function(){this.setState({showConfirmDialog:!0})},_cancelDismiss:function(){this.setState({showConfirmDialog:!1})},_dismiss:function(){this.setState({shown:!1,showConfirmDialog:!1}),this.props.onDismiss&&this.props.onDismiss()},_success:function(){this._dismiss();var a=b("XMeEndpointController").getURIBuilder().setString("view","timeline").getURI();b("goURI")(a)}});e.exports=c}),null);
__d("ReactComposerTimelineStore",["DateConsts","ReactComposerActionStore","ReactComposerMediaConfig","ReactComposerPostUtils","ReactComposerStore"],(function(a,b,c,d,e,f){__p&&__p();var g;g=babelHelpers.inherits(a,b("ReactComposerActionStore"));g&&g.prototype;a.prototype.__onPostStarted=function(a){"use strict";var c=b("ReactComposerStore").getScheduledPublishTime(a.composerID);if(c){c=Math.round(c/b("DateConsts").MS_PER_SEC);a.config.contextInfo.scheduled=!0;a.config.contextInfo.unpublished_content_type="SCHEDULED";a.config.contextInfo.scheduled_publish_time=c}b("ReactComposerPostUtils").post({actorID:a.actorID,composerConfig:a.config,composerID:a.composerID,targetID:a.targetID})};a.prototype.__canPost=function(a){"use strict";return!b("ReactComposerPostUtils").isPostButtonDisabled(a.composerID,b("ReactComposerMediaConfig").photo.limit)};a.prototype.__cleanup=function(a){"use strict"};function a(){"use strict";g.apply(this,arguments)}e.exports=new a()}),null);
__d("ReactComposerTimelineMediaPostButtonContainer.react",["React","ReactComposerContextTypes","ReactComposerMediaPostButtonContainerMixin","ReactComposerTimelineStore"],(function(a,b,c,d,e,f){a=b("React").createClass({displayName:"ReactComposerTimelineMediaPostButtonContainer",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComposerMediaPostButtonContainerMixin")],getDefaultProps:function(){return{useDefaultScheduleComponent:!0}},componentDidMount:function(){b("ReactComposerTimelineStore").registerComposerID(this.context.composerID)}});e.exports=a}),null);
__d("ReactMediaComposer.react",["cx","Arbiter","React","ReactComposer.react","ReactComposerAttachmentActions","ReactComposerAttachmentType","ReactComposerBodyContainer.react","ReactComposerConfig","ReactComposerContextConfig","ReactComposerContextProviderMixin","ReactComposerEvents","ReactComposerMediaEagerAttachment.react","ReactComposerPrefillConfig","ReactComposerPrefillUtils","ReactComposerStatusEagerAttachment.react","ReactComposerTimelineMediaPostButtonContainer.react"],(function(a,b,c,d,e,f,g){__p&&__p();a=b("React").createClass({displayName:"ReactMediaComposer",mixins:[b("ReactComposerContextProviderMixin")],propTypes:{contextConfig:b("ReactComposerContextConfig").isRequired,config:b("ReactComposerConfig").isRequired,prefillConfig:b("ReactComposerPrefillConfig").isRequired},UNSAFE_componentWillMount:function(){b("ReactComposerPrefillUtils").prefill(this.props.contextConfig.composerID,this.props.prefillConfig)},componentDidMount:function(){var a=this.props.prefillConfig;a&&a.selectedAttachment&&(b("ReactComposerAttachmentActions").selectAttachment(this.props.contextConfig.composerID,a.selectedAttachment,a.shouldActivateSelectedAttachment),a.shouldActivateSelectedAttachment&&b("Arbiter").inform(b("ReactComposerEvents").ACTIVATE_ATTACHMENT+this.props.contextConfig.composerID))},render:function(){var a=this.props.prefillConfig.selectedAttachment;a=this._getAttachments(a);return b("React").createElement(b("ReactComposer.react"),{className:"_1nby",loggingConfig:this.props.config.loggingConfig,activateOnInit:!0,activateOnInitEntryPoint:this.props.config.triggeredFrom},b("React").createElement(b("ReactComposerBodyContainer.react"),{expanded:this.props.config.showExpandedComposer},a,this.props.children))},_getAttachments:function(a){var c=[];c.push(b("React").createElement(b("ReactComposerStatusEagerAttachment.react"),{config:this.props.config,key:"status",prefillConfig:this.props.prefillConfig,postButtonModule:b("ReactComposerTimelineMediaPostButtonContainer.react"),selected:a===b("ReactComposerAttachmentType").STATUS,scrapeLinkOnInit:!1}));c.push(b("React").createElement(b("ReactComposerMediaEagerAttachment.react"),{key:"media",config:this.props.config,prefillConfig:this.props.prefillConfig,postButtonModule:b("ReactComposerTimelineMediaPostButtonContainer.react"),selected:a===b("ReactComposerAttachmentType").MEDIA}));return c}});e.exports=a}),null);
__d("ReactMediaComposerInit",["AsyncRequest","Bootloader","CSS","DOM","Event","PUWMethods","React","ReactComposerAttachmentActions","ReactComposerAttachmentType","ReactComposerConfig","ReactComposerContextConfig","ReactComposerInit","ReactComposerLoggingName","ReactComposerMediaDialog.react","ReactComposerPrefillConfig","ReactDOM","ReactMediaComposer.react","Run","$"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={_composerDOM:null,_mountContainer:null,init:function(a){__p&&__p();this._composerDOM=b("DOM").create("div");this._mountContainer=b("DOM").create("div");var c=b("$")("timeline-medley"),d=a.contextConfig.composerID;c=b("DOM").scry(c,'input[name="composer_photo[]"]')[0];var e=b("ReactComposerAttachmentType").STATUS;c&&(this._inputDOM=c,b("Event").listen(this._inputDOM,"change",function(){this._inputDOM.files&&this._inputDOM.files.length>0&&(this._uploadExistingFiles(this._inputDOM.files,d,a),b("ReactComposerAttachmentActions").selectAttachment(d,b("ReactComposerAttachmentType").MEDIA,!0,b("ReactComposerLoggingName").MEDIA_COMPOSER_ON_INIT))}.bind(this)),c.files&&c.files.length>0&&(e=b("ReactComposerAttachmentType").MEDIA,this._uploadExistingFiles(c.files,d,a)));a.prefillConfig={selectedAttachment:e,shouldActivateSelectedAttachment:!0};b("ReactComposerInit").init(b("ReactMediaComposer.react"),a,this._composerDOM);b("ReactDOM").render(b("React").createElement(b("ReactComposerMediaDialog.react"),{composerDOM:this._composerDOM,composerID:d,onDismiss:this._cleanup.bind(this)}),this._mountContainer);b("DOM").appendContent(document.body,this._mountContainer);b("Run").onUnload(this._cleanup.bind(this));b("Run").onLeave(this._cleanup.bind(this))},_cleanup:function(){setTimeout(function(){this._composerDOM&&b("ReactDOM").unmountComponentAtNode(this._composerDOM),this._mountContainer&&b("ReactDOM").unmountComponentAtNode(this._mountContainer)}.bind(this),0)},_uploadExistingFiles:function(a,c,d){var e=d.config.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA];b("Bootloader").loadModules(["ReactComposerMediaUtils","ReactComposerPhotoUploader"],function(f,g){return f.uploadPhotosOrVideo(c,Array.prototype.slice.call(a),new g(d.contextConfig,e.photoLimit,{disableFaceRecognition:e.disableFaceboxTagger}),d.config.targetData.targetSupportsMultiplePhotos,b("PUWMethods").FILE_SELECTOR,d.config.targetData.targetSupportsMultiMedia,e)},"ReactMediaComposerInit")},setupFileUploadToComposerDialog:function(a,c,d){var e=function(c){b("CSS").conditionClass(a.getControl(),d,c),a.getInput().disabled=c};a.subscribe("change",function(){new(b("AsyncRequest"))().setURI(c).setErrorHandler(function(){a.clear(),e(!1)}).setHandler(function(){e(!1)}).send(),e(!0)})}};e.exports=a}),null);