if (self.CavalryLogger) { CavalryLogger.start_js(["21Iuk"]); }

__d("rayInterceptsBox",["invariant"],(function(a,b,c,d,e,f,g){__p&&__p();function h(a,b){var c=Object.keys(a);b.forEach(function(b){c.indexOf(b)!==-1||g(0),typeof a[b]==="number"||g(0)})}a={check:function(a,b){__p&&__p();h(a,["minX","maxX","minY","maxY"]);h(b,["x","y","dx","dy"]);a.maxX>a.minX&&a.maxY>a.minY||g(0);if(b.dx===0&&b.dy===0)return!1;if(b.x>=a.minX&&b.x<=a.maxX&&b.y>=a.minY&&b.y<=a.maxY)return!0;var c=(a.minX-b.x)/b.dx,d=(a.maxX-b.x)/b.dx,e=(a.minY-b.y)/b.dy;a=(a.maxY-b.y)/b.dy;b=Math.max(Math.min(c,d),Math.min(e,a));c=Math.min(Math.max(c,d),Math.max(e,a));if(b<0)return!1;return b>c?!1:!0}};e.exports=a}),null);
__d("AdsMouseStateStore",["invariant","Arbiter","Event","EventEmitter","Run","SubscriptionsHandler","Vector","$","ge","keyMirror","rayInterceptsBox","throttle"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=30,j=500,k="pagelet_ego_pane",l=b("keyMirror")({STATIONARY:null,INTENT:null,HOVER:null,NO_INTENT:null});function m(event){try{return{x:event.clientX||event.x,y:event.clientY||event.y}}catch(b){var a=Math.random()*1e3;return{x:a,y:a}}}a=babelHelpers.inherits(n,b("EventEmitter"));h=a&&a.prototype;function n(a,c){a===void 0&&(a=k),c===void 0&&(c=j),h.constructor.call(this),this.destroy=function(){this.$AdsMouseStateStore8&&this.$AdsMouseStateStore8.release(),this.removeAllListeners()}.bind(this),this.onPageTransition=function(event){this.$AdsMouseStateStore9()}.bind(this),this.onMouseMove=function(event){this.calculateState(m(event))}.bind(this),this.$AdsMouseStateStore7=a,this.$AdsMouseStateStore9(),this.$AdsMouseStateStore8=new(b("SubscriptionsHandler"))().addSubscriptions(b("Event").listen(document,"mousemove",b("throttle")(this.onMouseMove,c)),b("Arbiter").subscribe("page_transition",this.onPageTransition)),b("Run").onLeave(this.destroy)}n.prototype.$AdsMouseStateStore9=function(){this.$AdsMouseStateStore1=l.STATIONARY,this.$AdsMouseStateStore2=this.$AdsMouseStateStore3=0,this.$AdsMouseStateStore4=Date.now(),this.$AdsMouseStateStore5=this.$AdsMouseStateStore7,this.$AdsMouseStateStore6=Infinity};n.prototype.getState=function(){return this.$AdsMouseStateStore1};n.prototype.updateRhcID=function(a){b("$")(a)||g(0),this.$AdsMouseStateStore5=a};n.prototype.getRhcID=function(){return this.$AdsMouseStateStore5};n.prototype.__updateMousePos=function(a){this.$AdsMouseStateStore2=a.x,this.$AdsMouseStateStore3=a.y};n.prototype.isRhcPresent=function(){if(!b("ge")(this.$AdsMouseStateStore5))return!1;var a=this.getRhcDimensions();return a.y>0&&a.x>0};n.prototype.getRhc=function(){return b("$")(this.$AdsMouseStateStore5)};n.prototype.getRhcPosition=function(){return b("Vector").getElementPosition(this.getRhc())};n.prototype.getRhcScreenPos=function(){var a=b("Vector").getScrollPosition(),c=this.getRhcPosition();return{x:c.x-a.x,y:c.y-a.y}};n.prototype.getRhcDimensions=function(){return b("Vector").getElementDimensions(this.getRhc())};n.prototype.getPointToRectSquareDist=function(){return this.$AdsMouseStateStore6};n.prototype.isPointWithinDist=function(a){var b=this.getPointToRectSquareDist();return b<=a*a};n.prototype.getRhcBoundingBox=function(){var a=this.getRhcDimensions(),b=this.getRhcScreenPos();return{minX:b.x,maxX:b.x+a.x,minY:b.y,maxY:b.y+a.y}};n.prototype.$AdsMouseStateStore10=function(a){var b=this.getRhcBoundingBox(),c={x:(b.minX+b.maxX)/2,y:(b.minY+b.maxY)/2};b=[Math.abs(b.minX-b.maxX),Math.abs(b.minY-b.maxY)];var d=b[0];b=b[1];d=[Math.max(Math.abs(a.x-c.x)-d/2,0),Math.max(Math.abs(a.y-c.y)-b/2,0)];a=d[0];c=d[1];this.$AdsMouseStateStore6=a*a+c*c};n.prototype.isPosContainedInRhc=function(a){var b=this.getRhcBoundingBox();return a.x>=b.minX&&a.x<=b.maxX&&a.y>=b.minY&&a.y<=b.maxY};n.prototype.hasMovedMinDistance=function(a){var b=a.x-this.$AdsMouseStateStore2;a=a.y-this.$AdsMouseStateStore3;return b*b+a*a>=i*i};n.prototype.tooSoon=function(){return Date.now()-this.$AdsMouseStateStore4<j};n.prototype.$AdsMouseStateStore11=function(){this.$AdsMouseStateStore4=Date.now()};n.prototype.calculateState=function(a){__p&&__p();if(this.tooSoon())return;this.$AdsMouseStateStore11();if(!this.isRhcPresent())return;if(this.isPosContainedInRhc(a)){this.transitionToState(l.HOVER);this.$AdsMouseStateStore6=0;this.__updateMousePos(a);this.scheduleCheckup();return}else if(!this.hasMovedMinDistance(a)){this.transitionToState(l.STATIONARY);return}this.$AdsMouseStateStore10(a);var b=this.isMovingTowardsRhc(a)?l.INTENT:l.NO_INTENT;this.transitionToState(b);this.__updateMousePos(a);this.scheduleCheckup()};n.prototype.isMovingTowardsRhc=function(a){var c={x:this.$AdsMouseStateStore2,y:this.$AdsMouseStateStore3};if(this.isPosContainedInRhc(c))return!0;c=this.getRhcBoundingBox();a={x:this.$AdsMouseStateStore2,y:this.$AdsMouseStateStore3,dx:a.x-this.$AdsMouseStateStore2,dy:a.y-this.$AdsMouseStateStore3};return b("rayInterceptsBox").check(c,a)};n.prototype.scheduleCheckup=function(){var a={x:this.$AdsMouseStateStore2,y:this.$AdsMouseStateStore3};setTimeout(function(){this.calculateState(a)}.bind(this),j*1.5)};n.prototype.transitionToState=function(a){if(a===this.$AdsMouseStateStore1)return;this.$AdsMouseStateStore1=a;this.emit("change")};n.get=function(){n.$AdsMouseStateStore12||(n.$AdsMouseStateStore12=new n());return n.$AdsMouseStateStore12};n.STATES=l;n.MIN_MOVE_DISTANCE=i;n.THROTTLE_TIME=j;e.exports=n}),null);
__d("AdsPagerConstants",["keyMirror"],(function(a,b,c,d,e,f){a=b("keyMirror")({ADD_PAGE:null,PAGE_TRANSITION:null,REQUEST_PAGE:null});c=b("keyMirror")({VIEW_ACTION:null,SERVER_ACTION:null});e.exports={ActionTypes:a,PayloadSources:c}}),null);
__d("AdsPagerDispatcher",["AdsPagerConstants","Dispatcher_DEPRECATED"],(function(a,b,c,d,e,f){"use strict";c=b("AdsPagerConstants").PayloadSources;function a(a){return function(b){this.dispatch({payloadSource:a,action:b})}}d=Object.assign(new(b("Dispatcher_DEPRECATED"))(),{handleUpdateFromViewAction:a(c.VIEW_ACTION),handleUpdateFromServerAction:a(c.SERVER_ACTION)});e.exports=d}),null);
__d("AdsRefreshHandler",["csx","AdsMouseStateStore","AdsPagerConstants","AdsPagerDispatcher","Arbiter","CSSFade","DataAttributeUtils","DOM","Event","IntersectionObserver","SubscriptionsHandler","Toggler","UIPagelet","VideoPlayerExperiments","cxodecode","debounceAcrossTransitions","getOrCreateDOMID","gkx"],(function(a,b,c,d,e,f,g){__p&&__p();var h=b("AdsMouseStateStore").STATES,i=600,j=b("AdsMouseStateStore").get(),k;function a(a,c,d){"use strict";__p&&__p();if(!d.data||!d.pid)return;c.nonce&&(k=b("cxodecode")(c.nonce));this.$1=a;this.$2=Date.now();this.$3=c;this.$4=d;this.$5=b("VideoPlayerExperiments").rhcWNSPauseAds;this.$6=0;this.$7=!1;this.$8=!0;this.$9=0;this.$10=null;this.$11=b("debounceAcrossTransitions")(this.reloadAdsIfNeeded.bind(this),this.$3.delay);b("gkx")("AT5faHuTXKr90iQwQKl1SHVCLgelfdAiBTCM36IPmo0GpzqIzCnjZnLR1Z3bKshckAh3Qyf5nBK8Tx24wdaBxId759A18-wpvcHmqYjRWjymzA")&&(this.$12=new(b("IntersectionObserver"))(function(a){this.$11()}.bind(this),{threshold:[0,1]}));this.$13=new(b("SubscriptionsHandler"))();this.$13.addSubscriptions(b("Event").listen(this.$1,"mouseenter",this.setMouseOver.bind(this,!0)),b("Event").listen(this.$1,"mouseleave",this.setMouseOver.bind(this,!1)),j.addListener("change",this.onMouseStateStoreChange.bind(this)),b("Arbiter").subscribe("AdsPreferencesDialog/opened",this.stopRefreshingRHC.bind(this)),b("Arbiter").subscribe("AdsPreferencesDialog/closed",this.startRefreshingRHC.bind(this)),b("Arbiter").subscribe("VideoChannelView/opened",this.stopRefreshingRHC.bind(this)),b("Arbiter").subscribe("VideoChannelView/closed",this.startRefreshingRHC.bind(this)));b("VideoPlayerExperiments").rhcWNSPauseAds&&this.$13.addSubscriptions(b("Arbiter").subscribe("VideoWatchAndScrollController/init",this.stopRefreshingRHC.bind(this)),b("Arbiter").subscribe("VideoWatchAndScrollController/exit",this.startRefreshingRHC.bind(this)));this.$14();b("AdsPagerDispatcher").register(this.handlePageDispatch.bind(this))}a.prototype.$14=function(){"use strict";this.$15&&this.$15.release();this.$15=new(b("SubscriptionsHandler"))();var a=b("DOM").scry(this.$1,".uiToggle");for(var c=0;c<a.length;c++)this.$15.addSubscriptions(b("Toggler").listen("show",a[c],this.stopRefreshingRHC.bind(this)),b("Toggler").listen("hide",a[c],this.startRefreshingRHC.bind(this)))};a.prototype.handlePageDispatch=function(a){"use strict";a=a.action||{};a.actionType===b("AdsPagerConstants").ActionTypes.REQUEST_PAGE&&this.reloadAds()};a.prototype.setMouseOver=function(a){"use strict";this.$16=a,a&&this.$10!=null&&(this.$10.cancel(),this.$10=null)};a.prototype.subscribeDefaultEventsForRefresh=function(){"use strict";b("gkx")("AT5faHuTXKr90iQwQKl1SHVCLgelfdAiBTCM36IPmo0GpzqIzCnjZnLR1Z3bKshckAh3Qyf5nBK8Tx24wdaBxId759A18-wpvcHmqYjRWjymzA")?(this.$17(),this.$13.addSubscriptions(b("Event").listen(window,"resize",this.$11))):this.$13.addSubscriptions(b("Event").listen(window,"scroll",this.$11),b("Event").listen(window,"resize",this.$11));return this};a.prototype.$17=function(){"use strict";this.$12.disconnect(),this.$12.observe(this.$1)};a.prototype.reloadWithDebounce=function(){"use strict";this.$11()};a.prototype.reloadWithoutDebounce=function(){"use strict";this.reloadAdsIfNeeded()};a.prototype.stopRefreshingRHC=function(a,b){"use strict";this.$5?this.$9++:this.$8=!1};a.prototype.startRefreshingRHC=function(a,b){"use strict";this.$2=Date.now(),this.$5?--this.$9<0&&(this.$9=0):this.$8=!0};a.prototype.forceLoadIfEnoughTimePassed=function(a){"use strict";Date.now()-this.$2>a&&this.reloadAds()};a.prototype.containsPremium=function(){"use strict";var a=b("DOM").scry(this.$1,k||"div._4u8");return!!a.filter(function(a){return JSON.parse(b("DataAttributeUtils").getDataAttribute(a,"data-ad")).segment==="premium"}).length};a.prototype.reloadAdsIfNeeded=function(){"use strict";__p&&__p();if(!this.$1)return;b("Arbiter").inform("AdsRefreshHandler/CheckingReload");if(this.$3.stateRefresh){this.reloadAdsIfNeededStateBased();return}if(this.containsPremium()||this.$16||!this.$3.interval)return;Date.now()-this.$2>=this.$3.interval&&this.reloadAds()};a.prototype.reloadAdsIfNeededStateBased=function(){"use strict";__p&&__p();if(Date.now()-this.$2<this.$3.interval)return;if(this.containsPremium())return;if(!this.$3.interval)return;this.$7=!0;b("Arbiter").inform("AdsRefreshHandler/RefreshScheduled");this.checkScheduledRefresh()};a.prototype.getRefreshScheduled=function(){"use strict";return this.$7};a.prototype.onMouseStateStoreChange=function(){"use strict";this.checkScheduledRefresh()};a.prototype.checkScheduledRefresh=function(){"use strict";__p&&__p();if(!this.$7)return;if(this.$16)return;var a=j.getState(),b=!1;switch(a){case h.HOVER:case h.NO_INTENT:b=!0;break;default:break}if(!b)return;this.$7=!1;this.reloadAds()};a.prototype.reloadAds=function(){"use strict";__p&&__p();if(!this.$1)return;this.$2=Date.now();if(this.$5){if(this.$9)return}else if(!this.$8)return;var a=this.$4&&this.$4.data;a=babelHelpers["extends"]({},a,{refresh_num:++this.$6});this.$10=b("UIPagelet").loadFromEndpoint("WebEgoPane",this.$1,{dom_id:b("getOrCreateDOMID")(this.$1),pid:this.$4.pid,data:a},{bundle:!1,handler:this.onLoadHandler.bind(this)});b("Arbiter").inform("AdsRefreshHandler/AdsLoading")};a.prototype.onLoadHandler=function(){"use strict";b("Arbiter").inform("AdsRefreshHandler/AdsLoaded");this.$10=null;this.$14();if(!this.$3.fade)return;b("CSSFade").show(this.$1,{duration:i})};a.prototype.cleanup=function(){"use strict";this.$1=null,this.$13.release(),this.$11.reset(),this.$12&&(this.$12.disconnect(),this.$12=null)};e.exports=a}),null);
__d("HomeRHCAdsBasicRefresh",["AdsRefreshHandler","Arbiter","NavigationMessage","Run","SubscriptionsHandler","ge"],(function(a,b,c,d,e,f){__p&&__p();var g,h,i,j;function k(){g&&(g.cleanup(),g=null),h&&(h.release(),h=null),i=null}function l(){var a=b("ge")(j);a&&i&&(a.appendChild(i),i=null)}function m(a,b){i=b,g&&g.forceLoadIfEnoughTimePassed(0)}a={init:function(a,c,d){j=a,g=new(b("AdsRefreshHandler"))(b("ge")(a),c,d).subscribeDefaultEventsForRefresh(),h=new(b("SubscriptionsHandler"))(),h.addSubscriptions(b("Arbiter").subscribe(b("NavigationMessage").NAVIGATION_BEGIN,k),b("Arbiter").subscribe("ProfileQuestionAnswered",m),b("Arbiter").subscribe("AdsRefreshHandler/AdsLoaded",l)),b("Run").onLeave(k)}};e.exports=a}),null);
__d("ExploreFeedEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({RECO_CTA_DISPLAYED:"reco_cta_displayed",RECO_CTA_SUPPRESSED:"reco_cta_suppressed",RECO_VPV:"reco_vpv",FEED_LOAD:"explore_feed_load",IOS_FEED_LOAD:"ios_feed_load",EXPLORE_FEED_LOAD_EMPTY:"explore_feed_load_empty",EXPLORE_FEED_LOAD_COMPLETE:"explore_feed_load_complete",END_OF_FEED:"explore_end_of_feed",EXPLORE_LOADING_ERROR:"explore_loading_error",EXPLORE_LOAD_TIME:"explore_load_time",ROCKET_FEED_LAUNCHED:"rocket_feed_launched",UFI_DISPLAYED:"explore_ufi_displayed",CONTEXT_TAPPED:"explore_context_tapped",ROCKET_TAPPED:"explore_rocket_tapped",ROCKET_NUX_DISPLAYED:"rocket_nux_displayed",EMPTY_ROCKET_FEED:"empty_rocket_feed",ROCKET_FEED_EOF:"rocket_feed_eof",ROCKET_FEED_LOAD:"rocket_feed_load",ROCKET_FEED_NAVIGATION:"rocket_feed_navigation",ROCKET_PREVIEW_LAUNCHED:"rocket_preview_launched",ROCKET_PREVIEW_LOAD:"rocket_preview_load",ROCKET_PREVIEW_NONINITIAL_CLICK:"rocket_preview_noninitial_click",ROCKET_PREVIEW_VPV:"rocket_preview_vpv",ROCKET_PREVIEW_REQUEST_DURATION:"rocket_preview_request_duration",ROCKET_PREVIEW_STORY_CLICK:"rocket_preview_story_click",ROCKET_PREVIEW_ERROR:"rocket_preview_error",EXPLORE_SMART_HEADER_TAPPED:"smart_header_tapped",EXPLORE_SMART_HEADER_DISPLAYED:"smart_header_displayed",EXPLORE_SEE_LESS:"explore_see_less_action",EXPLORE_SEE_LESS_UNDO:"explore_see_less_action_undo",EXPLORE_SEE_LESS_TAPPED:"explore_see_less_tapped",EXPLORE_SEE_LESS_UNDO_TAPPED:"explore_see_less_undo_tapped",EOF_UPSELL_VPV:"eof_explore_upsell_vpv",EOF_UPSELL_STORIES_BELOW_UNIT:"explore_eof_upsell_stories_below_unit",EXPLORE_EOF_REACHED_END_OF_MAIN:"explore_eof_reached_main_feed_eof",EXPLORE_EOF_SCROLL_THROUGH_STARTED:"explore_eof_scroll_through_started",EXPLORE_EOF_SCROLL_THROUGH_ABORTED:"explore_eof_scroll_through_aborted",EXPLORE_EOF_SCROLL_THROUGH_COMPLETED:"explore_eof_scroll_through_completed",EXPLORE_END_OF_FEED_STATIC_UNIT_DISPLAYED:"explore_eof_static_unit_displayed",EXPLORE_ORGANIC_STORY_BELOW_UNIT:"explore_organic_story_below_unit",EXPLORE_INFINTE_SCROLL_STORY_ABOVE_EOF_UNIT:"explore_infinite_scroll_story_above_eof_unit",EXPLORE_NUX_DISPLAYED:"explore_nux_displayed",EXPLORE_NUX_DISMISSED:"explore_nux_dismissed",EXPLORE_UPSELL_VPV:"explore_upsell_vpv",LAUNCHED:"explore_feed_launched",DENIED:"explore_feed_denied",EXPLORE_TAB_IMPRESSION:"explore_tab_impression"})}),null);
__d("ExploreFeedTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:ExploreFeedLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:ExploreFeedLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:ExploreFeedLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAccumulationMode=function(a){this.$1.accumulation_mode=a;return this};a.prototype.setClienttime=function(a){this.$1.clienttime=a;return this};a.prototype.setContext=function(a){this.$1.context=a;return this};a.prototype.setCtaRule=function(a){this.$1.cta_rule=a;return this};a.prototype.setDepth=function(a){this.$1.depth=a;return this};a.prototype.setDuration=function(a){this.$1.duration=a;return this};a.prototype.setErrorSource=function(a){this.$1.error_source=a;return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setFeedBackendQueryID=function(a){this.$1.feed_backend_query_id=a;return this};a.prototype.setFeedObjectID2=function(a){this.$1.feed_object_id_2=a;return this};a.prototype.setGraphQlType=function(a){this.$1.graph_ql_type=a;return this};a.prototype.setHasBookmark=function(a){this.$1.has_bookmark=a;return this};a.prototype.setHasTab=function(a){this.$1.has_tab=a;return this};a.prototype.setIsPrefetch=function(a){this.$1.is_prefetch=a;return this};a.prototype.setLoadType=function(a){this.$1.load_type=a;return this};a.prototype.setName=function(a){this.$1.name=a;return this};a.prototype.setNumStoriesReturned=function(a){this.$1.num_stories_returned=a;return this};a.prototype.setRocketNuxAppearanceLimits=function(a){this.$1.rocket_nux_appearance_limits=a;return this};a.prototype.setStoryEntType=function(a){this.$1.story_ent_type=a;return this};a.prototype.setStoryID=function(a){this.$1.story_id=a;return this};a.prototype.setTapLocation=function(a){this.$1.tap_location=a;return this};a.prototype.setToken=function(a){this.$1.token=a;return this};a.prototype.setTrackingCodes=function(a){this.$1.tracking_codes=a;return this};a.prototype.setTransitionDirection=function(a){this.$1.transition_direction=a;return this};a.prototype.setUnitID=function(a){this.$1.unit_id=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={accumulation_mode:!0,clienttime:!0,context:!0,cta_rule:!0,depth:!0,duration:!0,error_source:!0,event:!0,feed_backend_query_id:!0,feed_object_id_2:!0,graph_ql_type:!0,has_bookmark:!0,has_tab:!0,is_prefetch:!0,load_type:!0,name:!0,num_stories_returned:!0,rocket_nux_appearance_limits:!0,story_ent_type:!0,story_id:!0,tap_location:!0,token:!0,tracking_codes:!0,transition_direction:!0,unit_id:!0,vc:!0};e.exports=a}),null);
__d("ExploreFeedEndOfFeedTracking",["ExploreFeedEvent","ExploreFeedTypedLogger","OnVisible","tidyEvent"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null,h=!1,i=!1;e.exports={reset:function(){h=!1,i=!1,g&&g.remove(),g=null},onEOFUnitRendered:function(a){h=!1,i=!1,g=new(b("OnVisible"))(a.element,function(){h=!0,new(b("ExploreFeedTypedLogger"))().setEvent(b("ExploreFeedEvent").EOF_UPSELL_VPV).log(),g&&g.remove()},!0),b("tidyEvent")(g)},onStoryRendered:function(){if(!h||i)return;i=!0;new(b("ExploreFeedTypedLogger"))().setEvent(b("ExploreFeedEvent").EOF_UPSELL_STORIES_BELOW_UNIT).log()}}}),null);
__d("XFeedSeeFirstStoryController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/feed/control/see_first/story/",{})}),null);
__d("SeeFirstStoryLogger",["AsyncRequest","XFeedSeeFirstStoryController"],(function(a,b,c,d,e,f){a=function(){var a=b("XFeedSeeFirstStoryController").getURIBuilder().getURI();new(b("AsyncRequest"))(a).send()};e.exports={log:a}}),null);
__d("FeedImageErrorEventLogger",["Arbiter","BanzaiLogger","Bootloader","DataStore","DOMQuery","Parent","Run","URI","ge","getCrossOriginTransport"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=2;function a(a,b){return{containerId:b,errorsImageSrcs:{},numErrorUrlsLogged:0,surface:a}}var h=!1,i=0,j=!1,k=[a("feed","stream_pagelet"),a("profile","pagelet_timeline_main_column")];function l(a){return!!a&&(Object.prototype.hasOwnProperty.call(a.getQueryData(),"theater")||a.toString().indexOf("/videos/")>=0)}function m(a){b("BanzaiLogger").log("WebFeedImageErrorEventLoggerConfig",a)}function n(){__p&&__p();k.forEach(function(a){__p&&__p();var c=b("ge")(a.containerId);if(c){c=b("DOMQuery").scry(c,"img");var d=c.length,e=0,f=0;c.forEach(function(c){if(c&&c.src){var d="other";a.errorsImageSrcs[c.src]?(f++,d="error"):c.complete&&(e++,d="success");i>0&&Math.random()<1/i&&b("BanzaiLogger").log("WWWImageLoadSrcEventLoggerConfig",{surface:a.surface,src:c.src,result:d})}});j&&d>0&&b("BanzaiLogger").log("WWWImageLoadSummaryEventLoggerConfig",{surface:a.surface,num_total:d,num_success:e,num_errors:f,num_other:d-e-f});a.numErrorUrlsLogged=0}})}function o(a){__p&&__p();if(!a||!a.target||a.target.nodeName!=="IMG")return;var c=a.target,d=c.src;a=k.find(function(a){return b("Parent").bySelector(c,"#"+a.containerId)});if(!a)return;var e=a.surface;if(!b("DataStore").get(c,"retry"))b("DataStore").set(c,"retry",!0),c.src=d;else{a.errorsImageSrcs[d]=!0;if(a.numErrorUrlsLogged>=g)return;a.numErrorUrlsLogged++;b("Bootloader").loadModules(["XHRRequest"],function(a){a&&new a(d).setTransportBuilder(b("getCrossOriginTransport")).setMethod("GET").setResponseHandler(function(){m({error_type:"SUCCESS",src:d,surface:e})}).setErrorHandler(function(a){if(a){var b=a.errorMsg;b.indexOf('id="facebook"')>0&&(b="FB ERROR PAGE");m({error_code:a.errorCode,error_type:a.errorType,error_message:b,src:d,surface:e})}}).setTimeoutHandler(function(a){m({error_type:"TIMEOUT",src:a,surface:e})}).send()},"FeedImageErrorEventLogger")}}c={init:function(a){__p&&__p();if(h)return;h=!0;i=a&&a.loadSampleRate||0;j=a&&a.alwaysLogCounts;window.addEventListener("error",o,!0);b("Run").onUnload(function(){return n()});b("Arbiter").subscribe(["pre_page_transition"],function(a,c){if(l(b("URI").getMostRecentURI())||l(b("URI").getNextURI()))return;n()})}};e.exports=c}),null);
__d("FeedLoadEventWWWLogger",["Arbiter","BanzaiLogger","ErrorSignal","ErrorUtils","LitestandMessages","PageletEventConstsJS","URI"],(function(a,b,c,d,e,f){__p&&__p();var g=["substream_","more_pager_pagelet_","pagelet_composer","pagelet_navigation","pagelet_rhc_footer"],h=[b("PageletEventConstsJS").ARRIVE_END,b("PageletEventConstsJS").DISPLAY_END,b("PageletEventConstsJS").ONLOAD_END],i=["pre_page_transition","page_transition"],j=[b("LitestandMessages").NEWSFEED_LOAD,b("LitestandMessages").STORIES_REQUESTED,b("LitestandMessages").STORIES_INSERTED,b("LitestandMessages").NEWER_STORIES_REQUESTED,b("LitestandMessages").NEWER_STORIES_INSERTED,b("LitestandMessages").STREAM_LOAD_ERROR,b("LitestandMessages").STREAM_LOAD_RETRY,b("LitestandMessages").DUPLICATE_CURSOR_ERROR],k=!1;function l(a){return a&&(a.getPath()==="/"||a.getPath()==="/home.php")}function m(a){b("BanzaiLogger").log("WebFeedLoadLoggerConfig",a)}function n(a){if(!a)return null;if(a.indexOf("more_pager_pagelet_")===0)return"more_pager_pagelet_n";return a.indexOf("substream_")===0&&a!=="substream_0"&&a!=="substream_1"?"substream_n":a}a={init:function(){__p&&__p();if(k)return;b("Arbiter").subscribe("BigPipe/init",function(a,c){if(!c||!c.arbiter)return;c.arbiter.subscribe("pagelet_event",function(a,c){c&&h.indexOf(c.event)>=0&&g.some(function(a){return c.id.indexOf(a)===0})&&l(b("URI").getNextURI())&&m({event:"pagelet",pagelet_id:n(c.id),pagelet_event_type:c.event,pagelet_phase:c.phase.toString()})})});b("Arbiter").subscribe(i,function(a,b){if(b){b=b.to||b.uri;l(b)&&m({event:"page_transition",transition_event_type:a})}});b("Arbiter").subscribe(j,function(a,c){var d=null,e=null;a===b("LitestandMessages").STREAM_LOAD_ERROR?d=c:a===b("LitestandMessages").DUPLICATE_CURSOR_ERROR&&(e=c);m({event:"stream_load",stream_event_type:a,stream_cursor:e,stream_substream_id:n(c&&c.substream_id),error_name:d&&d.name,error_message:d&&d.message,error_stack:d&&d.stack})});b("ErrorUtils").addListener(function(a){a&&l(b("URI").getNextURI())&&(b("ErrorSignal").logJSError("feedloaderror",{error:a.name||a.message,extra:a}),m({event:"js_error",error_name:a.name,error_message:a.message,error_stack:a.stack}))});k=!0}};e.exports=a}),null);
__d("RightColumnTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:RightColumnLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:RightColumnLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:RightColumnLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setCegoService=function(a){this.$1.cego_service=a;return this};a.prototype.setContainer=function(a){this.$1.container=a;return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setEventTargetRaw=function(a){this.$1.event_target_raw=a;return this};a.prototype.setPageletID=function(a){this.$1.pagelet_id=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={cego_service:!0,container:!0,event:!0,event_target_raw:!0,pagelet_id:!0,vc:!0};e.exports=a}),null);
__d("RightColumnLogger",["Arbiter","CSS","DOM","Event","Parent","RightColumnTypedLogger","Run","SubscriptionsHandler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new(b("RightColumnTypedLogger"))(),h={},i;a={init:function(a){__p&&__p();var c=a.log_clicks;a=a.log_impressions;if(i)return;i=new(b("SubscriptionsHandler"))();if(a){a=j("rightCol","rhc");var d=j("pagelet_sidebar","sidebar");a();d();i.addSubscriptions(b("Run").onLeave(l),b("Arbiter").subscribe("LitestandClassicRHC/loaded",a),b("Arbiter").subscribe("sidebar/visibility",d))}if(c){a=k("rightCol","rhc");d=k("pagelet_sidebar","sidebar");a&&i.addSubscriptions(a);d&&i.addSubscriptions(d)}}};function j(a,c){__p&&__p();return function(){__p&&__p();var d=document.getElementById(a);if(!d)return;var e=b("DOM").scry(d,"[data-referrer]");d.getAttribute("data-referrer")&&d.firstElementChild&&b("CSS").shown(d.firstElementChild)&&e.push(d);e.forEach(function(a){if(!a.childElementCount||h[a.id])return;h[a.id]=!0;var d=b("DOM").scry(a,"[data-ego-service]");g.clear().setEvent("impression").setContainer(c).setPageletID(a.id).setEventTargetRaw("");d.length>0?d.forEach(function(a){g.setCegoService(a.getAttribute("data-ego-service")).log()}):g.log()})}}function k(a,c){a=document.getElementById(a);return a?b("Event").listen(a,"click",function(event){var a=event.target,d=b("Parent").byAttribute(a,"data-referrer"),e=b("Parent").byAttribute(a,"data-ego-service");g.clear().setEvent("click").setContainer(c).setPageletID(d?d.id:null).setCegoService(e?e.getAttribute("data-ego-service"):null).setEventTargetRaw(n(a).join(",")).log()}):null}function l(){h={},i&&(i.release(),i=null)}function m(a){if(!a||!(a instanceof HTMLElement))return"";var b=a.id,c=a.nodeName;a=a.getAttribute("class");c=c?c.replace(/^#/,""):"unknown";b=b?"#"+b:"";a=a?" "+a.replace(/\s+/g," ").trim():"";return":"+c+b+a}function n(a){var b=[];while(a&&a instanceof HTMLElement&&a.id!=="rightCol"&&!a.hasAttribute("data-referrer"))b.push(m(a)),a=a.parentElement;b.reverse();return b}e.exports=a}),null);
__d("LocalSellUserActionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:LocalSellUserActionsLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:LocalSellUserActionsLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:LocalSellUserActionsLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAggregator=function(a){this.$1.aggregator=a;return this};a.prototype.setAggregatorID=function(a){this.$1.aggregator_id=a;return this};a.prototype.setClientEventTime=function(a){this.$1.client_event_time=a;return this};a.prototype.setClientSessionID=function(a){this.$1.client_session_id=a;return this};a.prototype.setClientSessionReferral=function(a){this.$1.client_session_referral=a;return this};a.prototype.setDeviceID=function(a){this.$1.device_id=a;return this};a.prototype.setDuplicationType=function(a){this.$1.duplication_type=a;return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setFeedCategoryIds=function(a){this.$1.feed_category_ids=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setIndex=function(a){this.$1.index=a;return this};a.prototype.setInitialClickedComponent=function(a){this.$1.initial_clicked_component=a;return this};a.prototype.setInitialTracking=function(a){this.$1.initial_tracking=a;return this};a.prototype.setIsFromMapView=function(a){this.$1.is_from_map_view=a;return this};a.prototype.setIsOffer=function(a){this.$1.is_offer=a;return this};a.prototype.setItemTypename=function(a){this.$1.item_typename=a;return this};a.prototype.setMessagingResponseTime=function(a){this.$1.messaging_response_time=a;return this};a.prototype.setMpSessionID=function(a){this.$1.mp_session_id=a;return this};a.prototype.setMpSessionSource=function(a){this.$1.mp_session_source=a;return this};a.prototype.setNotifSettingType=function(a){this.$1.notif_setting_type=a;return this};a.prototype.setNotifType=function(a){this.$1.notif_type=a;return this};a.prototype.setNuxType=function(a){this.$1.nux_type=a;return this};a.prototype.setOffsetY=function(a){this.$1.offset_y=a;return this};a.prototype.setOriginalPostID=function(a){this.$1.original_post_id=a;return this};a.prototype.setOtherUserID=function(a){this.$1.other_user_id=a;return this};a.prototype.setParentComponent=function(a){this.$1.parent_component=a;return this};a.prototype.setPhotoHashes=function(a){this.$1.photo_hashes=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setPreviousActionsCount=function(a){this.$1.previous_actions_count=a;return this};a.prototype.setProductItemID=function(a){this.$1.product_item_id=a;return this};a.prototype.setQuickPromotionID=function(a){this.$1.quick_promotion_id=a;return this};a.prototype.setReferralStoryType=function(a){this.$1.referral_story_type=a;return this};a.prototype.setReferralSurface=function(a){this.$1.referral_surface=a;return this};a.prototype.setReferralUIComponent=function(a){this.$1.referral_ui_component=a;return this};a.prototype.setRentalsOneClickLeadGenEmail=function(a){this.$1.rentals_one_click_lead_gen_email=a;return this};a.prototype.setRentalsOneClickLeadGenEnrollSelection=function(a){this.$1.rentals_one_click_lead_gen_enroll_selection=a;return this};a.prototype.setRentalsOneClickLeadGenMessage=function(a){this.$1.rentals_one_click_lead_gen_message=a;return this};a.prototype.setRentalsOneClickLeadGenPhoneNumber=function(a){this.$1.rentals_one_click_lead_gen_phone_number=a;return this};a.prototype.setSavedSearchID=function(a){this.$1.saved_search_id=a;return this};a.prototype.setSavedSearchSubscriptionType=function(a){this.$1.saved_search_subscription_type=a;return this};a.prototype.setSavedSearchType=function(a){this.$1.saved_search_type=a;return this};a.prototype.setSearchQuery=function(a){this.$1.search_query=a;return this};a.prototype.setSearchTabBarSelectedIndex=function(a){this.$1.search_tab_bar_selected_index=a;return this};a.prototype.setServerSessionID=function(a){this.$1.server_session_id=a;return this};a.prototype.setServiceQuoteID=function(a){this.$1.service_quote_id=a;return this};a.prototype.setServiceQuoteSubmissionStatus=function(a){this.$1.service_quote_submission_status=a;return this};a.prototype.setSharePostID=function(a){this.$1.share_post_id=a;return this};a.prototype.setStoryType=function(a){this.$1.story_type=a;return this};a.prototype.setSurface=function(a){this.$1.surface=a;return this};a.prototype.setThemeID=function(a){this.$1.theme_id=a;return this};a.prototype.setThreadFbid=function(a){this.$1.thread_fbid=a;return this};a.prototype.setTimeSinceLastAction=function(a){this.$1.time_since_last_action=a;return this};a.prototype.setTimeSinceLi=function(a){this.$1.time_since_li=a;return this};a.prototype.setTracking=function(a){this.$1.tracking=a;return this};a.prototype.setUIComponent=function(a){this.$1.ui_component=a;return this};a.prototype.setUIComponentHierarchyByID=function(a){this.$1.ui_component_hierarchy_by_id=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setUIComponentHierarchyByName=function(a){this.$1.ui_component_hierarchy_by_name=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setUIComponentID=function(a){this.$1.ui_component_id=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.setVehicleCategory=function(a){this.$1.vehicle_category=a;return this};a.prototype.setVehicleMake=function(a){this.$1.vehicle_make=a;return this};a.prototype.setVehicleModel=function(a){this.$1.vehicle_model=a;return this};a.prototype.setVehicleType=function(a){this.$1.vehicle_type=a;return this};a.prototype.setVehicleVin=function(a){this.$1.vehicle_vin=a;return this};a.prototype.setVehicleYear=function(a){this.$1.vehicle_year=a;return this};a.prototype.setWaterfallSessionID=function(a){this.$1.waterfall_session_id=a;return this};a.prototype.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};var g={aggregator:!0,aggregator_id:!0,client_event_time:!0,client_session_id:!0,client_session_referral:!0,device_id:!0,duplication_type:!0,event:!0,feed_category_ids:!0,index:!0,initial_clicked_component:!0,initial_tracking:!0,is_from_map_view:!0,is_offer:!0,item_typename:!0,messaging_response_time:!0,mp_session_id:!0,mp_session_source:!0,notif_setting_type:!0,notif_type:!0,nux_type:!0,offset_y:!0,original_post_id:!0,other_user_id:!0,parent_component:!0,photo_hashes:!0,previous_actions_count:!0,product_item_id:!0,quick_promotion_id:!0,referral_story_type:!0,referral_surface:!0,referral_ui_component:!0,rentals_one_click_lead_gen_email:!0,rentals_one_click_lead_gen_enroll_selection:!0,rentals_one_click_lead_gen_message:!0,rentals_one_click_lead_gen_phone_number:!0,saved_search_id:!0,saved_search_subscription_type:!0,saved_search_type:!0,search_query:!0,search_tab_bar_selected_index:!0,server_session_id:!0,service_quote_id:!0,service_quote_submission_status:!0,share_post_id:!0,story_type:!0,surface:!0,theme_id:!0,thread_fbid:!0,time_since_last_action:!0,time_since_li:!0,tracking:!0,ui_component:!0,ui_component_hierarchy_by_id:!0,ui_component_hierarchy_by_name:!0,ui_component_id:!0,vc:!0,vehicle_category:!0,vehicle_make:!0,vehicle_model:!0,vehicle_type:!0,vehicle_vin:!0,vehicle_year:!0,waterfall_session_id:!0};e.exports=a}),null);
__d("MarketplaceImpressionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:MarketplaceImpressionsLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:MarketplaceImpressionsLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MarketplaceImpressionsLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAggregator=function(a){this.$1.aggregator=a;return this};a.prototype.setAggregatorID=function(a){this.$1.aggregator_id=a;return this};a.prototype.setClientEventTime=function(a){this.$1.client_event_time=a;return this};a.prototype.setClientSessionID=function(a){this.$1.client_session_id=a;return this};a.prototype.setClientSessionReferral=function(a){this.$1.client_session_referral=a;return this};a.prototype.setDeviceID=function(a){this.$1.device_id=a;return this};a.prototype.setDuplicationType=function(a){this.$1.duplication_type=a;return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setFeedCategoryIds=function(a){this.$1.feed_category_ids=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setIndex=function(a){this.$1.index=a;return this};a.prototype.setInitialClickedComponent=function(a){this.$1.initial_clicked_component=a;return this};a.prototype.setInitialTracking=function(a){this.$1.initial_tracking=a;return this};a.prototype.setIsFromMapView=function(a){this.$1.is_from_map_view=a;return this};a.prototype.setIsOffer=function(a){this.$1.is_offer=a;return this};a.prototype.setItemTypename=function(a){this.$1.item_typename=a;return this};a.prototype.setMessagingResponseTime=function(a){this.$1.messaging_response_time=a;return this};a.prototype.setMpSessionID=function(a){this.$1.mp_session_id=a;return this};a.prototype.setMpSessionSource=function(a){this.$1.mp_session_source=a;return this};a.prototype.setNotifSettingType=function(a){this.$1.notif_setting_type=a;return this};a.prototype.setNotifType=function(a){this.$1.notif_type=a;return this};a.prototype.setNuxType=function(a){this.$1.nux_type=a;return this};a.prototype.setOffsetY=function(a){this.$1.offset_y=a;return this};a.prototype.setOriginalPostID=function(a){this.$1.original_post_id=a;return this};a.prototype.setOtherUserID=function(a){this.$1.other_user_id=a;return this};a.prototype.setParentComponent=function(a){this.$1.parent_component=a;return this};a.prototype.setPhotoHashes=function(a){this.$1.photo_hashes=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setPreviousActionsCount=function(a){this.$1.previous_actions_count=a;return this};a.prototype.setProductItemID=function(a){this.$1.product_item_id=a;return this};a.prototype.setQuickPromotionID=function(a){this.$1.quick_promotion_id=a;return this};a.prototype.setReferralStoryType=function(a){this.$1.referral_story_type=a;return this};a.prototype.setReferralSurface=function(a){this.$1.referral_surface=a;return this};a.prototype.setReferralUIComponent=function(a){this.$1.referral_ui_component=a;return this};a.prototype.setRentalsOneClickLeadGenEmail=function(a){this.$1.rentals_one_click_lead_gen_email=a;return this};a.prototype.setRentalsOneClickLeadGenEnrollSelection=function(a){this.$1.rentals_one_click_lead_gen_enroll_selection=a;return this};a.prototype.setRentalsOneClickLeadGenMessage=function(a){this.$1.rentals_one_click_lead_gen_message=a;return this};a.prototype.setRentalsOneClickLeadGenPhoneNumber=function(a){this.$1.rentals_one_click_lead_gen_phone_number=a;return this};a.prototype.setSavedSearchID=function(a){this.$1.saved_search_id=a;return this};a.prototype.setSavedSearchSubscriptionType=function(a){this.$1.saved_search_subscription_type=a;return this};a.prototype.setSavedSearchType=function(a){this.$1.saved_search_type=a;return this};a.prototype.setSearchQuery=function(a){this.$1.search_query=a;return this};a.prototype.setSearchTabBarSelectedIndex=function(a){this.$1.search_tab_bar_selected_index=a;return this};a.prototype.setServerSessionID=function(a){this.$1.server_session_id=a;return this};a.prototype.setServiceQuoteID=function(a){this.$1.service_quote_id=a;return this};a.prototype.setServiceQuoteSubmissionStatus=function(a){this.$1.service_quote_submission_status=a;return this};a.prototype.setStoryType=function(a){this.$1.story_type=a;return this};a.prototype.setSurface=function(a){this.$1.surface=a;return this};a.prototype.setThemeID=function(a){this.$1.theme_id=a;return this};a.prototype.setThreadFbid=function(a){this.$1.thread_fbid=a;return this};a.prototype.setTimeSinceLastAction=function(a){this.$1.time_since_last_action=a;return this};a.prototype.setTimeSinceLi=function(a){this.$1.time_since_li=a;return this};a.prototype.setTracking=function(a){this.$1.tracking=a;return this};a.prototype.setUIComponent=function(a){this.$1.ui_component=a;return this};a.prototype.setUIComponentHierarchyByID=function(a){this.$1.ui_component_hierarchy_by_id=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setUIComponentHierarchyByName=function(a){this.$1.ui_component_hierarchy_by_name=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setUIComponentID=function(a){this.$1.ui_component_id=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.setVehicleCategory=function(a){this.$1.vehicle_category=a;return this};a.prototype.setVehicleMake=function(a){this.$1.vehicle_make=a;return this};a.prototype.setVehicleModel=function(a){this.$1.vehicle_model=a;return this};a.prototype.setVehicleType=function(a){this.$1.vehicle_type=a;return this};a.prototype.setVehicleVin=function(a){this.$1.vehicle_vin=a;return this};a.prototype.setVehicleYear=function(a){this.$1.vehicle_year=a;return this};a.prototype.setWaterfallSessionID=function(a){this.$1.waterfall_session_id=a;return this};a.prototype.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};var g={aggregator:!0,aggregator_id:!0,client_event_time:!0,client_session_id:!0,client_session_referral:!0,device_id:!0,duplication_type:!0,event:!0,feed_category_ids:!0,index:!0,initial_clicked_component:!0,initial_tracking:!0,is_from_map_view:!0,is_offer:!0,item_typename:!0,messaging_response_time:!0,mp_session_id:!0,mp_session_source:!0,notif_setting_type:!0,notif_type:!0,nux_type:!0,offset_y:!0,original_post_id:!0,other_user_id:!0,parent_component:!0,photo_hashes:!0,previous_actions_count:!0,product_item_id:!0,quick_promotion_id:!0,referral_story_type:!0,referral_surface:!0,referral_ui_component:!0,rentals_one_click_lead_gen_email:!0,rentals_one_click_lead_gen_enroll_selection:!0,rentals_one_click_lead_gen_message:!0,rentals_one_click_lead_gen_phone_number:!0,saved_search_id:!0,saved_search_subscription_type:!0,saved_search_type:!0,search_query:!0,search_tab_bar_selected_index:!0,server_session_id:!0,service_quote_id:!0,service_quote_submission_status:!0,story_type:!0,surface:!0,theme_id:!0,thread_fbid:!0,time_since_last_action:!0,time_since_li:!0,tracking:!0,ui_component:!0,ui_component_hierarchy_by_id:!0,ui_component_hierarchy_by_name:!0,ui_component_id:!0,vc:!0,vehicle_category:!0,vehicle_make:!0,vehicle_model:!0,vehicle_type:!0,vehicle_vin:!0,vehicle_year:!0,waterfall_session_id:!0};e.exports=a}),null);
__d("MarketplaceLoggingHelper",["Event","LocalSellUserActionsTypedLogger","MarketplaceImpressionsTypedLogger","WebStorage","ge","getStyleProperty"],(function(a,b,c,d,e,f){__p&&__p();var g="marketplaceLoggingBookmarkLogTimestamp",h=60*60*6*1e3;a={logBookmarkImpression:function(a){__p&&__p();a=b("ge")(a);if(a&&b("getStyleProperty")(a,"display")==="none")return;a=b("WebStorage").getLocalStorage();var c=Date.now();if(a){var d=a.getItem(g);if(d){d=parseInt(d,10);if(d+h>c)return}a.setItem(g,c)}new(b("MarketplaceImpressionsTypedLogger"))().setEvent("impression").setUIComponent("app_tab").setSurface("app_tab").log()},addBookmarkClickLoggingHandler:function(a){a=b("ge")(a);if(!a)return;b("Event").listen(a,"click",function(){new(b("LocalSellUserActionsTypedLogger"))().setEvent("click").setUIComponent("app_tab").setSurface("app_tab").log()})}};e.exports=a}),null);
__d("PagesBrowserUtils",["Event","QE2Logger","tidyEvent"],(function(a,b,c,d,e,f){var g="pages_browser_your_pages_tab_redesign",h="navItem_2530096808";a={init:function(){var a=document.getElementById(h);b("tidyEvent")(b("Event").listen(a,"click",function(a){b("QE2Logger").logExposureForUser(g)}))}};e.exports=a}),null);
__d("ScrollPerfMonitor",["Event","MainThreadPerformanceLoggerActions","MainThreadPerformanceMonitor","Run","debounce"],(function(a,b,c,d,e,f){__p&&__p();a=500;var g=!1,h;function i(){g?k():(g=!0,b("MainThreadPerformanceMonitor").start(b("MainThreadPerformanceLoggerActions").SCROLL))}function j(){g=!1,b("MainThreadPerformanceMonitor").stop(b("MainThreadPerformanceLoggerActions").SCROLL)}var k=b("debounce")(j,a);function l(){h&&(h.remove(),h=null),j()}c={init:function(){b("MainThreadPerformanceMonitor").isEnabled()&&(h=b("Event").listen(window,"scroll",i,b("Event").Priority.NORMAL,{passive:!0}),b("Run").onLeave(l))}};e.exports=c}),null);
__d("PrivacySelectorEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({OPEN_MENU:"open_menu",CLOSE_MENU:"close_menu",MORE_OPTIONS:"more_options",MORE:"more",SEE_ALL:"see_all",CUSTOM_SAVE:"custom_save",CUSTOM_CANCEL:"custom_cancel",SELECT_CUSTOM:"select_custom",SPECIFIC_FRIENDS_SAVE:"specific_friends_save",SPECIFIC_FRIENDS_CANCEL:"specific_friends_cancel",SELECT_SPECIFIC_FRIENDS:"select_specific_friends",FRIENDS_EXCEPT_SAVE:"friends_except_save",FRIENDS_EXCEPT_CANCEL:"friends_except_cancel",SELECT_FRIENDS_EXCEPT:"select_friends_except",SELECT_EVERYONE:"select_everyone",SELECT_FRIENDS_OF_FRIENDS:"select_friends_of_friends",SELECT_FRIENDS:"select_friends",SELECT_FRIENDS_EXCEPT_ACQUIANTANCES:"select_friends_except_acquaintances",SELECT_ONLY_ME:"select_only_me",SELECT_FB_ONLY:"select_fb_only",SELECT_FRIENDLIST:"select_friendlist",SELECT_OTHER:"select_other"})}),null);
__d("PrivacySelectorSelectableItem",["csx","cx","CSS","DOM","DOMQuery","MenuSelectableItem","React","SutroPrivacyIconsGatingConfig"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i,j="._o00",k="._o01",l="._po2";c=babelHelpers.inherits(a,b("MenuSelectableItem"));i=c&&c.prototype;function a(a){"use strict";if(a.icon){var c=b("SutroPrivacyIconsGatingConfig").enabled;c="_392n"+(c?" _1rwt":"");a.children?a.icon=b("React").createElement("div",{className:c},a.icon):a.icon=b("DOM").create("div",{className:c},a.icon)}i.constructor.call(this,a)}a.prototype.render=function(){"use strict";var a=i.render.call(this),c=b("DOMQuery").find(a,"._54nh");b("CSS").addClass(c,"_4chm");c=c.parentNode;b("CSS").addClass(c,"_4chl");var d=b("DOMQuery").scry(a,"._392n")[0];d||b("CSS").addClass(c,"_4857");return a};a.prototype.isMoreButton=function(){"use strict";return b("CSS").matchesSelector(this.getRoot(),j)};a.prototype.isMoreOptionsButton=function(){"use strict";return b("CSS").matchesSelector(this.getRoot(),l)};a.prototype.isSeeAllButton=function(){"use strict";return b("CSS").matchesSelector(this.getRoot(),k)};e.exports=a}),null);
__d("PrivacySelectorOptionNew",["csx","cx","fbt","CSS","DOM","DOMQuery","JSXDOM","PrivacyConst","PrivacySelectorEvent","PrivacySelectorSelectableItem"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j;c=babelHelpers.inherits(a,b("PrivacySelectorSelectableItem"));j=c&&c.prototype;function a(a){"use strict";j.constructor.call(this,a),this._origLabel=this.getLabel(),this._origTriggerLabel=this.getTriggerLabel()}a.prototype._getData=function(){"use strict";return this._data};a.prototype.getTooltip=function(){"use strict";return this._getData().tooltip};a.prototype.getPostParam=function(){"use strict";return this._getData().postParam.toString()};a.prototype.setPostParam=function(a){"use strict";this._getData().postParam=a;return this};a.prototype.getSubtitles=function(){"use strict";return this._data.optionSubtitles};a.prototype.setSubtitles=function(a){"use strict";this._data.optionSubtitles!=null&&(this._data.optionSubtitles=a);return this};a.prototype.getTriggerIcon=function(){"use strict";return this._getData().triggerIcon};a.prototype.getTriggerLabel=function(){"use strict";return this._getData().triggerLabel};a.prototype.getIconType=function(){"use strict";return this._getData().iconType};a.prototype.isPublic=function(){"use strict";return this.getPostParam()===b("PrivacyConst").PostParam.EVERYONE.toString()};a.prototype.isFriendsOfFriends=function(){"use strict";return this.getPostParam()===b("PrivacyConst").PostParam.FRIENDS_OF_FRIENDS.toString()};a.prototype.isFriends=function(){"use strict";return this.getPostParam()===b("PrivacyConst").PostParam.FRIENDS.toString()};a.prototype.isFriendsExceptAcquaintances=function(){"use strict";return this.getPostParam()===b("PrivacyConst").PostParam.FRIENDS_MINUS_ACQUAINTANCES.toString()};a.prototype.isOnlyMe=function(){"use strict";return this.getPostParam()===b("PrivacyConst").PostParam.ONLY_ME.toString()};a.prototype.isFBOnly=function(){"use strict";return this.getPostParam()===b("PrivacyConst").PostParam.FB_ONLY.toString()};a.prototype.isFriendlist=function(){"use strict";return this._data.isFriendlist};a.prototype.isBasicOption=function(){"use strict";return!0};a.prototype.isCustomOption=function(){"use strict";return!1};a.prototype.isSavedCustomOption=function(){"use strict";return!1};a.prototype.isPrivateSharingDisabledOption=function(){"use strict";return!1};a.prototype.getSavedCustomPrivacyType=function(){"use strict";return null};a.prototype.getTagExpansionBehavior=function(){"use strict";return this._getData().tagExpansionBehavior};a.prototype.getBaseValue=function(){"use strict";return this._getData().baseValue};a.prototype.getIndex=function(){"use strict";return this._getData().value};a.prototype.getLoggingEventName=function(){"use strict";__p&&__p();if(this.isPublic())return b("PrivacySelectorEvent").SELECT_EVERYONE;else if(this.isFriendsOfFriends())return b("PrivacySelectorEvent").SELECT_FRIENDS_OF_FRIENDS;else if(this.isFriends())return b("PrivacySelectorEvent").SELECT_FRIENDS;else if(this.isFriendsExceptAcquaintances())return b("PrivacySelectorEvent").SELECT_FRIENDS_EXCEPT_ACQUIANTANCES;else if(this.isOnlyMe())return b("PrivacySelectorEvent").SELECT_ONLY_ME;else if(this.isFBOnly())return b("PrivacySelectorEvent").SELECT_FB_ONLY;else if(this.isFriendlist())return b("PrivacySelectorEvent").SELECT_FRIENDLIST;else return b("PrivacySelectorEvent").SELECT_OTHER};a.prototype.updateAfterTagExpansion=function(a,b){"use strict";var c=this._origLabel,d=this._origTriggerLabel;a&&this._getData().showPlusOnTagExpansion&&(c=i._("{privacyLabel} (+)",[i._param("privacyLabel",c)]),b&&this.isFriends()?d=i._("Friends, Friends of Tagged"):d=i._("{privacyLabel} (+)",[i._param("privacyLabel",d)]));this._setLabel(c);this._getData().triggerLabel=d;b=this._getExpansionType(a);c=this._getData().optionSubtitles||{};this._setSubtitle(c[b])};a.prototype.isBelowSoftFold=function(){"use strict";return b("CSS").matchesSelector(this.getRoot(),"._4mwj")};a.prototype.isBelowFold=function(){"use strict";return b("CSS").matchesSelector(this.getRoot(),"._3ey_")};a.prototype.removeOnBootload=function(){"use strict";return!!this._getData().removeOnBootload};a.prototype._setLabel=function(a){"use strict";if(!a)return;var c=b("DOMQuery").find(this.getRoot(),"._54nh");c&&b("DOM").setContent(c,a);this._getData().label=a};a.prototype._setSubtitle=function(a){"use strict";if(!a)return;var c=b("DOMQuery").scry(this.getRoot(),"._48u1");c&&c[0]&&b("DOM").setContent(c[0],a)};a.prototype._getExpansionType=function(a){"use strict";return a?b("PrivacyConst").ExpansionType.TAGS_ONLY:b("PrivacyConst").ExpansionType.NONE};a.prototype.render=function(){"use strict";__p&&__p();var a=j.render.call(this);if(!this._getData().isPrimaryOption)return a;var c=b("DOMQuery").find(a,"._54nc");c&&b("CSS").addClass(c,"_48t_");var d=b("DOMQuery").scry(a,"._392n")[0];!d&&c&&b("CSS").addClass(c,"_4zfs");d=b("DOM").find(a,"._54nh");d&&b("CSS").addClass(d,"_48u0");d=b("JSXDOM").div({className:"_48u1"},this._getData().optionSubtitle);b("DOM").appendContent(c,d);return a};e.exports=a}),null);
__d("XPrivacySelectorLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/privacy/selector/log/",{event:{type:"Enum",required:!0,enumType:1},render_location:{type:"Enum",required:!0,enumType:1},content_type:{type:"String",required:!0},privacy_fbid:{type:"String"},saved_custom_opt_in:{type:"Bool",defaultValue:!1}})}),null);
__d("PrivacySelectorCustomOption",["invariant","AsyncDialog","AsyncRequest","DataStore","PrivacySelectorEvent","PrivacySelectorOptionNew","XPrivacyCustomDialogController","XPrivacySelectorLoggingController"],(function(a,b,c,d,e,f,g){__p&&__p();var h;c=babelHelpers.inherits(a,b("PrivacySelectorOptionNew"));h=c&&c.prototype;function a(a){"use strict";h.constructor.call(this,a),this._subtitlesWhenNotSelected=a.optionSubtitlesWhenNotSelected}a.prototype.isBasicOption=function(){"use strict";return!1};a.prototype.isCustomOption=function(){"use strict";return!0};a.prototype.getSelector=function(){"use strict";return this._selector};a.prototype.getLoggingEventName=function(){"use strict";return b("PrivacySelectorEvent").SELECT_CUSTOM};a.prototype.setSubtitlesToNonSelected=function(){"use strict";this.setSubtitles(this._subtitlesWhenNotSelected)};a.prototype.openDialog=function(a){"use strict";__p&&__p();this._selector==null&&(this._selector=a);b("DataStore").set(this._data.id,"PrivacySelectorCustomOption",this);var c=b("XPrivacyCustomDialogController").getURIBuilder().setString("option_id",this._data.id).setString("id",this._data.privacyfbid.toString()).setString("post_param",a.getPostParam()).setString("content_type",a.getContentType()).setEnum("render_location_enum",a.getRenderLocation()).setIntVector("tags",a.getTags()).setBool("autosave",this._data.autosave).setBool("limit_community",this._data.limitcommunity).setBool("limit_facebook",this._data.limitfacebook).setBool("limit_fof",this._data.limitfof).setBool("limit_tagexpand",this._data.limittagexpand).setBool("is_new_privacy_selector",!0).setBool("saved_custom_opt_in",a.getSavedCustomOptIn()).getURI();c=new(b("AsyncRequest"))(c);c.setRelativeTo(a.getTriggerButtonElement());b("AsyncDialog").send(c,function(c){__p&&__p();var d=function(a){var c=document.getElementsByName("render_location")[0];c instanceof HTMLInputElement||g(0);var d=document.getElementsByName("content_type")[0];d instanceof HTMLInputElement||g(0);a=b("XPrivacySelectorLoggingController").getURIBuilder().setEnum("event",a).setString("privacy_fbid",this._data.privacyfbid!=null?String(this._data.privacyfbid):null).setEnum("render_location",c.value).setString("content_type",d.value).getURI();new(b("AsyncRequest"))().setURI(a).send()}.bind(this);c.subscribe("hide",function(){a.inform("custom/hide"),a.inform("selectorFinished")});c.subscribe("success",function(){a.inform("custom/success"),d(b("PrivacySelectorEvent").CUSTOM_SAVE)});c.subscribe("cancel",function(){a.inform("custom/cancel"),d(b("PrivacySelectorEvent").CUSTOM_CANCEL)})}.bind(this))};a.customPrivacySave=function(a,c,d,e){__p&&__p();e===void 0&&(e={});var f=b("DataStore").get(a,"PrivacySelectorCustomOption");b("DataStore").remove(a,"PrivacySelectorCustomOption");if(f==null)!1;else if(f.getSelector==null)!1;else{a=f.getSelector();d!==null?a.updateSavedCustomOption(d,c,e):a.updateCustomOption(e);a.selectOption(c);a.finishAnimatingSavedCustomSave()}};e.exports=a}),null);
__d("XPrivacySelectorAsyncMoreController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/privacy/selector/async_more/",{id:{type:"String",required:!0},next_value:{type:"Int",required:!0},render_location_enum:{type:"Enum",required:!0,enumType:1}})}),null);
__d("PrivacySelectableMenu",["cx","Arbiter","AsyncRequest","CSS","DataStore","Ease","PrivacySelectorCustomOption","PrivacySelectorEvent","PrivacySelectorOptionNew","PrivacySelectorSelectableItem","SelectableMenu","SelectableMenuUtils","XPrivacySelectorAsyncMoreController","XPrivacySelectorLoggingController"],(function(a,b,c,d,e,f,g){__p&&__p();var h;c=babelHelpers.inherits(a,b("SelectableMenu"));h=c&&c.prototype;function a(a,c){"use strict";h.constructor.call(this,a,c),b("DataStore").set("PrivacySelectableMenu",c.id,this),this._needsBootload=!!c.needsbootload,this.collapseMenu(),this.updateOptionsAfterTagExpansion(!!c.hasTags)}a.prototype.cleanup=function(){"use strict";b("DataStore").remove("PrivacySelectableMenu",this._config.id)};a.prototype.getItemForIndex=function(a){"use strict";return this.findOption(function(b){return b.getIndex()==a})};a.prototype.findItem=function(a){"use strict";__p&&__p();for(var c=this._items,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;if(f instanceof b("PrivacySelectorSelectableItem")&&a(f))return f}return null};a.prototype.findOption=function(a){"use strict";return this.findItem(function(c){return c instanceof b("PrivacySelectorOptionNew")&&a(c)})};a.prototype.getSelectedOption=function(){"use strict";return this.findOption(function(a){return a.isSelected()})};a.prototype.selectOption=function(a){"use strict";__p&&__p();var c=null,d=!1,e=!1;for(var f=this._items,g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;if(!(i instanceof b("PrivacySelectorSelectableItem")))continue;if(i instanceof b("PrivacySelectorCustomOption")){c=i;continue}if(i.isMoreButton()){this.expandMenuWithMore();continue}if(i.isMoreOptionsButton()||i.isSeeAllButton()){this._needsBootload?d=!0:this.expandMenu();continue}if(!d&&i instanceof b("PrivacySelectorOptionNew")&&i.getPostParam()==a){this.setValue(i.getIndex());e=!0;break}}!e&&c&&(c.setPostParam(a),this.setValue(c.getIndex()));d?(this.subscribeOnce("expandMenu",function(){this.selectOption(a)}.bind(this)),this.expandMenu()):this.inform("selectOption");return!d};a.prototype._handleItemClick=function(a,c){"use strict";__p&&__p();if(!b("SelectableMenuUtils").doesItemSupportSelect(a))return h._handleItemClick.call(this,a,c);if(a.isMoreButton()){this._logMoreButtonClick();this.expandMenuWithMore();return undefined}if(a.isMoreOptionsButton()||a.isSeeAllButton()){this._logMoreOptionsOrSeeAllButtonClick();this.expandMenu();return undefined}if(!(a instanceof b("PrivacySelectorOptionNew")))return undefined;this._logOptionClick(a);c=this.inform("itemclick",{item:a,event:c});if(c)return undefined;!b("SelectableMenuUtils").isSelected(a)&&!a.isCustomOption()&&!a.isSavedCustomOption()&&a.select()!==!1&&(this._items.forEach(function(c){b("SelectableMenuUtils").isSelected(c)&&c!==a&&c.deselect()}),this.inform("change",this.getSelection()));b("Arbiter").inform("composerprivacy/aborteducation");this.done();return a.handleClick()};a.prototype._logMoreButtonClick=function(){"use strict";var a=b("XPrivacySelectorLoggingController").getURIBuilder().setString("content_type",this._config.contenttype).setEnum("event",b("PrivacySelectorEvent").MORE).setString("privacy_fbid",this._config.privacyfbid!=null?String(this._config.privacyfbid):null).setEnum("render_location",this._config.renderlocation).setBool("saved_custom_opt_in",this._config.savedCustomOptIn).getURI();new(b("AsyncRequest"))().setURI(a).send()};a.prototype._logMoreOptionsOrSeeAllButtonClick=function(){"use strict";var event=this._config.hasSavedCustom?b("PrivacySelectorEvent").SEE_ALL:b("PrivacySelectorEvent").MORE_OPTIONS,a=b("XPrivacySelectorLoggingController").getURIBuilder().setString("content_type",this._config.contenttype).setEnum("event",event).setString("privacy_fbid",this._config.privacyfbid!=null?String(this._config.privacyfbid):null).setEnum("render_location",this._config.renderlocation).setBool("saved_custom_opt_in",this._config.savedCustomOptIn).getURI();new(b("AsyncRequest"))().setURI(a).send()};a.prototype._logOptionClick=function(a){"use strict";a=b("XPrivacySelectorLoggingController").getURIBuilder().setString("content_type",this._config.contenttype).setEnum("event",a.getLoggingEventName()).setString("privacy_fbid",this._config.privacyfbid!=null?String(this._config.privacyfbid):null).setEnum("render_location",this._config.renderlocation).setBool("saved_custom_opt_in",this._config.savedCustomOptIn).getURI();new(b("AsyncRequest"))().setURI(a).send()};a.prototype._getMoreOptionsOrSeeAllButton=function(){"use strict";return this.findItem(function(a){return a.isMoreOptionsButton()||a.isSeeAllButton()})};a.prototype.getCustomItem=function(){"use strict";return this.findOption(function(a){return a instanceof b("PrivacySelectorCustomOption")})};a.prototype._setMenuState=function(a){"use strict";var c=this.getRoot();b("CSS").conditionClass(c,"_po3",a!=="expanded");b("CSS").conditionClass(c,"_po4",a==="expanded");this._config.hasSavedCustom&&(b("CSS").conditionClass(c,"_n_v",a==="collapsed"),b("CSS").conditionClass(c,"_n__",a!=="collapsed"));this._expanded=a==="expanded"};a.prototype.expandMenuWithMore=function(){"use strict";this._setMenuState("withMore"),this.inform("expandMenuWithMore")};a.prototype.expandMenu=function(){"use strict";__p&&__p();if(this._expanded)return;this._setMenuState("withMore");this._expanded=!0;if(!this._needsBootload){this.expandMenuAfterLoaded();return}this._needsBootload=!1;var a=this._getMoreOptionsOrSeeAllButton();a&&(this._moreOptionsIcon=a.getIcon(),a.setIcon(this._config.morespinner),this._scrollToOption(a));var c=Date.now(),d=b("XPrivacySelectorAsyncMoreController").getURIBuilder().setString("id",this._config.id).setInt("next_value",this._config.nextvalue).setEnum("render_location_enum",this._config.renderlocation).getURI();new(b("AsyncRequest"))().setURI(d).setRelativeTo(this.getRoot()).setErrorHandler(function(b){b=1250-(Date.now()-c);setTimeout(function(){a&&a.setIcon(this._moreOptionsIcon),this._needsBootload=!0,this._expanded=!1}.bind(this),b>0&&a?b:0)}.bind(this)).send()};a.prototype.expandMenuAfterLoaded=function(){"use strict";this._setMenuState("expanded");if(this._moreOptionsIcon){var a=this._getMoreOptionsOrSeeAllButton();a&&a.setIcon(this._moreOptionsIcon);this._moreOptionsIcon=undefined}this.inform("expandMenu")};a.prototype.collapseMenu=function(){"use strict";this._setMenuState("collapsed")};a.prototype.updateOptionsAfterTagExpansion=function(a){"use strict";this._lastHasTagsUpdate=a,this.forEachItem(function(c){c instanceof b("PrivacySelectorOptionNew")&&c.updateAfterTagExpansion(a,!!this._config.hasSimpleLabels)}.bind(this))};a.prototype.refreshTagExpansionLabels=function(){"use strict";this.updateOptionsAfterTagExpansion(!!this._lastHasTagsUpdate)};a.prototype.updateTagExpansionLabelAfterBootload=function(){"use strict";this.refreshTagExpansionLabels()};a.prototype.onPopoverOpen=function(a){"use strict";a&&a.isBelowFold()?(this._needsBootload&&this.subscribeOnce("expandMenu",function(){var a=this.getSelectedOption();a&&this._scrollToOption(a)}.bind(this)),this.expandMenu(),this._needsBootload||this._scrollToOption(a)):a&&a.isBelowSoftFold()?(this.expandMenuWithMore(),this._scrollToOption(a)):this.collapseMenu()};a.prototype._scrollToOption=function(a){"use strict";if(!this._scrollableArea)return;a=a.getRoot();if(a===null)return;var c=12,d=this._scrollableArea.getScrollTop(),e=d+this._scrollableArea.getClientHeight();a=a.offsetTop+a.offsetHeight;a+c>e&&this._scrollableArea.setScrollTop(d+a+c-e,!0,{duration:Math.min(1e3,(a+c-e)*10),ease:b("Ease").sineOut})};e.exports=a}),null);
__d("PopoverButton",["csx","DOM","DOMQuery","isTextNode"],(function(a,b,c,d,e,f,g){__p&&__p();a={setLabel:function(a,c){a=b("DOMQuery").find(a,"._55pe");var d=a.childNodes;for(var e=0;e<d.length;e++)if(b("isTextNode")(d[e])){b("DOM").replace(d[e],c);return}b("DOM").appendContent(a,c)}};e.exports=a}),null);
__d("PrivacyIconType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({EVERYONE:"everyone",CUSTOM:"custom",FRIENDS:"friends",FRIENDS_OF_FRIENDS:"friends_of_friends",FRIENDS_EXCEPT_ACQUAINTANCES:"friends_except_acquaintances",FRIENDS_EXCEPT:"friends_except",SPECIFIC_FRIENDS:"specific_friends",MUTUAL_FRIENDS:"mutual_friends",ONLY_ME:"only_me",GROUP:"group",FACEBOOK:"facebook",SCHOOL_GROUP:"school_group",WORK_COMMUNITY:"work_community",WORK_MULTI_COMPANY:"work_multi_company",LIST_MEMBERS:"list_members",GENERIC_LIST:"generic_list",CLOSE_FRIENDS:"close_friends",GOOD_FRIENDS:"good_friends",ACQUAINTANCES:"acquaintances",SCHOOL_LIST:"school_list",FAMILY_LIST:"family_list",LOCATION_LIST:"location_list",WORK_LIST:"work_list",APP_LIST:"app_list",GAMER_FRIENDS:"gamer_friends",RESTRICTED:"restricted",SUBSCRIBED_LIST:"subscribed_list",SUBSCRIBED_TO:"subscribed_to",ACQUAINTANCES_MOBILE_DEPRECATED:"acquaintances_mobile_deprecated",APP_LIST_ARCHIVED_MOBILE_DEPRECATED:"app_list_archived_mobile_deprecated",APP_LIST_MOBILE_DEPRECATED:"app_list_mobile_deprecated",ARCHIVED_APP_LIST:"archived_app_list",CLOSE_FRIENDS_MOBILE_DEPRECATED:"close_friends_mobile_deprecated",FAMILY_LIST_ARCHIVED_DEPRECATED:"family_list_archived_deprecated",FAMILY_LIST_ARCHIVED_MOBILE_DEPRECATED:"family_list_archived_mobile_deprecated",FAMILY_LIST_MOBILE_DEPRECATED:"family_list_mobile_deprecated",GENERIC_LIST_MOBILE_DEPRECATED:"generic_list_mobile_deprecated",GOOD_FRIENDS_DEPRECATED:"good_friends_deprecated",LOCATION_LIST_ARCHIVED_DEPRECATED:"location_list_archived_deprecated",LOCATION_LIST_ARCHIVED_MOBILE_DEPRECATED:"location_list_archived_mobile_deprecated",LOCATION_LIST_MOBILE_DEPRECATED:"location_list_mobile_deprecated",RESTRICTED_MOBILE_DEPRECATED:"restricted_mobile_deprecated",SCHOOL_LIST_ARCHIVED_DEPRECATED:"school_list_archived_deprecated",SCHOOL_LIST_ARCHIVED_MOBILE_DEPRECATED:"school_list_archived_mobile_deprecated",SCHOOL_LIST_MOBILE_DEPRECATED:"school_list_mobile_deprecated",SUBSCRIBED_LIST_MOBILE_DEPRECATED:"subscribed_list_mobile_deprecated",SUBSCRIBED_TO_ARCHIVED_DEPRECATED:"subscribed_to_archived_deprecated",SUBSCRIBED_TO_ARCHIVED_MOBILE_DEPRECATED:"subscribed_to_archived_mobile_deprecated",SUBSCRIBED_TO_MOBILE_DEPRECATED:"subscribed_to_mobile_deprecated",WORK_LIST_ARCHIVED_DEPRECATED:"work_list_archived_deprecated",WORK_LIST_ARCHIVED_MOBILE_DEPRECATED:"work_list_archived_mobile_deprecated",WORK_LIST_MOBILE_DEPRECATED:"work_list_mobile_deprecated",EVENT:"event",PRIVATE_EVENT:"private_event",PROFILE_CHANNELS_HIDDEN:"profile_channels_hidden",SUPPORTER_EXCLUSIVE:"supporter_exclusive",NO_ICON:"no_icon"})}),null);
__d("PrivacySelectorDataStore",["ArbiterMixin","KeyedCallbackManager","PrivacySelectorNewDispatcher"],(function(a,b,c,d,e,f){__p&&__p();var g=new(b("KeyedCallbackManager"))(),h=babelHelpers["extends"]({},b("ArbiterMixin"),{get:function(a,b){g.executeOrEnqueue(a,b)},hasValueChanged:function(a){return!!g.getResource(a)}});b("PrivacySelectorNewDispatcher").register(function(a){a.saved_custom_privacy_type!=null&&(g.addResourcesAndExecute({saved_custom_update:{postParam:a.post_param,savedCustomPrivacyType:a.saved_custom_privacy_type,sourceSelectorID:a.unique_id,subtitles:a.subtitles}}),h.inform("saved_custom_update"));if(a.selector_type){var b={};b[a.selector_type]={post_param:a.post_param,unique_id:a.unique_id,reload:a.reload,is_error:a.is_error,is_custom:a.is_custom,selector_type:a.selector_type,subtitles:a.subtitles};g.addResourcesAndExecute(b);h.inform("change")}});e.exports=h}),null);
__d("SavedCustomPrivacyType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SPECIFIC_FRIENDS:"specific_friends",FRIENDS_EXCEPT:"friends_except"})}),null);
__d("XPrivacySpecificAudienceSelectorDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/privacy/specific_audience_selector_dialog/",{autosave:{type:"Bool",defaultValue:!1},content_type:{type:"String"},fbid:{type:"String",required:!0},option_id:{type:"String"},post_param:{type:"String"},privacy_type:{type:"Enum",required:!0,enumType:1},render_location:{type:"Enum",required:!0,enumType:1},return_uri:{type:"String"},cancel_uri:{type:"String"}})}),null);
__d("PrivacySelectorSavedCustomOption",["AsyncDialog","AsyncRequest","DataStore","PrivacySelectorEvent","PrivacySelectorOptionNew","SavedCustomPrivacyType","XPrivacySpecificAudienceSelectorDialogController"],(function(a,b,c,d,e,f){__p&&__p();var g;a=babelHelpers.inherits(h,b("PrivacySelectorOptionNew"));g=a&&a.prototype;function h(a){"use strict";g.constructor.call(this,a)}h.prototype.getSelector=function(){"use strict";return this._selector};h.prototype.isBasicOption=function(){"use strict";return!1};h.prototype.isSavedCustomOption=function(){"use strict";return!0};h.prototype.getSavedCustomPrivacyType=function(){"use strict";return this._data.savedCustomPrivacyType};h.prototype.getLoggingEventName=function(){"use strict";switch(this._data.savedCustomPrivacyType){case b("SavedCustomPrivacyType").FRIENDS_EXCEPT:return b("PrivacySelectorEvent").SELECT_FRIENDS_EXCEPT;case b("SavedCustomPrivacyType").SPECIFIC_FRIENDS:return b("PrivacySelectorEvent").SELECT_SPECIFIC_FRIENDS;default:!1;return b("PrivacySelectorEvent").SELECT_OTHER}};h.prototype.openDialog=function(a){"use strict";this._selector=a;b("DataStore").set(this._data.id,"PrivacySelectorCustomOption",this);var c=b("XPrivacySpecificAudienceSelectorDialogController").getURIBuilder().setBool("autosave",this._data.autosave).setString("content_type",a.getContentType()).setString("fbid",this._data.privacyFBID).setString("option_id",this._data.id).setString("post_param",this.getPostParam()).setEnum("privacy_type",this._data.savedCustomPrivacyType).setEnum("render_location",a.getRenderLocation()).getURI();c=new(b("AsyncRequest"))().setURI(c).setRelativeTo(a.getTriggerButtonElement());b("AsyncDialog").send(c)};h.informSave=function(a){"use strict";a=b("DataStore").get(a,"PrivacySelectorCustomOption");if(a instanceof h){a=a.getSelector();a&&a.animateSavedCustomSave()}};e.exports=h}),null);
__d("XPrivacySelectorSavedCustomUpdateController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/privacy/selector/update/saved_custom/",{})}),null);
__d("XPrivacySelectorUpdateController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/privacy/selector/update/",{privacy_fbid:{type:"String",required:!0},post_param:{type:"String",required:!0},tags:{type:"IntVector"},render_location_enum:{type:"Enum",required:!0,enumType:1},is_saved_on_select:{type:"Bool",defaultValue:!1},should_return_tooltip:{type:"Bool",defaultValue:!1},replace_on_select:{type:"Bool",defaultValue:!1},prefix_tooltip_with_app_privacy:{type:"Bool",defaultValue:!1},ent_id:{type:"String",required:!0},reload_selector:{type:"Bool",defaultValue:!1}})}),null);
__d("PrivacySelectorBase",["cx","fbt","Promise","regeneratorRuntime","Animation","Arbiter","ArbiterMixin","AsyncRequest","Button","CSS","CurrentUser","DataStore","DOM","Focus","Input","MenuStaticItem","PopoverButton","PopoverLoadingMenu","PrivacyConst","PrivacyIconType","PrivacySelectableMenu","PrivacySelectorCustomOption","PrivacySelectorDataStore","PrivacySelectorEvent","PrivacySelectorNewDispatcher","PrivacySelectorSavedCustomOption","Run","SubscriptionsHandler","TooltipData","XPrivacySelectorLoggingController","XPrivacySelectorSavedCustomUpdateController","XPrivacySelectorUpdateController","XUIError","$","bind","debounce","ge","mixin","nullthrows","promiseDone"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i;a=babelHelpers.inherits(j,b("mixin")(b("ArbiterMixin")));i=a&&a.prototype;function j(a,c,d,e,f,g){"use strict";i.constructor.call(this),this._hasBeenCleanedUp=!1,this._syncUpdateQueue=[],this._isWaitingForSavedCustom=!1,this._config=g,b("DataStore").set(this._config.rootID,"selector",this),this._isSavedOnSelect=g.is_saved_on_select,this._privacyFBID=g.privacy_fbid,this._contentType=g.content_type,this._renderLocation=g.render_location,this._supportsTagExpansion=g.supports_tag_expansion,this._skipCleanup=g.skip_cleanup,this._prefixTooltipApps=g.should_prefix_tooltip_apps,this._shouldDisplayLabel=g.should_display_label,this._tags=g.tagged_uids,this._hasTags=this._tags.length>0,this._entID=g.ent_id,this._receivingUpdate=!1,this._selectorSyncKey=g.selector_sync_key,this._previousParam=null,this._listeners=new(b("SubscriptionsHandler"))(),this._spinnerCount=0,this._postParam=g.postParam,g.use_async_menu?this._listeners.addSubscriptions(this.getPopoverMenu().subscribe("setMenu",function(){this._menu=this.getPopoverMenu().getMenu();if(!(this._menu instanceof b("PrivacySelectableMenu")))return;this._onMenuLoad();this._onPopoverOpen();this.inform("asyncMenuLoaded")}.bind(this))):this._onMenuLoad(),(this._selectorSyncKey||this._config.hasSavedCustomPrivacy)&&this._initSelectorSync(),b("Run").onLeave(this._cleanup.bind(this))}j.prototype._cleanup=function(){"use strict";__p&&__p();if(this._skipCleanup)return;var a=this.getSelectableMenu();a instanceof b("PrivacySelectableMenu")&&a.cleanup();this._hasBeenCleanedUp=!0;this._syncUpdateQueue=[];this._syncUpdatePromise=null;this._listeners&&this._listeners.release();this._listeners=null};j.prototype._initSelectorSync=function(){"use strict";this._selectorSyncKey&&(this._listeners&&this._listeners.addSubscriptions(b("PrivacySelectorDataStore").subscribe("change",function(){if(this._selectorSyncKey==null)return;b("PrivacySelectorDataStore").get(this._selectorSyncKey,function(a){this._enqueueAndExecuteSyncUpdate({type:"regular_update",payload:a})}.bind(this))}.bind(this)))),this._config.hasSavedCustomPrivacy&&(this._listeners&&this._listeners.addSubscriptions(b("PrivacySelectorDataStore").subscribe("saved_custom_update",function(){b("PrivacySelectorDataStore").get("saved_custom_update",function(a){this._enqueueAndExecuteSyncUpdate({type:"saved_custom_update",payload:a})}.bind(this))}.bind(this))))};j.prototype._enqueueAndExecuteSyncUpdate=function(a){"use strict";this._syncUpdateQueue.push(a);if(this._syncUpdatePromise)return;this._syncUpdatePromise=this._startSyncUpdates();b("promiseDone")(this._syncUpdatePromise,this._resetSyncUpdatePromise.bind(this),this._resetSyncUpdatePromise.bind(this))};j.prototype._resetSyncUpdatePromise=function(){"use strict";this._syncUpdatePromise=null};j.prototype._startSyncUpdates=function(){"use strict";__p&&__p();return new(b("Promise"))(function(a,c){__p&&__p();var d;return b("regeneratorRuntime").async(function(e){__p&&__p();while(1)switch(e.prev=e.next){case 0:e.next=2;return b("regeneratorRuntime").awrap(this._waitUntilSelectorInDOM());case 2:if(!this._hasBeenCleanedUp){e.next=5;break}c();return e.abrupt("return");case 5:while(this._syncUpdateQueue.length)d=this._syncUpdateQueue.shift(),this._executeSyncUpdate(d);a();case 7:case"end":return e.stop()}},null,this)}.bind(this))};j.prototype._executeSyncUpdate=function(a){"use strict";__p&&__p();if(a.type==="tags_changed"){this._executeTagsChangedUpdate(a.tags);return}var c=a.payload,d=this.getSelectableMenu();if(c.unique_id===d._config.id)return;this._receivingUpdate=!0;switch(a.type){case"regular_update":b("XUIError").clear(this.getTriggerButtonElement());c.post_param&&this.selectOption(c.post_param,function(){c.is_custom&&c.subtitles&&this.updateCustomOption(c.subtitles)}.bind(this));c.reload&&this.reloadSelector();c.is_error&&this._displayErrorWithoutFocus();c.post_param||(this._receivingUpdate=!1);break;case"saved_custom_update":d instanceof b("PrivacySelectableMenu")&&c.savedCustomPrivacyType!=null&&c.postParam!=null&&c.subtitles!=null&&this.updateSavedCustomOption(c.savedCustomPrivacyType,c.postParam,c.subtitles);if(!this.shouldTryToUpdateSavedCustom())return;j._savedCustomSelectorsToUpdate.push(this);j._sendSavedCustomUpdateRequest();c.postParam||(this._receivingUpdate=!1);break}};j.prototype._executeTagsChangedUpdate=function(a){"use strict";var c=!a.length;this._hasTags===c&&(this._hasTags=!!a.length,this.getSelectableMenu().updateOptionsAfterTagExpansion(this._showTagExpansion()),this._updateTriggerButtonLabelAndIcon());(this._tags.length!==a.length||a.some(function(a){return!this._tags.includes(a)}.bind(this)))&&(this._tags=a,this._updateTooltip(),b("Arbiter").inform("PrivacySelectorBase/changed",this._getChangedData()))};j.prototype.shouldTryToUpdateSavedCustom=function(){"use strict";__p&&__p();if(this.getSelectableMenu()instanceof b("PrivacySelectableMenu"))return this.getIsCustomOptionSelected()||this.getIsSavedCustomOptionSelected();var a=Object.keys(b("PrivacyConst").PostParam);for(var c=0;c<a.length;c++){var d=a[c];if(this._postParam===b("PrivacyConst").PostParam[d].toString())return!1}return!0};j.prototype._broadcastUpdate=function(){"use strict";this._broadcastUpdateImpl(!1)};j.prototype._broadcastError=function(){"use strict";this._broadcastUpdateImpl(!0)};j.prototype._broadcastUpdateImpl=function(a){"use strict";__p&&__p();if(!this._receivingUpdate){var c={};c.selector_type=this._selectorSyncKey;c.unique_id=this.getSelectableMenu()._config.id;if(a)c.is_error=a;else{a=this._getSelectedOption();if(!a){!1;return}c.post_param=a.getPostParam();c.subtitles=a.getSubtitles();c.is_custom=a.isCustomOption();c.saved_custom_privacy_type=a.getSavedCustomPrivacyType()}b("PrivacySelectorNewDispatcher").handleUpdateFromSelector(c)}};j.prototype.disable=function(){"use strict";var a=this.getTriggerButtonElement();b("Button").setEnabled(a,!1);this.getPopover().disable();b("CSS").addClass(a,"_4swv");return this};j.prototype.enable=function(){"use strict";var a=this.getTriggerButtonElement();b("Button").setEnabled(a,!0);this.getPopover().enable();b("CSS").removeClass(a,"_4swv");return this};j.prototype.shouldReplaceOnPost=function(){"use strict";return this._config.replace_on_post};j.prototype.getSelectedTriggerIcon=function(){"use strict";return this._selectedOption&&this._selectedOption.getTriggerIcon()};j.prototype.getSelectedTriggerLabel=function(){"use strict";return this._selectedOption&&this._selectedOption.getTriggerLabel()};j.prototype.getSelectedIconType=function(){"use strict";return this._selectedOption&&this._selectedOption.getIconType()};j.prototype.getIsPublicSelected=function(){"use strict";return this._selectedOption&&this._selectedOption.isPublic()};j.prototype.getIsFriendsSelected=function(){"use strict";return this._selectedOption&&this._selectedOption.isFriends()};j.prototype.getIsOnlyMeSelected=function(){"use strict";return this._selectedOption&&this._selectedOption.isOnlyMe()};j.prototype.getSelectedBaseValue=function(){"use strict";return this._selectedOption&&this._selectedOption.getBaseValue()};j.prototype.getSelectedLabelString=function(){"use strict";return this._selectedOption&&this._selectedOption.getLabel()};j.prototype.getSelectedPostParam=function(){"use strict";return this._selectedOption&&this._selectedOption.getPostParam()};j.prototype.getIsCustomOptionSelected=function(){"use strict";return this._selectedOption&&this._selectedOption.isCustomOption()};j.prototype.getIsSavedCustomOptionSelected=function(){"use strict";return this._selectedOption&&this._selectedOption.isSavedCustomOption()};j.prototype.getIsSavedOnSelect=function(){"use strict";return this._isSavedOnSelect};j.prototype.getPrivacyFBID=function(){"use strict";return this._privacyFBID};j.prototype.setValue=function(a){"use strict";this.getSelectableMenu().setValue(a)};j.prototype.setIsSavedOnSelect=function(a){"use strict";this._isSavedOnSelect=a};j.prototype.getSavedCustomOptIn=function(){"use strict";return this._config.savedCustomOptIn};j.prototype.openSelectorExpanded=function(a){"use strict";this.openSelector(function(){this.getSelectableMenu().expandMenu(),a&&a()}.bind(this))};j.prototype.openSelector=function(a){"use strict";this.getSelectableMenu()instanceof b("PopoverLoadingMenu")?(this.subscribeOnce("asyncMenuLoaded",function(){a&&a()}),this.getPopover().showLayer()):(this.getPopover().showLayer(),a&&a())};j.prototype.closeSelector=function(){"use strict";this.getPopover().hideLayer()};j.prototype.getSelectableMenu=function(){"use strict";this._menu||(this._menu=this._config.getMenu());return this._menu};j.prototype.getPopover=function(){"use strict";this._popover||(this._popover=this.getPopoverMenu().getPopover());return this._popover};j.prototype.getPopoverMenu=function(){"use strict";this._popoverMenu||(this._popoverMenu=this._config.getPopoverMenu());return this._popoverMenu};j.prototype.getTriggerButtonElement=function(){"use strict";this._button||(this._button=b("$")(this._config.buttonID));return this._button};j.prototype.isSelectorInDOM=function(){"use strict";return!!b("ge")(this._config.rootID)};j.prototype._waitUntilSelectorInDOM=function(){"use strict";__p&&__p();return b("regeneratorRuntime").async(function(a){__p&&__p();while(1)switch(a.prev=a.next){case 0:if(!(!this._hasBeenCleanedUp&&!this.isSelectorInDOM())){a.next=5;break}a.next=3;return b("regeneratorRuntime").awrap(new(b("Promise"))(function(a){return setTimeout(a,1e3)}));case 3:a.next=0;break;case 5:case"end":return a.stop()}},null,this)};j.prototype.getRoot=function(){"use strict";this._root||(this._root=b("$")(this._config.rootID));return this._root};j.prototype.getInput=function(){"use strict";this._input||(this._input=b("$")(this._config.inputID));return this._input};j.prototype.getSpinner=function(){"use strict";this._spinner||(this._spinner=b("$")(b("nullthrows")(this._config.spinnerID)));return this._spinner};j.prototype.getCheckmark=function(){"use strict";this._checkmark||(this._checkmark=b("$")(b("nullthrows")(this._config.checkmarkID)));return this._checkmark};j.prototype.getErrorIcon=function(){"use strict";this._errorIcon||(this._errorIcon=b("$")(b("nullthrows")(this._config.errorIconID)));return this._errorIcon};j.prototype.getMenuElement=function(){"use strict";return this.getSelectableMenu().getRoot()};j.prototype.selectOption=function(a,c){"use strict";if(!a)return;var d=this.getSelectableMenu();d instanceof b("PopoverLoadingMenu")?(this.subscribeOnce("asyncMenuLoaded",this._selectOptionImpl.bind(this,a,c)),this._fetchAsyncMenu()):this._selectOptionImpl(a,c)};j.prototype._selectOptionImpl=function(a,b){"use strict";__p&&__p();var c=this.getSelectableMenu();a=c.selectOption(a);!a?(c.subscribeOnce("selectOption",function(){var a=this.getIsSavedOnSelect();this.setIsSavedOnSelect(!1);this._updateMenu();this.setIsSavedOnSelect(a);this._finishSpinnerSuccess();b&&b()}.bind(this)),this._showSpinner()):b&&b();this._updateMenu()};j.prototype._updateMenu=function(){"use strict";this._selectedOption=this._getSelectedOption();if(!this._selectedOption){!1;return}this.updateDataForItemIndex(this._selectedOption.getIndex(),this._selectedOption.getPostParam())};j.prototype._fetchAsyncMenu=function(){"use strict";this._config.use_async_menu&&this.getPopoverMenu().fetchMenu()};j.prototype._getSelectedOption=function(){"use strict";var a=this.getSelectableMenu();return a instanceof b("PrivacySelectableMenu")?a.getSelectedOption():null};j.prototype._onItemClick=function(a,c){"use strict";a=c.item;if(a instanceof b("MenuStaticItem"))return;a.isPrivateSharingDisabledOption()?a.openDialog(this):a.isBasicOption()?this.updateDataForItemIndex(a.getIndex(),a.getPostParam()):(a.isCustomOption()||a.isSavedCustomOption())&&(this._closeForCustom=!0,a.openDialog(this));this.inform("click",{customSelected:a.isCustomOption()})};j.prototype.getContentType=function(){"use strict";return this._contentType};j.prototype.getRenderLocation=function(){"use strict";return this._renderLocation};j.prototype.getPostParam=function(){"use strict";return this._postParam};j.prototype.getTags=function(){"use strict";return this._tags};j.prototype.updateCustomOption=function(a){"use strict";var c=this.getSelectableMenu(),d=c.findOption(function(a){return a instanceof b("PrivacySelectorCustomOption")});if(d==null)return;d.setSubtitles(a);c.refreshTagExpansionLabels()};j.prototype.updateSavedCustomOption=function(a,c,d){"use strict";var e=this.getSelectableMenu(),f=e.findOption(function(c){return c instanceof b("PrivacySelectorSavedCustomOption")&&c.getSavedCustomPrivacyType()===a});if(f==null)return;f.setPostParam(c).setSubtitles(d);e.refreshTagExpansionLabels()};j.prototype.updateDataForItemIndex=function(a,c){"use strict";__p&&__p();var d=this.getSelectableMenu();a=d.getItemForIndex(String(a));if(!a)return;(a.isCustomOption()||a.isSavedCustomOption())&&a.setPostParam(c);if(!a.isCustomOption()){var e=d.findOption(function(a){return a instanceof b("PrivacySelectorCustomOption")});e!=null&&(e.setSubtitlesToNonSelected(),d.refreshTagExpansionLabels())}this._selectedOption=a;this._previousParam=this._postParam;this._postParam=c;b("Input").setValue(this.getInput(),c);this._updateTriggerButtonLabelAndIcon();this._updateTooltipAndSavePrivacyIfNeeded();this.inform("changed",{post_param:this._postParam,base_value:this.getSelectedBaseValue()})};j.prototype._shouldUpdateTooltips=function(){"use strict";return this._prefixTooltipApps||this._supportsTagExpansion&&this._hasTags||this.getIsCustomOptionSelected()||this.getIsSavedCustomOptionSelected()};j.prototype._updateTooltip=function(){"use strict";this._updateTooltipAndSavePrivacyIfNeededImpl(!1)};j.prototype._updateTooltipAndSavePrivacyIfNeeded=function(){"use strict";this._updateTooltipAndSavePrivacyIfNeededImpl(!0)};j.prototype._updateTooltipAndSavePrivacyIfNeededImpl=function(a){"use strict";this._shouldUpdateTooltips()&&this._updateTooltipToLoading(),this._sendUpdateRequest(a),this._shouldUpdateTooltips()||this._setTooltipValue(this._selectedOption.getTooltip())};j.prototype.reloadSelector=function(){"use strict";this._cleanup();var a=b("XPrivacySelectorUpdateController").getURIBuilder().setString("privacy_fbid",String(this._privacyFBID)).setString("post_param",this._postParam).setEnum("render_location_enum",this._renderLocation).setBool("reload_selector",!0).setString("ent_id",String(this._entID)).getURI();new(b("AsyncRequest"))().setRelativeTo(this.getRoot()).setHandler(this.inform.bind(this,"reloaded")).setURI(a).send()};j.prototype._sendUpdateRequest=function(a){"use strict";__p&&__p();a=a&&this._isSavedOnSelect&&!this._receivingUpdate;var c=this._shouldUpdateTooltips();if(!a&&!c){this._receivingUpdate=!1;return}a&&this._showSpinner();c=b("XPrivacySelectorUpdateController").getURIBuilder().setString("privacy_fbid",String(this._privacyFBID)).setString("post_param",this._postParam).setIntVector("tags",this._tags).setEnum("render_location_enum",this._renderLocation).setBool("is_saved_on_select",a).setBool("should_return_tooltip",c).setBool("prefix_tooltip_with_app_privacy",this._prefixTooltipApps).setBool("replace_on_select",this._config.replace_on_select).setString("ent_id",String(this._entID)).getURI();this._updateRequest&&this._updateRequest.abandon();this._updateRequest=new(b("AsyncRequest"))(c).setRelativeTo(this.getRoot()).setHandler(function(b){a&&(this._finishSpinnerSuccess(),this._broadcastUpdate());this._config.replace_on_select&&this._cleanup();var c=b&&b.payload&&b.payload.tooltip;c&&this._setTooltipValue(b.payload.tooltip);this.inform("selector_updated")}.bind(this)).setFinallyHandler(function(a){this._receivingUpdate=!1,this._updateRequest=null}.bind(this));a&&this._updateRequest.setErrorHandler(b("bind")(this,function(a){if(this._receivingUpdate){this._displayErrorWithoutFocus();return}this.getSelectableMenu().selectOption(this._previousParam);this._postParam=this._previousParam;this._displayError();this._broadcastError()}));this._updateRequest.send()};j.prototype.animateSavedCustomSave=function(){"use strict";if(this._isWaitingForSavedCustom)return;this._showSpinner();this._updateTooltipToLoading();this._shouldDisplayLabel&&this._updateTriggerToLoading();this._isWaitingForSavedCustom=!0};j.prototype.finishAnimatingSavedCustomSave=function(){"use strict";if(!this._isWaitingForSavedCustom)return;this._finishSpinnerSuccess();this._isWaitingForSavedCustom=!1};j.prototype._showSpinner=function(){"use strict";__p&&__p();if(!this._shouldDisplaySuccessAndFailure())return;if(!this.getIsSavedOnSelect())return;if(this._spinnerCount===0){var a=this.getTriggerButtonElement(),c=this.getSpinner();b("XUIError").clear(a);b("Button").setIcon(a,c);b("CSS").show(c);b("CSS").hide(this.getCheckmark())}this._spinnerCount++};j.prototype._finishSpinnerSuccess=function(){"use strict";__p&&__p();if(!this._shouldDisplaySuccessAndFailure())return;if(!this.getIsSavedOnSelect())return;this._spinnerCount--;if(this._spinnerCount===0){b("CSS").hide(this.getSpinner());this._updateTriggerButtonLabelAndIcon();var a=this.getCheckmark();if(a){var c=this.getTriggerButtonElement(),d=b("Button").getIcon(c);b("Button").setIcon(c,a);b("CSS").hide(d);new(b("Animation"))(a).show().from("opacity",0).to("opacity",1).duration(400).checkpoint().duration(200).checkpoint().from("opacity",1).to("opacity",0).duration(400).hide().ondone(function(){this._updateTriggerButtonLabelAndIcon(),new(b("Animation"))(d).show().from("opacity",0).to("opacity",1).duration(300).go()}.bind(this)).go()}}};j.prototype._displayError=function(){"use strict";if(!this._shouldDisplaySuccessAndFailure())return;this._spinnerCount--;this._displayErrorImpl(!0)};j.prototype._displayErrorWithoutFocus=function(){"use strict";this._displayErrorImpl(!1)};j.prototype._displayErrorImpl=function(a){"use strict";__p&&__p();if(!this._shouldDisplaySuccessAndFailure())return;var c=this.getTriggerButtonElement(),d=this.getErrorIcon();b("PopoverButton").setLabel(c,h._("Select Audience"));b("Button").setIcon(c,d);b("CSS").show(d);b("TooltipData").remove(c);a&&b("Focus").setWithoutOutline(c);b("XUIError").set({target:c,message:h._("Your selection might not have been saved. We recommend trying again later.")})};j.prototype.informTagsChanged=function(a){"use strict";a=this._getTags(a);this.informTagsChangedWithIDs(a)};j.prototype.informTagsChangedWithIDs=function(a){"use strict";this._enqueueAndExecuteSyncUpdate({type:"tags_changed",tags:a})};j.prototype._getChangedData=function(){"use strict";return{tags:this._tags,privacy:this.getSelectedBaseValue()}};j.prototype._showTagExpansion=function(){"use strict";return this._hasTags};j.prototype._getTags=function(a){"use strict";__p&&__p();var c=[],d=b("CurrentUser").getID();if(a.withTags)for(var e=0;e<a.withTags.length;e++){var f=a.withTags[e].info;f.uid!=d&&c.push(f.uid.toString())}if(a.mention)for(var g in a.mention)a.mention[g].type=="user"&&a.mention[g].uid!=d&&c.push(a.mention[g].uid.toString());return c};j.prototype._updateTriggerButtonLabelAndIcon=function(){"use strict";__p&&__p();if(this._shouldDisplaySuccessAndFailure()&&this._spinnerCount===0){var a=this.getTriggerButtonElement(),c=this._selectedOption.getTriggerIcon();this._config.trigger_no_icon&&b("CSS").hide(c);b("Button").setIcon(a,c.cloneNode());b("CSS").conditionClass(b("Button").getIcon(a),"_21or",this.getSelectedIconType()===b("PrivacyIconType").EVERYONE)}if(!this._shouldDisplayLabel)return;this._isWaitingForSavedCustom||b("PopoverButton").setLabel(this.getTriggerButtonElement(),this._selectedOption.getTriggerLabel())};j.prototype._getLoadingText=function(){"use strict";return h._("Loading...")};j.prototype._updateTooltipToLoading=function(){"use strict";this._setTooltipValue(this._getLoadingText())};j.prototype._updateTriggerToLoading=function(){"use strict";b("PopoverButton").setLabel(this.getTriggerButtonElement(),this._getLoadingText())};j.prototype._setTooltipValue=function(a){"use strict";a&&b("TooltipData").set(this.getTriggerButtonElement(),a)};j.prototype._onPopoverClose=function(){"use strict";if(!this._getSelectedOption())return;var a=b("XPrivacySelectorLoggingController").getURIBuilder().setString("content_type",this._contentType).setEnum("event",b("PrivacySelectorEvent").CLOSE_MENU).setString("privacy_fbid",this._privacyFBID!=null?String(this._privacyFBID):null).setEnum("render_location",this._renderLocation).setBool("saved_custom_opt_in",this._config.savedCustomOptIn).getURI();new(b("AsyncRequest"))().setURI(a).send();this._closeForCustom?this._closeForCustom=!1:this.inform("selectorFinished");this.inform("close")};j.prototype._onPopoverOpen=function(){"use strict";var a=this.getSelectableMenu();if(!(a instanceof b("PrivacySelectableMenu")))return;b("Arbiter").inform("composerprivacy/aborteducation");a.onPopoverOpen(this._getSelectedOption());a=b("XPrivacySelectorLoggingController").getURIBuilder().setString("content_type",this._contentType).setEnum("event",b("PrivacySelectorEvent").OPEN_MENU).setString("privacy_fbid",this._privacyFBID!=null?String(this._privacyFBID):null).setEnum("render_location",this._renderLocation).setBool("saved_custom_opt_in",this._config.savedCustomOptIn).getURI();new(b("AsyncRequest"))().setURI(a).send();this.inform("open")};j.prototype._onMenuLoad=function(){"use strict";var a=this.getSelectableMenu();this._listeners&&this._listeners.addSubscriptions(a.subscribe("itemclick",this._onItemClick.bind(this)),this.getPopover().subscribe("hide",this._onPopoverClose.bind(this)),this.getPopover().subscribe("show",this._onPopoverOpen.bind(this)));this._listeners&&this._listeners.addSubscriptions(a.subscribe(["expandMenu","expandMenuWithMore"],function(){this.getPopover()&&this.getPopover().getLayer()&&this.getPopover().getLayer().updatePosition(),this._selectedOption=this._getSelectedOption()}.bind(this)));this._selectedOption=this._getSelectedOption();this._selectedOption&&(this._postParam=this._selectedOption.getPostParam().toString(),this._previousParam=this._postParam,this._hasAudienceExpansion()&&this._updateTriggerButtonLabelAndIcon())};j.prototype._hasAudienceExpansion=function(){"use strict";return this._hasTags};j.prototype._shouldDisplaySuccessAndFailure=function(){"use strict";return!!((this._config.spinner||this._config.spinnerID)&&(this._config.checkmark||this._config.checkmarkID)&&(this._config.error_icon||this._config.errorIconID))};j._savedCustomSelectorsToUpdate=[];j._sendSavedCustomUpdateRequest=b("debounce")(function(){__p&&__p();var a=j._savedCustomSelectorsToUpdate;j._savedCustomSelectorsToUpdate=[];var c={},d={},e=!1;for(var f=a,g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;c[i._postParam]=!0;d[i._config.trigger_style]=!0;e=e||i._menu instanceof b("PopoverLoadingMenu")}this._savedCustomUpdateRequest&&this._savedCustomUpdateRequest.abandon();this._savedCustomUpdateRequest=new(b("AsyncRequest"))(b("XPrivacySelectorSavedCustomUpdateController").getURIBuilder().getURI()).setData({has_async_menu:e,post_params:Object.keys(c),trigger_icon_styles:Object.keys(d)}).setHandler(function(c){__p&&__p();c=c.payload||{};var d=c.post_param_map||{};c=c.data||{};var e=b("DOM").create("div",{className:"hidden_elem"});for(var f=a,g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;var j=d[i._postParam];if(!j)continue;if(i._menu instanceof b("PopoverLoadingMenu")){var k=c[j]||{};i._postParam=j;if(!i._config.trigger_no_icon){var l=k.icons[i._config.trigger_style];if(l!=null){b("DOM").setContent(e,l);l=e.firstChild;b("Button").setIcon(i._button,l)}}if(i._shouldDisplayLabel){l=k.label;l!=null&&b("PopoverButton").setLabel(i._button,l)}}else i._menu instanceof b("PrivacySelectableMenu")&&(i._receivingUpdate=!0,i.selectOption(j),i._receivingUpdate=!1)}b("DOM").remove(e)}).setFinallyHandler(function(){this._savedCustomUpdateRequest=null}.bind(this));this._savedCustomUpdateRequest.send()}.bind(this),10,this);e.exports=j}),null);
__d("FBStoriesPrivacyActionTypes",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({LOADING:"FB_STORIES_PRIVACY.LOADING",LOADED:"FB_STORIES_PRIVACY.LOADED",LOADED_ERROR:"FB_STORIES_PRIVACY.LOADED_ERROR",SET_IS_SAVING:"FB_STORIES_PRIVACY.SET_IS_SAVING",SET_AUDIENCE_MODE:"FB_STORIES_PRIVACY.SET_AUDIENCE_MODE",SET_LOADING_PROMISE:"FB_STORIES_PRIVACY.SET_LOADING_PROMISE",SET_SUBSCRIPTION_TOKEN:"FB_STORIES_PRIVACY.SET_SUBSCRIPTION_TOKEN",SUBSCRIPTION_UPDATE:"FB_STORIES_PRIVACY.SUBSCRIPTION_UPDATE"});e.exports=a}),null);
__d("FBStoriesPrivacyDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f){"use strict";var g;c=babelHelpers.inherits(a,b("ExplicitRegistrationReactDispatcher"));g=c&&c.prototype;function a(a){g.constructor.call(this,a),this.dispatch=this.dispatch.bind(this)}e.exports=new a({strict:!0})}),null);
__d("FBStoriesPrivacyHelper",["fbt"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={getSelectedAudienceMode:function(a){return(a=a)!=null?(a=a.unified_stories_setting)!=null?a.audience_mode:a:a},getEligibleAudienceModesList:function(a){return((a=a)!=null?(a=a.stories_data)!=null?a.audience_mode_list:a:a)||[]},getCustomParticipants:function(a){return((a=a)!=null?(a=a.unified_stories_setting)!=null?(a=a.custom_participants)!=null?a.nodes:a:a:a)||[]},getBlockedParticipants:function(a){return((a=a)!=null?(a=a.unified_stories_setting)!=null?(a=a.blocked_participants)!=null?a.nodes:a:a:a)||[]},getCustomMenuText:function(a){var b=a.length;a=a.map(function(a){return(a=a)!=null?(a=a.actor)!=null?a.name:a:a});switch(b){case 0:return g._("No One can see your story");case 1:return g._("{name_of_friend_connection} can see your story",[g._param("name_of_friend_connection",a[0])]);case 2:return g._("{name_of_first_friend_connection} and {name_of_second_friend_connection} can see your story",[g._param("name_of_first_friend_connection",a[0]),g._param("name_of_second_friend_connection",a[1])]);case 3:return g._("{names_of_first_two_friends_connections} and {name_of_third_friend_connection} can see your story",[g._param("names_of_first_two_friends_connections",a.slice(0,2).join(", ")),g._param("name_of_third_friend_connection",a[2])]);default:return g._({"*":"{names_of_first_three_friends_connections} and {number} others can see your story","_1":"{names_of_first_three_friends_connections} and 1 other can see your story"},[g._param("names_of_first_three_friends_connections",a.slice(0,3).join(", ")),g._plural(b-3,"number")])}}};e.exports=a}),null);
__d("fbStoriesPrivacySelectors",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={getLoadingPromise:function(a){return a.loadingPromise},getHasLoadingError:function(a){return a.data.hasError()},_getLoadedObject:function(a){a=a.data;return a.hasValue()?a.getValueEnforcing():{blockedParticipants:[],customParticipants:[],eligibleAudienceModesList:[],selectedAudienceMode:null}},getIsSaving:function(a){return a.isSaving},getSubscriptionToken:function(a){return a.subscriptionToken},getBlockedParticipants:function(a){return this._getLoadedObject(a).blockedParticipants},getCustomParticipants:function(a){return this._getLoadedObject(a).customParticipants},getEligibleAudienceModesList:function(a){return this._getLoadedObject(a).eligibleAudienceModesList},getSelectedAudienceMode:function(a){return this._getLoadedObject(a).selectedAudienceMode}};e.exports=a}),null);
__d("fbStoriesPrivacyReducer",["FBStoriesPrivacyActionTypes","FBStoriesPrivacyHelper","LoadObject","fbStoriesPrivacySelectors"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){__p&&__p();switch(c.type){case b("FBStoriesPrivacyActionTypes").LOADING:return babelHelpers["extends"]({},a,{data:b("LoadObject").loading()});case b("FBStoriesPrivacyActionTypes").LOADED:var d;d=(d=c.data)!=null?d.viewer:d;var e=b("FBStoriesPrivacyHelper").getBlockedParticipants(d),f=b("FBStoriesPrivacyHelper").getCustomParticipants(d),g=b("FBStoriesPrivacyHelper").getEligibleAudienceModesList(d);d=b("FBStoriesPrivacyHelper").getSelectedAudienceMode(d);return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({blockedParticipants:e,customParticipants:f,eligibleAudienceModesList:g,selectedAudienceMode:d})});case b("FBStoriesPrivacyActionTypes").LOADED_ERROR:return babelHelpers["extends"]({},a,{data:b("LoadObject").withError(new Error(c.error.message))});case b("FBStoriesPrivacyActionTypes").SET_IS_SAVING:return babelHelpers["extends"]({},a,{isSaving:c.value});case b("FBStoriesPrivacyActionTypes").SET_AUDIENCE_MODE:return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({blockedParticipants:b("fbStoriesPrivacySelectors").getBlockedParticipants(a),customParticipants:b("fbStoriesPrivacySelectors").getCustomParticipants(a),eligibleAudienceModesList:b("fbStoriesPrivacySelectors").getEligibleAudienceModesList(a),selectedAudienceMode:c.value})});case b("FBStoriesPrivacyActionTypes").SET_LOADING_PROMISE:return babelHelpers["extends"]({},a,{loadingPromise:c.value});case b("FBStoriesPrivacyActionTypes").SET_SUBSCRIPTION_TOKEN:return babelHelpers["extends"]({},a,{subscriptionToken:c.value});case b("FBStoriesPrivacyActionTypes").SUBSCRIPTION_UPDATE:f=(e=c.data)!=null?(e=e.unified_stories_privacy_change_subscribe)!=null?e.viewer:e:e;g=b("FBStoriesPrivacyHelper").getBlockedParticipants(f);d=b("FBStoriesPrivacyHelper").getCustomParticipants(f);c=b("FBStoriesPrivacyHelper").getEligibleAudienceModesList(f);e=b("FBStoriesPrivacyHelper").getSelectedAudienceMode(f);return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({blockedParticipants:g,customParticipants:d,eligibleAudienceModesList:c,selectedAudienceMode:e})});default:return a}}e.exports=a}),null);
__d("FBStoriesPrivacyStore",["FBStoriesPrivacyDispatcher","FluxReduceStore","LoadObject","fbStoriesPrivacyReducer"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return{data:b("LoadObject").empty(),loadingPromise:null,isSaving:!1,subscriptionToken:null}};a.prototype.reduce=function(a,c){return b("fbStoriesPrivacyReducer")(a,c)};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("FBStoriesPrivacyDispatcher"))}),null);
__d("FBStoriesPrivacyActions",["CurrentUser","FBLogger","FBStoriesGraphQLAPI","FBStoriesPrivacyActionTypes","FBStoriesPrivacyDispatcher","FBStoriesPrivacyHelper","FBStoriesPrivacyStore","FBStoriesProductionTypes","Run","fbStoriesPrivacySelectors","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBStoriesPrivacyDispatcher").dispatch;a=b("FBStoriesProductionTypes").UnifiedStoriesAudienceModeTypes;var h={_previousSelectedAudienceMode:a.CUSTOM,loadData:function(){__p&&__p();var a=b("fbStoriesPrivacySelectors").getLoadingPromise(b("FBStoriesPrivacyStore").getState());if(a)return a;g({type:b("FBStoriesPrivacyActionTypes").LOADING});a=b("FBStoriesGraphQLAPI").loadPrivacySettings();b("promiseDone")(a,function(a){var c;c=(c=a)!=null?c.viewer:c;this._previousSelectedAudienceMode=b("FBStoriesPrivacyHelper").getSelectedAudienceMode(c);g({type:b("FBStoriesPrivacyActionTypes").LOADED,data:a})}.bind(this),function(a){a=a.errors;var c={};a&&a.length>0&&(c=a[0]);b("FBLogger")("fbstories").mustfix("Failed to load privacy settings, err msg: %s",c.message);g({type:b("FBStoriesPrivacyActionTypes").SET_LOADING_PROMISE,value:null});g({type:b("FBStoriesPrivacyActionTypes").LOADED_ERROR,error:c})});g({type:b("FBStoriesPrivacyActionTypes").SET_LOADING_PROMISE,value:a});var c=b("FBStoriesPrivacyStore").getState();c=b("fbStoriesPrivacySelectors").getSubscriptionToken(c);c||(c=b("FBStoriesGraphQLAPI").subscribeToPrivacyChanges(function(a){g({type:b("FBStoriesPrivacyActionTypes").SUBSCRIPTION_UPDATE,data:a})}),g({type:b("FBStoriesPrivacyActionTypes").SET_SUBSCRIPTION_TOKEN,value:c}));b("Run").onBeforeUnload(this.cleanup);return a},setIsSaving:function(a){g({type:b("FBStoriesPrivacyActionTypes").SET_IS_SAVING,value:a})},revertAudienceMode:function(){if(!this._previousSelectedAudienceMode)return;h.setAudienceMode(this._previousSelectedAudienceMode)},changeAudienceMode:function(a,c){__p&&__p();var d=b("FBStoriesPrivacyStore").getState();d=b("fbStoriesPrivacySelectors").getSelectedAudienceMode(d);if(!d){this._audienceChangeFailed(c);return}d=b("FBStoriesGraphQLAPI").changeAudienceMode(b("CurrentUser").getID(),d);b("promiseDone")(d.then(function(){this._audienceChangeSucceeded(a)}.bind(this),function(){this._audienceChangeFailed(c)}.bind(this)));h.setIsSaving(!0)},_audienceChangeSucceeded:function(a){h.setIsSaving(!1),a&&a()},_audienceChangeFailed:function(a){h.revertAudienceMode(),h.setIsSaving(!1),a&&a()},setAudienceMode:function(a){var c=b("FBStoriesPrivacyStore").getState();c=b("fbStoriesPrivacySelectors").getSelectedAudienceMode(c);this._previousSelectedAudienceMode=c;g({type:b("FBStoriesPrivacyActionTypes").SET_AUDIENCE_MODE,value:a})},cleanup:function(){var a=b("FBStoriesPrivacyStore").getState();a=b("fbStoriesPrivacySelectors").getSubscriptionToken(a);a&&a.unsubscribe();g({type:b("FBStoriesPrivacyActionTypes").SET_LOADING_PROMISE,value:null});g({type:b("FBStoriesPrivacyActionTypes").SET_SUBSCRIPTION_TOKEN,value:null})}};e.exports=h}),null);
__d("FBStoriesPrivacySelectorInit",["regeneratorRuntime","FBStoriesPrivacyActions"],(function(a,b,c,d,e,f){"use strict";e.exports={loadData:function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",b("FBStoriesPrivacyActions").loadData());case 1:case"end":return a.stop()}},null,this)}}}),null);
__d("FBStoriesPrivacySelector",["regeneratorRuntime","CSS","Event","FBStoriesPrivacyDispatcher","FBStoriesPrivacySelectorInit","FBStoriesPrivacySelectorLoadingContainerBootloader.react","FBStoriesPrivacyStore","React","ReactDOM","Run"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={init:function(){b("FBStoriesPrivacyDispatcher").explicitlyRegisterStores([b("FBStoriesPrivacyStore")]),b("FBStoriesPrivacySelectorInit").loadData()},onClick:function(a){__p&&__p();var c,d,e,f;return b("regeneratorRuntime").async(function(g){__p&&__p();while(1)switch(g.prev=g.next){case 0:c=a.buttonIcon,d=a.buttonSpinner,e=a.container;b("FBStoriesPrivacyDispatcher").explicitlyRegisterStores([b("FBStoriesPrivacyStore")]);g.next=4;return b("regeneratorRuntime").awrap(b("FBStoriesPrivacySelectorInit").loadData());case 4:b("ReactDOM").render(b("React").createElement(b("FBStoriesPrivacySelectorLoadingContainerBootloader.react"),{editable:!0,openOnLoad:!0}),e),b("CSS").hide(d),b("CSS").show(c),f=b("Event").listen(e,"click",function(a){a.stopPropagation()}),b("Run").onBeforeUnload(function(){f.remove()});case 9:case"end":return g.stop()}},null,this)}};e.exports=a}),null);
__d("FBStoriesPrivacySelectorGraphQLSubscriptionHandler",["Button","DOM","FBStoriesGraphQLAPI","FBStoriesPrivacyHelper","Run","SubscriptionsHandler","TooltipData"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={registerForSubscriptionUpdates:function(a){var c=a.button,d=a.buttonLabel,e=a.audienceModeIcons,f=new(b("SubscriptionsHandler"))();f.addSubscriptions(b("FBStoriesGraphQLAPI").subscribeToPrivacyChanges(function(a){this._updateSelectorAfterGraphqlSubscription(a,c,d,e)}.bind(this)));b("Run").onBeforeUnload(function(){f.release()})},_updateSelectorAfterGraphqlSubscription:function(a,c,d,e){__p&&__p();a=(a=a)!=null?(a=a.unified_stories_privacy_change_subscribe)!=null?a.viewer:a:a;if(!a)return;var f=b("FBStoriesPrivacyHelper").getSelectedAudienceMode(a);a=b("FBStoriesPrivacyHelper").getEligibleAudienceModesList(a);if(!f||!a)return;a=a.find(function(a){return a.unified_stories_audience_mode===f});if(!a)return;b("DOM").setContent(d,a.header);d=e[f];d&&b("Button").setIcon(c,d.cloneNode());b("TooltipData").set(c,a.header)}};e.exports=a}),null);
__d("ReactFeedComposerXBody",["DOM","Event","SubscriptionsHandler"],(function(a,b,c,d,e,f){"use strict";function a(a){this.$2=a.get("root"),this.$4=b("DOM").find(this.$2,"textarea"),this.$1=b("DOM").find(this.$2,'input[type="hidden"]'),this.$3=new(b("SubscriptionsHandler"))(),this.$3.addSubscriptions(b("Event").listen(this.$4,"change",this.$5.bind(this)))}a.prototype.$5=function(a){this.$1.value=a.target.value};e.exports=a}),null);
__d("FeedAdsGapRuleViolationDetectionFix",["csx","Banzai","BanzaiODS","CSS","DataAttributeUtils","DOM","$","ge","isEmpty"],(function(a,b,c,d,e,f,g){__p&&__p();var h="ei",i="qid",j="gap rule violation",k="non violating ads gap",l="non violating ego gap",m="first position violation",n="not first position violation",o="feed load",p="first position invalidation",q="spacing invalidation",r="ego_pymk",s="ego_other",t=[],u=[],v=[],w=[],x=[],y={},z={},A={},B=[],C={registerFeedStories:function(a,c){__p&&__p();a.containerID=="substream_0"&&(t=[],u=[]);c=b("ge")(a.containerID);if(!c)return;A=a.egoGapRule;B=a.invalidateEgo?a.egoStories:{};y=babelHelpers["extends"]({},a.demoAdChecks,y);var d=C._getAllStoriesFromContainer(c);a.isLoggingEnabled&&d.length!==0&&C._logFeedLoad();a.isNewerStories?t=d.concat(t):t=t.concat(d);for(var e in a.minGaps)Object.prototype.hasOwnProperty.call(a.minGaps,e)&&(z[e]=a.minGaps[e]);b("isEmpty")(y)&&(a.isLoggingEnabled&&C._checkFirstPosViolation(a,c),(a.isLoggingEnabled||a.isGapRuleInvalidationEnabled)&&C._checkGapRuleViolation(a))},_getAllStoriesFromContainer:function(a){return b("DOM").scry(a,"div._5jmm").map(C._convertStoryNodeToObject).filter(function(a){return a!==null})},_convertStoryNodeToObject:function(a){__p&&__p();if(b("CSS").matchesSelector(a,"._170y"))return null;var c=a.getAttribute("data-dedupekey");if(y[c])return null;var d=b("DOM").scry(a,"div._hye"),e=b("DOM").scry(a,"li._170x"),f=[];d.length!==0?f=d.map(function(a){return b("DataAttributeUtils").getDataFt(a)}).filter(function(a){return a!==null}):e.length!==0?f=e.map(function(a){return b("DataAttributeUtils").getDataFt(a)}).filter(function(a){return a!==null}):b("DataAttributeUtils").getDataFt(a)&&(f=[b("DataAttributeUtils").getDataFt(a)]);if(!f.length)return null;d=JSON.parse(f[0]);e={dataFTArray:f,dedupKey:c,isSponsored:!!d[h],isEgoPymk:B[c]===r,isEgoOther:B[c]===s,height:a.offsetHeight,qid:parseInt(d[i],10),nodeID:a.id};return e},_checkFirstPosViolation:function(a,c){__p&&__p();if(t.length>0&&!t[0].isSponsored){var d={qid:t[0].qid};a.isLoggingEnabled&&!(t[0].dedupKey in x)&&(C._logNotFirstPosViolation(d),x[t[0].dedupKey]=d)}while(t.length>0&&t[0].isSponsored){var d={ftArray:t[0].dataFTArray,qid:t[0].qid,nodeid:t[0].nodeID,firstStoryType:a.firstStoryType},e=b("DOM").scry(c,".uiBoxRed")[0];if(e){e=e.textContent||e.innerText;e&&(d.error_msg=e)}a.isLoggingEnabled&&!(t[0].dedupKey in w)&&(C._logFirstPosViolation(d),w[t[0].dedupKey]=d);break}},_getMinGap:function(a,b,c){a=Math.min(a?a:Number.MAX_VALUE,b?b:Number.MAX_VALUE);return a!==Number.MAX_VALUE?a:c},_getStoryDedupKeys:function(){return t.map(function(a){return a.dedupKey})},_getStoryDedupKeysJSONString:function(a,b){var c=[];for(var a=a;a<=b;a++)c.push(t[a].dedupKey);return JSON.stringify(c)},_getIdxOfStoryToSwap:function(a,b){__p&&__p();if(b>=t.length-a)return-1;for(var a=a+1;a<t.length&&b>0;a++){if(!t[a].isSponsored&&!t[a].isEgoPymk&&!t[a].isEgoOther)b--;else return-1;if(b===0)return a}return-1},_checkGapRuleViolation:function(a){__p&&__p();var c=null,d=null,e=null;for(var f=0;f<t.length;f++){var g=t[f],h=b("ge")(g.nodeID);if(!h||!b("CSS").shown(h)){t.splice(f,1);continue}if(g.isSponsored){h=!1;var i=!1;if(d!==null){var m=f-d,n=null,o=null;c===d?o=C._getMinGap(z[e.dedupKey],z[g.dedupKey],a.defaultMinGap):o=C._getMinGapBetweenStories(e,g);var p;m<o?(n=j,p=d):(n=k,p=c);a.isLoggingEnabled&&((!(g.dedupKey in u)||u[g.dedupKey].event_type!==n)&&(C._logGapEvent(n,p,f),u[g.dedupKey]={event_type:n}));if(a.isGapRuleInvalidationEnabled&&n==j){p=-1;a.isSwapOnGapRuleViolationEnabled&&(p=C._getIdxOfStoryToSwap(f,o-m));if(p>0){C._shiftAdOrEgoBelowOrganicStory(g.nodeID,t[p].nodeID);n=t[f];t.splice(f,1);t.splice(p,0,n);if(a.isLoggingEnabled){o={ft:t[p].dataFTArray[0],dist:p-f,qid:t[p].qid,event_type:"ad_swap"};b("Banzai").post("feed_ads_gap_rule_violation",o)}i=!0}else a.isGapRuleInvalidationEnabled&&(C._invalidateGapRuleViolatedAd(e,g),h=!0,t.splice(f--,1))}}!h&&!i&&(c=f,d=f,e=g)}if(a.invalidateEgo&&(g.isEgoPymk||g.isEgoOther)){m=!1;if(d!==null){n=f-d;p=C._getMinGapBetweenStories(e,g);if(n<p){m=!0;o=-1;h=p-n;i=f+1;for(;i<t.length;i++){if(t[i].isSponsored||t[i].isEgoPymk||t[i].isEgoOther)break;else h--;if(h===0){o=i;break}}o>0?C._swapAndLogEgo(f,i):(C._invalidateAndLogEgo(f),f--)}else a.shouldLogEgo&&!v[g.dedupKey]&&(v[g.dedupKey]=!0,C._logGapEvent(l,d,f))}m||(d=f,e=g)}}},_getMinGapBetweenStories:function(a,b){__p&&__p();var c;if(a.isSponsored||a.isEgoOther)c="ad";else if(a.isEgoPymk)c="pymk";else return 0;if(b.isSponsored||b.isEgoOther)a="ad";else if(b.isEgoPymk)a="pymk";else return 0;return A[c+"_"+a]},_swapAndLogEgo:function(a,c){C._shiftAdOrEgoBelowOrganicStory(t[a].nodeID,t[c].nodeID);var d=t[a];t.splice(a,1);t.splice(c,0,d);b("BanzaiODS").bumpEntityKey("feed_ego_invalidation","swap")},_invalidateAndLogEgo:function(a){var c=b("ge")(t[a].nodeID);c&&b("CSS").hide(c);t.splice(a,1);b("BanzaiODS").bumpEntityKey("feed_ego_invalidation","invalidate")},_logFirstPosViolation:function(a){var c={ft:a.ftArray[0],event_type:m,intValues:{qid:a.qid},first_story_type:a.firstStoryType};a.error_msg&&(c.error_msg=a.error_msg);b("Banzai").post("feed_ads_gap_rule_violation",c)},_logNotFirstPosViolation:function(a){var c={event_type:n,intValues:{qid:a.qid}};a.error_msg&&(c.error_msg=a.error_msg);b("Banzai").post("feed_ads_gap_rule_violation",c)},_logGapEvent:function(a,c,d){if(c===null)return;var e=t[c],f=t[d],g=0;for(var h=c+1;h<d;h++)g+=t[h].height;h={ft_A:e.dataFTArray[0],ft_B:f.dataFTArray[0],event_type:a,intValues:{dist:d-c,pdist:g,pos:d+1,qid_A:e.qid,qid_B:f.qid},strValues:{previous_unit_type:C._getUnitTypeForLogging(e),unit_type:C._getUnitTypeForLogging(f)},dedup_keys:C._getStoryDedupKeysJSONString(c,d)};b("Banzai").post("feed_ads_gap_rule_violation",h)},_getUnitTypeForLogging:function(a){if(a.isSponsored)return"ad";else if(a.isEgoPymk)return"pymk";else if(a.isEgoOther)return"ego_other";return null},_logFeedLoad:function(){var a={event_type:o};b("Banzai").post("feed_ads_gap_rule_violation",a)},_invalidateFirstPosAd:function(a){b("CSS").hide(b("$")(a.nodeid));a={ft_array:a.ftArray,event_type:p};b("Banzai").post("feed_ads_gap_rule_violation",a)},_invalidateGapRuleViolatedAd:function(a,c){var d=b("ge")(c.nodeID);d&&b("CSS").hide(d);d={ft_array_A:a.dataFTArray[0],ft_array_B:c.dataFTArray[0],event_type:q};b("Banzai").post("feed_ads_gap_rule_violation",d)},_shiftAdOrEgoBelowOrganicStory:function(a,c){a=b("ge")(a);c=b("ge")(c);a&&c&&b("DOM").insertAfter(c,a)}};e.exports=C}),null);
__d("StoryPositionTracking",["csx","DataAttributeUtils","DOM","ge"],(function(a,b,c,d,e,f,g){var h="._5jmm",i=0;a={registerNewStories:function(a){a=="substream_0"&&(i=0),b("DOM").scry(b("ge")(a),h).forEach(function(a){var c=JSON.parse(b("DataAttributeUtils").getDataFt(a));c&&(c.insertion_position=i++,b("DataAttributeUtils").setDataFt(a,JSON.stringify(c)))})}};e.exports=a}),null);
__d("AttachmentIssueDiversityShareConstants",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ARTICLE_CLICK:"issueDiversity/article_click"})}),null);
__d("FbFeedAttachmentRelatedShare",["csx","Arbiter","AttachmentIssueDiversityShareConstants","AttachmentRelatedShareConstants","DOMQuery","Event","tidyEvent"],(function(a,b,c,d,e,f,g){__p&&__p();var h={loadRelatedAttachment:function(a,c){b("tidyEvent")(b("Event").listen(a,"click",function(){b("Arbiter").inform(b("AttachmentRelatedShareConstants").ARTICLE_CLICK,{attachment:a,global_share_id:c})}))},loadRelatedGameAttachment:function(a,c){b("tidyEvent")(b("Event").listen(a,"click",function(){b("Arbiter").inform(b("AttachmentRelatedShareConstants").GAME_CLICK,{attachment:a,global_share_id:c})}))},loadRelatedAttachmentForStream:function(a){h._loadChainableAttachmentForStreamImpl(a,b("AttachmentRelatedShareConstants").ARTICLE_CLICK)},loadIssueDiversityAttachmentForStream:function(a){h._loadChainableAttachmentForStreamImpl(a,b("AttachmentIssueDiversityShareConstants").ARTICLE_CLICK)},_loadChainableAttachmentForStreamImpl:function(a,c){__p&&__p();var d=function(event,a){var d=event.getTarget();if(d.getAttribute("target")!=="_blank")return;var e="^div._5pbx",f="^div._5pc9";e=b("DOMQuery").scry(d,e)[0]||b("DOMQuery").scry(d,f)[0];if(!e)return;b("Arbiter").inform(c,{attachment:e,global_share_id:0,link_url:d.getAttribute("href"),is_right_click:a})};b("tidyEvent")(b("Event").listen(a,"click",function(event){d(event,!1)}));b("tidyEvent")(b("Event").listen(a,"mousedown",function(event){(event.which==3||event.button==2)&&d(event,!0)}))}};e.exports=h}),null);
__d("FbFeedViewportTracking",["csx","Arbiter","LitestandMessages","LitestandStream","StreamViewportTracking","viewportTrackingBuilder"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,b("StreamViewportTracking"));i=h&&h.prototype;j.prototype.init=function(a){i.init.call(this,a),this.subscriptions.addSubscriptions(b("Arbiter").subscribe(b("LitestandMessages").STORIES_INSERTED,function(){return this.invalidateAllStoriesCache()}.bind(this)),b("Arbiter").subscribe(b("LitestandMessages").LEAVE_HOME,function(){return this.updateTimeTrackingData(!0)}.bind(this)))};j.prototype.getSessionID=function(){return b("LitestandStream").isReady()?b("LitestandStream").getFeedStreamID():null};j.prototype.cleanup=function(){k.clearSingleton(),i.cleanup.call(this)};function j(){h.apply(this,arguments)}var k=b("viewportTrackingBuilder")(function(a){var c=b("StreamViewportTracking").getBehavior(a,b("LitestandStream").getStreamRoot(),"._5jmm");c=new j(c);c.init(a);return c});a=babelHelpers["extends"]({},k,{init:function(a){return this.factory(a)}});e.exports=a}),null);
__d("RHCVideoWNSController",["csx","cx","invariant","Arbiter","CSS","DOM","DOMDimensions","EventListener","Locale","Parent","ReactDOM","Run","Style","SubscriptionsHandler","Toggler","VideoPlayerExperiments","VideoWatchAndScrollController","ViewportBounds","getElementPosition","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("VideoPlayerExperiments").persistentWNSEnabled,k=350,l=10;a={init:function(a){__p&&__p();if(this._isInitialized)this._dock(a);else{this._container=a;this._root=this._find("._5-32");this._video=this._find("._o2t");this._isInitialized=!0;b("CSS").show(this._container);this._subscriptionsHandler=new(b("SubscriptionsHandler"))();(a=this._subscriptionsHandler).addSubscriptions.apply(a,this._createSubscriptions());if(b("VideoWatchAndScrollController").isActive()){a=b("VideoWatchAndScrollController").getReactContainer();if(!a)return;var c=this._root;a=b("ReactDOM").findDOMNode(a);a&&a.parentNode&&(a=a.parentNode);var d=b("getElementPosition")(b("DOM").find(a,"._360g")),e=d.x;d=d.y;this.mount(a);this._moveRoot(e,d);b("CSS").addClass(c,"_4nya");this.expand();c.offsetHeight;b("CSS").removeClass(c,"_4nya");this._animateThenCleanup(function(){var a=b("getElementPosition")(this._container).x,c=b("ViewportBounds").getTop();this._moveRoot(a,c)}.bind(this))}}b("Run").onLeave(function(){__p&&__p();if(b("VideoWatchAndScrollController").isActive()){if(j){this._eject();return}this.close()}this._subscriptionsHandler.release();this._isInitialized=!1;this._container=null;this._root=null;this._video=null}.bind(this))},_eject:function(){__p&&__p();var a=this._getRoot();a=b("getElementPosition")(a);var c=a.x;a=a.y;var d=this._getContainer();b("Arbiter").inform("RHCVideoWNSController/eject",d);this._moveRoot(c,a);b("Arbiter").subscribeOnce("page_transition",function(a,b){a=b.uri;["/","/home.php"].includes(a.getPath())||this._animate(function(){this._moveToViewportEdge()}.bind(this))}.bind(this))},_dock:function(a){b("DOM").replace(a,this._container);b("Arbiter").inform("RHCVideoWNSController/dock");a=this._getContainer();a=b("getElementPosition")(a);var c=a.x,d=b("ViewportBounds").getTop();this._animateThenCleanup(function(){this._moveRoot(c,d)}.bind(this))},_find:function(a){return b("DOM").find(this._getContainer(),a)},getAnimationTime:function(){return k},mount:function(a){b("DOM").setContent(this._video,""),this._video.appendChild(a),this._correctContainerHeight(),b("Arbiter").inform("RHCVideoWNSController/mount")},_setPosition:function(a){var c=this._getRoot();b("Style").set(c,"top",a.top==null?"":a.top+"px");b("Style").set(c,"left",a.left==null?"":a.left+"px");b("Style").set(c,"right",a.right==null?"":a.right+"px")},_moveRoot:function(a,b){this._setPosition({top:b,left:a})},_moveToViewportEdge:function(){var a;this._setPosition((a={top:b("ViewportBounds").getTop()+l},a[b("Locale").isRTL()?"left":"right"]=b("ViewportBounds").getRight()+l,a))},_animate:function(a,c){c===void 0&&(c=!1);var d=this._getRoot();b("CSS").addClass(d,"_1dq5");a();b("setTimeoutAcrossTransitions")(function(){b("CSS").removeClass(d,"_1dq5"),c&&this._setPosition({top:null,left:null,right:null})}.bind(this),k)},_animateThenCleanup:function(a){this._animate(a,!0)},_createSubscriptions:function(){__p&&__p();return[b("ViewportBounds").subscribe("change",function(){document.body===this._getContainer().parentNode&&this._moveToViewportEdge()}.bind(this)),b("Arbiter").subscribe("VideoWatchAndScrollController/resize",function(){this._correctContainerHeight(),b("Arbiter").inform("RHCVideoWNSController/resize")}.bind(this)),b("Arbiter").subscribe("VideoWatchAndScrollController/start",function(){if(this.isExpanded()){this._correctContainerHeight();b("Arbiter").inform("RHCVideoWNSController/resize");return}this.expand();this._correctContainerHeight()}.bind(this)),b("Arbiter").subscribe("VideoWatchAndScrollController/exit",function(){this.close()}.bind(this)),b("Arbiter").subscribe("VideoWatchAndScrollController/collapse",function(){this.collapse()}.bind(this)),b("EventListener").listen(this._getRoot(),"click",function(event){var a=event.target;b("Parent").bySelector(a,"._2se8")||this.expand()}.bind(this)),b("Arbiter").subscribe("bluebarFixedBehaviorController/isfixed",function(a,c){a=this._getRoot();b("CSS").conditionClass(a,"_2rdq",!c)}.bind(this))]},_getRoot:function(){this._root||i(0);return this._root},_getContainer:function(){this._container||i(0);return this._container},_correctContainerHeight:function(){var a=m(this._video),c=this._getContainer();b("Style").set(c,"height",a+"px")},isExpanded:function(){var a=this._getContainer(),c="._2afq";return b("CSS").matchesSelector(a,c)},isCollapsed:function(){var a=this._getContainer(),c="._2afm";return b("CSS").matchesSelector(a,c)},isClosed:function(){var a=this._getContainer(),c="._2afo";return b("CSS").matchesSelector(a,c)},expand:function(){if(!b("VideoWatchAndScrollController").isActive()||!this._isInitialized||this.isExpanded())return;var a=this._getContainer();b("CSS").removeClass(a,"_2afm");b("CSS").removeClass(a,"_2afo");b("CSS").addClass(a,"_2afq");b("Arbiter").inform("RHCVideoWNSController/expandStart");b("setTimeoutAcrossTransitions")(function(){b("Arbiter").inform("RHCVideoWNSController/expandEnd"),b("VideoWatchAndScrollController").isActiveVideoDonePlaying()||b("VideoWatchAndScrollController").playActiveVideo()},k)},collapse:function(){__p&&__p();if(!this._isInitialized||this.isCollapsed())return;b("VideoWatchAndScrollController").pauseActiveVideo();b("Toggler").hide();var a=this._getContainer();b("CSS").removeClass(a,"_2afq");b("CSS").addClass(a,"_2afm");b("Arbiter").inform("RHCVideoWNSController/collapseStart");b("setTimeoutAcrossTransitions")(function(){b("Arbiter").inform("RHCVideoWNSController/collapseEnd")},k)},close:function(){if(!this._isInitialized||this.isClosed())return;b("VideoWatchAndScrollController").pauseActiveVideo();var a=this._getContainer();b("CSS").addClass(a,"_2afo");b("Arbiter").inform("RHCVideoWNSController/closeStart");b("setTimeoutAcrossTransitions")(function(){b("CSS").removeClass(a,"_2afm"),b("CSS").removeClass(a,"_2afq"),b("Arbiter").inform("RHCVideoWNSController/closeEnd")},k)}};function m(a){return b("DOMDimensions").getElementDimensions(a).height}e.exports=a}),null);
__d("AdBlockerDetectorLogging",["AdblockerDetectionRetryConfig","AdDelayedHiddenCheckConfiguration","Banzai","DataAttributeUtils","ErrorUtils","Run","getElementPosition","hasAdblock"],(function(a,b,c,d,e,f){__p&&__p();var g=1,h=2,i=3,j="swank";a={doAdBlockCheck:function(a,c){b("Run").onAfterLoad(function(){b("ErrorUtils").applyWithGuard(function(){this._doAdBlockImgCheck(a,c.token||c,0,0)}.bind(this),this)}.bind(this))},doOrganicBlockCheck:function(a,c){b("Run").onAfterLoad(function(){b("ErrorUtils").applyWithGuard(function(){this._doOrganicBlockImgCheck(a,c.token||c,0,0)}.bind(this),this)}.bind(this))},gatherImageHiddenStyleDebugData:function(a,c){b("Run").onAfterLoad(function(){b("ErrorUtils").applyWithGuard(function(){this._gatherImageHiddenStyleDebugData(a,c.token||c)}.bind(this),this)}.bind(this))},_gatherImageHiddenStyleDebugData:function(a,c){__p&&__p();if(!c||!a)return;var d=a.querySelectorAll("img"),e=[];if(d.length>0)for(var f=0;f<d.length;f++){var g=d[f],h=b("getElementPosition")(g);if(window.getComputedStyle(g).visibility==="hidden"){g={w:h.width,h:h.height,ii:f,ic:d.length};e.push(g)}}if(e.length>0){h=a;g=0;while(h!==null){if(g++>50)break;if(h){if(h.classList.contains("hidden_elem")||h.classList.contains("holdoutAdStory")||h.classList.contains("ego_ads_holdout"))return;h=h.parentElement}}for(f=0;f<e.length;f++)b("Banzai").post("xtrackable:"+j,{token:c,event_code:3,debug:e[f]})}},checkImageLoadStatus:function(a){var c=this;b("ErrorUtils").applyWithGuard(function(){setTimeout(function(){c._checkImageLoadStatus(a)},1e4)},c)},_doAdBlockImgCheck:function(a,b,c,d){this._doStoryBlockImgCheck(a,b,!1,c,d)},_doOrganicBlockImgCheck:function(a,b,c,d){this._doStoryBlockImgCheck(a,b,!0,c,d)},_doStoryBlockImgCheck:function(a,c,d,e,f){__p&&__p();if(!c||!a)return;var g=!d,h=a.querySelectorAll("img");if(h.length>0){var i=!1,k=0;for(var l=0;l<h.length;l++){var m=h[l],n=b("getElementPosition")(m);(n.width>0||n.height>0)&&(window.getComputedStyle(m).visibility==="hidden"&&k++,i=!0)}if(!i||k>0){n=a;m=0;while(n!==null){if(m++>50)break;if(n){if(n.classList.contains("hidden_elem")||n.classList.contains("holdoutAdStory")||n.classList.contains("ego_ads_holdout"))return;n=n.parentElement}}if(f>0){g&&b("AdDelayedHiddenCheckConfiguration").setEnabled(!0);l=f*this._getStoryBlockDetectionRetryInterval(g);b("Banzai").post("xtrackable:"+j,{token:c,event_code:g?4:8,hidden_delay:l})}else k>0?b("Banzai").post("xtrackable:"+j,{token:c,event_code:g?2:7}):i||(g&&b("AdDelayedHiddenCheckConfiguration").setEnabled(!0),b("Banzai").post("xtrackable:"+j,{token:c,event_code:g?0:6}));return}}else if(h.length===0&&c!=null&&c.startsWith("7.")){++e<5&&setTimeout(function(){this._doStoryBlockImgCheck(a,c,d,e,0)}.bind(this),2500);return}++f<this._getStoryBlockDetectionRetryCount(g)&&setTimeout(function(){this._doStoryBlockImgCheck(a,c,d,e,f)}.bind(this),this._getStoryBlockDetectionRetryInterval(g))},_getStoryBlockDetectionRetryCount:function(a){return a?b("AdblockerDetectionRetryConfig").retry_count:b("AdblockerDetectionRetryConfig").organic_retry_count},_getStoryBlockDetectionRetryInterval:function(a){return a?b("AdblockerDetectionRetryConfig").retry_interval:b("AdblockerDetectionRetryConfig").organic_retry_interval},_checkImageLoadStatus:function(a){var c=a.querySelector("img");if(c&&(!c.complete||!c.naturalWidth)){c=this._findParentImpressionToken(a);b("Banzai").post("xtrackable:"+j,{token:c,event_code:1})}},_findParentImpressionToken:function(a){a=b("DataAttributeUtils").getParentByAttributeOrDataStoreKey(a,"data-xt","data-xt");return a?b("DataAttributeUtils").getDataAttribute(a,"data-xt"):null},doHasAdBlockCheck:function(){b("hasAdblock")(function(a){var c={};c[i]=a;b("Banzai").post("search_check",c)})},doBrowserExtensionCheck:function(a,c){__p&&__p();try{var d=document.getElementsByTagName("head")[0],e=document.documentElement?document.documentElement.shadowRoot:null,f=[];e&&(f=Array.prototype.slice.call(e.querySelectorAll("style")));e=Array.prototype.slice.call(d.querySelectorAll("style")).filter(function(a){return a&&a.textContent.length==0});d={};d[g]=f.length>0;d[h]=e.length>0;a&&f.forEach(function(a){a.disabled=!0});c&&e.forEach(function(a){a.disabled=!0});b("Banzai").post("search_check",d)}catch(a){}}};e.exports=a}),null);
__d("GoodwillTemplateBanzaiLogger",["Banzai"],(function(a,b,c,d,e,f){"use strict";a={logClickEvent:function(a,c){a.onclick=function(){c.goodwill_memories_and_celebrations&&b("Banzai").post("goodwill_memories_and_celebrations",c.goodwill_memories_and_celebrations),c.goodwill_video&&b("Banzai").post("goodwill_video",c.goodwill_video),c.goodwill_daily_dialogue&&b("Banzai").post("goodwill_cultural_moment_holiday_card",c.goodwill_daily_dialogue)}}};e.exports=a}),null);
__d("XDOMScannerResultsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ascend_mr_no/",{})}),null);