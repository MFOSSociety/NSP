if (self.CavalryLogger) { CavalryLogger.start_js(["JQ3Zx"]); }

__d("CameraFileBugButton.react",["ix","fbt","AsyncDialog","AsyncRequest","Image.react","React","ReactMenu","fbglyph"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("ReactMenu").Item,j="/ajax/bugs/report",k="342047509524458";function a(){var a=function(){b("AsyncDialog").send(new(b("AsyncRequest"))().setData({product_category_id:k}).setURI(j))};return b("React").createElement(i,{onClick:a,key:"bug"},b("React").createElement(b("Image.react"),{src:g("112874")}),h._("Something isn't working"))}e.exports=a}),null);
__d("CameraPostDirectMarkSeenMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1644150182303893"};c.getQueryID=function(){"use strict";return"171816796723339"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("CameraPostLoggingEvents",[],(function(a,b,c,d,e,f){"use strict";e.exports={SEND_REPLY_ATTEMPT:"send_direct_reply_attempted",SEND_REPLY_SUCCESS:"send_direct_reply_success",SEND_REPLY_FAILURE:"send_direct_reply_failure",THREAD_VIEWED:"view",THREAD_MARK_SEEN_ATTEMPT:"mark_thread_seen_attempted",THREAD_MARK_SEEN_SUCCESS:"mark_thread_seen_success",THREAD_MARK_SEEN_FAILURE:"mark_thread_seen_failure",DIRECT_VIEWER_CLICKOUT:"clickout"}}),null);
__d("CameraPostQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1683493178431421"};c.getQueryID=function(){"use strict";return"1787382738014546"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("CameraPostRepliesQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1494166853955273"};c.getQueryID=function(){"use strict";return"1468697053209427"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("CameraPostReplyMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1459763854077111"};c.getQueryID=function(){"use strict";return"1849675045338105"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("CameraPostUserQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1652248708148952"};c.getQueryID=function(){"use strict";return"143159039576179"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("DirectMessagingTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:DirectMessagingLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:DirectMessagingLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:DirectMessagingLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAccountstatus=function(a){this.$1.accountstatus=a;return this};a.prototype.setActionSource=function(a){this.$1.action_source=a;return this};a.prototype.setAppID=function(a){this.$1.appid=a;return this};a.prototype.setAppversion=function(a){this.$1.appversion=a;return this};a.prototype.setBackstagePostID=function(a){this.$1.backstage_post_id=a;return this};a.prototype.setBackstageThreadID=function(a){this.$1.backstage_thread_id=a;return this};a.prototype.setBadgingNumber=function(a){this.$1.badging_number=a;return this};a.prototype.setBlacklistedIds=function(a){this.$1.blacklisted_ids=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setBlacklistedStoriesUsersCount=function(a){this.$1.blacklisted_stories_users_count=a;return this};a.prototype.setCameraPostType=function(a){this.$1.camera_post_type=a;return this};a.prototype.setCameraStoryPromotionID=function(a){this.$1.camera_story_promotion_id=a;return this};a.prototype.setCardID=function(a){this.$1.card_id=a;return this};a.prototype.setClientCameraPostTrackingKey=function(a){this.$1.client_camera_post_tracking_key=a;return this};a.prototype.setClientIsReplay=function(a){this.$1.client_is_replay=a;return this};a.prototype.setClientMediaContentID=function(a){this.$1.client_media_content_id=a;return this};a.prototype.setClientMediaID=function(a){this.$1.client_media_id=a;return this};a.prototype.setClientMediaIdsStrings=function(a){this.$1.client_media_ids_strings=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setClientPreviewType=function(a){this.$1.client_preview_type=a;return this};a.prototype.setClientSessionID=function(a){this.$1.client_session_id=a;return this};a.prototype.setClientSessionTime=function(a){this.$1.client_session_time=a;return this};a.prototype.setClientShareSheetID=function(a){this.$1.client_share_sheet_id=a;return this};a.prototype.setClientViewerSessionID=function(a){this.$1.client_viewer_session_id=a;return this};a.prototype.setClienttime=function(a){this.$1.clienttime=a;return this};a.prototype.setContainermodule=function(a){this.$1.containermodule=a;return this};a.prototype.setCount=function(a){this.$1.count=a;return this};a.prototype.setCountry=function(a){this.$1.country=a;return this};a.prototype.setDeviceid=function(a){this.$1.deviceid=a;return this};a.prototype.setDirectDataSessionID=function(a){this.$1.direct_data_session_id=a;return this};a.prototype.setDirectGroup=function(a){this.$1.direct_group=a;return this};a.prototype.setDirectRecipients=function(a){this.$1.direct_recipients=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setDirectRecipientsSize=function(a){this.$1.direct_recipients_size=a;return this};a.prototype.setDirectSessionID=function(a){this.$1.direct_session_id=a;return this};a.prototype.setDirectSpaces=function(a){this.$1.direct_spaces=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setEventStoriesInTray=function(a){this.$1.event_stories_in_tray=a;return this};a.prototype.setEventname=function(a){this.$1.eventname=a;return this};a.prototype.setExtraClientData=function(a){this.$1.extra_client_data=a;return this};a.prototype.setFirstView=function(a){this.$1.first_view=a;return this};a.prototype.setFolloweeStoriesInTray=function(a){this.$1.followee_stories_in_tray=a;return this};a.prototype.setFriendStoriesInTray=function(a){this.$1.friend_stories_in_tray=a;return this};a.prototype.setGesture=function(a){this.$1.gesture=a;return this};a.prototype.setGridLayoutColumnSize=function(a){this.$1.grid_layout_column_size=a;return this};a.prototype.setGridLayoutRowSize=function(a){this.$1.grid_layout_row_size=a;return this};a.prototype.setGridPageIndex=function(a){this.$1.grid_page_index=a;return this};a.prototype.setGridStoryIndexColumn=function(a){this.$1.grid_story_index_column=a;return this};a.prototype.setGridStoryIndexRow=function(a){this.$1.grid_story_index_row=a;return this};a.prototype.setGroupRecipients=function(a){this.$1.group_recipients=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setGroupRecipientsSize=function(a){this.$1.group_recipients_size=a;return this};a.prototype.setGroupStoriesInTray=function(a){this.$1.group_stories_in_tray=a;return this};a.prototype.setHasMyStory=function(a){this.$1.has_my_story=a;return this};a.prototype.setHasNewContent=function(a){this.$1.has_new_content=a;return this};a.prototype.setHasNewReactions=function(a){this.$1.has_new_reactions=a;return this};a.prototype.setHasNewViews=function(a){this.$1.has_new_views=a;return this};a.prototype.setHasNuxStory=function(a){this.$1.has_nux_story=a;return this};a.prototype.setHashid=function(a){this.$1.hashid=a;return this};a.prototype.setInputMessageID=function(a){this.$1.input_message_id=a;return this};a.prototype.setInspirationGroupSession=function(a){this.$1.inspiration_group_session=a;return this};a.prototype.setInstagramMediaID=function(a){this.$1.instagram_media_id=a;return this};a.prototype.setInstagramUserID=function(a){this.$1.instagram_user_id=a;return this};a.prototype.setInterface=function(a){this.$1["interface"]=a;return this};a.prototype.setIsAudioStory=function(a){this.$1.is_audio_story=a;return this};a.prototype.setIsCamera=function(a){this.$1.is_camera=a;return this};a.prototype.setIsFromStory=function(a){this.$1.is_from_story=a;return this};a.prototype.setIsStory=function(a){this.$1.is_story=a;return this};a.prototype.setIsemployee=function(a){this.$1.isemployee=a;return this};a.prototype.setLiveStoriesInTray=function(a){this.$1.live_stories_in_tray=a;return this};a.prototype.setLiveVideoID=function(a){this.$1.live_video_id=a;return this};a.prototype.setMediaIndex=function(a){this.$1.media_index=a;return this};a.prototype.setMediaOwner=function(a){this.$1.media_owner=a;return this};a.prototype.setMediaOwnerTypeString=function(a){this.$1.media_owner_type_string=a;return this};a.prototype.setMediaType=function(a){this.$1.media_type=a;return this};a.prototype.setMessageLength=function(a){this.$1.message_length=a;return this};a.prototype.setMessageType=function(a){this.$1.message_type=a;return this};a.prototype.setMobileNetworkType=function(a){this.$1.mobile_network_type=a;return this};a.prototype.setMontageMessageID=function(a){this.$1.montage_message_id=a;return this};a.prototype.setMutationID=function(a){this.$1.mutation_id=a;return this};a.prototype.setName=function(a){this.$1.name=a;return this};a.prototype.setNumParticipants=function(a){this.$1.num_participants=a;return this};a.prototype.setNumberBadges=function(a){this.$1.number_badges=a;return this};a.prototype.setNumberLiveStories=function(a){this.$1.number_live_stories=a;return this};a.prototype.setNumberMedia=function(a){this.$1.number_media=a;return this};a.prototype.setNumberNewRows=function(a){this.$1.number_new_rows=a;return this};a.prototype.setNumberNewStories=function(a){this.$1.number_new_stories=a;return this};a.prototype.setNumberReactions=function(a){this.$1.number_reactions=a;return this};a.prototype.setNumberRows=function(a){this.$1.number_rows=a;return this};a.prototype.setNumberStories=function(a){this.$1.number_stories=a;return this};a.prototype.setNumberViewers=function(a){this.$1.number_viewers=a;return this};a.prototype.setOriginalVideoFileSize=function(a){this.$1.original_video_file_size=a;return this};a.prototype.setOtherParticipant=function(a){this.$1.other_participant=a;return this};a.prototype.setOverlayTypesUsed=function(a){this.$1.overlay_types_used=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setPageStoriesInTray=function(a){this.$1.page_stories_in_tray=a;return this};a.prototype.setPrivacyMode=function(a){this.$1.privacy_mode=a;return this};a.prototype.setProductMediaType=function(a){this.$1.product_media_type=a;return this};a.prototype.setProductSurface=function(a){this.$1.product_surface=a;return this};a.prototype.setPromotionID=function(a){this.$1.promotion_id=a;return this};a.prototype.setPromotionMediaID=function(a){this.$1.promotion_media_id=a;return this};a.prototype.setPromotionStoriesInTray=function(a){this.$1.promotion_stories_in_tray=a;return this};a.prototype.setRawclienttime=function(a){this.$1.rawclienttime=a;return this};a.prototype.setReactionID=function(a){this.$1.reaction_id=a;return this};a.prototype.setReactionType=function(a){this.$1.reaction_type=a;return this};a.prototype.setReadStories=function(a){this.$1.read_stories=a;return this};a.prototype.setReason=function(a){this.$1.reason=a;return this};a.prototype.setReplaysLeft=function(a){this.$1.replays_left=a;return this};a.prototype.setReplyCount=function(a){this.$1.reply_count=a;return this};a.prototype.setReplyType=function(a){this.$1.reply_type=a;return this};a.prototype.setRowIndex=function(a){this.$1.row_index=a;return this};a.prototype.setRowStatus=function(a){this.$1.row_status=a;return this};a.prototype.setSendKey=function(a){this.$1.send_key=a;return this};a.prototype.setServerPostSource=function(a){this.$1.server_post_source=a;return this};a.prototype.setServertime=function(a){this.$1.servertime=a;return this};a.prototype.setSoftDeletedStoryThreadIds=function(a){this.$1.soft_deleted_story_thread_ids=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setSource=function(a){this.$1.source=a;return this};a.prototype.setSourceThreadID=function(a){this.$1.source_thread_id=a;return this};a.prototype.setStoriesTrayFeedUnitTrackingString=function(a){this.$1.stories_tray_feed_unit_tracking_string=a;return this};a.prototype.setStoryIndex=function(a){this.$1.story_index=a;return this};a.prototype.setStoryMediaIds=function(a){this.$1.story_media_ids=b("GeneratedLoggerUtils").serializeMap(a);return this};a.prototype.setStoryOwner=function(a){this.$1.story_owner=a;return this};a.prototype.setStoryOwnerFbids=function(a){this.$1.story_owner_fbids=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setStoryOwnerType=function(a){this.$1.story_owner_type=a;return this};a.prototype.setStoryRankingScores=function(a){this.$1.story_ranking_scores=b("GeneratedLoggerUtils").serializeMap(a);return this};a.prototype.setStoryTargetCount=function(a){this.$1.story_target_count=a;return this};a.prototype.setStoryThreadIds=function(a){this.$1.story_thread_ids=b("GeneratedLoggerUtils").serializeMap(a);return this};a.prototype.setTargetID=function(a){this.$1.target_id=a;return this};a.prototype.setThreadCount=function(a){this.$1.thread_count=a;return this};a.prototype.setThreadViewIdentifier=function(a){this.$1.thread_view_identifier=a;return this};a.prototype.setTrackingString=function(a){this.$1.tracking_string=a;return this};a.prototype.setTraySessionID=function(a){this.$1.tray_session_id=a;return this};a.prototype.setTriggerSource=function(a){this.$1.trigger_source=a;return this};a.prototype.setTruePromptID=function(a){this.$1.true_prompt_id=a;return this};a.prototype.setUnifiedPrivacyMode=function(a){this.$1.unified_privacy_mode=a;return this};a.prototype.setUnifiedStoriesMediaSource=function(a){this.$1.unified_stories_media_source=a;return this};a.prototype.setUnreadStories=function(a){this.$1.unread_stories=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.setVideoLength=function(a){this.$1.video_length=a;return this};a.prototype.setWhitelistedIds=function(a){this.$1.whitelisted_ids=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setWhitelistedStoriesUsersCount=function(a){this.$1.whitelisted_stories_users_count=a;return this};a.prototype.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};var g={accountstatus:!0,action_source:!0,appid:!0,appversion:!0,backstage_post_id:!0,backstage_thread_id:!0,badging_number:!0,blacklisted_ids:!0,blacklisted_stories_users_count:!0,camera_post_type:!0,camera_story_promotion_id:!0,card_id:!0,client_camera_post_tracking_key:!0,client_is_replay:!0,client_media_content_id:!0,client_media_id:!0,client_media_ids_strings:!0,client_preview_type:!0,client_session_id:!0,client_session_time:!0,client_share_sheet_id:!0,client_viewer_session_id:!0,clienttime:!0,containermodule:!0,count:!0,country:!0,deviceid:!0,direct_data_session_id:!0,direct_group:!0,direct_recipients:!0,direct_recipients_size:!0,direct_session_id:!0,direct_spaces:!0,event_stories_in_tray:!0,eventname:!0,extra_client_data:!0,first_view:!0,followee_stories_in_tray:!0,friend_stories_in_tray:!0,gesture:!0,grid_layout_column_size:!0,grid_layout_row_size:!0,grid_page_index:!0,grid_story_index_column:!0,grid_story_index_row:!0,group_recipients:!0,group_recipients_size:!0,group_stories_in_tray:!0,has_my_story:!0,has_new_content:!0,has_new_reactions:!0,has_new_views:!0,has_nux_story:!0,hashid:!0,input_message_id:!0,inspiration_group_session:!0,instagram_media_id:!0,instagram_user_id:!0,"interface":!0,is_audio_story:!0,is_camera:!0,is_from_story:!0,is_story:!0,isemployee:!0,live_stories_in_tray:!0,live_video_id:!0,media_index:!0,media_owner:!0,media_owner_type_string:!0,media_type:!0,message_length:!0,message_type:!0,mobile_network_type:!0,montage_message_id:!0,mutation_id:!0,name:!0,num_participants:!0,number_badges:!0,number_live_stories:!0,number_media:!0,number_new_rows:!0,number_new_stories:!0,number_reactions:!0,number_rows:!0,number_stories:!0,number_viewers:!0,original_video_file_size:!0,other_participant:!0,overlay_types_used:!0,page_stories_in_tray:!0,privacy_mode:!0,product_media_type:!0,product_surface:!0,promotion_id:!0,promotion_media_id:!0,promotion_stories_in_tray:!0,rawclienttime:!0,reaction_id:!0,reaction_type:!0,read_stories:!0,reason:!0,replays_left:!0,reply_count:!0,reply_type:!0,row_index:!0,row_status:!0,send_key:!0,server_post_source:!0,servertime:!0,soft_deleted_story_thread_ids:!0,source:!0,source_thread_id:!0,stories_tray_feed_unit_tracking_string:!0,story_index:!0,story_media_ids:!0,story_owner:!0,story_owner_fbids:!0,story_owner_type:!0,story_ranking_scores:!0,story_target_count:!0,story_thread_ids:!0,target_id:!0,thread_count:!0,thread_view_identifier:!0,tracking_string:!0,tray_session_id:!0,trigger_source:!0,true_prompt_id:!0,unified_privacy_mode:!0,unified_stories_media_source:!0,unread_stories:!0,vc:!0,video_length:!0,whitelisted_ids:!0,whitelisted_stories_users_count:!0};e.exports=a}),null);
__d("FBStoriesLoggingConstants",[],(function(a,b,c,d,e,f){"use strict";a={EVENT_STORY:"event",FOLLOWEE_STORY:"followee",FRIEND_STORY:"friend",GROUP_STORY:"group",MISSING_STORY_DATA:"missingStoryData",PAGE_STORY:"page",SELF_STORY:"self",STORY_PROMOTION:"promotion",ACTION_OPEN_MEDIA:"open_media",ACTION_DELETE_MEDIA:"delete_media_attempted",ACTION_SEND_REPLY_ATTEMPT:"attempt_to_send_reply",ACTION_SEND_REPLY_SUCCESS:"mark_reply_sent",ACTION_SEND_REPLY_FAILURE:"reply_sent_failure",ACTION_SEND_STICKER_ATTEMPT:"attempt_to_send_sticker",ACTION_SEND_STICKER_SUCCESS:"mark_sticker_sent",ACTION_SEND_STICKER_FAILURE:"sticker_sent_failure",ACTION_SEND_GIF_ATTEMPT:"attempt_to_send_gif",ACTION_SEND_GIF_SUCCESS:"mark_gif_sent",ACTION_SEND_GIF_FAILURE:"gif_sent_failure",ACTION_OPEN_SEEN_SUMMARY:"open_seen_summary",ACTION_OPEN_STORY:"open_story",ACTION_CLOSE_STORY:"close_story",ACTION_TRAY_LOAD:"story_tray_load",SOURCE_OPEN_FROM_STORY_HEAD:"openFromStoryHead",SOURCE_OPEN_FROM_PRIOR_STORY:"openFromPriorStory",SOURCE_CLOSE_FROM_MODAL:"closeFromClickingOnModal",SOURCE_CLOSE_FROM_MODAL_CLOSE_BUTTON:"closeFromClickingOnModalCloseButton",SOURCE_CLOSE_FROM_LAST_STORY_FINISHING:"closeFromLastStoryFinishing",INTERACTIONS:{CATEGORY_KEY:"fb_stories_tray",TOTAL_INIT:"init_agg",DATA_LOADING:"graphql_data_loading",TRAY_RENDER:"react_story_tray_render",VIEWER_OPEN:"viewer_open"}};e.exports=a}),null);
__d("CameraPostGraphQLAPI",["Banzai","CameraPostDirectMarkSeenMutationWebGraphQLMutation","CameraPostLoggingEvents","CameraPostQueryWebGraphQLQuery","CameraPostRepliesQueryWebGraphQLQuery","CameraPostReplyMutationWebGraphQLMutation","CameraPostUserQueryWebGraphQLQuery","DirectMessagingTypedLogger","FBStoriesLoggingConstants","WebGraphQL","uniqueID"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(a,c,d,e,f,g){__p&&__p();var h=new(b("DirectMessagingTypedLogger"))().setCameraPostType(c).setProductSurface("www").setName(e).setCardID(a.toString());if(d.message){var i=d.message.length;h.setMessageLength(i)}d.sticker_id&&h.addToExtraData("sticker_id",d.sticker_id);d.gif_url&&h.addToExtraData("gif_url",d.gif_url);h.log();b("Banzai").post("stories_interaction_poseidon_logging_banzai",{name:e,thread_id:String(a)});var j={};j.is_fb_story=!0;j.thread_id=a;j.camera_post_type=c;j.attempt_name=e;j.event=b("FBStoriesLoggingConstants").ACTION_SEND_REPLY_ATTEMPT;return b("WebGraphQL").exec(new(b("CameraPostReplyMutationWebGraphQLMutation"))({input:d})).then(function(d){new(b("DirectMessagingTypedLogger"))().setCameraPostType(c).setProductSurface("www").setName(f).setCardID(a.toString()).log();j.success_name=f;b("Banzai").post("fb_stories_banzai_generic",{ft:j});return d},function(d){new(b("DirectMessagingTypedLogger"))().setCameraPostType(c).setProductSurface("www").setName(g).setCardID(a.toString()).log();j.failure_name=g;b("Banzai").post("fb_stories_banzai_generic",{ft:j});return d})};e.exports={sendDirectMessageReply:function(a,c,d,e,f){var h=b("uniqueID")();h={client_mutation_id:h,actor_id:a,thread_id:c,message:d};f?(a=b("FBStoriesLoggingConstants").ACTION_SEND_REPLY_ATTEMPT,d=b("FBStoriesLoggingConstants").ACTION_SEND_REPLY_SUCCESS,f=b("FBStoriesLoggingConstants").ACTION_SEND_REPLY_FAILURE):(a=b("CameraPostLoggingEvents").SEND_REPLY_ATTEMPT,d=b("CameraPostLoggingEvents").SEND_REPLY_SUCCESS,f=b("CameraPostLoggingEvents").SEND_REPLY_FAILURE);return g(c,e,h,a,d,f)},sendDirectStickerReply:function(a,c,d,e){var f=b("uniqueID")();f={client_mutation_id:f,actor_id:a,thread_id:c,sticker_id:e};return g(c,d,f,b("FBStoriesLoggingConstants").ACTION_SEND_STICKER_ATTEMPT,b("FBStoriesLoggingConstants").ACTION_SEND_STICKER_SUCCESS,b("FBStoriesLoggingConstants").ACTION_SEND_STICKER_FAILURE)},sendDirectGifReply:function(a,c,d,e){var f=b("uniqueID")();f={client_mutation_id:f,actor_id:a,thread_id:c,gif_url:e};return g(c,d,f,b("FBStoriesLoggingConstants").ACTION_SEND_GIF_ATTEMPT,b("FBStoriesLoggingConstants").ACTION_SEND_GIF_SUCCESS,b("FBStoriesLoggingConstants").ACTION_SEND_GIF_FAILURE)},loadThreadFullInformation:function(a,c){return b("WebGraphQL").exec(new(b("CameraPostQueryWebGraphQLQuery"))({thread_id:c})).then(function(a){var d,e;e=(e=a)!=null?(e=e.node)!=null?e.camera_post_type:e:e;d=(d=a)!=null?(d=d.node)!=null?d.viewer_replays_left:d:d;new(b("DirectMessagingTypedLogger"))().setCameraPostType(e).setName(b("CameraPostLoggingEvents").THREAD_VIEWED).setProductSurface("www").setReplaysLeft(d).setCardID(c.toString()).log();return a},function(a){!1;return a})},loadUserInfo:function(){return b("WebGraphQL").exec(new(b("CameraPostUserQueryWebGraphQLQuery"))())},loadRepliesForThread:function(a){return b("WebGraphQL").exec(new(b("CameraPostRepliesQueryWebGraphQLQuery"))({thread_id:a}))},markThreadSeen:function(a,c,d,e,f){__p&&__p();a={client_mutation_id:b("uniqueID")(),actor_id:a,thread_id:c,last_message_seen_id:d};var g=new(b("DirectMessagingTypedLogger"))().setCameraPostType(e).setName(b("CameraPostLoggingEvents").THREAD_MARK_SEEN_ATTEMPT).setProductSurface("www").setCardID(c.toString());f&&(g=g.setReplaysLeft(f));g.log();var h={};h.is_fb_story=!0;h.camera_post_type=e;h.event=b("CameraPostLoggingEvents").THREAD_MARK_SEEN_ATTEMPT;h.thread_id=c;h.latest_message_id=d;h.replays_left=f?f:-1;return b("WebGraphQL").exec(new(b("CameraPostDirectMarkSeenMutationWebGraphQLMutation"))({input:a})).then(function(a){new(b("DirectMessagingTypedLogger"))().setCameraPostType(e).setProductSurface("www").setName(b("CameraPostLoggingEvents").THREAD_MARK_SEEN_SUCCESS).setReplaysLeft(f).setCardID(c.toString()).log();h.sucess_name=b("CameraPostLoggingEvents").THREAD_MARK_SEEN_SUCCESS;b("Banzai").post("fb_stories_banzai_generic",{ft:h});return a},function(a){new(b("DirectMessagingTypedLogger"))().setCameraPostType(e).setProductSurface("www").setName(b("CameraPostLoggingEvents").THREAD_MARK_SEEN_FAILURE).setReplaysLeft(f).setCardID(c.toString()).log();h.failur_name=b("CameraPostLoggingEvents").THREAD_MARK_SEEN_FAILURE;b("Banzai").post("fb_stories_banzai_generic",{ft:h});return a})},_getLogger:function(){return new(b("DirectMessagingTypedLogger"))()}}}),null);
__d("CameraPostBucketOwnerHelper",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={getId:function(a){return((a=a)!=null?a.id:a)||""},getName:function(a){return((a=a)!=null?a.name:a)||""},getGender:function(a){return!a?"":a.gender?a.gender:""},isEventHost:function(a){return!a?!1:a.is_viewer_host?!!a.is_viewer_host:!1},isViewerFriend:function(a){return!a?!1:a.is_viewer_friend?!!a.is_viewer_friend:!1},isEmployee:function(a){return!a?!1:a.is_employee?!!a.is_employee:!1},getProfilePictureUri:function(a){return!a||!a.profile_picture?"":a.profile_picture.uri||""},getCoverPhotoUri:function(a){return!a||!a.cover_photo?"":((a=a)!=null?(a=a.cover_photo)!=null?(a=a.photo)!=null?(a=a.image)!=null?a.uri:a:a:a:a)||""},isViewerPageContentAdmin:function(a){a=g._getViewerProfilePermissions(a);return a&&a.includes("EDIT_PROFILE")||!1},isViewerGroupModerator:function(a){a=g._getViewerAdminType(a);return a==="MODERATOR"},isViewerGroupAdmin:function(a){a=g._getViewerAdminType(a);return a==="ADMIN"},_getViewerProfilePermissions:function(a){return!a||!a.viewer_profile_permissions?null:((a=a)!=null?a.viewer_profile_permissions:a)||null},_getViewerAdminType:function(a){return!a||!a.viewer_admin_type?null:((a=a)!=null?a.viewer_admin_type:a)||null},requiresAdminApproval:function(a){return!a?!1:a.story_approval_required&&!!a.story_approval_required||(a.stories_admin_approval_required_setting?a.stories_admin_approval_required_setting==="ON":!1)}};e.exports=g}),null);
__d("CameraPostMediaHelper",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={getId:function(a){return((a=a)!=null?a.id:a)||""},getWidth:function(a){if(!a)return 0;if(a.width)return a.width;return a.image?a.image.width||0:0},getHeight:function(a){if(!a)return 0;if(a.height)return a.height;return a.image?a.image.height||0:0},getType:function(a){return((a=a)!=null?a.__typename:a)||""},getImageUri:function(a){return!a?null:a.image?a.image.uri:null},getBlurImageUri:function(a){return!a?null:a.image_blurred?a.image_blurred.uri:null},isSphericalPhoto:function(a){return!a?!1:a.photo_encodings?a.photo_encodings.length>0:!1},isImage:function(a){return g.getType(a)==="Photo"},isVideo:function(a){return g.getType(a)==="Video"},getPreviewImage:function(a){return!a?null:a.preview_image?a.preview_image.uri:null},makeOptimisticPhotoMedia:function(a){return{id:null,__typename:"Photo",preview_image:{uri:a,width:null,height:null},image:{uri:a,width:null,height:null},image_blurred:{uri:a,width:null,height:null}}}};e.exports=g}),null);
__d("CameraPostThreadOwnerHelper",[],(function(a,b,c,d,e,f){"use strict";a={getId:function(a){return(a=a)!=null?a.id:a},getName:function(a){return((a=a)!=null?a.name:a)||""},getIsViewerFriend:function(a){return!!((a=a)!=null?a.is_viewer_friend:a)},getProfilePictureUri:function(a){return((a=a)!=null?(a=a.profile_picture)!=null?a.uri:a:a)||""}};e.exports=a}),null);
__d("CameraPostTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({STORY:"STORY",PAGE_STORY:"PAGE_STORY",EVENT_STORY:"EVENT_STORY",BIRTHDAY_STORY:"BIRTHDAY_STORY",GROUP_STORY:"GROUP_STORY",CREW_STORY:"CREW_STORY",SELF_BIRTHDAY_STORY:"SELF_BIRTHDAY_STORY",DIRECT:"DIRECT",GROUP_DIRECT:"GROUP_DIRECT",DIRECT_NUX:"DIRECT_NUX",STORY_NUX:"STORY_NUX",TOPIC_STORY:"TOPIC_STORY",GOODWILL_STORY:"GOODWILL_STORY",LIVE_STORY:"LIVE_STORY",PROMOTION_STORY:"PROMOTION_STORY",NULL_HEADS:"NULL_HEADS",DUMMY_SELF_BUCKET:"DUMMY_SELF_BUCKET"})}),null);
__d("CameraPostTypesHelper",["CameraPostTypes"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={isEventStory:function(a){return a===b("CameraPostTypes").EVENT_STORY},isGroupStory:function(a){return a===b("CameraPostTypes").GROUP_STORY},isMultiAuthor:function(a){return g.isEventStory(a)||g.isGroupStory(a)},isPageStory:function(a){return a===b("CameraPostTypes").PAGE_STORY},isPromotionStory:function(a){return a===b("CameraPostTypes").PROMOTION_STORY},isStory:function(a){return a===b("CameraPostTypes").STORY},isStoryNux:function(a){return a===b("CameraPostTypes").STORY_NUX}};e.exports=g}),null);
__d("XEventReminderImpressionLoggerAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/events/ajax/reminder/impression/",{acontext:{type:"StringToStringMap",required:!0},data:{type:"StringToStringMap"}})}),null);
__d("EventReminderController",["Arbiter","AsyncRequest","DOM","DOMQuery","Event","Scroll","ScrollableArea","XEventReminderImpressionLoggerAsyncController"],(function(a,b,c,d,e,f){__p&&__p();a={registerReminder:function(a,c){__p&&__p();this._firstOpen=!0;var d=a.getDialog(),e=b("ScrollableArea").getInstance(b("DOMQuery").scry(d.getRoot(),".uiScrollableArea")[0]),f=null;e&&(f=b("DOM").find(e.getElement(),"div.uiScrollableAreaWrap"),e.subscribe("scroll",function(){return b("Arbiter").inform("EventReminderDialog/scroll",{rect:f.getBoundingClientRect(),scrollTop:b("Scroll").getTop(f)})}));b("Event").listen(a.getRoot(),"click",function(event){event.preventDefault()});d.subscribe("show",function(){var a=b("XEventReminderImpressionLoggerAsyncController").getURIBuilder().setStringToStringMap("acontext",c).setStringToStringMap("data",{first_open:this._firstOpen}).getURI();new(b("AsyncRequest"))(a).send();this._firstOpen=!1;a={};f&&(a={rect:f.getBoundingClientRect()});b("Arbiter").inform("EventReminderDialog/show",a)}.bind(this));d.subscribe("hide",function(){return b("Arbiter").inform("EventReminderDialog/hide")})}};e.exports=a}),null);
__d("AddToStoryPogDestinationType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({DIALOG:"DIALOG",EMPTY_FEED_COMPOSER:"EMPTY_FEED_COMPOSER",SATP_FEED_COMPOSER:"SATP_FEED_COMPOSER"})}),null);
__d("FBStoriesActionTypes",[],(function(a,b,c,d,e,f){a=Object.freeze({LOAD:"FB_STORIES.LOAD",LOADING:"FB_STORIES.LOADING",LOADED:"FB_STORIES.LOADED",LOADED_ERROR:"FB_STORIES.LOADED_ERROR",VIEWER_LIST_LOADED_FOR_THREAD:"FB_STORIES.VIEWER_LIST_LOADED_FOR_THREAD",RESET_LOCAL_SEEN_HISTORY:"FB_STORIES.RESET_LOCAL_SEEN_HISTORY",SELECTED_BUCKET_IDX_CHANGED:"FB_STORIES.SELECTED_BUCKET_IDX_CHANGED",SET_ALL_BUCKETS_VIEWED:"FB_STORIES.SET_ALL_BUCKETS_VIEWED",SET_UNSEEN_MODE:"FB_STORIES.SET_UNSEEN_MODE",SELECTED_THREAD_IDX_CHANGED:"FB_STORIES.SELECTED_THREAD_IDX_CHANGED",SELECTED_THREAD_PERCENT_DONE:"FB_STORIES.SELECTED_THREAD_PERCENT_DONE",SUBSCRIPTION_BUCKET_UPDATE:"FB_STORIES.SUBSCRIPTION_BUCKET_UPDATE",UPDATE_THREAD_SEEN_OPTIMISTIC:"FB_STORIES.UPDATE_THREAD_SEEN_OPTIMISTIC",UPDATE_THREAD_VIEWERS_SEEN_OPTIMISTIC:"FB_STORIES.UPDATE_THREAD_VIEWERS_SEEN_OPTIMISTIC",DELETE_THREAD_FROM_BUCKET:"FB_STORIES.DELETE_THREAD_FROM_BUCKET",REMOVE_BUCKET:"FB_STORIES.REMOVE_BUCKET",REMOVE_ENDED_LIVE_VIDEO_FROM_BUCKET:"FB_STORIES.REMOVE_ENDED_LIVE_VIDEO_FROM_BUCKET",SET_IS_COMMERCIAL_BREAK_RUNNING:"FB_STORIES.SET_IS_COMMERCIAL_BREAK_RUNNING",UNSELECT_BUCKET:"FBSTORIES.UNSELECT_BUCKET",SET_VIEWER_OPEN:"FB_STORIES.SET_VIEWER_OPEN",OPTIMISTIC_CREATE_PHOTO_STORY:"FB_STORIES.OPTIMISTIC_CREATE_PHOTO_STORY",RESET_STATE:"FB_STORIES.RESET_STATE",SET_SUBSCRIPTION_TOKEN:"FB_STORIES.SET_SUBSCRIPTION_TOKEN",OPTIMISTIC_POLL_VOTE:"FB_STORIES.OPTIMISTIC_POLL_VOTE",SET_IS_PRODUCTION_DIALOG_LOADING:"FB_STORIES.SET_IS_PRODUCTION_DIALOG_LOADING"});e.exports=a}),null);
__d("FBStoriesDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f){"use strict";var g;c=babelHelpers.inherits(a,b("ExplicitRegistrationReactDispatcher"));g=c&&c.prototype;function a(a){g.constructor.call(this,a),this.dispatch=this.dispatch.bind(this)}e.exports=new a({strict:!0})}),null);
__d("FBStoriesActions",["CameraPostBucketOwnerHelper","CameraPostGraphQLAPI","FBLogger","FBStoriesActionsHelper","FBStoriesActionTypes","FBStoriesDispatcher","FBStoriesGraphQLAPI","FBStoriesLoggingConstants","FBStoriesLoggingHelper","FBStoriesMutedBucketOwnersActions","FBStoriesPrefetcher","FBStoriesStore","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBStoriesDispatcher").dispatch,h={resetStore:function(){g({type:b("FBStoriesActionTypes").RESET_STATE})},loadData:function(a,c,d,e,f){g({type:b("FBStoriesActionTypes").LOADED,data:{userInfo:{userName:a,userID:c,userGender:null,userProfilePic:{uri:d}},userBucketData:null,friendsBucketData:f}})},nextThread:function(a){var c=b("FBStoriesStore").isSelectedBucketLive();if(c){h.nextBucket();return}c=b("FBStoriesStore").getThreadsForSelectedBucket();var d=b("FBStoriesStore").getCurrentThreadIndexForSelectedBucket();a=a!==undefined?a:d+1;c.length===0?h.nextBucket():a<=c.length-1?h.currentThreadIndexChanged(a):h.nextBucket()},prevThread:function(a){var c=b("FBStoriesStore").isSelectedBucketLive();if(c){h.prevBucket();return}c=b("FBStoriesStore").getThreadsForSelectedBucket();var d=b("FBStoriesStore").getCurrentThreadIndexForSelectedBucket();a=a!==undefined?a:d-1;c.length===0?h.prevBucket():a>=0?h.currentThreadIndexChanged(a,!0):h.prevBucket()},nextBucket:function(){return h._transitionBucket(!0)},prevBucket:function(){return h._transitionBucket(!1)},userSelectedBucket:function(a){__p&&__p();var c=b("FBStoriesStore").getBucketIndexByBucketId(a);if(c===-1)return!1;var d=b("FBStoriesStore").getUnseenThreadIndex(c),e=Math.max(0,d);a=b("FBStoriesStore").isOwnBucket(a);g({type:b("FBStoriesActionTypes").RESET_LOCAL_SEEN_HISTORY});g({type:b("FBStoriesActionTypes").SET_UNSEEN_MODE,value:!a&&d>=0});g({type:b("FBStoriesActionTypes").SET_ALL_BUCKETS_VIEWED,value:!1});g({type:b("FBStoriesActionTypes").SELECTED_BUCKET_IDX_CHANGED,bucketIndex:c});h.currentThreadIndexChanged(e);return!0},updateCurrentThreadPercentDone:function(a){g({type:b("FBStoriesActionTypes").SELECTED_THREAD_PERCENT_DONE,percentDone:a})},currentThreadIndexChanged:function(a,c){__p&&__p();c===void 0&&(c=!1);var d=b("FBStoriesStore").getCurrentThreadData(),e=b("FBStoriesStore").isOwnBucket();e&&d&&!d.isLive&&h.markThreadViewersSeen(d.threadID);g({type:b("FBStoriesActionTypes").SELECTED_THREAD_IDX_CHANGED,index:a});h.updateCurrentThreadPercentDone(0);d=b("FBStoriesStore").getCurrentThreadData();if(d){if(e&&!d.isLive){var f=d.threadID;b("promiseDone")(b("FBStoriesGraphQLAPI").loadViewerListForThread(f),function(a){return g({type:b("FBStoriesActionTypes").VIEWER_LIST_LOADED_FOR_THREAD,threadID:f,data:a})},function(a){return b("FBLogger")("fbstories").catching(a).mustfix("Cannot load viewer list for thread: %s",f)})}h.markCurrentThreadAsSeen();b("FBStoriesPrefetcher").prefetchForCurrentThreadAndBucket()}else c?h.prevThread():h.nextThread()},markCurrentThreadAsSeen:function(){var a=b("FBStoriesStore").getUserInfo().userID,c=b("FBStoriesStore").getCurrentThreadData();if(!c||c.isLive)return;var d=c.latestMessageID,e=c.cameraPostType;c=c.threadID;g({type:b("FBStoriesActionTypes").UPDATE_THREAD_SEEN_OPTIMISTIC,threadID:c});b("CameraPostGraphQLAPI").markThreadSeen(a,c,d,e)},markThreadViewersSeen:function(a){g({type:b("FBStoriesActionTypes").UPDATE_THREAD_VIEWERS_SEEN_OPTIMISTIC,threadID:a}),b("FBStoriesGraphQLAPI").updateThreadSeenReciept(a)},_transitionBucket:function(a,c){__p&&__p();var d=b("FBStoriesStore").getCurrentThreadData(),e=b("FBStoriesStore").isOwnBucket();e&&d&&!d.isLive&&h.markThreadViewersSeen(d.threadID);c=c!==undefined?c:b("FBStoriesStore").getSelectedBucketIndex();c=b("FBStoriesActionsHelper").getNextBucketAndThreadIndex(c,a);var f=c.nextBucketIndex;c=c.nextThreadIndex;var i=b("FBStoriesActionsHelper").checkAllBucketsViewed(f);g({type:b("FBStoriesActionTypes").SET_ALL_BUCKETS_VIEWED,value:i});if(i)return e&&d&&!d.isLive?h.markThreadViewersSeen(d.threadID):undefined;h.removeEndedLiveVideo();g({type:b("FBStoriesActionTypes").SELECTED_BUCKET_IDX_CHANGED,bucketIndex:f});if(!b("FBStoriesStore").hasDataInSelectedBucket()&&!b("FBStoriesStore").isSelectedBucketLive())return a?h.nextBucket():h.prevBucket();h.currentThreadIndexChanged(c);b("FBStoriesLoggingHelper").storyLog(b("FBStoriesLoggingConstants").ACTION_OPEN_STORY,b("FBStoriesLoggingConstants").SOURCE_OPEN_FROM_PRIOR_STORY);return undefined},deleteThreadFromBucket:function(a,c){if(!b("FBStoriesStore").isUserManagedThread(a,c))return;b("FBStoriesGraphQLAPI").deleteStory(b("FBStoriesStore").getUserInfo().userID,a);g({type:b("FBStoriesActionTypes").DELETE_THREAD_FROM_BUCKET,threadID:a,bucketID:c});h.nextThread(b("FBStoriesStore").getCurrentThreadIndexForSelectedBucket())},muteBucketOwner:function(a,c){b("FBStoriesMutedBucketOwnersActions").setBucketOwnerMuted(b("CameraPostBucketOwnerHelper").getId(a),b("CameraPostBucketOwnerHelper").getName(a),b("CameraPostBucketOwnerHelper").getProfilePictureUri(a),!0);if(!c)return;g({type:b("FBStoriesActionTypes").REMOVE_BUCKET,bucketID:c});h._transitionBucket(!0,b("FBStoriesStore").getSelectedBucketIndex()-1)},reportThreadToAdmin:function(a){b("FBStoriesGraphQLAPI").reportThreadToAdmin(b("FBStoriesStore").getUserInfo().userID,a)},takeNegativeFeedbackAction:function(a,c){b("FBStoriesGraphQLAPI").takeNegativeFeedbackAction(b("FBStoriesStore").getUserInfo().userID,a,c)},removeEndedLiveVideo:function(){if(!b("FBStoriesStore").isSelectedBucketLiveAndEnded())return;var a=b("FBStoriesStore").getSelectedBucketId();b("FBStoriesStore").getThreadsForSelectedBucket().length>0?g({type:b("FBStoriesActionTypes").REMOVE_ENDED_LIVE_VIDEO_FROM_BUCKET,bucketID:a}):g({type:b("FBStoriesActionTypes").REMOVE_BUCKET,bucketID:a})},setIsCommercialBreakRunning:function(a,c){g({type:b("FBStoriesActionTypes").SET_IS_COMMERCIAL_BREAK_RUNNING,isCommercialBreakRunning:c,videoID:a})},unselectBucket:function(){g({type:b("FBStoriesActionTypes").UNSELECT_BUCKET})},optimisticCreateStoryPhoto:function(a){if(!a)return;g({type:b("FBStoriesActionTypes").OPTIMISTIC_CREATE_PHOTO_STORY,imageURL:a})},onPollOptionVoted:function(a,c){g({type:b("FBStoriesActionTypes").OPTIMISTIC_POLL_VOTE,index:c}),b("FBStoriesGraphQLAPI").pollVote(a,c)},setIsProductionDialogLoading:function(a){g({type:b("FBStoriesActionTypes").SET_IS_PRODUCTION_DIALOG_LOADING,value:a})}};e.exports=h}),null);
__d("BackstageMediaType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({LIVE:"live",PHOTO:"photo",VIDEO:"video",WAS_LIVE:"was_live",UNKNOWN:"unknown"})}),null);
__d("FBStoriesThreadHelper",["CameraPostMediaHelper","CameraPostThreadOwnerHelper","CameraPostTypes"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={getId:function(a){return((a=a)!=null?a.id:a)||""},getCameraPostType:function(a){return((a=a)!=null?a.camera_post_type:a)||b("CameraPostTypes").STORY},getCameraPostSource:function(a){return((a=a)!=null?a.post_source:a)||"CAMERA_SYSTEM"},isSeenByViewer:function(a){return!!((a=a)!=null?a.is_seen_by_viewer:a)},notSeenByViewer:function(a){return!g.isSeenByViewer(a)},setIsSeenByViewer:function(a,b){if(!a)return;a.is_seen_by_viewer=b},getLatestMessageID:function(a){return(a=a)!=null?(a=a.latest_message)!=null?a.id:a:a},getStatus:function(a){return(a=a)!=null?a.thread_status:a},isReviewStatusPending:function(a){a=g._getReviewStatus(a);return a==="PENDING"||a==="DENIED"},_getReviewStatus:function(a){return(a=a)!=null?a.thread_review_status:a},getTime:function(a){return((a=a)!=null?a.time:a)||0},getExpiryTime:function(a){return((a=a)!=null?a.thread_expiry_time:a)||0},isExpired:function(a){a=g.getExpiryTime(a);return!a?!1:a<Date.now()/1e3},isUploading:function(a){return g.getStatus(a)==="UPLOADING"},isPending:function(a){return g.getStatus(a)==="PENDING"},isPublished:function(a){return g.getStatus(a)==="PUBLISHED"},getNonFriendsSeenCount:function(a){return((a=a)!=null?a.non_friends_seen_count:a)||0},setNonFriendsSeenCount:function(a,b){if(!a)return;a.non_friends_seen_count=b},getFriendsSeenCount:function(a){return((a=a)!=null?a.friends_seen_count:a)||0},setFriendsSeenCount:function(a,b){if(!a)return;a.friends_seen_count=b},getSeenReceiptsLastSeenTime:function(a){return((a=a)!=null?a.seen_receipts_last_seen_time:a)||0},setSeenReceiptsLastSeenTime:function(a,b){if(!a)return;a.seen_receipts_last_seen_time=b},getSeenReceiptsUnseenCount:function(a){return((a=a)!=null?a.seen_receipts_unseen_count:a)||0},doesThreadHasUnseenViewers:function(a){return!a?!1:g.getSeenReceiptsUnseenCount(a)>0||g.getSeenReceiptsFollowersUnseenCount(a)>0},getSeenReceiptsFollowersUnseenCount:function(a){return((a=a)!=null?a.seen_receipts_followers_unseen_count:a)||0},setSeenReceiptsUnseenCount:function(a,b){if(!a)return;a.seen_receipts_unseen_count=b},setSeenReceiptsFollowersUnseenCount:function(a,b){if(!a)return;a.seen_receipts_followers_unseen_count=b},getOwner:function(a){return(a=a)!=null?a.camera_post_thread_owner:a},getOwnerId:function(a){return b("CameraPostThreadOwnerHelper").getId(g.getOwner(a))},isViewerFriendOfOwner:function(a){return b("CameraPostThreadOwnerHelper").getIsViewerFriend(g.getOwner(a))},getViewers:function(a){return((a=a)!=null?(a=a.story_thread_viewers)!=null?a.edges:a:a)||[]},setViewers:function(a,b){if(!a)return;a.story_thread_viewers={edges:b}},getRootMessage:function(a){return(a=a)!=null?a.root_message:a},getStoryOverlays:function(a){return!a?[]:((a=g.getRootMessage(a))!=null?a.story_overlays:a)||[]},getPoll:function(a){a=this.getStoryOverlays(a).find(function(a){return a.__typename==="StoryOverlayPollSticker"});return!a?null:(a=a)!=null?a.poll:a},getPollVoters:function(a){a=this.getPoll(a);return!a?{}:(a.poll_options||[]).reduce(function(a,b){var c;c=(c=b)!=null?(c=c.voters)!=null?c.nodes:c:c;if(!c||c.length===0)return a;c.forEach(function(c){return a[c.id]=b.index});return a},{})},getMedia:function(a){return(a=g.getRootMessage(a))!=null?a.message_media:a},getMediaId:function(a){return b("CameraPostMediaHelper").getId(g.getMedia(a))},getMediaType:function(a){return b("CameraPostMediaHelper").getType(g.getMedia(a))},getMediaPreviewImage:function(a){return b("CameraPostMediaHelper").getPreviewImage(g.getMedia(a))},getWWWTextFormatMetadata:function(a){return((a=g.getRootMessage(a))!=null?a.www_text_format_metadata:a)||null},getIsPlainText:function(a){return((a=g.getRootMessage(a))!=null?a.is_plain_text:a)||!1},getTextFormatMetadata:function(a){return((a=g.getRootMessage(a))!=null?a.text_format_metadata:a)||null},getBackdropImage:function(a){return((a=g.getRootMessage(a))!=null?a.backdrop_image:a)||null},getMessageText:function(a){return((a=g.getRootMessage(a))!=null?a.message_text:a)||""},getActivityDescription:function(a){return!a?null:a.activity_description||null},getMediaBackground:function(a){if(!a)return null;a=(a=a.background_color_info)!=null?a.color_info:a;return a&&a.length>0?a[0]:null},getLinkAttachment:function(a){return!a?null:a.share_story_attachment||null},getWithTags:function(a){return!a?null:a.with_tags||null},getDefaultBackground:function(a){return!a?null:a.story_default_background||null},getExplicitLocation:function(a){return!a?null:a.explicit_place||null},getInlineActivities:function(a){return!a?null:a.inline_activities||null},getInstagramProfileURL:function(a){return((a=a)!=null?a.instagram_profile_url:a)||null},getOriginalPostStoryAttribution:function(a){return!a?null:((a=g.getRootMessage(a))!=null?a.original_post_story_attribution:a)||null},getNegativeFeedbackActions:function(a){return!a?null:((a=a)!=null?a.negative_feedback_actions:a)||null},getStoryViewerId:function(a){return(a=a)!=null?(a=a.node)!=null?a.id:a:a},getStoryViewerSeenTime:function(a){return((a=a)!=null?a.seen_time:a)||0},makeOptimisticPhotoThread:function(a){var c=this._getDefaultThread();a=b("CameraPostMediaHelper").makeOptimisticPhotoMedia(a);return babelHelpers["extends"]({},c,{is_seen_by_viewer:!1,root_message:{message_media:a},thread_expiry_time:Math.floor(Date.now()/1e3+24*60*60),thread_status:"UPLOADING",time:Math.floor(Date.now()/1e3)})},_getDefaultThread:function(){return{id:null,camera_post_type:null,post_source:null,time:null,thread_expiry_time:null,seen_receipts_last_seen_time:null,seen_receipts_unseen_count:null,seen_receipts_followers_unseen_count:null,thread_status:null,thread_review_status:null,root_message:{message_media:null},latest_message:{id:null},is_seen_by_viewer:null,is_user_story_thread_viewer:null,camera_post_thread_owner:null,friends_seen_count:null,non_friends_seen_count:null,story_thread_viewers:{edges:null},activity_description:null}}};e.exports=g}),null);
__d("FBStoriesBucketHelper",["CameraPostBucketOwnerHelper","CameraPostTypes","CameraPostTypesHelper","CurrentUser","FBStoriesLoggingConstants","FBStoriesThreadHelper","QE2Logger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={getUnseenThread:function(a){var b=h.getThreads(a);return b[Math.max(0,h.getUnseenThreadIndex(a))]}},h={isUserBucket:function(a){return h.getOwnerId(a)===b("CurrentUser").getID()},getLiveVideo:function(a){return(a=a)!=null?a.live_video:a},getMediaIDForLiveBucket:function(a){return(a=a)!=null?(a=a.live_video)!=null?a.id:a:a},isLive:function(a){return!!((a=h.getLiveVideo(a))!=null?a.id:a)},setLiveVideo:function(a,b){if(!a)return;a.live_video=b},hasData:function(a){return!a?!1:this.isLive(a)||h.getThreads(a).length>0},getThreads:function(a){var c=b("CurrentUser").getID(),d=h.getOwnerId(a),e=c===d;d=((c=a)!=null?(c=c.threads)!=null?c.nodes:c:c)||[];return d.filter(function(a){return(e&&b("FBStoriesThreadHelper").isPending(a)||b("FBStoriesThreadHelper").isPublished(a)||b("FBStoriesThreadHelper").isUploading(a))&&!b("FBStoriesThreadHelper").isExpired(a)})},getThreadIDs:function(a){a=h.getThreads(a);return a.map(function(a){return((a=a)!=null?a.id:a)||""})},setThreads:function(a,b){if(!a)return;a.threads={nodes:b}},getUnseenThreadIndex:function(a){var c=h.getThreads(a);a=h.isUserBucket(a);return a?c.findIndex(b("FBStoriesThreadHelper").doesThreadHasUnseenViewers):c.findIndex(b("FBStoriesThreadHelper").notSeenByViewer)},hasNewViewers:function(a){if(!a)return!1;a=this.getThreads(a);a=a.filter(b("FBStoriesThreadHelper").doesThreadHasUnseenViewers);return a.length>0},hasUnseenThreads:function(a){return this.getThreads(a).findIndex(b("FBStoriesThreadHelper").notSeenByViewer)>=0},getPreviewImage:function(a){a=g.getUnseenThread(a);return b("FBStoriesThreadHelper").getMediaPreviewImage(a)},shouldEnablePageStoryReply:function(a){var c=b("CameraPostTypesHelper").isPageStory(h.getCameraPostType(a));if(c){c=b("CurrentUser").getID();b("QE2Logger").logExposureForUser("page_story_reply_www",c);c=h.getOwner(a);return c.is_eligible_for_story_reply==undefined?!1:c.is_eligible_for_story_reply}return!1},getId:function(a){return((a=a)!=null?a.id:a)||""},getCameraPostType:function(a){return((a=a)!=null?a.camera_post_type:a)||b("CameraPostTypes").STORY},getUnseenCount:function(a){return((a=a)!=null?a.unseen_count:a)||0},setUnseenCount:function(a,b){if(!a)return;a.unseen_count=b},hasLiveVideoEnded:function(a){return!!((a=a)!=null?a.has_live_video_ended:a)},setHasLiveVideoEnded:function(a,b){if(!a)return;a.has_live_video_ended=b},getOwner:function(a){return((a=a)!=null?a.camera_post_bucket_owner:a)||{id:null,name:null,short_name:null,gender:null,is_viewer_friend:!1,profile_picture:null}},getOwnerId:function(a){return b("CameraPostBucketOwnerHelper").getId(h.getOwner(a))},getOwnerGender:function(a){return b("CameraPostBucketOwnerHelper").getGender(h.getOwner(a))},isOwnerEmployee:function(a){return b("CameraPostBucketOwnerHelper").isEmployee(h.getOwner(a))},isViewerEventHost:function(a){return b("CameraPostBucketOwnerHelper").isEventHost(h.getOwner(a))},isViewerPageContentAdmin:function(a){return b("CameraPostBucketOwnerHelper").isViewerPageContentAdmin(h.getOwner(a))},isViewerGroupAdmin:function(a){return b("CameraPostBucketOwnerHelper").isViewerGroupAdmin(h.getOwner(a))},isViewerGroupModerator:function(a){return b("CameraPostBucketOwnerHelper").isViewerGroupModerator(h.getOwner(a))},isViewerFriendOfOwner:function(a){return b("CameraPostBucketOwnerHelper").isViewerFriend(h.getOwner(a))},getOwnerProfilePictureUri:function(a){return b("CameraPostBucketOwnerHelper").getProfilePictureUri(h.getOwner(a))},getOwnerCoverPhotoUri:function(a){return b("CameraPostBucketOwnerHelper").getCoverPhotoUri(h.getOwner(a))},getOwnerName:function(a,c){c===void 0&&(c=!1);var d=h.getCameraPostType(a);a=h.getOwner(a);if(!c&&b("CameraPostTypesHelper").isStory(d)&&a.short_name)return a.short_name;else return a.name},getLatestThreadCreationTime:function(a){return!a?null:(a=a)!=null?a.latest_thread_creation_time:a},getLoggingType:function(a){__p&&__p();if(!a)return b("FBStoriesLoggingConstants").MISSING_STORY_DATA;if(h.isUserBucket(a))return b("FBStoriesLoggingConstants").SELF_STORY;var c=h.getCameraPostType(a);if(b("CameraPostTypesHelper").isPageStory(c))return b("FBStoriesLoggingConstants").PAGE_STORY;if(b("CameraPostTypesHelper").isGroupStory(c))return b("FBStoriesLoggingConstants").GROUP_STORY;if(b("CameraPostTypesHelper").isEventStory(c))return b("FBStoriesLoggingConstants").EVENT_STORY;if(b("CameraPostTypesHelper").isPromotionStory(c))return b("FBStoriesLoggingConstants").STORY_PROMOTION;return!h.isViewerFriendOfOwner(a)?b("FBStoriesLoggingConstants").FOLLOWEE_STORY:b("FBStoriesLoggingConstants").FRIEND_STORY},addThreadToBucket:function(a,b){var c=h.getThreads(a);h.setThreads(a,c.concat(b))},getDefaultBucket:function(){return{id:null,camera_post_type:null,unseen_count:0,ranking:null,live_video:null,camera_post_bucket_owner:null,threads:null,latest_thread_creation_time:null}},isUploading:function(a){a=h.getThreads(a);a=a.filter(function(a){return b("FBStoriesThreadHelper").isUploading(a)});return a.length>0}};e.exports=h}),null);
__d("FBStoriesLiveVideoActionTypes",["keyMirror"],(function(a,b,c,d,e,f){a=b("keyMirror")({SET_UI_COMPONENTS:null,REMOVE_UI_COMPONENTS:null,LIVE_BUCKET_LOADED:null,LOAD_UI_COMPONENTS_FAILED:null});e.exports=a}),null);
__d("FBStoriesMutedBucketOwnerHelper",[],(function(a,b,c,d,e,f){"use strict";a={getId:function(a){return((a=a)!=null?a.id:a)||""},getName:function(a){return((a=a)!=null?a.name:a)||""},getProfilePictureUri:function(a){return((a=a)!=null?a.profilePictureUri:a)||""},getMuted:function(a){return!!((a=a)!=null?a.muted:a)},setMuted:function(a,b){a.muted=b}};e.exports=a}),null);
__d("FBStoriesMutedBucketOwnersActionTypes",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({LOADING:"FB_STORIES_MUTED_BUCKET_OWNERS.LOADING",LOADED:"FB_STORIES_MUTED_BUCKET_OWNERS.LOADED",LOADED_ERROR:"FB_STORIES_MUTED_BUCKET_OWNERS.LOADED_ERROR",SET_IS_CURRENTLY_MUTING:"FB_STORIES_MUTED_BUCKET_OWNERS.SET_IS_CURRENTLY_MUTING",UPDATE_MUTED_OPTIMISTIC:"FB_STORIES_MUTED_BUCKET_OWNERS.UPDATE_MUTED_OPTIMISTIC"});e.exports=a}),null);
__d("fbStoriesMutedBucketOwnersSelectors",[],(function(a,b,c,d,e,f){"use strict";var g={isLoading:function(a){return a.data.isLoading()},getMutedBucketOwners:function(a){a=a.data;return a.hasValue()?a.getValueEnforcing():[]},getCurrentlyMutingBucketOwners:function(a){return a.currentlyMutingBucketOwners},isCurrentlyMutingBucketOwners:function(a){return g.getCurrentlyMutingBucketOwners(a).length!==0},canReload:function(a){return!this.isCurrentlyMutingBucketOwners(a)&&!this.isLoading(a)}};e.exports=g}),null);
__d("fbStoriesMutedBucketOwnersReducer",["FBStoriesMutedBucketOwnerHelper","FBStoriesMutedBucketOwnersActionTypes","LoadObject","fbStoriesMutedBucketOwnersSelectors"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){__p&&__p();switch(c.type){case b("FBStoriesMutedBucketOwnersActionTypes").LOADING:return babelHelpers["extends"]({},a,{data:b("LoadObject").loading()});case b("FBStoriesMutedBucketOwnersActionTypes").LOADED:return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue(c.data),currentlyMutingBucketOwners:[]});case b("FBStoriesMutedBucketOwnersActionTypes").LOADED_ERROR:return babelHelpers["extends"]({},a,{data:b("LoadObject").withError(new Error(c.error.errorSummary))});case b("FBStoriesMutedBucketOwnersActionTypes").SET_IS_CURRENTLY_MUTING:var d=a.currentlyMutingBucketOwners,e=a.currentlyMutingBucketOwners.indexOf(c.ownerID);c.value&&e===-1?(d=d.slice(),d.push(c.ownerID)):!c.value&&e!==-1&&(d=d.slice(),d.splice(e,1));return babelHelpers["extends"]({},a,{currentlyMutingBucketOwners:d});case b("FBStoriesMutedBucketOwnersActionTypes").UPDATE_MUTED_OPTIMISTIC:e=b("fbStoriesMutedBucketOwnersSelectors").getMutedBucketOwners(a);var f=c.value;d=!1;var g=e.map(function(a){if(b("FBStoriesMutedBucketOwnerHelper").getId(a)===c.ownerID){var e=babelHelpers["extends"]({},a);d=!0;b("FBStoriesMutedBucketOwnerHelper").setMuted(e,f);return e}else return a});d||(g=e.concat({id:c.ownerID,name:c.ownerName,profilePictureUri:c.ownerProfilePictureUri,muted:f}));return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue(g)});default:return a}}e.exports=a}),null);
__d("FBStoriesMutedBucketOwnersStore",["FBStoriesDispatcher","FluxReduceStore","LoadObject","fbStoriesMutedBucketOwnersReducer"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return{data:b("LoadObject").empty(),currentlyMutingBucketOwners:[]}};a.prototype.reduce=function(a,c){return b("fbStoriesMutedBucketOwnersReducer")(a,c)};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("FBStoriesDispatcher"))}),null);
/**
 * License: https://www.facebook.com/legal/license/szRD2xg2JXY/
 */
__d("reselect-3.0.1",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={},h={exports:g};function i(){__p&&__p();g.__esModule=!0;g.defaultMemoize=c;g.createSelectorCreator=e;g.createStructuredSelector=h;function a(a,b){return a===b}function b(a,b,c){if(b===null||c===null||b.length!==c.length)return!1;var d=b.length;for(var e=0;e<d;e++)if(!a(b[e],c[e]))return!1;return!0}function c(c){var d=arguments.length>1&&arguments[1]!==undefined?arguments[1]:a,e=null,f=null;return function(){b(d,e,arguments)||(f=c.apply(null,arguments));e=arguments;return f}}function d(a){a=Array.isArray(a[0])?a[0]:a;if(!a.every(function(a){return typeof a==="function"})){var b=a.map(function(a){return typeof a}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, "+("instead received the following types: ["+b+"]"))}return a}function e(a){__p&&__p();for(var b=arguments.length,e=Array(b>1?b-1:0),f=1;f<b;f++)e[f-1]=arguments[f];return function(){__p&&__p();for(var b=arguments.length,f=Array(b),g=0;g<b;g++)f[g]=arguments[g];var h=0,i=f.pop(),j=d(f),k=a.apply(undefined,[function(){h++;return i.apply(null,arguments)}].concat(e)),l=c(function(){var a=[],b=j.length;for(var c=0;c<b;c++)a.push(j[c].apply(null,arguments));return k.apply(null,a)});l.resultFunc=i;l.recomputations=function(){return h};l.resetRecomputations=function(){return h=0};return l}}var f=g.createSelector=e(c);function h(a){__p&&__p();var b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:f;if(typeof a!=="object")throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof a);var c=Object.keys(a);return b(c.map(function(b){return a[b]}),function(){for(var a=arguments.length,b=Array(a),d=0;d<a;d++)b[d]=arguments[d];return b.reduce(function(a,b,d){a[c[d]]=b;return a},{})})}}var j=!1,k=function(){j||(j=!0,i());return h.exports};a=function(a){switch(a){case undefined:return k()}};e.exports=a}),null);
__d("reselect",["reselect-3.0.1"],(function(a,b,c,d,e,f){e.exports=b("reselect-3.0.1")()}),null);
__d("fbStoriesRootSelectors",["FBStoriesBucketHelper","reselect"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("reselect").createSelector;var g=function(a,b,c){return c===0?a:(a=b)!=null?a[c-1]:a};c=function(a){return a.data};d=a([c],function(a){return a.hasValue()?a.getValueEnforcing():{friendsBucketData:[],userBucketData:b("FBStoriesBucketHelper").getDefaultBucket(),userInfo:{userName:"",userID:"",userGender:"",userProfilePic:{uri:""}}}});f=a(c,function(a){return a.isLoading()});c=a([d],function(a){return a.userBucketData||{}});var h=a([c],function(a){return a&&a.id}),i=a([d],function(a){return a.friendsBucketData||[]}),j=a([i],function(a){return a.map(function(a){return a.id?a.id:""})});h=a([j,h],function(b,a){return[a].concat(b)});d=a([d],function(a){return a.userInfo||{}});var k=function(a){return a.selectedBucketIndex};k=a([k,c,i],function(b,c,a){return g(c,a,b)});var l=a([k],function(a){return a&&a.id}),m=a(c,function(a){return b("FBStoriesBucketHelper").isUploading(a)});a=a([i,c],function(a,c){c=[c].concat(a);return c.reduce(function(a,c){if(!c||!c.id)return a;if(!b("FBStoriesBucketHelper").hasData(c))return a;c={bucketID:b("FBStoriesBucketHelper").getId(c),cameraPostType:b("FBStoriesBucketHelper").getCameraPostType(c),owner:b("FBStoriesBucketHelper").getOwner(c),previewImageUri:b("FBStoriesBucketHelper").getPreviewImage(c),profileImageUri:b("FBStoriesBucketHelper").getOwnerProfilePictureUri(c),hasUnseenThreads:b("FBStoriesBucketHelper").hasUnseenThreads(c),hasNewViewers:b("FBStoriesBucketHelper").hasNewViewers(c),ownedByViewer:b("FBStoriesBucketHelper").isUserBucket(c),isLive:b("FBStoriesBucketHelper").isLive(c),latestThreadCreationTime:b("FBStoriesBucketHelper").getLatestThreadCreationTime(c),actorName:b("FBStoriesBucketHelper").getOwnerName(c,!0),actorShortName:b("FBStoriesBucketHelper").getOwnerName(c),actorGender:b("FBStoriesBucketHelper").getOwnerGender(c)};return a.concat([c])},[])});e.exports={bucketDescriptors:a,loading:f,userBucketData:c,friendsBucketData:i,friendsBucketIds:j,userInfo:d,bucketIds:h,selectedBucket:k,selectedBucketId:l,uploading:m}}),null);
__d("fbStoriesStateSelectors",["FBStoriesBucketHelper","fbStoriesRootSelectors"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("fbStoriesRootSelectors").bucketIds,h=b("fbStoriesRootSelectors").friendsBucketData,i=b("fbStoriesRootSelectors").selectedBucketId,j=b("fbStoriesRootSelectors").userBucketData,k={bucketByBucketId:function(a,b){b=k.bucketIndexByBucketId(a,b);return k.bucketByIndex(a,b)},bucketByIndex:function(a,b){return b===0?j(a):(a=h(a))!=null?a[b-1]:a},bucketIndexByBucketId:function(a,b){a=g(a);return a.indexOf(b)},isOwnBucket:function(a,c){return(c!=undefined?c:i(a))===b("FBStoriesBucketHelper").getId(j(a))},isProductionDialogLoading:function(a){return a.isProductionDialogLoading}};e.exports=k}),null);
__d("friendsBucketSorter",["CameraPostTypesHelper"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){return function(b,c){var d=b.live_video&&b.live_video.id,e=c.live_video&&c.live_video.id;if(d!==e)return d?-1:1;if(g(b,c))return i(b)?-1:1;if(h(b,c))return j(b)?-1:1;return k(b,c,a)?l(b,a)?-1:1:n(b)>=n(c)?-1:1}}function g(a,b){return m(a,b,i)}function h(a,b){return m(a,b,j)}function i(a){return a.unseen_count>0}function j(a){return b("CameraPostTypesHelper").isEventStory(a.camera_post_type)}function k(a,b,c){return l(a,c)!==l(b,c)}function l(a,b){a=((a=a)!=null?(a=a.threads)!=null?a.nodes:a:a)||[];for(var c=0;c<a.length;c++){var d;d=(d=a[c])!=null?(d=d.camera_post_thread_owner)!=null?d.id:d:d;if(d===b)return!0}return!1}function m(a,b,c){a=c(a);c=c(b);return a!=c}function n(a){return((a=a)!=null?(a=a.ranking)!=null?a.score:a:a)||0}e.exports=a}),null);
__d("FBStoriesStore",["BackstageMediaType","CameraPostMediaHelper","CameraPostTypes","FBStoriesActionTypes","FBStoriesBucketHelper","FBStoriesDataHelper","FBStoriesDispatcher","FBStoriesLiveVideoActionTypes","FBStoriesMutedBucketOwnersStore","FBStoriesThreadHelper","FluxReduceStore","LoadObject","fbStoriesMutedBucketOwnersSelectors","fbStoriesRootSelectors","fbStoriesStateSelectors","friendsBucketSorter"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return{data:b("LoadObject").empty(),selectedBucketIndex:-1,currentThreadIndex:-1,currentThreadPercentDone:0,unseenMode:!1,allBucketsViewed:!1,lastViewedThreadIndexForBucket:new Map(),isProductionDialogLoading:!1,isCommercialBreakRunning:new Map(),isViewerOpen:!1,subscriptionToken:null,viewerEntrypoint:null}};a.prototype.reduce=function(a,c){__p&&__p();switch(c.type){case b("FBStoriesActionTypes").LOADING:return babelHelpers["extends"]({},a,{data:b("LoadObject").loading()});case b("FBStoriesActionTypes").LOADED:var d=c.data,e=d.userInfo,f=d.userBucketData;d=d.friendsBucketData;d=b("FBStoriesDataHelper").getFriendsDataWithEndedLiveBucket(d,this.$FBStoriesStore1(),this.isOwnBucket(this.getSelectedBucketId()));return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userInfo:e,userBucketData:f,friendsBucketData:d})});case b("FBStoriesActionTypes").VIEWER_LIST_LOADED_FOR_THREAD:var g=c.data.node;e=babelHelpers["extends"]({},this.getUserBucketData(),{threads:{nodes:this.$FBStoriesStore2().map(function(a){if(b("FBStoriesThreadHelper").getId(a)===c.threadID){var d=babelHelpers["extends"]({},a);b("FBStoriesThreadHelper").setFriendsSeenCount(d,b("FBStoriesThreadHelper").getFriendsSeenCount(g));b("FBStoriesThreadHelper").setNonFriendsSeenCount(d,b("FBStoriesThreadHelper").getNonFriendsSeenCount(g));b("FBStoriesThreadHelper").setViewers(d,b("FBStoriesThreadHelper").getViewers(g));return d}return a})}});return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:e,userInfo:this.getUserInfo(),friendsBucketData:this.getFriendsBucketData()})});case b("FBStoriesActionTypes").SUBSCRIPTION_BUCKET_UPDATE:var h=c.bucketData;f=b("FBStoriesBucketHelper").getOwnerId(h);if(this.isMutedBucketOwner(f))return a;d=b("FBStoriesBucketHelper").getThreads(h);var i=d.length>0||this.$FBStoriesStore3(h),j=b("FBStoriesBucketHelper").getId(h);e=b("fbStoriesRootSelectors").friendsBucketData(a);f=!1;d=e.reduce(function(a,c){b("FBStoriesBucketHelper").getId(c)===j?(f=!0,i&&a.push(h)):a.push(c);return a},[]);!f&&i&&(d=[h].concat(e));d=b("FBStoriesDataHelper").getFriendsDataWithEndedLiveBucket(d,b("fbStoriesRootSelectors").selectedBucket(a),b("fbStoriesStateSelectors").isOwnBucket(a,b("fbStoriesRootSelectors").selectedBucketId(a)));d.sort(b("friendsBucketSorter")(b("fbStoriesRootSelectors").userInfo(a).userID));return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:b("fbStoriesRootSelectors").userBucketData(a),userInfo:b("fbStoriesRootSelectors").userInfo(a),friendsBucketData:d})});case b("FBStoriesActionTypes").LOADED_ERROR:return babelHelpers["extends"]({},a,{data:b("LoadObject").withError(new Error(c.error.message))});case b("FBStoriesActionTypes").RESET_LOCAL_SEEN_HISTORY:return babelHelpers["extends"]({},a,{lastViewedThreadIndexForBucket:new Map()});case b("FBStoriesActionTypes").SELECTED_BUCKET_IDX_CHANGED:e=c.bucketIndex;return e<0||e>=this.getBucketCount()?a:babelHelpers["extends"]({},a,{selectedBucketIndex:e});case b("FBStoriesActionTypes").SELECTED_THREAD_IDX_CHANGED:d=this.getThreadCountForSelectedBucket();if(!this.isSelectedBucketLive()&&(c.index<0||c.index>=d))return a;e=new Map(a.lastViewedThreadIndexForBucket);e.set(this.getSelectedBucketIndex(),c.index);return babelHelpers["extends"]({},a,{lastViewedThreadIndexForBucket:e,currentThreadIndex:c.index});case b("FBStoriesActionTypes").SELECTED_THREAD_PERCENT_DONE:d=Math.min(100,Math.max(c.percentDone,0));return babelHelpers["extends"]({},a,{currentThreadPercentDone:d});case b("FBStoriesActionTypes").SET_ALL_BUCKETS_VIEWED:e=c.value;return e===a.allBucketsViewed?a:babelHelpers["extends"]({},a,{allBucketsViewed:e,unseenMode:a.unseenMode&&e?!1:a.unseenMode});case b("FBStoriesActionTypes").SET_UNSEEN_MODE:return babelHelpers["extends"]({},a,{unseenMode:c.value});case b("FBStoriesActionTypes").UPDATE_THREAD_SEEN_OPTIMISTIC:var k=this.getSelectedBucketId();d=function(a){__p&&__p();if(b("FBStoriesBucketHelper").getId(a)===k){var d=b("FBStoriesBucketHelper").getUnseenCount(a),e=this.$FBStoriesStore4(a).map(function(a){if(b("FBStoriesThreadHelper").getId(a)===c.threadID){b("FBStoriesThreadHelper").isSeenByViewer(a)||(d=Math.max(d-1,0));var e=babelHelpers["extends"]({},a);b("FBStoriesThreadHelper").setIsSeenByViewer(e,!0);return e}else return a}),f=babelHelpers["extends"]({},a);b("FBStoriesBucketHelper").setUnseenCount(f,d);b("FBStoriesBucketHelper").setThreads(f,e);return f}else return a}.bind(this);e=this.isOwnBucket()?d(this.getUserBucketData()):this.getUserBucketData();d=this.isOwnBucket()?this.getFriendsBucketData():this.getFriendsBucketData().map(d);return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:e,friendsBucketData:d,userInfo:this.getUserInfo()})});case b("FBStoriesActionTypes").UPDATE_THREAD_VIEWERS_SEEN_OPTIMISTIC:e=babelHelpers["extends"]({},this.getUserBucketData(),{threads:{nodes:this.$FBStoriesStore2().map(function(a){if(b("FBStoriesThreadHelper").getId(a)===c.threadID){var d=babelHelpers["extends"]({},a);b("FBStoriesThreadHelper").setSeenReceiptsLastSeenTime(d,Date.now());b("FBStoriesThreadHelper").setSeenReceiptsUnseenCount(d,0);b("FBStoriesThreadHelper").setSeenReceiptsFollowersUnseenCount(d,0);return d}else return a})}});return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:e,userInfo:this.getUserInfo(),friendsBucketData:this.getFriendsBucketData()})});case b("FBStoriesActionTypes").DELETE_THREAD_FROM_BUCKET:var l=c.threadID,m=c.bucketID;if(!this.isUserManagedThread(l,m))return a;d=this.getUserBucketData();e=null;m===b("FBStoriesBucketHelper").getId(d)?(b("FBStoriesBucketHelper").setThreads(d,this.$FBStoriesStore4(d).filter(function(a){return b("FBStoriesThreadHelper").getId(a)!==l})),e=this.getFriendsBucketData()):e=this.getFriendsBucketData().map(function(a){if(b("FBStoriesBucketHelper").getId(a)===m){var c=this.$FBStoriesStore4(a).filter(function(a){return b("FBStoriesThreadHelper").getId(a)!==l}),d=babelHelpers["extends"]({},a);b("FBStoriesBucketHelper").setThreads(d,c);return d}else return a}.bind(this)).filter(function(a){return this.$FBStoriesStore4(a).length>0}.bind(this));var n=a.lastViewedThreadIndexForBucket;l===this.getCurrentThreadIDForSelectedBucket()&&(n=new Map(n),n.set(this.getSelectedBucketIndex(),undefined));return babelHelpers["extends"]({},a,{lastViewedThreadIndexForBucket:n,data:b("LoadObject").withValue({userBucketData:d,friendsBucketData:e,userInfo:this.getUserInfo()})});case b("FBStoriesActionTypes").REMOVE_BUCKET:var o=c.bucketID;n=this.getFriendsBucketData().filter(function(a){return b("FBStoriesBucketHelper").getId(a)!==o});return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:this.getUserBucketData(),friendsBucketData:n,userInfo:this.getUserInfo()})});case b("FBStoriesLiveVideoActionTypes").LIVE_BUCKET_LOADED:d=c.data;e=b("FBStoriesDataHelper").getFriendsBucketDataFromLoadedObject(d);n=[].concat(this.getFriendsBucketData());d=e.reduce(function(a,c){this.$FBStoriesStore3(c)&&this.getBucketIndexByBucketId(b("FBStoriesBucketHelper").getId(c))===-1&&a.push(c);return a}.bind(this),n);return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:this.getUserBucketData(),userInfo:this.getUserInfo(),friendsBucketData:d})});case b("FBStoriesActionTypes").REMOVE_ENDED_LIVE_VIDEO_FROM_BUCKET:var p=c.bucketID;e=this.getFriendsBucketData().map(function(a){b("FBStoriesBucketHelper").getId(a)===p&&(b("FBStoriesBucketHelper").setLiveVideo(a,null),b("FBStoriesBucketHelper").setHasLiveVideoEnded(a,!1));return a});return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:this.getUserBucketData(),friendsBucketData:e,userInfo:this.getUserInfo()})});case b("FBStoriesActionTypes").SET_IS_COMMERCIAL_BREAK_RUNNING:n=new Map(this.getState().isCommercialBreakRunning);return babelHelpers["extends"]({},a,{isCommercialBreakRunning:n.set(c.videoID,c.isCommercialBreakRunning)});case b("FBStoriesActionTypes").UNSELECT_BUCKET:return babelHelpers["extends"]({},a,{selectedBucketIndex:-1,currentThreadIndex:-1});case b("FBStoriesActionTypes").SET_VIEWER_OPEN:return babelHelpers["extends"]({},a,{isViewerOpen:c.value,viewerEntrypoint:c.entrypoint});case b("FBStoriesActionTypes").OPTIMISTIC_CREATE_PHOTO_STORY:d=b("FBStoriesThreadHelper").makeOptimisticPhotoThread(c.imageURL);e=babelHelpers["extends"]({},this.getUserBucketData());b("FBStoriesBucketHelper").addThreadToBucket(e,d);return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:e,friendsBucketData:this.getFriendsBucketData(),userInfo:this.getUserInfo()})});case b("FBStoriesActionTypes").RESET_STATE:return babelHelpers["extends"]({},this.getInitialState());case b("FBStoriesActionTypes").SET_SUBSCRIPTION_TOKEN:return babelHelpers["extends"]({},a,{subscriptionToken:c.token});case b("FBStoriesActionTypes").OPTIMISTIC_POLL_VOTE:var q=c.index,r=this.getSelectedBucketId();n=function(a){__p&&__p();if(b("FBStoriesBucketHelper").getId(a)===r){var c=this.$FBStoriesStore4(a).map(function(a){__p&&__p();if(b("FBStoriesThreadHelper").getId(a)===this.getCurrentThreadIDForSelectedBucket()){var c,d=babelHelpers["extends"]({},a);(((c=d)!=null?(c=c.root_message)!=null?c.story_overlays:c:c)||[]).map(function(a){if(a.__typename==="StoryOverlayPollSticker"){var b=a.poll,c=babelHelpers["extends"]({},b);c.viewer_vote_index=q;c.poll_options=[].concat(b.poll_options);b=c.poll_options[q];b!==undefined&&(b.vote_count+=1);a.poll=c}return a});return d}else return a}.bind(this)),d=babelHelpers["extends"]({},a);b("FBStoriesBucketHelper").setThreads(d,c);return d}else return a}.bind(this);d=this.isOwnBucket()?n(this.getUserBucketData()):this.getUserBucketData();e=this.isOwnBucket()?this.getFriendsBucketData():this.getFriendsBucketData().map(n);return babelHelpers["extends"]({},a,{data:b("LoadObject").withValue({userBucketData:d,friendsBucketData:e,userInfo:this.getUserInfo()})});case b("FBStoriesActionTypes").SET_IS_PRODUCTION_DIALOG_LOADING:return babelHelpers["extends"]({},a,{isProductionDialogLoading:c.value});default:return a}};a.prototype.$FBStoriesStore5=function(){var a=this.getState().data;return a.hasValue()?a.getValueEnforcing():{friendsBucketData:[],userBucketData:b("FBStoriesBucketHelper").getDefaultBucket(),userInfo:{userName:"",userID:"",userGender:"",userProfilePic:{uri:""}}}};a.prototype.getUserBucketData=function(){return this.$FBStoriesStore5().userBucketData||{}};a.prototype.getUserInfo=function(){return this.$FBStoriesStore5().userInfo||{}};a.prototype.getFriendsBucketData=function(){return this.$FBStoriesStore5().friendsBucketData||[]};a.prototype.isMutedBucketOwner=function(a){var c=b("FBStoriesMutedBucketOwnersStore").getState();c=b("fbStoriesMutedBucketOwnersSelectors").getMutedBucketOwners(c);return c.find(function(b){return b.id===a})!==undefined};a.prototype.isLoading=function(){return this.getState().data.isLoading()};a.prototype.getBucketIds=function(){var a=this.getFriendsBucketData().map(function(a){return a.id?a.id:""}),b=this.getUserBucketData().id||"";return[b].concat(a)};a.prototype.getSelectedBucketIndex=function(){return this.getState().selectedBucketIndex};a.prototype.getSelectedBucketId=function(){return this.getBucketIds()[this.getSelectedBucketIndex()]};a.prototype.areAllBucketsViewed=function(){return this.getState().allBucketsViewed};a.prototype.getCameraPostTypeForBucketId=function(a){return b("FBStoriesBucketHelper").getCameraPostType(this.$FBStoriesStore6(a))};a.prototype.doesBucketContainThreadId=function(a,c){a=this.$FBStoriesStore6(a);a=b("FBStoriesBucketHelper").getThreads(a);return a.find(function(a){return b("FBStoriesThreadHelper").getId(a)===c})!==undefined};a.prototype.$FBStoriesStore6=function(a){return this.getBucketByIndex(this.getBucketIndexByBucketId(a))};a.prototype.getBucketIndexByBucketId=function(a){return this.getBucketIds().indexOf(a)};a.prototype.getSelectedBucketCameraPostType=function(){return b("FBStoriesBucketHelper").getCameraPostType(this.$FBStoriesStore1())};a.prototype.getSelectedBucketOwner=function(){return b("FBStoriesBucketHelper").getOwner(this.$FBStoriesStore1())};a.prototype.getSelectedBucketOwnerID=function(){return b("FBStoriesBucketHelper").getOwnerId(this.$FBStoriesStore1())};a.prototype.getSelectedBucketUnseenCount=function(){return b("FBStoriesBucketHelper").getUnseenCount(this.$FBStoriesStore1())};a.prototype.getThreadsForSelectedBucket=function(){return this.$FBStoriesStore4(this.$FBStoriesStore1())};a.prototype.getCurrentThreadIndexForSelectedBucket=function(){return this.getState().currentThreadIndex};a.prototype.getCurrentThreadIDForSelectedBucket=function(){return b("FBStoriesThreadHelper").getId(this.getCurrentThreadForSelectedBucket())};a.prototype.getCurrentThreadStatusForSelectedBucket=function(){return b("FBStoriesThreadHelper").getStatus(this.getCurrentThreadForSelectedBucket())};a.prototype.getCurrentThreadCameraPostTypeForSelectedBucket=function(){return this.isSelectedBucketLive()?b("CameraPostTypes").STORY:b("FBStoriesThreadHelper").getCameraPostType(this.getCurrentThreadForSelectedBucket())};a.prototype.getCurrentThreadMediaTypeForSelectedBucket=function(){return this.isSelectedBucketLive()?b("BackstageMediaType").LIVE:b("FBStoriesThreadHelper").getMediaType(this.getCurrentThreadForSelectedBucket())};a.prototype.getFeedTrackingData=function(a){__p&&__p();var b={};b.is_fb_story=!0;b.media_id=this.getCurrentThreadMediaIDForSelectedBucket();b.camera_post_type=this.getSelectedBucketCameraPostType();b.story_owner_fbid=this.getSelectedBucketOwnerID();b.story_owner_type=this.getSelectedBucketOwnerType();b.story_size=this.getThreadCountForSelectedBucket();b.new_content_size=this.getSelectedBucketUnseenCount();b.bucket_index=this.getSelectedBucketIndex();b.event=a;b.bucket_ids=this.getBucketIds();a=this.getUserBucketData();a&&(b.bucket_data=a);a=this.getCurrentThreadData();a&&(b.thread_data=a);return b};a.prototype.getCurrentThreadMediaIDForSelectedBucket=function(){if(this.isSelectedBucketLive()){var a=this.getThreadDataForSelectedLiveBucket();return a&&a.media.id}return b("FBStoriesThreadHelper").getMediaId(this.getCurrentThreadForSelectedBucket())};a.prototype.getCurrentThreadMediaViewerCountForSelectedBucket=function(){var a=this.getCurrentThreadForSelectedBucket();return b("FBStoriesThreadHelper").getNonFriendsSeenCount(a)+b("FBStoriesThreadHelper").getFriendsSeenCount(a)};a.prototype.getCurrentThreadForSelectedBucket=function(){return this.getThreadsForSelectedBucket()[this.getCurrentThreadIndexForSelectedBucket()]};a.prototype.getCurrentThreadData=function(){return this.isSelectedBucketLive()?this.getThreadDataForSelectedLiveBucket():this.$FBStoriesStore7(this.getState().currentThreadIndex)};a.prototype.shouldDisableReply=function(){var a=b("FBStoriesBucketHelper").shouldEnablePageStoryReply(this.$FBStoriesStore1());if(a==!0)return!1;a=this.isOwnThread();var c=b("FBStoriesBucketHelper").isViewerFriendOfOwner(this.$FBStoriesStore1()),d=b("FBStoriesThreadHelper").isViewerFriendOfOwner(this.getCurrentThreadForSelectedBucket());return a||!c&&!d||this.isSelectedBucketLive()};a.prototype.getNonFriendsSeenCount=function(){return b("FBStoriesThreadHelper").getNonFriendsSeenCount(this.getCurrentThreadForSelectedBucket())};a.prototype.getFriendsSeenCount=function(){return b("FBStoriesThreadHelper").getFriendsSeenCount(this.getCurrentThreadForSelectedBucket())};a.prototype.isOwnBucket=function(a){return(a!=undefined?a:this.getSelectedBucketId())===b("FBStoriesBucketHelper").getId(this.getUserBucketData())};a.prototype.isOwnThread=function(){if(this.isOwnBucket())return!0;var a=this.getCurrentThreadForSelectedBucket();a=b("FBStoriesThreadHelper").getOwnerId(a);return a===this.getUserInfo().userID};a.prototype.isBucketViewerEventHost=function(){var a=this.$FBStoriesStore1();return b("FBStoriesBucketHelper").isViewerEventHost(a)};a.prototype.isCurrentThreadUserManaged=function(){return this.isUserManagedThread(this.getCurrentThreadIDForSelectedBucket()||"",this.getSelectedBucketId())};a.prototype.isCurrentBucketUserManaged=function(){return this.isUserManagedBucket(this.getSelectedBucketId())};a.prototype.isUserManagedThread=function(a,c){var d=this.$FBStoriesStore6(c);if(!d)return!1;a=this.$FBStoriesStore8(a,d);d=b("FBStoriesThreadHelper").getOwnerId(a);return a&&d===this.getUserInfo().userID||this.isUserManagedBucket(c)};a.prototype.isUserManagedBucket=function(a){a=this.$FBStoriesStore6(a);return!a?!1:b("FBStoriesBucketHelper").getId(a)===b("FBStoriesBucketHelper").getId(this.getUserBucketData())||b("FBStoriesBucketHelper").isViewerEventHost(a)||b("FBStoriesBucketHelper").isViewerPageContentAdmin(a)||b("FBStoriesBucketHelper").isViewerGroupModerator(a)||b("FBStoriesBucketHelper").isViewerGroupAdmin(a)};a.prototype.canSeeCurrentThreadViewCount=function(){return this.isOwnThread()&&!this.isSelectedBucketLive()||this.isCurrentBucketPageAdmin()};a.prototype.canOpenCurrentThreadViewerSheet=function(){return this.isOwnThread()&&!this.isSelectedBucketLive()};a.prototype.isCurrentBucketGroupAdmin=function(){return this.isGroupAdminBucket(this.getSelectedBucketId())};a.prototype.isCurrentBucketPageAdmin=function(){return this.isPageAdminBucket(this.getSelectedBucketId())};a.prototype.isGroupAdminBucket=function(a){a=this.$FBStoriesStore6(a);return!a?!1:b("FBStoriesBucketHelper").isViewerGroupModerator(a)||b("FBStoriesBucketHelper").isViewerGroupAdmin(a)};a.prototype.isPageAdminBucket=function(a){a=this.$FBStoriesStore6(a);return!a?!1:b("FBStoriesBucketHelper").isViewerPageContentAdmin(a)};a.prototype.isCurrentThreadReviewStatusPending=function(){var a=this.getThreadsForSelectedBucket()[this.getCurrentThreadIndexForSelectedBucket()];return b("FBStoriesThreadHelper").isReviewStatusPending(a)};a.prototype.getBucketCount=function(){return this.getFriendsBucketData().length+1};a.prototype.hasDataInSelectedBucket=function(){return b("FBStoriesBucketHelper").hasData(this.$FBStoriesStore1())};a.prototype.hasOwnBucketViewers=function(){return this.userBucketIsLive()?!1:b("FBStoriesBucketHelper").hasNewViewers(this.getUserBucketData())};a.prototype.hasOwnBucketUpdates=function(){return this.userBucketIsLive()?!1:b("FBStoriesBucketHelper").hasUnseenThreads(this.getUserBucketData())};a.prototype.hasOwnBucketContent=function(){return this.$FBStoriesStore2().length>0||this.userBucketIsLive()};a.prototype.getCurrentThreadPercentDone=function(){return this.getState().currentThreadPercentDone};a.prototype.getThreadCountForSelectedBucket=function(){return this.getThreadsForSelectedBucket().length};a.prototype.userBucketIsLive=function(){return this.$FBStoriesStore3(this.getUserBucketData())};a.prototype.isSelectedBucketLive=function(){return this.$FBStoriesStore3(this.$FBStoriesStore1())};a.prototype.getSelectedBucketOwnerType=function(){return b("FBStoriesBucketHelper").getLoggingType(this.$FBStoriesStore1())};a.prototype.$FBStoriesStore3=function(a){return b("FBStoriesBucketHelper").isLive(a)};a.prototype.getCurrentThreadViewers=function(){__p&&__p();var a={hasNewViewers:!1,hasNewFriendViewers:!1,hasNewConnectionsViewers:!1,friends:[],connections:[],totalCount:0,totalNew:0,nonFriendsCount:0};if(!this.canSeeCurrentThreadViewCount())return a;var c=this.getCurrentThreadForSelectedBucket(),d=b("FBStoriesThreadHelper").getViewers(c),e=this.getUserInfo().userID,f=b("FBStoriesThreadHelper").getPollVoters(c);a=d.reduce(function(a,d){__p&&__p();var g=b("FBStoriesThreadHelper").getStoryViewerId(d);if(!g)return a;if(g!==e){var h;h=((h=d)!=null?(h=h.node)!=null?h.is_viewer_friend:h:h)||!1;var i=h?"friends":"connections",j=b("FBStoriesThreadHelper").getStoryViewerSeenTime(d),k=j>=b("FBStoriesThreadHelper").getSeenReceiptsLastSeenTime(c);a[i].push(babelHelpers["extends"]({},d.node,{seenTime:j,isNewViewer:k,votedPollOptionIndex:f[g]}));a.totalNew+=k?1:0;a.hasNewViewers=a.hasNewViewers||k;a.hasNewFriendViewers=a.hasNewFriendViewers||k&&h;a.hasNewConnectionsViewers=a.hasNewViewers||k&&!h}return a},a);var g=this.getNonFriendsSeenCount();return Object.assign(a,{totalCount:g+d.length,nonFriendsCount:g})};a.prototype.isUnseenMode=function(){return this.getState().unseenMode};a.prototype.getThreadCount=function(a){__p&&__p();var b=this.getBucketByIndex(a);if(this.$FBStoriesStore3(b))return 0;if(a===0){var c=this.$FBStoriesStore4(this.getUserBucketData());return c.length}if(a>0){c=this.$FBStoriesStore4(b);return c.length}return-1};a.prototype.getUnseenThreadIndex=function(a){return b("FBStoriesBucketHelper").getUnseenThreadIndex(this.getBucketByIndex(a))};a.prototype.getAllowedNavigationType=function(){var a=this.getSelectedBucketIndex(),c=a===0||a==1&&!b("FBStoriesBucketHelper").hasData(this.getUserBucketData());a=a===this.getBucketCount()-1;c=c&&this.getCurrentThreadIndexForSelectedBucket()==0;a=a&&this.getCurrentThreadIndexForSelectedBucket()===this.getThreadsForSelectedBucket().length-1;if(c)return"NEXT_ONLY";return a?"PREV_ONLY":"BOTH"};a.prototype.hasSeenBucketInCurrentSession=function(a){var b=this.getState().lastViewedThreadIndexForBucket;return b.get(a)!==undefined};a.prototype.getLastSeenThreadIndexForBucket=function(a){var b=this.getState().lastViewedThreadIndexForBucket;b=b.get(a);return b==undefined?0:b};a.prototype.$FBStoriesStore2=function(){return this.$FBStoriesStore4(this.getUserBucketData())};a.prototype.$FBStoriesStore1=function(){return this.getBucketByIndex(this.getSelectedBucketIndex())};a.prototype.getBucketByIndex=function(a){var b;return a===0?this.getUserBucketData():(b=this.getFriendsBucketData())!=null?b[a-1]:b};a.prototype.$FBStoriesStore8=function(a,b){b=this.$FBStoriesStore4(b);b=b.filter(function(b){return b.id===a});return b.length>0?b[0]:null};a.prototype.$FBStoriesStore4=function(a){return b("FBStoriesBucketHelper").getThreads(a)};a.prototype.$FBStoriesStore7=function(a){var c=this.getSelectedBucketOwner();a=this.getThreadsForSelectedBucket()[a];if(!a)return null;var d=b("FBStoriesThreadHelper").getMedia(a),e=b("FBStoriesThreadHelper").getWWWTextFormatMetadata(a),f=b("FBStoriesThreadHelper").getTextFormatMetadata(a),g=b("FBStoriesThreadHelper").getBackdropImage(a),h=b("FBStoriesThreadHelper").getMessageText(a),i=b("FBStoriesThreadHelper").getIsPlainText(a),j=b("FBStoriesThreadHelper").getInstagramProfileURL(a),k=b("FBStoriesThreadHelper").getOriginalPostStoryAttribution(a);return{isLive:!1,media:d,bucketOwner:c,threadOwner:b("FBStoriesThreadHelper").getOwner(a)||{name:null,id:null,is_viewer_friend:!1,profile_picture:null},participants:[],isSeen:b("FBStoriesThreadHelper").isSeenByViewer(a),latestMessageID:b("FBStoriesThreadHelper").getLatestMessageID(a),time:b("FBStoriesThreadHelper").getTime(a),threadID:b("FBStoriesThreadHelper").getId(a),cameraPostType:b("FBStoriesThreadHelper").getCameraPostType(a),cameraPostSource:b("FBStoriesThreadHelper").getCameraPostSource(a),wwwTextFormatMetadata:e,messageText:h,textFormatMetadata:f,backdropImage:g,instagramProfileURL:j,isPlainText:i,originalPostStoryAttribution:k,activityDescription:b("FBStoriesThreadHelper").getActivityDescription(a),withTags:b("FBStoriesThreadHelper").getWithTags(a),explicitLocation:b("FBStoriesThreadHelper").getExplicitLocation(a),inlineActivities:b("FBStoriesThreadHelper").getInlineActivities(a),defaultBackground:b("FBStoriesThreadHelper").getDefaultBackground(a),linkAttachment:b("FBStoriesThreadHelper").getLinkAttachment(a),mediaBackground:b("FBStoriesThreadHelper").getMediaBackground(a),negativeFeedbackActions:b("FBStoriesThreadHelper").getNegativeFeedbackActions(a)}};a.prototype.getThreadDataForSelectedLiveBucket=function(){var a=this.$FBStoriesStore1();return this.$FBStoriesStore9(a)};a.prototype.$FBStoriesStore9=function(a){if(!a)return null;var c=b("FBStoriesBucketHelper").getLiveVideo(a);if(!c||!this.$FBStoriesStore3(a))return null;var d=this.getSelectedBucketOwner();return{isLive:!0,media:c,bucketOwner:d,isSeen:!1,cameraPostType:b("FBStoriesBucketHelper").getCameraPostType(a)}};a.prototype.isSelectedBucketLiveAndEnded=function(){return this.isSelectedBucketLive()&&b("FBStoriesBucketHelper").hasLiveVideoEnded(this.$FBStoriesStore1())};a.prototype.getIsCommercialBreakRunning=function(a){return!!this.getState().isCommercialBreakRunning.get(a)};a.prototype.getVideoMediaIdForBucketIndexAndThreadIndex=function(a,c){__p&&__p();a=this.getBucketByIndex(a);if(!a)return null;if(this.$FBStoriesStore3(a)){var d=this.$FBStoriesStore9(a);return(d=d)!=null?(d=d.media)!=null?d.id:d:d}d=this.$FBStoriesStore4(a);if(c<0||c>=d.length)return null;a=b("FBStoriesThreadHelper").getMedia(d[c]);if(!a)return null;return!b("CameraPostMediaHelper").isVideo(a)?null:a.id};a.prototype.isViewerOpen=function(){return this.getState().isViewerOpen};a.prototype.getCurrentViewerEntrypoint=function(){return this.getState().viewerEntrypoint};a.prototype.getCurrentThreadOverlays=function(){return b("FBStoriesThreadHelper").getStoryOverlays(this.getCurrentThreadForSelectedBucket())};a.prototype.isProductionDialogLoading=function(){return this.getState().isProductionDialogLoading};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("FBStoriesDispatcher"))}),null);
__d("FBStoriesMutedBucketOwnersActions",["CurrentUser","FBLogger","FBStoriesDataHelper","FBStoriesDispatcher","FBStoriesGraphQLAPI","FBStoriesMutedBucketOwnersActionTypes","FBStoriesMutedBucketOwnersStore","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBStoriesDispatcher").dispatch;function a(){b("FBStoriesDispatcher").explicitlyRegisterStores([b("FBStoriesMutedBucketOwnersStore")])}a.prototype.loadMutedOwners=function(){g({type:b("FBStoriesMutedBucketOwnersActionTypes").LOADING}),b("promiseDone")(b("FBStoriesGraphQLAPI").loadMutedBucketOwnersList(),function(a){g({type:b("FBStoriesMutedBucketOwnersActionTypes").LOADED,data:b("FBStoriesDataHelper").getMutedBucketOwnersFromLoadedQuery(a)})},function(){b("FBLogger")("fbstories").mustfix("failed to load muted bucket owners for: %s",b("CurrentUser").getID())})};a.prototype.setBucketOwnerMuted=function(a,c,d,e){b("promiseDone")(b("FBStoriesGraphQLAPI").muteBucketOwner(b("CurrentUser").getID(),a,e),function(){g({type:b("FBStoriesMutedBucketOwnersActionTypes").SET_IS_CURRENTLY_MUTING,ownerID:a,value:!1})},function(){b("FBLogger")("fbstories").mustfix("failed to mute bucket with owner id: %s",a)}),g({type:b("FBStoriesMutedBucketOwnersActionTypes").SET_IS_CURRENTLY_MUTING,ownerID:a,value:!0}),g({type:b("FBStoriesMutedBucketOwnersActionTypes").UPDATE_MUTED_OPTIMISTIC,ownerID:a,ownerName:c,ownerProfilePictureUri:d,value:e})};e.exports=new a()}),null);
__d("FBStoriesActionsHelper",["FBStoriesStore","gkx","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={},h=b("gkx")("AT5Vk6SIJNYhRNht6t3dSXuMcJHrIAcE8oGUm6ucSsY4spj2_mjNkw4I6shZAzSklNKSIYkWjhBbQcGAGNmmKdA7"),i=function(a,c){__p&&__p();var d=c?a+1:a-1,e=0,f=b("FBStoriesStore").getLastSeenThreadIndexForBucket(a),h=b("FBStoriesStore").hasSeenBucketInCurrentSession(a),i=g[a];if(!i)i={prev:null,next:null,curThreadIdx:f},g[a]=i;else{h&&(i.curThreadIdx=f);h=i.next!=null?g[i.next]:null;f=i.prev!=null?g[i.prev]:null;if(c&&h!=null&&h.curThreadIdx!=null){h.prev=a;return{nextBucketIndex:b("nullthrows")(i.next),nextThreadIndex:h.curThreadIdx}}else if(!c&&f!=null&&f.curThreadIdx!=null){f.next=a;return{nextBucketIndex:b("nullthrows")(i.prev),nextThreadIndex:f.curThreadIdx}}}h=!1;while(h===!1&&!j.checkAllBucketsViewed(d))e=b("FBStoriesStore").getUnseenThreadIndex(d),h=e>=0,h||(d=c?d+1:d-1);if(h){c?b("nullthrows")(i).next=d:b("nullthrows")(i).prev=d;f=g[d];f||(g[d]={prev:null,next:null,curThreadIdx:e},f=g[d]);c?b("nullthrows")(f).prev=a:b("nullthrows")(f).next=a}return{nextBucketIndex:d,nextThreadIndex:e}},j={checkAllBucketsViewed:function(a){var c=b("FBStoriesStore").getBucketCount();return a>=c||a<0},resetNavMap:function(){g={}},getNextBucketAndThreadIndex:function(a,c){__p&&__p();var d=c?a+1:a-1,e=0;if(b("FBStoriesStore").isUnseenMode())if(h){var f=i(a,c);d=f.nextBucketIndex;e=f.nextThreadIndex}else{f=!1;while(f===!1&&!j.checkAllBucketsViewed(d))e=b("FBStoriesStore").getUnseenThreadIndex(d),f=e>=0,f||(d=c?d+1:d-1);if(!f&&!c){d=a-1;e=b("FBStoriesStore").getLastSeenThreadIndexForBucket(d);while(!b("FBStoriesStore").hasSeenBucketInCurrentSession(d)&&d>=0)d-=1,e=b("FBStoriesStore").getLastSeenThreadIndexForBucket(d)}}else c||(e=b("FBStoriesStore").getLastSeenThreadIndexForBucket(d));return{nextBucketIndex:d,nextThreadIndex:e}}};e.exports=j}),null);
__d("FBStoriesDataHelper",["CameraPostTypesHelper","CurrentUser","FBLogger","FBStoriesActions","FBStoriesActionTypes","FBStoriesBucketHelper","FBStoriesDispatcher","FBStoriesGraphQLAPI","dotAccess","friendsBucketSorter","gkx","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={getBucketsDataFromLoadedObject:function(a){__p&&__p();var c=g.getUserDataNodesFromLoadedObject(a);c=c[0];var d=g.getUserInfoFromLoadedObject(a);a=g.getFriendsBucketDataFromLoadedObject(a);a=a.reduce(function(a,c){__p&&__p();var d=b("FBStoriesBucketHelper").getThreads(c);d=d&&d.length>0;var e=b("FBStoriesBucketHelper").getCameraPostType(c),f=b("CameraPostTypesHelper").isStoryNux(e),g=b("CameraPostTypesHelper").isStory(e),h=b("CameraPostTypesHelper").isEventStory(e),i=b("CameraPostTypesHelper").isPageStory(e);e=b("CameraPostTypesHelper").isGroupStory(e);var j=b("gkx")("AT7HjiDwnMVL3AIA8BSudVOFxA-IzyrieUd8NdxFJOoIjXI3kpzXujbNr99ZiCMNBY0PFFBmtxsMTVC_JOHwUWMQ_JsNoMIejCjR_HtHsnVnTA");if(j&&b("FBStoriesBucketHelper").isOwnerEmployee(c))return a;if(f)return a;if(!d)return b("FBStoriesBucketHelper").isLive(c)?a.concat([c]):a;return g||i||h||e?a.concat([c]):a},[]);a.sort(b("friendsBucketSorter")(d.userID));return{userInfo:d,userBucketData:c,friendsBucketData:a}},getFriendsBucketDataFromLoadedObject:function(a){return((a=a)!=null?(a=a.me)!=null?(a=a.friends_stories_buckets)!=null?a.nodes:a:a:a)||[]},getUserDataNodesFromLoadedObject:function(a){return((a=a)!=null?(a=a.me)!=null?(a=a.story_bucket)!=null?a.nodes:a:a:a)||[]},getUserInfoFromLoadedObject:function(a){var b;return{userName:(b=a)!=null?(b=b.me)!=null?b.name:b:b,userID:(b=a)!=null?(b=b.me)!=null?b.id:b:b,userGender:(b=a)!=null?(b=b.me)!=null?b.gender:b:b,userProfilePic:(b=a)!=null?(b=b.me)!=null?b.profile_picture:b:b}},getFriendsDataWithEndedLiveBucket:function(a,c,d){__p&&__p();if(!c||d||!b("FBStoriesBucketHelper").isLive(c))return a;var e=b("FBStoriesBucketHelper").getId(c);d=!1;a=a.reduce(function(a,f){if(b("FBStoriesBucketHelper").getId(f)===e){d=!0;var g=!b("FBStoriesBucketHelper").isLive(f);c&&g&&(b("FBStoriesBucketHelper").setLiveVideo(f,c.live_video),b("FBStoriesBucketHelper").setHasLiveVideoEnded(f,!0))}a.push(f);return a},[]);d||(b("FBStoriesBucketHelper").setHasLiveVideoEnded(c,!0),a=[c].concat(a));return a},getMutedBucketOwnersFromLoadedQuery:function(a){a=((a=a)!=null?(a=a.me)!=null?(a=a.unfollowees_for_camera_post_story)!=null?a.edges:a:a:a)||[];return a.map(function(a){var b,c,d;a=a.node;d=(d=a)!=null?d.id:d;c=(c=a)!=null?c.name:c;b=(b=a)!=null?(b=b.profile_picture)!=null?b.uri:b:b;a=(a=a)!=null?(a=a.cover_photo)!=null?(a=a.photo)!=null?(a=a.image)!=null?a.uri:a:a:a:a;return{id:d,name:c,profilePictureUri:a?a:b,muted:!0}})},loadData:function(a){b("promiseDone")(b("FBStoriesGraphQLAPI").load(),function(a){a=g.getBucketsDataFromLoadedObject(a);b("FBStoriesDispatcher").dispatch({type:b("FBStoriesActionTypes").LOADED,data:a})},a?a:function(a){a=a.errors;a.length>0&&a[0].message&&b("FBLogger")("fbstories").mustfix("Error loading user tray data, err msg: %s",a[0].message)})},loadPageBucketData:function(a,c){b("promiseDone")(b("FBStoriesGraphQLAPI").loadPageBucketStoryData(a),function(a){a=b("dotAccess")(a,"node.page_story_bucket.nodes");(a||a.length>0)&&(b("FBStoriesActions").resetStore(),b("FBStoriesActions").loadData(b("CurrentUser").getName(),b("CurrentUser").getID(),null,null,[babelHelpers["extends"]({},a[0])]))},c?c:function(c){c=c.errors;c.length>0&&c[0].message&&b("FBLogger")("fbstories").mustfix("Error loading page story data, page id: %s, err msg: %s",a,c[0].message)})}};e.exports=g}),null);
__d("FBStoriesWWWPerfTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:FBStoriesWWWPerfLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:FBStoriesWWWPerfLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:FBStoriesWWWPerfLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setEventTotalTime=function(a){this.$1.event_total_time=a;return this};a.prototype.setEventType=function(a){this.$1.event_type=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={event_total_time:!0,event_type:!0,vc:!0};e.exports=a}),null);
__d("FBStoriesLoggingHelper",["BackstageMediaType","Banzai","DirectMessagingTypedLogger","FBLogger","FBStoriesBucketHelper","FBStoriesLoggingConstants","FBStoriesStore","FBStoriesWWWPerfTypedLogger","uuid"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={_traySessionID:null,_viewerSessionID:null,_eventStartTimes:{},logStoryTrayLoad:function(a){__p&&__p();this._traySessionID=b("uuid")();var c=a.userBucketData;a=a.friendsBucketData;var d=b("FBStoriesBucketHelper").hasData(c),e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=new Map();b("FBStoriesBucketHelper").isLive(c)&&g++;a.forEach(function(a){__p&&__p();e++;b("FBStoriesBucketHelper").getUnseenCount(a)>0&&f++;b("FBStoriesBucketHelper").isLive(a)&&g++;var c=b("FBStoriesBucketHelper").getLoggingType(a);switch(c){case b("FBStoriesLoggingConstants").PAGE_STORY:h++;break;case b("FBStoriesLoggingConstants").EVENT_STORY:i++;break;case b("FBStoriesLoggingConstants").GROUP_STORY:j++;break;case b("FBStoriesLoggingConstants").STORY_PROMOTION:k++;break;case b("FBStoriesLoggingConstants").FOLLOWEE_STORY:l++;break;case b("FBStoriesLoggingConstants").FRIEND_STORY:m++;break;default:b("FBLogger")("fbstories").mustfix("storyOwnerType not found: %s",c)}c=b("FBStoriesBucketHelper").getOwnerId(a);var d=b("FBStoriesBucketHelper").getThreadIDs(a);if(b("FBStoriesBucketHelper").isLive(a)){a=(a=b("FBStoriesBucketHelper").getLiveVideo(a))!=null?a.id:a;a&&d.push(a)}n.set(c,d)});this._getLogger().setName(b("FBStoriesLoggingConstants").ACTION_TRAY_LOAD).setHasMyStory(d).setNumberStories(e).setNumberNewStories(f).setNumberLiveStories(g).setLiveStoriesInTray(g).setPageStoriesInTray(h).setGroupStoriesInTray(j).setEventStoriesInTray(i).setFolloweeStoriesInTray(l).setFriendStoriesInTray(m).setPromotionStoriesInTray(k).setStoryThreadIds(n).setTraySessionID(this._traySessionID).log()},storyLog:function(a,c){a===b("FBStoriesLoggingConstants").ACTION_OPEN_STORY&&!this._viewerSessionID&&(this._viewerSessionID=b("uuid")());var d=b("FBStoriesStore").getSelectedBucketCameraPostType(),e=b("FBStoriesStore").getSelectedBucketOwnerID(),f=b("FBStoriesStore").getSelectedBucketOwnerType(),g=b("FBStoriesStore").getThreadCountForSelectedBucket(),h=b("FBStoriesStore").getSelectedBucketUnseenCount()>0,i=b("FBStoriesStore").getSelectedBucketIndex();this._getLogger().setCameraPostType(d).setName(a).setActionSource(c).setStoryOwner(e).setStoryOwnerType(f).setThreadCount(g).setHasNewContent(h).setStoryIndex(i).setTraySessionID(this._traySessionID).setClientViewerSessionID(this._viewerSessionID).log();b("Banzai").post("stories_interaction_poseidon_logging_banzai",{name:a,source:c,story_owner:String(e),number_media:String(g)});a===b("FBStoriesLoggingConstants").ACTION_CLOSE_STORY&&(this._viewerSessionID=null)},mediaLog:function(a){var c=b("FBStoriesStore").getCurrentThreadCameraPostTypeForSelectedBucket(),d=b("FBStoriesStore").getSelectedBucketOwnerID(),e=b("FBStoriesStore").getSelectedBucketOwnerType(),f=b("FBStoriesStore").getCurrentThreadMediaIDForSelectedBucket(),g=b("FBStoriesStore").getCurrentThreadMediaTypeForSelectedBucket(),h=b("FBStoriesStore").getCurrentThreadMediaViewerCountForSelectedBucket(),i=b("FBStoriesStore").getSelectedBucketIndex(),j=b("FBStoriesStore").getCurrentThreadIDForSelectedBucket(),k=b("BackstageMediaType").UNKNOWN;g==="Photo"?k=b("BackstageMediaType").PHOTO:g==="Video"?k=b("BackstageMediaType").VIDEO:g===b("BackstageMediaType").LIVE&&(k=b("BackstageMediaType").LIVE);g="";j&&(g=j.toString());this._getLogger().setCameraPostType(c).setName(a).setStoryOwner(d).setStoryOwnerType(e).setMediaType(k).setClientMediaID(f).setNumberViewers(h).setCardID(g).setStoryIndex(i).setTraySessionID(this._traySessionID).setClientViewerSessionID(this._viewerSessionID).log()},logEventStart:function(a){if(Object.prototype.hasOwnProperty.call(this._eventStartTimes,a)){!1;return}this._eventStartTimes[a]=Date.now();this._getPerfLogger().setEventType(a).setEventTotalTime(0).log()},logEventEnd:function(a){if(Object.prototype.hasOwnProperty.call(this._eventStartTimes,a)===!1){!1;return}var b=Object.prototype.hasOwnProperty.call(this._eventStartTimes,a)?Date.now()-this._eventStartTimes[a]:-1;this._getPerfLogger().setEventType(a).setEventTotalTime(b).log();delete this._eventStartTimes[a]},_getLogger:function(){return new(b("DirectMessagingTypedLogger"))()},_getPerfLogger:function(){return new(b("FBStoriesWWWPerfTypedLogger"))()},openMediaLog:function(){var a=b("FBStoriesStore").getFeedTrackingData(b("FBStoriesLoggingConstants").ACTION_OPEN_MEDIA);b("Banzai").post("stories_www_vpv_banzai",{media_id:b("FBStoriesStore").getCurrentThreadMediaIDForSelectedBucket()});b("Banzai").post("fb_stories_banzai_generic",{ft:a});g.mediaLog(b("FBStoriesLoggingConstants").ACTION_OPEN_MEDIA)},deleteMediaLog:function(){g.mediaLog(b("FBStoriesLoggingConstants").ACTION_DELETE_MEDIA)},openSeenSummaryLog:function(){g.mediaLog(b("FBStoriesLoggingConstants").ACTION_OPEN_SEEN_SUMMARY)}};e.exports=g}),null);
__d("FBStoriesPrefetcher",["Bootloader","FBStoriesActionsHelper","FBStoriesStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={prefetchForCurrentThreadAndBucket:function(){this.prefetch(b("FBStoriesStore").getSelectedBucketIndex(),b("FBStoriesStore").getCurrentThreadIndexForSelectedBucket())},prefetch:function(a,b){this._prefetchVideos(a,b)},_prefetchVideos:function(a,b){this._prefetchThreadVideo(a,b),this._prefetchForwardVideo(a,b),this._prefetchBackwardsVideo(a,b)},_prefetchForwardVideo:function(a,b){this._prefetchVideo(!0,a,b)},_prefetchBackwardsVideo:function(a,b){this._prefetchVideo(!1,a,b)},_prefetchVideo:function(a,c,d){__p&&__p();var e=b("FBStoriesStore").getThreadCount(c);d=a?d+1:d-1;while(d>=0&&d<e){if(this._prefetchThreadVideo(c,d))return!0;d=a?d+1:d-1}d=c;while(!b("FBStoriesActionsHelper").checkAllBucketsViewed(d)){e=b("FBStoriesActionsHelper").getNextBucketAndThreadIndex(d,a);c=e.nextBucketIndex;e=e.nextThreadIndex;if(this._prefetchThreadVideo(c,e))return!0;d=c}return!1},_prefetchThreadVideo:function(a,c){var d=b("FBStoriesStore").getVideoMediaIdForBucketIndexAndThreadIndex(a,c);if(!d)return!1;b("Bootloader").loadModules(["VideoPlayerMetaData"],function(a){a.genVideoData(d,{allowDashPrefetch:!0,forceHD:!0})},"FBStoriesPrefetcher");return!0}};e.exports=a}),null);
__d("FBStoriesFeedComposerViewer",["Bootloader"],(function(a,b,c,d,e,f){"use strict";a={focusComposer:function(a,c){b("Bootloader").loadModules(["FBStoriesFeedComposer"],function(b){b.open(a,c)},"FBStoriesFeedComposerViewer")}};e.exports=a}),null);
__d("FBStoriesProductionActions",["AddToStoryPogDestinationType","FBStoriesActions","FBStoriesFeedComposerViewer","FBStoriesTrayConfig"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={openProductionDialog:function(){var a=function(){b("FBStoriesActions").setIsProductionDialogLoading(!1)},c=b("FBStoriesTrayConfig").productionDestination;if(!c){a();return}b("FBStoriesActions").setIsProductionDialogLoading(!0);c===b("AddToStoryPogDestinationType").EMPTY_FEED_COMPOSER||c===b("AddToStoryPogDestinationType").SATP_FEED_COMPOSER?b("FBStoriesFeedComposerViewer").focusComposer(c,a):a()}};e.exports=a}),null);
__d("FBStoriesPog.react",["ix","cx","fbt","React","CameraPostTypesHelper","Image.react","asset","XUISpinner.react","CameraPostTypes"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;j=babelHelpers.inherits(a,b("React").Component);j&&j.prototype;a.prototype.render=function(){var a=this.props,c=a.previewImageUri;a=a.profileImageUri;c=c?c:a;a=!!c;c=a?b("React").createElement(b("Image.react"),{src:c,className:"_26w6"}):null;var d=this.$1(),e="_26w4"+(this.props.highlighted?" _26w9":"")+(this.props.live?" _26wp":"")+(a?" _26wu":"")+(this.props.size==="small"?" size-small":"")+(this.props.size==="small-48"?" size-small-48":"")+(this.props.borderOption==="hide-and-expand"?" no-border":"")+(this.props.borderOption==="hide"?" hide-border":""),f=b("React").createElement("div",{className:"_26wv"}),h=b("React").createElement("div",{className:"_2h3r"},b("React").createElement(b("Image.react"),{src:g("504435")})),j=b("React").createElement("div",{className:"_26wx"},b("React").createElement(b("Image.react"),{alt:i._("LIVE"),src:g("404364")}));return b("React").createElement("div",{className:e},c,this.props.showBadge?f:null,d,b("React").createElement(b("XUISpinner.react"),{size:"large",background:a?"light":"dark",className:"_26ww"}),this.props.live?j:null,this.props.showBlueCross?h:null)};a.prototype.$1=function(){var a=b("CameraPostTypesHelper").isEventStory(this.props.cameraPostType),c=b("CameraPostTypesHelper").isGroupStory(this.props.cameraPostType);return!a&&!c?null:b("React").createElement("div",{className:"_26ws"},b("React").createElement("div",{className:(a?"_26wz":"")+(c?" _26w-":"")}))};function a(){j.apply(this,arguments)}a.defaultProps={highlighted:!1,showBadge:!1,live:!1,size:"normal",cameraPostType:b("CameraPostTypes").STORY,borderOption:"show"};e.exports=a}),null);
__d("FBStoriesPlusPog.react",["ix","cx","Image.react","React","XUISpinner.react","asset"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){var a=b("React").createElement("div",{className:"_66a_"},b("React").createElement(b("Image.react"),{src:g("424422")})),c="_26w4 no-border"+(this.props.size==="small"?" size-small":"")+(this.props.size==="small-48"?" size-small-48":"");return b("React").createElement("div",{className:c},a,b("React").createElement(b("XUISpinner.react"),{size:"large",background:"light",className:"_26ww"}))};function a(){i.apply(this,arguments)}a.defaultProps={size:"normal"};e.exports=a}),null);
__d("FBStoriesTrayFullAddItem.react",["cx","fbt","FBStoriesPlusPog.react","FBStoriesPog.react","React","ShimButton.react"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){var c=a.profileImageUri?b("React").createElement(b("FBStoriesPog.react"),{borderOption:"hide",profileImageUri:a.profileImageUri,size:"small-48"}):b("React").createElement(b("FBStoriesPlusPog.react"),{size:"small-48"});return b("React").createElement(b("ShimButton.react"),{className:"_1zp8"+(a.loading?" loading":"")+(a.profileImageUri?" _2grz":""),onClick:a.loading?null:a.onClick},c,b("React").createElement("div",{className:"_mx9 _mxa verbose"},b("React").createElement("span",{className:"_mxb _64xb _4u-0"},h._("Add to Your Story")),b("React").createElement("div",{className:"_31yn"},b("React").createElement("span",null,h._("Share a photo, video or write something")))))}e.exports=a}),null);
__d("FBStoriesTrayUploadingAnimation.react",["cssVar","cx","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=48,j=58,k=76,l=2,m=i/2,n=j/2,o=k/2,p=m-2,q=n-2,r=o-2;a=function(a){__p&&__p();var c,d,e;switch(a.size){case"small":c=i;d=m;e=p;break;case"medium":c=j;d=n;e=q;break;case"large":default:c=k;d=o;e=r;break}return b("React").createElement("svg",{className:"_65xu"+(a.size==="small"?" size-small":"")+(a.size==="medium"?" size-medium":""),height:c,width:c},b("React").createElement("g",{className:"_65xv"},b("React").createElement("circle",{className:"_4kq4",cx:d,cy:d,fill:"none",r:e,stroke:"#4080ff",strokeWidth:l})))};e.exports=a}),null);
__d("FBStoriesTrayFullItem.react",["cx","FBStoriesTrayUploadingAnimation.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$1=function(){!this.props.disabled&&!this.props.loading&&!this.props.uploading&&this.props.onSelect(this.props.bucketID)}.bind(this),b}a.prototype.render=function(){if(!this.props.bucketID)return null;var a=this.props.uploading&&b("React").createElement(b("FBStoriesTrayUploadingAnimation.react"),{size:"medium"});return b("React").createElement("div",{tabIndex:0,role:"button",onClick:this.$1,onKeyPress:this.$1,className:"_1zp8"},a,this.props.children)};e.exports=a}),null);
__d("FBStoriesTrayItemTitle.react",["cx","fbt","React","Timestamp.react","formatDate"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){var a=this.$1(),c=this.$2();return b("React").createElement("div",{className:"_mx9"+(this.props.ownBucket?" _mxa":"")+(this.props.verbose?" verbose":"")},a,c)};a.prototype.$1=function(){return this.props.ownBucket?b("React").createElement("div",{className:"_mxb"},b("React").createElement("span",{className:"_nbt"},h._("Your Story"))):this.props.actorName?b("React").createElement("div",{dir:"auto",className:"_mxb"},b("React").createElement("span",{className:"_nbt"},this.props.actorName)):null};a.prototype.$2=function(){return this.props.verbose&&this.props.lastUpdateTime?b("React").createElement("div",{className:"_mxc"},b("React").createElement(b("Timestamp.react"),{key:"timestamp",autoUpdate:!0,time:this.props.lastUpdateTime,text:b("formatDate")(this.props.lastUpdateTime,"M j, Y",{utc:!0})})):null};function a(){i.apply(this,arguments)}a.defaultProps={ownBucket:!1,verbose:!1,lastUpdateTime:undefined};e.exports=a}),null);
__d("FBStoriesVerticalLayout.react",["cx","fbt","Arbiter","FBStoriesTrayConfig","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("FBStoriesTrayConfig").numPogs;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={seeMore:this.props.seeMore},this.$1=function(){return this.setState({seeMore:!0},function(){return b("Arbiter").inform("netego_loaded")})}.bind(this),c}a.prototype.render=function(){var a=this.props.children,c=b("React").Children.count(a);c=!this.state.seeMore&&c>j;a=b("React").createElement("div",{key:"list",className:"_1fvt"+(j==3?" vertical-48":"")+(j==4?" vertical-4pog":"")+(j==5?" vertical-5pog":"")+(this.state.seeMore?" seeMore":"")},a);c=c&&b("React").createElement("a",{key:"link",className:"_31yr",href:"#",onClick:this.$1},b("React").createElement("span",{className:"_jyz"}),h._("See More"));return[a,c]};e.exports=a}),null);
__d("FBStoriesTray.react",["cx","FBStoriesBucketHelper","FBStoriesPog.react","FBStoriesThreadHelper","FBStoriesTrayConfig","FBStoriesTrayFullAddItem.react","FBStoriesTrayFullItem.react","FBStoriesTrayItemTitle.react","FBStoriesVerticalLayout.react","React","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){__p&&__p();var a=this.props,c=a.friendsData;a=a.userBucketHasContent;c=!c||c.length===0;if(c&&!a&&!this.props.showProduction)return null;c=[];this.props.showProduction&&!(this.props.userBucketHasContent&&b("FBStoriesTrayConfig").shouldConsolidatePogs)&&c.push(this.$1());this.props.userBucketHasContent&&c.push(this.$2());c=c.concat([].concat(this.$3()));return b("React").createElement(b("FBStoriesVerticalLayout.react"),{seeMore:!!this.props.isSeeMoreMode},c)};a.prototype.$4=function(a){return b("React").createElement("div",{key:a,className:"_1fvw"},b("React").createElement("div",{className:"_rqg"}))};a.prototype.$1=function(){b("FBStoriesBucketHelper").getOwnerProfilePictureUri(this.props.userBucket);return b("React").createElement(b("FBStoriesTrayFullAddItem.react"),{key:"production",loading:this.props.isProductionDialogLoading,onClick:this.props.onAddStoryItemSelect})};a.prototype.$2=function(){var a=this.props,c=a.userBucket,d=a.userBucketHasUpdates,e=a.userBucketHasNewViewers;a=a.userBucketIsLive;var f=b("FBStoriesBucketHelper").getCameraPostType(c),g=b("FBStoriesBucketHelper").isUploading(c),h=b("FBStoriesBucketHelper").getLatestThreadCreationTime(c);b("FBStoriesBucketHelper").getMediaIDForLiveBucket(c);var i=b("FBStoriesBucketHelper").getId(c);c=b("FBStoriesBucketHelper").getOwnerProfilePictureUri(c);return b("React").createElement(b("FBStoriesTrayFullItem.react"),{key:i,bucketID:i,uploading:g,loading:this.props.loadingBucketID===i,onSelect:this.props.onItemSelect},b("React").createElement(b("FBStoriesPog.react"),{cameraPostType:f,live:a,showLoadingAnim:g,highlighted:!g&&d,showBadge:!g&&e,profileImageUri:c,showBlueCross:b("FBStoriesTrayConfig").shouldConsolidatePogs,size:"small-48",borderOption:g?"hide":"show"}),b("React").createElement(b("FBStoriesTrayItemTitle.react"),{verbose:!0,ownBucket:!0,lastUpdateTime:h}))};a.prototype.$3=function(){__p&&__p();return this.props.friendsData.map(function(a,c){__p&&__p();c=b("FBStoriesBucketHelper").getId(a);if(!c)return null;var d=b("FBStoriesBucketHelper").getCameraPostType(a),e=b("FBStoriesBucketHelper").getOwnerId(a),f=b("FBStoriesBucketHelper").getOwnerName(a,!0);if(!e||!f)return null;e=b("FBStoriesBucketHelper").isLive(a);var g=b("FBStoriesBucketHelper").getOwnerProfilePictureUri(a),h=b("FBStoriesBucketHelper").getThreads(a);h=h.filter(function(a){return!b("FBStoriesThreadHelper").isSeenByViewer(a)}).length>0;a=b("FBStoriesBucketHelper").getLatestThreadCreationTime(a);return b("React").createElement(b("FBStoriesTrayFullItem.react"),{key:c,bucketID:c,loading:this.props.loadingBucketID===c,onSelect:this.props.onItemSelect},b("React").createElement(b("FBStoriesPog.react"),{cameraPostType:d,live:e,showLoadingAnim:!1,highlighted:h,showBadge:!1,profileImageUri:g,size:"small-48",borderOption:"show"}),b("React").createElement(b("FBStoriesTrayItemTitle.react"),{verbose:!0,ownBucket:!1,actorName:f,lastUpdateTime:a}))}.bind(this))};function a(){h.apply(this,arguments)}a.defaultProps={onAddStoryItemSelect:b("emptyFunction"),onItemHover:b("emptyFunction"),onItemHoverOut:b("emptyFunction"),loadingBucketID:null,showProduction:!1,isSeeMoreMode:!1,isProductionDialogLoading:!1};e.exports=a}),null);
__d("FBStoriesViewerEntrypoint",[],(function(a,b,c,d,e,f){"use strict";e.exports={HOMEPAGE_TRAY:"HOMEPAGE_TRAY",GROUP_MALL:"GROUP_MALL",GROUP_PENDING_STORIES_TAB:"GROUP_PENDING_STORIES_TAB",PAGES_SURFACE:"PAGES_SURFACE",PERMANENT_LINK_VIEW:"PERMANENT_LINK_VIEW"}}),null);
__d("FBStoriesViewerHelper",["FBStoriesActionTypes","FBStoriesActionsHelper","JSResource","FBStoriesDispatcher"],(function(a,b,c,d,e,f){"use strict";var g=b("FBStoriesDispatcher").dispatch;a={toggleViewer:function(a,c){g({type:b("FBStoriesActionTypes").SET_VIEWER_OPEN,value:a,entrypoint:c});b("FBStoriesActionsHelper").resetNavMap();return b("JSResource")("FBStoriesViewer").__setRef("FBStoriesViewerHelper").load().then(function(b){return b.getInstance().toggle(a)})}};e.exports=a}),null);
__d("FBStoriesTrayContainer.react",["cx","Bootloader","FBStoriesBucketHelper","FBStoriesLoggingConstants","FBStoriesProductionActions","FBStoriesStore","FBStoriesTray.react","FBStoriesTrayConfig","FBStoriesTrayHeader.react","FBStoriesViewerEntrypoint","FBStoriesViewerHelper","FluxContainer","React","range"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.state={friendsData:[],userBucket:b("FBStoriesBucketHelper").getDefaultBucket(),userBucketHasUpdates:!1,userBucketHasNewViewers:!1,userBucketHasContent:!1,loading:!0,isProductionDialogLoading:!1,bucketIdBeingLoaded:null,userBucketIsLive:!1},this.$3=function(a){this.setState({bucketIdBeingLoaded:a}),b("Bootloader").loadModules(["FBStoriesActions","FBStoriesLoggingHelper"],function(c,d){c.userSelectedBucket(a)&&(b("FBStoriesViewerHelper").toggleViewer(!0,b("FBStoriesViewerEntrypoint").HOMEPAGE_TRAY),d.storyLog(b("FBStoriesLoggingConstants").ACTION_OPEN_STORY,b("FBStoriesLoggingConstants").SOURCE_OPEN_FROM_STORY_HEAD)),this.setState({bucketIdBeingLoaded:null})}.bind(this),"FBStoriesTrayContainer.react")}.bind(this),c}a.getStores=function(){return[b("FBStoriesStore")]};a.calculateState=function(a){return{friendsData:b("FBStoriesStore").getFriendsBucketData(),userBucket:b("FBStoriesStore").getUserBucketData(),userBucketHasUpdates:b("FBStoriesStore").hasOwnBucketUpdates(),userBucketHasNewViewers:b("FBStoriesStore").hasOwnBucketViewers(),userBucketHasContent:b("FBStoriesStore").hasOwnBucketContent(),loading:b("FBStoriesStore").isLoading(),isProductionDialogLoading:b("FBStoriesStore").isProductionDialogLoading(),bucketIdBeingLoaded:a?a.bucketIdBeingLoaded:null,userBucketIsLive:b("FBStoriesStore").userBucketIsLive()}};a.prototype.render=function(){var a="_60kg";if(this.state.loading)return b("React").createElement("div",{className:a},b("React").createElement(b("FBStoriesTrayHeader.react"),null),b("React").createElement(i,null));return this.$1()&&!this.props.showProduction?b("React").createElement("div",{className:a}):b("React").createElement("div",{className:a},b("React").createElement(b("FBStoriesTrayHeader.react"),null),b("React").createElement(b("FBStoriesTray.react"),{atCenterColumn:this.props.atCenterColumn,isSeeMoreMode:this.props.isSeeMoreMode,showProduction:this.props.showProduction,friendsData:this.state.friendsData,userBucket:this.state.userBucket,userBucketHasContent:this.state.userBucketHasContent,userBucketHasNewViewers:this.state.userBucketHasNewViewers,userBucketHasUpdates:this.state.userBucketHasUpdates,loading:this.state.loading,isProductionDialogLoading:this.state.isProductionDialogLoading,loadingBucketID:this.state.bucketIdBeingLoaded,userBucketIsLive:this.state.userBucketIsLive,onAddStoryItemSelect:this.$2,onItemSelect:this.$3}))};a.prototype.$2=function(){b("FBStoriesProductionActions").openProductionDialog()};a.prototype.$1=function(){var a=this.state,c=a.friendsData,d=a.userBucket;a=a.loading;d=!b("FBStoriesBucketHelper").hasData(d);c=!c||c.length===0;d=d&&c;return!a&&d};a.defaultProps={showProduction:!1,atCenterColumn:!1,isSeeMoreMode:!1};var i=function(a){a=function(a){return b("React").createElement("div",{className:"_19l4",key:a},b("React").createElement("div",{className:"_19la"},b("React").createElement("div",{className:"_19lc"})),b("React").createElement("div",{className:"_19ld"}),b("React").createElement("div",{className:"_19li"}),b("React").createElement("div",{className:"_19lj"}),b("React").createElement("div",{className:"_19lk"}),b("React").createElement("div",{className:"_19ll"}),b("React").createElement("div",{className:"_19lm"}),b("React").createElement("div",{className:"_19mw"}))};return b("React").createElement("div",{className:"_19m_"+(b("FBStoriesTrayConfig").trayLayout==="vertical_48"?" vertical_48":"")},b("React").createElement("div",{className:"_19n0"},b("range")(0,3).map(a)))};e.exports=b("FluxContainer").create(a)}),null);
__d("FBStoriesSettingsDialogTabType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ARCHIVE_SETTINGS_TAB:"archive_settings_tab",MUTED_SETTINGS_TAB:"muted_settings_tab"})}),null);
__d("FBStoriesTrayHeader.react",["ix","cx","fbt","CameraFileBugButton.react","ContextualLayerAutoFlip","CurrentUser","FBStoriesMutedBucketOwnersViewer","FBStoriesSettingsDialogTabType","FBStoriesTrayConfig","Link.react","PopoverMenu.react","ProfileTabConst","React","ReactMenu","ReactXUIMenu","Image.react","TooltipLink.react","URI","asset","fbglyph"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("ReactMenu").Item;j=babelHelpers.inherits(a,b("React").Component);j&&j.prototype;a.prototype.$1=function(){b("FBStoriesMutedBucketOwnersViewer").getInstance(b("FBStoriesSettingsDialogTabType").MUTED_SETTINGS_TAB).open()};a.prototype.render=function(){var a=[];a.push(b("React").createElement(k,{key:"muted_stories",onClick:this.$1},b("React").createElement(b("Image.react"),{src:g("113417")}),i._("Stories You've Muted")));a.push(b("CameraFileBugButton.react")());a=b("React").createElement(b("ReactXUIMenu"),{className:"_2sh1"},a);return b("React").createElement("div",{className:"_42rg"},b("React").createElement(b("TooltipLink.react"),{tooltip:i._("Stories are photos and videos that are visible for 24 hours. When someone adds to a story, it'll show up here.")},b("React").createElement("span",{className:"_2ms2"},i._("Stories"))),b("FBStoriesTrayConfig").storyArchiveEnabled?this.renderArchiveLinks():b("React").createElement("div",{className:"_2sh5"},b("React").createElement(b("PopoverMenu.react"),{alignv:"bottom",alignh:"left","aria-label":i._("More"),layerBehaviors:[b("ContextualLayerAutoFlip")],menu:a,position:"below"},b("React").createElement(b("TooltipLink.react"),{href:"#",tooltip:i._("More")},b("React").createElement(b("Image.react"),{src:g("348130")})))))};a.prototype.renderArchiveLinks=function(){var a=new(b("URI"))("/"+b("CurrentUser").getID()).setQueryData({sk:b("ProfileTabConst").STORIES_ARCHIVE});return b("React").createElement("div",null,b("React").createElement(b("Link.react"),{href:a,className:"_2ec9"},b("React").createElement(b("Image.react"),{src:g("594822"),className:"_6adr"}),i._("Archive")),b("React").createElement("span",{className:"_3ft9"},"\xa0\xb7\xa0"),b("React").createElement(b("Link.react"),{onClick:this.$1,className:"_2ec9"},i._("Settings")))};function a(){j.apply(this,arguments)}e.exports=a}),null);
__d("FBStoriesCameraDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("ExplicitRegistrationReactDispatcher"));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=new a({strict:!1})}),null);
__d("FBStoriesCameraActionTypes",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({SET_HAS_IMAGE:"SET_HAS_IMAGE",SET_HAS_MEDIASTREAM:"SET_HAS_MEDIASTREAM",SET_IMAGESOURCE:"SET_IMAGESOURCE",SET_IS_CAMERA_MEDIA_OPEN:"SET_IS_CAMERA_MEDIA_OPEN",SET_MEDIA_NODE:"SET_MEDIA_NODE",SET_MEDIASTREAM:"SET_MEDIASTREAM",SET_PRIVACY_SETTINGS_CUSTOM_PARTICIPANTS:"SET_PRIVACY_SETTINGS_CUSTOM_PARTICIPANTS",SET_PRIVACY_SETTINGS_MODE:"SET_PRIVACY_SETTINGS_MODE",SET_VIDEOSOURCE:"SET_VIDEOSOURCE"});e.exports=a}),null);
__d("fbStoriesCameraReducer",["FBStoriesCameraActionTypes","FBStoriesProductionTypes"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("FBStoriesProductionTypes").FBStoriesCameraState;function a(a,c){__p&&__p();switch(c.type){case b("FBStoriesCameraActionTypes").SET_HAS_IMAGE:return a.set("hasImage",c.hasImage);case b("FBStoriesCameraActionTypes").SET_HAS_MEDIASTREAM:return a.set("hasMediaStream",c.hasMediaStream);case b("FBStoriesCameraActionTypes").SET_IMAGESOURCE:return a.set("imageSource",c.imageSource);case b("FBStoriesCameraActionTypes").SET_IS_CAMERA_MEDIA_OPEN:return a.set("isCameraMediaOpen",c.isCameraMediaOpen);case b("FBStoriesCameraActionTypes").SET_MEDIA_NODE:return a.set("mediaNode",c.mediaNode);case b("FBStoriesCameraActionTypes").SET_MEDIASTREAM:return a.set("mediaStream",c.mediaStream);case b("FBStoriesCameraActionTypes").SET_PRIVACY_SETTINGS_CUSTOM_PARTICIPANTS:return a.set("privacySettingsCustomParticipants",c.privacySettingsCustomParticipants);case b("FBStoriesCameraActionTypes").SET_PRIVACY_SETTINGS_MODE:return a.set("privacySettingsMode",c.privacySettingsMode);case b("FBStoriesCameraActionTypes").SET_VIDEOSOURCE:return a.set("videoSource",c.videoSource);default:return a}}e.exports=a}),null);
__d("FBStoriesCameraStore",["FBStoriesCameraDispatcher","FBStoriesProductionTypes","FluxReduceStore","fbStoriesCameraReducer"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("FBStoriesProductionTypes").FBStoriesCameraState;g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return new h()};a.prototype.reduce=function(a,c){return b("fbStoriesCameraReducer")(a,c)};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("FBStoriesCameraDispatcher"))}),null);
__d("FBStoriesVisibilityHelper",["FBStoriesDataHelper","FBStoriesStore","Visibility","throttle"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=60;a={_visibilitySubscription:null,addListenerToReloadDataOnVisible:function(a){if(this._visibilitySubscription)return;a===undefined&&(a=this._defaultDataLoad.bind(this));this._visibilitySubscription=b("Visibility").addListener(b("Visibility").VISIBLE,b("throttle").withBlocking(function(){b("FBStoriesStore").isLoading()===!1&&b("FBStoriesStore").isViewerOpen()===!1&&(a!==undefined&&a())},g*1e3))},removeListener:function(){if(!this._visibilitySubscription)return;this._visibilitySubscription.remove();this._visibilitySubscription=null},_defaultDataLoad:function(){b("FBStoriesDataHelper").loadData()}};e.exports=a}),null);
__d("FBStoriesTrayInit",["csx","regeneratorRuntime","Promise","CSS","DOMQuery","FBStoriesActions","FBStoriesActionTypes","FBStoriesCameraStore","FBStoriesCenterColumnTrayContainer.react","FBStoriesDataHelper","FBStoriesDispatcher","FBStoriesGraphQLAPI","FBStoriesLoggingConstants","FBStoriesLoggingHelper","FBStoriesPrefetcher","FBStoriesStore","FBStoriesTrayConfig","FBStoriesTrayContainer.react","FBStoriesViewerEntrypoint","FBStoriesViewerHelper","FBStoriesVisibilityHelper","React","ReactDOM","ge"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBStoriesLoggingConstants").INTERACTIONS;e.exports={_shouldLoadData:!1,_loadDataPromise:undefined,_reactTrayRendered:!1,_listenersInitialized:!1,loadData:function(a){__p&&__p();return b("regeneratorRuntime").async(function(c){__p&&__p();while(1)switch(c.prev=c.next){case 0:a===void 0&&(a=!1);(!this._loadDataPromise||a)&&(this._loadDataPromise=new(b("Promise"))(function(a,c){__p&&__p();var d,e,f,g,i;return b("regeneratorRuntime").async(function(j){__p&&__p();while(1)switch(j.prev=j.next){case 0:b("FBStoriesLoggingHelper").logEventStart(h.DATA_LOADING);d=b("FBStoriesDispatcher").dispatch;d({type:b("FBStoriesActionTypes").LOADING});j.prev=3;j.next=6;return b("regeneratorRuntime").awrap(b("FBStoriesGraphQLAPI").load());case 6:e=j.sent;if(this._shouldLoadData){j.next=9;break}return j.abrupt("return");case 9:f=b("FBStoriesDataHelper").getBucketsDataFromLoadedObject(e);b("FBStoriesLoggingHelper").logStoryTrayLoad(f);d({type:b("FBStoriesActionTypes").LOADED,data:f});this._initTrayListeners();b("FBStoriesLoggingHelper").logEventEnd(h.DATA_LOADING);a(f);j.next=24;break;case 17:j.prev=17,j.t0=j["catch"](3),g=j.t0.errors,g&&g.length>0&&(i=g[0],d({type:b("FBStoriesActionTypes").LOADED_ERROR,error:i})),this._loadDataPromise=null,b("FBStoriesLoggingHelper").logEventEnd(h.DATA_LOADING),c(i);case 24:case"end":return j.stop()}},null,this,[[3,17]])}.bind(this)));return c.abrupt("return",this._loadDataPromise);case 3:case"end":return c.stop()}},null,this)},userSelectedBucket:function(a){return b("FBStoriesActions").userSelectedBucket(a)},registerStores:function(){b("FBStoriesDispatcher").explicitlyRegisterStores([b("FBStoriesStore"),b("FBStoriesCameraStore")])},openViewer:function(){b("FBStoriesLoggingHelper").logEventStart(h.VIEWER_OPEN);b("FBStoriesLoggingHelper").storyLog(b("FBStoriesLoggingConstants").ACTION_OPEN_STORY,b("FBStoriesLoggingConstants").SOURCE_OPEN_FROM_STORY_HEAD);return b("FBStoriesViewerHelper").toggleViewer(!0,b("FBStoriesViewerEntrypoint").HOMEPAGE_TRAY).then(function(){return b("FBStoriesLoggingHelper").logEventEnd(h.VIEWER_OPEN)})},renderReactTray:function(){__p&&__p();if(this._reactTrayRendered)return;b("FBStoriesLoggingHelper").logEventStart(h.TRAY_RENDER);var a=b("FBStoriesTrayConfig").showProduction,c=b("FBStoriesTrayConfig").atCenterColumn;b("FBStoriesPrefetcher").prefetchForCurrentThreadAndBucket();if(c){var d=b("DOMQuery").scry(b("ge")("stories_pagelet_below_composer"),"._4-u2");if(!d||d.length===0)return;d=d[0];if(!d)return;b("ReactDOM").render(b("React").createElement(b("FBStoriesCenterColumnTrayContainer.react"),null),d)}else{d=b("DOMQuery").scry(b("ge")("stories_pagelet_rhc"),"._4-u2");if(!d||d.length===0)return;d=d[0];if(!d)return;var e="._1fvt";e=e?b("DOMQuery").find(d,e):undefined;e=e?b("CSS").hasClass(e,"seeMore"):!1;b("ReactDOM").render(b("React").createElement(b("FBStoriesTrayContainer.react"),{showProduction:a,atCenterColumn:c,isSeeMoreMode:e}),d)}b("FBStoriesLoggingHelper").logEventEnd(h.TRAY_RENDER);this._reactTrayRendered=!0},_initTrayListeners:function(){if(this._listenersInitialized)return;var a=b("FBStoriesDispatcher").dispatch,c=b("FBStoriesGraphQLAPI").subscribeToTrayChanges(function(c){this.renderReactTray();a({type:b("FBStoriesActionTypes").SUBSCRIPTION_BUCKET_UPDATE,bucketData:(c=c)!=null?(c=c.stories_tray_subscribe)!=null?c.bucket:c:c})}.bind(this));c&&a({type:b("FBStoriesActionTypes").SET_SUBSCRIPTION_TOKEN,token:c});b("FBStoriesVisibilityHelper").addListenerToReloadDataOnVisible(function(){return this.loadData(!0)}.bind(this));this._listenersInitialized=!0},initializeOnEnter:function(){this._shouldLoadData=!0,this.registerStores()},resetOnExit:function(){this._shouldLoadData=!1;this._loadDataPromise=null;var a=b("FBStoriesStore").getState().subscriptionToken;a&&(b("FBStoriesGraphQLAPI").unsubscribeFromTrayChanges(a),b("FBStoriesDispatcher").dispatch({type:b("FBStoriesActionTypes").SET_SUBSCRIPTION_TOKEN,token:null}));b("FBStoriesActions").resetStore();b("FBStoriesVisibilityHelper").removeListener();this._listenersInitialized=!1;this._reactTrayRendered=!1}}}),null);
__d("StoryArchiveAutoSavingMode",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ENABLED:"ENABLED",DISABLED:"DISABLED"})}),null);
__d("FBStoriesArchiveSettingsDialogTab.react",["cx","fbt","CurrentUser","FBStoriesGraphQLAPI","React","StoryArchiveAutoSavingMode","XUIButton.react","promiseDone"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j="archive-state-unknown";c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.state={archiveState:j,isMutating:!0},b}a.prototype.componentDidMount=function(){b("promiseDone")(b("FBStoriesGraphQLAPI").loadStoriesArchiveSavingMode(),function(a){a=((a=a)!=null?(a=a.viewer)!=null?(a=a.unified_stories_setting)!=null?a.story_archive_saving_mode:a:a:a)||j;this.setState({archiveState:a,isMutating:!1})}.bind(this),null)};a.prototype.render=function(){var a=h._("Turn On Story Archive"),c=h._("Turn Off Story Archive");return b("React").createElement("div",{className:"_6ap-"},b("React").createElement("div",{className:"_6ap_"},h._("Save to Archive")),b("React").createElement("div",{className:"_6aq0"},b("React").createElement("div",{className:"_6aq1"},h._("Automatically archive photos and videos after they disappear from your story. Only you can see your story archive.")),b("React").createElement(b("XUIButton.react"),{className:"_6aq2",disabled:this.state.isMutating,label:this.state.archiveState===b("StoryArchiveAutoSavingMode").DISABLED?a:c,onClick:function(){var a=this.state.archiveState===b("StoryArchiveAutoSavingMode").DISABLED?b("StoryArchiveAutoSavingMode").ENABLED:b("StoryArchiveAutoSavingMode").DISABLED;this.setState({isMutating:!0});b("promiseDone")(b("FBStoriesGraphQLAPI").updateArchiveSavingMode(b("CurrentUser").getID(),a),function(b){this.setState({archiveState:a,isMutating:!1})}.bind(this),null)}.bind(this)})))};e.exports=a}),null);
__d("FBStoriesMutedBucketOwner.react",["cx","fbt","Image.react","ProfileLink.react","React","XUIButton.react","XUISpinner.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){var a=h._("Mute"),c=h._("Unmute");return b("React").createElement("div",{className:"_33zl"},b("React").createElement(b("ProfileLink.react"),{uid:this.props.id,target:"_blank"},b("React").createElement(b("Image.react"),{src:this.props.profilePictureUri,className:"_33zr"})),b("React").createElement("span",{className:"_33zo"},b("React").createElement(b("ProfileLink.react"),{uid:this.props.id,target:"_blank"},this.props.name)),b("React").createElement("span",{className:"_33zn"},this.props.mutingInProgress?b("React").createElement(b("XUISpinner.react"),{size:"large"}):b("React").createElement(b("XUIButton.react"),{label:this.props.isMuted?c:a,onClick:function(){this.props.onMuteChanged(this.props.id,this.props.name,this.props.profilePictureUri,!this.props.isMuted)}.bind(this)})))};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("FBStoriesMutedBucketOwners.react",["cx","fbt","FBStoriesMutedBucketOwner.react","FBStoriesMutedBucketOwnerHelper","FBStoriesMutedBucketOwnersActions","React","ScrollableArea.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){var a=this.props.mutedBucketOwners.length===0?b("React").createElement("div",{className:"_33zk"},h._("You haven't muted any stories yet. Once you do they'll show up here.")):this.props.mutedBucketOwners.map(function(a){var c=b("FBStoriesMutedBucketOwnerHelper").getId(a),d=this.props.currentlyMutingBucketOwners.indexOf(c)!==-1,e=b("FBStoriesMutedBucketOwnerHelper").getMuted(a);return b("React").createElement(b("FBStoriesMutedBucketOwner.react"),{key:c,id:c,name:b("FBStoriesMutedBucketOwnerHelper").getName(a),profilePictureUri:b("FBStoriesMutedBucketOwnerHelper").getProfilePictureUri(a),isMuted:e,mutingInProgress:d,onMuteChanged:b("FBStoriesMutedBucketOwnersActions").setBucketOwnerMuted})}.bind(this));return b("React").createElement(b("ScrollableArea.react"),{maxHeight:this.props.maxHeight,width:this.props.width},b("React").createElement("div",{className:"_33zj"},a))};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("FBStoriesSettingsDialog.react",["ix","cx","fbt","FBStoriesArchiveSettingsDialogTab.react","FBStoriesMutedBucketOwners.react","FBStoriesSettingsDialogTabType","FBStoriesTrayConfig","Image.react","LayerRemoveOnHide","LoadingDialog.react","React","XUIDialog.react","XUIDialogBody.react","XUIDialogHeader.react","XUIDialogHeaderTitle.react","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=501,l=149,m=310;c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=j.constructor).call.apply(a,[this].concat(e)),this.state={showLoadingDialogWhileMuting:!1,selectedTab:b("FBStoriesSettingsDialogTabType").MUTED_SETTINGS_TAB},this.$2=function(){this.$1()&&this.props.onClose()}.bind(this),this.$3=function(a){this.setState({selectedTab:a})}.bind(this),c}a.prototype.componentDidMount=function(){this.setState({showLoadingDialogWhileMuting:this.props.isCurrentlyMutingBucketOwners,selectedTab:this.props.defaultTab})};a.prototype.UNSAFE_componentWillReceiveProps=function(a){this.state.showLoadingDialogWhileMuting&&this.props.isCurrentlyMutingBucketOwners&&!a.isCurrentlyMutingBucketOwners&&this.setState({showLoadingDialogWhileMuting:!1})};a.prototype.$1=function(){return this.props.isLoading||this.state.showLoadingDialogWhileMuting&&this.props.isCurrentlyMutingBucketOwners};a.prototype.render=function(){var a=b("React").createElement("div",{className:this.state.selectedTab!==b("FBStoriesSettingsDialogTabType").MUTED_SETTINGS_TAB?"hidden_elem":""},b("React").createElement(b("FBStoriesMutedBucketOwners.react"),{maxHeight:m,width:k,mutedBucketOwners:this.props.mutedBucketOwners,currentlyMutingBucketOwners:this.props.currentlyMutingBucketOwners})),c=b("React").createElement("div",{className:this.state.selectedTab!==b("FBStoriesSettingsDialogTabType").ARCHIVE_SETTINGS_TAB?"hidden_elem":""},b("React").createElement(b("FBStoriesArchiveSettingsDialogTab.react"),null)),d=b("React").createElement(b("XUIDialogHeaderTitle.react"),{key:b("FBStoriesSettingsDialogTabType").ARCHIVE_SETTINGS_TAB,style:b("FBStoriesTrayConfig").storyArchiveEnabled?{}:{display:"none"}},b("React").createElement("span",null,b("React").createElement(b("Image.react"),{src:g("583215"),className:"_6apz"}),i._("Story Archive Settings"))),e=b("React").createElement(b("XUIDialogHeaderTitle.react"),{key:b("FBStoriesSettingsDialogTabType").MUTED_SETTINGS_TAB},b("React").createElement(b("Image.react"),{src:g("577042"),className:"_6apz"}),i._("Stories You've Muted"));return this.$1()?b("React").createElement(b("LoadingDialog.react"),{onToggle:this.$2}):b("React").createElement(b("XUIDialog.react"),{label:"Stories Tray Settings",width:k,height:l,shown:!0,onToggle:this.props.onClose,behaviors:{LayerRemoveOnHide:b("LayerRemoveOnHide")}},b("React").createElement(b("XUIDialogHeader.react"),{activeTabKey:this.state.selectedTab,onTabClick:this.$3},d,e),b("React").createElement(b("XUIDialogBody.react"),{useCustomPadding:!0},a,c))};e.exports=a}),null);
__d("FBStoriesMutedBucketOwnersDialogContainer.react",["regeneratorRuntime","FBStoriesMutedBucketOwnersStore","FBStoriesSettingsDialog.react","FBStoriesTrayInit","FluxContainer","React","fbStoriesMutedBucketOwnersSelectors","shallowArrayEqual"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("React").Component);g=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.$1=!1,this.$2=[],b}a.getStores=function(){return[b("FBStoriesMutedBucketOwnersStore")]};a.calculateState=function(a){a=b("FBStoriesMutedBucketOwnersStore").getState();return{mutedBucketOwners:b("fbStoriesMutedBucketOwnersSelectors").getMutedBucketOwners(a),currentlyMutingBucketOwners:b("fbStoriesMutedBucketOwnersSelectors").getCurrentlyMutingBucketOwners(a),isLoading:b("fbStoriesMutedBucketOwnersSelectors").isLoading(a),isCurrentlyMutingBucketOwners:b("fbStoriesMutedBucketOwnersSelectors").isCurrentlyMutingBucketOwners(a)}};a.prototype.UNSAFE_componentWillUpdate=function(a,b){this.$1||(this.$2=this.$3(b),this.$1=!0)};a.prototype.componentWillUnmount=function(){__p&&__p();return b("regeneratorRuntime").async(function(a){__p&&__p();while(1)switch(a.prev=a.next){case 0:if(b("shallowArrayEqual")(this.$2,this.$3(this.state))){a.next=4;break}a.next=3;return b("regeneratorRuntime").awrap(b("FBStoriesTrayInit").loadData(!0));case 3:b("FBStoriesTrayInit").renderReactTray();case 4:case"end":return a.stop()}},null,this)};a.prototype.$3=function(a){return a.mutedBucketOwners.map(function(a){return a.muted})};a.prototype.render=function(){return b("React").createElement(b("FBStoriesSettingsDialog.react"),{onClose:this.props.onClose,defaultTab:this.props.defaultTab,mutedBucketOwners:this.state.mutedBucketOwners,currentlyMutingBucketOwners:this.state.currentlyMutingBucketOwners,isLoading:this.state.isLoading,isCurrentlyMutingBucketOwners:this.state.isCurrentlyMutingBucketOwners})};e.exports=b("FluxContainer").create(a)}),null);
__d("FBStoriesMutedBucketOwnersViewer",["DOM","FBStoriesMutedBucketOwnersActions","FBStoriesMutedBucketOwnersDialogContainer.react","FBStoriesMutedBucketOwnersStore","FBStoriesSettingsDialogTabType","React","ReactDOM","fbStoriesMutedBucketOwnersSelectors"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="fb_stories_muted_bucket_owners";h.openInstance=function(a){h.getInstance(a?a:b("FBStoriesSettingsDialogTabType").MUTED_SETTINGS_TAB).open()};h.getInstance=function(a){this.$4||(h.$4=new h(a));return h.$4};function h(a){this.close=function(){b("ReactDOM").unmountComponentAtNode(this.$1)}.bind(this),this.$1=b("DOM").create("div",{id:g}),this.$3=a,document.body&&document.body.appendChild(this.$1)}h.prototype.open=function(){b("fbStoriesMutedBucketOwnersSelectors").canReload(b("FBStoriesMutedBucketOwnersStore").getState())&&b("FBStoriesMutedBucketOwnersActions").loadMutedOwners(),b("ReactDOM").render(b("React").createElement(b("FBStoriesMutedBucketOwnersDialogContainer.react"),{onClose:this.close,defaultTab:this.$3}),this.$1)};e.exports=h}),null);
__d("FBStoriesPreviewPog.react",["ix","cx","fbt","CameraPostTypesHelper","Image.react","React","XUISpinner.react","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;j=babelHelpers.inherits(a,b("React").Component);j&&j.prototype;a.prototype.render=function(){var a=!!this.props.profileImageUri,c=!!this.props.previewImageUri,d=c?b("React").createElement(b("Image.react"),{src:this.props.previewImageUri,className:"_26w6"}):null;a=a?b("React").createElement(b("Image.react"),{src:this.props.profileImageUri,className:"_1hw0"}):null;var e=this.$1(),f="_26w4"+(this.props.highlighted?" _26w9":"")+(this.props.live?" _26wp":"")+(c?" _26wu":"")+(this.props.size==="small"?" size-small":"")+(this.props.borderOption==="hide-and-expand"?" no-border":"")+(this.props.borderOption==="hide"?" hide-border":""),h=this.props.showBadge?b("React").createElement("div",{className:"_26wv"}):null,j=this.props.live?b("React").createElement("div",{className:"_26wx"},b("React").createElement(b("Image.react"),{alt:i._("LIVE"),src:g("404364")})):null;return b("React").createElement("div",{className:f},d,h,e,b("React").createElement(b("XUISpinner.react"),{size:"large",background:c?"light":"dark",className:"_26ww"}),j,a)};a.prototype.$1=function(){var a=b("CameraPostTypesHelper").isEventStory(this.props.cameraPostType),c=b("CameraPostTypesHelper").isGroupStory(this.props.cameraPostType);return!a&&!c?null:b("React").createElement("div",{className:"_26ws"},b("React").createElement("div",{className:(a?"_26wz":"")+(c?" _26w-":"")}))};function a(){j.apply(this,arguments)}e.exports=a}),null);
__d("FBStoriesTrayInlineAddItem.react",["cx","fbt","FBStoriesPlusPog.react","FBStoriesPog.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){var c;a.profileImageUri?c=b("React").createElement(b("FBStoriesPog.react"),{profileImageUri:a.profileImageUri,borderOption:"hide"}):c=b("React").createElement(b("FBStoriesPlusPog.react"),null);return b("React").createElement("div",{tabIndex:"0",role:"button",className:"_46z0"+(a.loading?" loading":"")+(a.profileImageUri?" _nc3":""),onKeyPress:a.loading&&a.onClick,onClick:a.loading&&a.onClick},c,b("React").createElement("div",{className:"_mx9 _mxa"},b("React").createElement("div",{className:"_mxb"},b("React").createElement("span",{className:"_nbt"},h._("Add")))))}e.exports=a}),null);
__d("FBStoriesTrayInlineItem.react",["cx","fbt","FBStoriesTrayUploadingAnimation.react","IntlVariations","React","ShimButton.react","Tooltip.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.$1=function(){!this.props.disabled&&!this.props.loading&&this.props.onSelect(this.props.bucketID)}.bind(this),b}a.prototype.render=function(){if(!this.props.bucketID)return null;var a=b("IntlVariations").GENDER_UNKNOWN;this.props.actorGender==="MALE"?a=b("IntlVariations").GENDER_MALE:this.props.actorGender==="FEMALE"&&(a=b("IntlVariations").GENDER_FEMALE);a=this.props.ownBucket?h._("Watch Your Story"):h._({"*":"Watch {actor name}'s Story"},[h._param("actor name",this.props.actorName,[1,a])]);var c=this.props.uploading,d=this.props.ownBucket||this.props.actorName,e=c&&b("React").createElement(b("FBStoriesTrayUploadingAnimation.react"),null);return b("React").createElement(b("ShimButton.react"),{tabIndex:"0",className:"_46z0"+(c?" own-bucket-uploading":""),onClick:this.$1,onKeyPress:this.$1},b("React").createElement("div",{className:"_46z1"},d?b("React").createElement(b("Tooltip.react"),{tooltip:a,alignH:"center",className:"_46z2"},e,this.props.children):b("React").createElement(b("React").Fragment,null,e,this.props.children)))};a.defaultProps={disabled:!1,loading:!1,uploading:!0};e.exports=a}),null);
__d("FBStoriesTrayShimmerLoader.react",["cx","React","range"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){return a.layout==="list"?b("React").createElement(i,a):b("React").createElement(h,a)}function h(a){a=a.numItems;a=a?a:6;var c=function(a){return b("React").createElement("div",{className:"_413r",key:a},b("React").createElement("div",{className:"_4141"},b("React").createElement("div",{className:"_4142"})),b("React").createElement("div",{className:"_4143"}),b("React").createElement("div",{className:"_4x8g"}),b("React").createElement("div",{className:"_4x8h"}),b("React").createElement("div",{className:"_4146"}))};return b("React").createElement("div",{className:"_4147"},b("React").createElement("div",{className:"_4148"},b("range")(0,a).map(c)))}function i(a){var c=a.numItems,d=a.listItemWidth;a=a.listRootHeight;c=c?c:6;var e=function(a){return b("React").createElement("div",{className:"_3r2u",key:a,style:d&&{minWidth:d,maxWidth:d}},b("React").createElement("div",{className:"_4141"},b("React").createElement("div",{className:"_4142"})),b("React").createElement("div",{className:"_3r2v"}),b("React").createElement("div",{className:"_3r31"}),b("React").createElement("div",{className:"_3r32"}),b("React").createElement("div",{className:"_3r33"}),b("React").createElement("div",{className:"_3r34"}),b("React").createElement("div",{className:"_3r35"}),b("React").createElement("div",{className:"_3r36"}))};return b("React").createElement("div",{className:"_3r37 _4147",style:a&&{height:a+"px"}},b("React").createElement("div",{className:"_3r38"},b("range")(0,c).map(e)))}e.exports=a}),null);
__d("ScrollLeftHelper",["Locale","UserAgent"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={NEGATIVE:"negative",REVERSE:"reverse",NORMAL:"normal"},h=function(){if(b("UserAgent").isBrowser("Chrome"))return g.NORMAL;if(b("UserAgent").isBrowser("Firefox")||b("UserAgent").isBrowser("Opera")||b("UserAgent").isBrowser("Safari"))return g.NEGATIVE;return b("UserAgent").isBrowser("IE")||b("UserAgent").isBrowser("Edge")?g.REVERSE:g.NORMAL},i=function(a,c,d){if(!b("Locale").isRTL())return 0;switch(h()){case g.NEGATIVE:case g.REVERSE:return d;case g.NORMAL:default:return c-a}},j=function(a,c,d){if(a===c)return i(a,c,d);if(!b("Locale").isRTL())return c-a-d;switch(h()){case g.NEGATIVE:return a-c+d;case g.REVERSE:return c-a+d;case g.NORMAL:default:return d}};e.exports={getInitialPosition:i,getNextScrollLeftGivenPageSize:function(a,c,d,e,f,k,l){var m=j(d,e,f);d=i(d,e,f);e=h();var n;!b("Locale").isRTL()?(f=l?Math.min(a+c,m):Math.max(a-c,d),n=l?m-(a+c):a-c):e===g.NEGATIVE?(f=l?Math.max(a-c,m):Math.min(a+c,d),n=l?Math.abs(m-f):Math.abs(f)):e===g.REVERSE?(f=l?Math.min(a+c,m):Math.max(a-c,d),n=l?m-f:f):(f=l?Math.max(a-c,m):Math.min(a+c,d),n=l?f:d-f);return n<k?l?m:d:f},isAtRightMostPosition:function(a,c,d,e){return!b("Locale").isRTL()?a===j(c,d,e):a===i(c,d,e)},isAtLeftMostPosition:function(a,c,d,e){return!b("Locale").isRTL()?a===0:a===j(c,d,e)}}}),null);
__d("HorizontalScroll.react",["ix","cx","fbt","Animation","Ease","Image.react","Locale","React","ScrollLeftHelper","UserAgent","XUIButton.react","asset","compactArray","emptyFunction","range"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=400;c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=j.constructor).call.apply(a,[this].concat(e)),this.defaultProps={placeholderFactory:b("emptyFunction")},this.state={itemCount:0,offsetWidth:0,scrolling:!1,scrollLeft:0,scrollWidth:0,viewportItemsCount:0},this.$5=function(){!this.state.scrolling&&this.$1&&this.setState({scrollLeft:this.$1.scrollLeft})}.bind(this),this.$2=function(){var a=this.state.viewportItemsCount*(this.props.itemWidth+this.props.itemMarginWidth),c=b("Locale").isRTL();a=b("ScrollLeftHelper").getNextScrollLeftGivenPageSize(this.state.scrollLeft,a,this.state.offsetWidth,this.state.scrollWidth,this.props.itemMarginWidth,this.props.itemWidth,c);this.setState({scrollLeft:a})}.bind(this),this.$3=function(){var a=this.state.viewportItemsCount*(this.props.itemWidth+this.props.itemMarginWidth),c=!b("Locale").isRTL();a=b("ScrollLeftHelper").getNextScrollLeftGivenPageSize(this.state.scrollLeft,a,this.state.offsetWidth,this.state.scrollWidth,this.props.itemMarginWidth,this.props.itemWidth,c);this.setState({scrollLeft:a})}.bind(this),c}a.prototype.componentDidMount=function(){var a=this.props.itemMarginWidth,c=this.props.itemWidth,d=this.$1.offsetWidth,e=this.$1.scrollWidth,f=b("ScrollLeftHelper").getInitialPosition(d,e,a);this.$1.scrollLeft=f;var g=0;c<=d&&(g=1+Math.floor((d-c)/(c+a)));this.setState({offsetWidth:d,scrollLeft:f,scrollWidth:e,viewportItemsCount:g})};a.prototype.componentDidUpdate=function(a,c){__p&&__p();if(this.$1){c.scrollLeft!==this.state.scrollLeft&&(this.$4&&this.$4.stop(),this.state.scrolling||this.setState({scrolling:!0}),this.$4=new(b("Animation"))(this.$1).duration(k).ease(b("Ease").circOut).ondone(function(){this.$4=null,this.setState({scrolling:!1})}.bind(this)).to("scrollLeft",this.state.scrollLeft).go());if(c.itemCount&&c.itemCount!==this.state.itemCount){a=this.$1.scrollLeft;c=this.$1.scrollWidth;var d=this.$1.offsetWidth,e=this.state.viewportItemsCount*(this.props.itemWidth+this.props.itemMarginWidth);a=Math.floor(a/e)*e;e=b("ScrollLeftHelper").getNextScrollLeftGivenPageSize(b("ScrollLeftHelper").getInitialPosition(d,c,this.props.itemMarginWidth),a,d,c,this.props.itemMarginWidth,this.props.itemWidth,!0);this.setState({scrollLeft:e,scrollWidth:c,offsetWidth:d})}}};a.prototype.UNSAFE_componentWillUpdate=function(a,c){c=a.children?b("compactArray")(b("React").Children.toArray(a.children)):[];a=c.length;a!=this.state.itemCount&&this.setState({itemCount:a})};a.prototype.render=function(){var a=b("ScrollLeftHelper").isAtLeftMostPosition(this.state.scrollLeft,this.state.offsetWidth,this.state.scrollWidth,this.props.itemMarginWidth),c=b("ScrollLeftHelper").isAtRightMostPosition(this.state.scrollLeft,this.state.offsetWidth,this.state.scrollWidth,this.props.itemMarginWidth),d=b("React").createElement(b("XUIButton.react"),{"aria-label":i._("See more results from the left"),className:"_1rk2 _6107","data-testid":"horizontalScroll/leftArrow",href:{url:"#"},image:b("React").createElement(b("Image.react"),{src:g("374382")}),label:"With a Hidden Label",labelIsHidden:!0,onClick:this.$2}),e=b("React").createElement(b("XUIButton.react"),{"aria-label":i._("See more results from the right"),className:"_1rkd _6107","data-testid":"horizontalScroll/rightArrow",href:{url:"#"},image:b("React").createElement(b("Image.react"),{src:g("374391")}),label:"With a Hidden Label",labelIsHidden:!0,onClick:this.$3});return b("React").createElement("div",{className:"_lmj"+(this.state.viewportItemsCount===4?" _1iug":"")+(b("UserAgent").isBrowser("Chrome")&&this.state.scrolling?" _3_9y":""),onScroll:this.$5,ref:function(a){return this.$1=a}.bind(this)},this.props.children,this.$6(),!a&&d,b("React").createElement("span",null),!c&&e)};a.prototype.$6=function(){var a=Math.max(0,this.state.viewportItemsCount-this.state.itemCount);return b("range")(0,a).map(this.props.placeholderFactory)};e.exports=a}),null);
__d("FBStoriesHorizontalTray.react",["cx","FBStoriesPog.react","FBStoriesPreviewPog.react","FBStoriesTrayConfig","FBStoriesTrayInlineAddItem.react","FBStoriesTrayInlineItem.react","FBStoriesTrayItemTitle.react","FBStoriesTrayShimmerLoader.react","HorizontalScroll.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=74,j=6;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){if(this.props.loading)return b("React").createElement("div",{className:"_100f"},b("React").createElement(b("FBStoriesTrayShimmerLoader.react"),{layout:"horizontal"}));var a=[];b("FBStoriesTrayConfig").showProduction&&a.push(this.$1());a=a.concat(this.$2());return b("React").createElement("div",{className:"_100f"},b("React").createElement(b("HorizontalScroll.react"),{itemWidth:i,itemMarginWidth:j,placeholderFactory:this.$3},a))};a.prototype.$2=function(){var a=b("FBStoriesTrayConfig").showPreviews;return this.props.buckets.map(function(c,d){var e=c.bucketID,f=c.isLive,g=c.hasNewViewers,h=c.cameraPostType,i=c.profileImageUri,j=c.previewImageUri,k=c.actorShortName,l=c.actorName,m=c.actorGender,n=c.ownedByViewer,o=this.props.uploading&&n;g=g;c=g||c.hasUnseenThreads&&!f;j=a?b("React").createElement(b("FBStoriesPreviewPog.react"),{cameraPostType:h,live:f,highlighted:c,showBadge:g,profileImageUri:i,previewImageUri:j,borderOption:n&&o?"hide":"show"}):b("React").createElement(b("FBStoriesPog.react"),{cameraPostType:h,live:f,highlighted:c&&!o,showBadge:g&&!o,profileImageUri:i,borderOption:n&&o?"hide":"show"});return b("React").createElement(b("FBStoriesTrayInlineItem.react"),{key:d,bucketID:e,loading:this.props.loadingBucketID===e,uploading:o,onSelect:this.props.onItemSelect,actorName:l,actorGender:m,ownBucket:n},j,b("React").createElement(b("FBStoriesTrayItemTitle.react"),{ownBucket:n,actorName:k}))}.bind(this))};a.prototype.$3=function(a){return b("React").createElement("div",{key:"ph_"+a,className:"_46z0"},b("React").createElement("div",{className:"__bd"}))};a.prototype.$1=function(){var a;a=(a=this.props.userInfo.userProfilePic)!=null?a.uri:a;return b("React").createElement(b("FBStoriesTrayInlineAddItem.react"),{loading:this.props.isProductionDialogLoading,profileImageUri:b("FBStoriesTrayConfig").showPreviews?a:null,key:"production",onClick:this.props.onAddStoryItemSelect})};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("FBStoriesCenterColumnTrayContainer.react",["cx","FBStoriesActions","FBStoriesHorizontalTray.react","FBStoriesLoggingConstants","FBStoriesLoggingHelper","FBStoriesProductionActions","FBStoriesStore","FBStoriesTrayHeader.react","FBStoriesViewerEntrypoint","FBStoriesViewerHelper","FluxContainer","React","fbStoriesRootSelectors","fbStoriesStateSelectors"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$2=function(a){this.setState({bucketIdBeingLoaded:a}),b("FBStoriesActions").userSelectedBucket(a)&&(b("FBStoriesViewerHelper").toggleViewer(!0,b("FBStoriesViewerEntrypoint").HOMEPAGE_TRAY),b("FBStoriesLoggingHelper").storyLog(b("FBStoriesLoggingConstants").ACTION_OPEN_STORY,b("FBStoriesLoggingConstants").SOURCE_OPEN_FROM_STORY_HEAD)),this.setState({bucketIdBeingLoaded:null})}.bind(this),c}a.getStores=function(){return[b("FBStoriesStore")]};a.calculateState=function(a){var c=b("FBStoriesStore").getState();return{bucketDescriptors:b("fbStoriesRootSelectors").bucketDescriptors(c),isProductionDialogLoading:b("fbStoriesStateSelectors").isProductionDialogLoading(c),loading:b("fbStoriesRootSelectors").loading(c),uploading:b("fbStoriesRootSelectors").uploading(c),bucketIdBeingLoaded:a?a.bucketIdBeingLoaded:null,userInfo:b("fbStoriesRootSelectors").userInfo(c)}};a.prototype.render=function(){return b("React").createElement(b("React").Fragment,null,b("React").createElement(b("FBStoriesTrayHeader.react"),null),b("React").createElement("div",{className:"_nyb"},this.$1()))};a.prototype.$1=function(){var a={buckets:this.state.bucketDescriptors,isProductionDialogLoading:this.state.isProductionDialogLoading,loading:this.state.loading,loadingBucketID:this.state.bucketIdBeingLoaded,onItemSelect:this.$2,uploading:this.state.uploading,onAddStoryItemSelect:this.$3,userInfo:this.state.userInfo};return b("React").createElement(b("FBStoriesHorizontalTray.react"),a)};a.prototype.$3=function(){b("FBStoriesProductionActions").openProductionDialog()};e.exports=b("FluxContainer").create(a)}),null);
__d("FBStoriesTray",["csx","regeneratorRuntime","Arbiter","CSS","DOMQuery","FBLogger","FBStoriesProductionActions","FBStoriesTrayInit","Run"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=!1;function i(a){b("CSS").addClass(a,"loading")}function j(a){b("CSS").removeClass(a,"loading")}var k={init:function(){if(h)return;this._initializeOnEnter();b("FBStoriesTrayInit").loadData()},onStoryTrayItemSelect:function(a){__p&&__p();var c,d;return b("regeneratorRuntime").async(function(e){__p&&__p();while(1)switch(e.prev=e.next){case 0:c=a.item,d=a.bucketID;i(c);e.prev=2;h||this._initializeOnEnter();e.next=6;return b("regeneratorRuntime").awrap(b("FBStoriesTrayInit").loadData());case 6:if(b("FBStoriesTrayInit").userSelectedBucket(d)){e.next=8;break}return e.abrupt("return");case 8:e.next=10;return b("regeneratorRuntime").awrap(b("FBStoriesTrayInit").openViewer());case 10:j(c);b("FBStoriesTrayInit").renderReactTray();e.next=18;break;case 14:e.prev=14,e.t0=e["catch"](2),b("FBLogger")("fbstories").catching(e.t0).warn("Error loading initial user tray data"),j(c);case 18:case"end":return e.stop()}},null,this,[[2,14]])},onStoryTrayAddItemClick:function(a){var c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:c=a.item,i(c),k.init(),b("FBStoriesProductionActions").openProductionDialog(),j(c),b("FBStoriesTrayInit").renderReactTray();case 6:case"end":return d.stop()}},null,this)},onSeeMoreLinkClick:function(a){b("CSS").addClass(b("DOMQuery").find(a.linkEl,"^._60kg ._1fvt"),"seeMore"),b("Arbiter").inform("netego_loaded")},_initializeOnEnter:function(){h=!0,b("FBStoriesTrayInit").initializeOnEnter(),b("Run").onBeforeUnload(this._resetOnExit)},_resetOnExit:function(){h=!1,b("FBStoriesTrayInit").resetOnExit()}};e.exports=k}),null);
__d("GamesTabPanel",["CSS","getStyleProperty"],(function(a,b,c,d,e,f){__p&&__p();function a(a,b){"use strict";this.$1=a}a.prototype.showPanel=function(){"use strict";b("CSS").show(this.$1)};a.prototype.hidePanel=function(){"use strict";b("CSS").hide(this.$1)};a.prototype.getHeight=function(){"use strict";return b("getStyleProperty")(this.$1,"height")};e.exports=a}),null);
__d("AppRequestReminders",["AsyncRequest","CSS","DOM","$","ge"],(function(a,b,c,d,e,f){__p&&__p();var g=0,h={},i=1,j=b("ge")("OtherAppReqReminder");a=function(a,b,c){h[b]={node:a,seq:i++,reqCount:c}};c=function(a){g=a};var k=function(a){return a.id.split("_")[1]};d=function(a){a=b("ge")(a);a=a.nextSibling;a!==j&&(b("CSS").show(a),g-=h[k(a)].reqCount);l(g)};var l=function(a){new(b("AsyncRequest"))().setURI("/ajax/reminders/update_count.php").setData({new_count:a}).setMethod("POST").send()};e=function(a,c){j&&c&&a>0?b("DOM").setContent(b("ge")("OtherAppReqLabel"),c):j?b("CSS").hide(j):b("CSS").hide(b("$")("OtherAppReqReminder"))};f.initNode=a;f.handleRemove=d;f.updateCount=e;f.setTotalOtherCount=c}),null);
__d("LitestandStreamTailStoryPlaceholderVisibilityTracker",["PageletEventConstsJS","PageletEventsHelper","onRectIsWithinViewport","performanceAbsoluteNow"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null,h=null,i=null,j=!1,k={};a={setPlaceholderElement:function(a){j||(b("PageletEventsHelper").subscribeToPageletEvents(l),j=!0),g=a,h&&h.remove(),h=b("onRectIsWithinViewport")(function(){return a.getBoundingClientRect()},function(a){!i&&a&&(i=b("performanceAbsoluteNow")())})},getStoryPlaceholderVisibleDuration:function(a){return k[a]||0}};function l(a,c){__p&&__p();if(a.startsWith("hyperfeed_story")&&c===b("PageletEventConstsJS").DISPLAY_END){c=b("performanceAbsoluteNow")();k[a]=i?c-i:0;if(g){a=g.getBoundingClientRect().top;a=a-window.scrollTop;i=a<window.innerHeight&&a>0?c:null}else i=null}}e.exports=a}),null);
__d("NewsFeedTailloadPlaceholderTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:NewsFeedTailloadPlaceholderLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:NewsFeedTailloadPlaceholderLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:NewsFeedTailloadPlaceholderLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setDisplayDone=function(a){this.$1.display_done=a;return this};a.prototype.setTailLoadPosition=function(a){this.$1.tail_load_position=a;return this};a.prototype.setTailLoadStatus=function(a){this.$1.tail_load_status=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.setVisibleDuration=function(a){this.$1.visible_duration=a;return this};c={display_done:!0,tail_load_position:!0,tail_load_status:!0,vc:!0,visible_duration:!0};e.exports=a}),null);
__d("FlexibleScrollableArea",["DataStore","DOM","DOMDimensions","Event","Parent","Run","Style","Vector","throttle"],(function(a,b,c,d,e,f){__p&&__p();var g=30,h=100;function a(a,c,d,e,f){"use strict";this._element=a,this._tight=c,this._measureFrom=d,this._minHeight=e,this._margin=f,b("DataStore").set(this._element,"FlexibleScrollableArea",this),b("Run").onLeave(this.cleanup.bind(this)),this._listener=b("Event").listen(window,"resize",b("throttle")(this.poke,h,this)),this.poke()}a.prototype.poke=function(){"use strict";__p&&__p();var a=b("DOM").find(this._element,".uiScrollableAreaBody");a=b("Vector").getElementDimensions(a).y+b("DOMDimensions").measureElementBox(a,"height",!0,!0,!0);if(this._tight){var c=this.getMaxHeight();a<c+g&&(c+=g);a=Math.max(Math.min(a,c),this._minHeight)}else a=Math.max(this.getMaxHeight(),this._minHeight);b("Style").set(this._element,"height",a+"px")};a.prototype.getMaxHeight=function(){"use strict";if(this._measureFrom==="bottom"){var a=b("Vector").getViewportDimensions().y,c=b("Vector").getElementPosition(this._element,"viewport").y;a=a-c;return a-this._margin}c=b("Vector").getElementPosition(this._element,"viewport").y+b("Vector").getElementDimensions(this._element).y;return c-this._margin};a.prototype.cleanup=function(){"use strict";this._listener&&this._listener.remove()};a.getInstance=function(a){"use strict";a=b("Parent").byClass(a,"flexibleScrollableArea");return a?b("DataStore").get(a,"FlexibleScrollableArea"):null};e.exports=a}),null);
__d("FeedConsumptionEvents",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=Object.freeze(b("keyMirror")({PLACEHOLDER_HIDDEN:null,PLACEHOLDER_VISIBLE:null,REQUEST_CANCELLED:null,REQUEST_COMPLETE:null,REQUEST_ERROR:null,REQUEST_STARTED:null,STORY_DISPLAY:null}));e.exports=a}),null);
__d("FeedConsumptionController",["EventEmitter","FeedConsumptionEvents","IntersectionObserver","PageletEventConstsJS","PageletEventsHelper"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$3=null,this.$4=null,this.$6=0,this.$2=a,this.$1=new(b("EventEmitter"))()}a.prototype.setPlaceholder=function(a){!this.$3?this.$3=new(b("IntersectionObserver"))(function(a){return this.$7(a)}.bind(this),{threshold:.1}):this.$5&&this.$3.unobserve(this.$5),this.$5=a,this.$3.observe(a)};a.prototype.start=function(){this.$6=0,this.$4||(this.$4=b("PageletEventsHelper").subscribeToPageletEvents(function(a,c){c===b("PageletEventConstsJS").DISPLAY_END&&a.startsWith("hyperfeed_story")&&this.$1.emit(b("FeedConsumptionEvents").STORY_DISPLAY,this.$6++)}.bind(this))),this.$1.emit(b("FeedConsumptionEvents").REQUEST_STARTED)};a.prototype.complete=function(){this.$1.emit(b("FeedConsumptionEvents").REQUEST_COMPLETE)};a.prototype.error=function(){this.$1.emit(b("FeedConsumptionEvents").REQUEST_ERROR)};a.prototype.cancel=function(){this.$1.emit(b("FeedConsumptionEvents").REQUEST_CANCELLED)};a.prototype.destroy=function(){this.$3&&this.$3.disconnect(),this.$3=null,this.$4&&this.$4.remove(),this.$4=null};a.prototype.addListener=function(a,b){return this.$1.addListener(a,b)};a.prototype.once=function(a,b){return this.$1.once(a,b)};a.prototype.$7=function(a){var c=this.$5,d=this.$3&&this.$3.thresholds,e=Array.isArray(d)&&d[0]||0;a.forEach(function(a){a.target===c&&this.$1.emit(a.intersectionRatio>e?b("FeedConsumptionEvents").PLACEHOLDER_VISIBLE:b("FeedConsumptionEvents").PLACEHOLDER_HIDDEN,this.$2())}.bind(this))};e.exports=a}),null);
__d("FeedConsumptionRestorationLogger",["FeedConsumptionEvents","FeedQuickLogModule","QuickPerformanceLogger","SubscriptionsHandler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$2=0,this.$1=a}a.prototype.destroy=function(){this.$3&&this.$3.release(),this.$4&&this.$4.remove()};a.prototype.$5=function(a){b("QuickPerformanceLogger").markerEnd(b("FeedQuickLogModule").CONSUMPTION_RESTORATION_WWW,a),this.reset()};a.prototype.reset=function(){this.destroy(),this.$2=0,this.$4=this.$1.once(b("FeedConsumptionEvents").PLACEHOLDER_VISIBLE,function(a){b("QuickPerformanceLogger").markerStart(b("FeedQuickLogModule").CONSUMPTION_RESTORATION_WWW),b("QuickPerformanceLogger").annotateMarkerInt(b("FeedQuickLogModule").CONSUMPTION_RESTORATION_WWW,"STORY_POSITION",a),this.$3=new(b("SubscriptionsHandler"))(),this.$3.addSubscriptions(this.$1.once(b("FeedConsumptionEvents").STORY_DISPLAY,function(a){b("QuickPerformanceLogger").annotateMarkerInt(b("FeedQuickLogModule").CONSUMPTION_RESTORATION_WWW,"TAIL_LOAD_STORY_POSITION",a),this.$5("SUCCESS")}.bind(this)),this.$1.once(b("FeedConsumptionEvents").PLACEHOLDER_HIDDEN,function(){return this.$5("CANCEL")}.bind(this)),this.$1.once(b("FeedConsumptionEvents").REQUEST_CANCELLED,function(){return this.$5("CANCEL")}.bind(this)),this.$1.once(b("FeedConsumptionEvents").REQUEST_ERROR,function(){return this.$5("FAIL")}.bind(this)))}.bind(this))};e.exports=a}),null);
__d("NewsFeedDedupeStoryController",["CSS","DOMQuery","queryThenMutateDOM"],(function(a,b,c,d,e,f){__p&&__p();a={dedupe:function(a,c){__p&&__p();b("queryThenMutateDOM")(function(){var d={};return b("DOMQuery").scry(a,c).filter(function(a){var c=a.getAttribute("data-dedupekey");if(c&&b("CSS").shown(a)){if(d[c])return!0;d[c]=!0}return!1})},function(a){a.forEach(function(a){b("CSS").hide(a),a.removeAttribute("style")})},"NewsFeedDedupeStoryControllerDedupe")}};e.exports=a}),null);
__d("NewsFeedOffscreenController",["cx","Arbiter","CSS","DOMQuery","IntersectionObserver","LitestandShareAttachment","NavigationMessage","Run","Style","SubscriptionsHandler","debounce","getOrCreateDOMID","queryThenMutateDOM"],(function(a,b,c,d,e,f,g){__p&&__p();a=400;var h=10,i="_5qqr",j={},k=null,l={rootMargin:a+"px 0px "+a+"px 0px"},m=null,n={};function o(){for(var a in n)b("DOMQuery").scry(n[a],"div[data-fullscreen]").length?delete n[a]:j[a]=n[a].offsetHeight}function p(){var a;for(var c in n)a=j[c],a!==undefined&&a>0&&(b("Style").apply(n[c],{height:a+"px",marginBottom:h+"px"}),a=n[c].firstElementChild,a&&b("CSS").hide(a),delete j[c]),delete n[c]}var q=b("debounce")(function(){b("queryThenMutateDOM")(o,p,"NewsFeedOffscreenController")});function r(a){delete n[b("getOrCreateDOMID")(a)];b("Style").apply(a,{height:"",marginBottom:""});a=a.firstElementChild;if(a){b("CSS").show(a);a=b("DOMQuery").scry(a,"."+i);a.forEach(function(a){b("LitestandShareAttachment").init(a)})}}function s(a){var c=[];a.forEach(function(a){a.isIntersecting||a.intersectionRatio>0?c.push(a.target):n[b("getOrCreateDOMID")(a.target)]=a.target});q();c.forEach(r)}function t(){k&&k.disconnect(),k=null,m&&m.release(),m=null}function u(){if(k)return k;k=new(b("IntersectionObserver"))(s,l);var a=new(b("SubscriptionsHandler"))();a.addSubscriptions(b("Arbiter").subscribe(b("NavigationMessage").NAVIGATION_BEGIN,t),b("Run").onLeave(t));return k}c={attachSubstream:function(a){u().observe(a)}};e.exports=c}),null);
__d("NewsFeedTailLoadPlaceholderLogger",["DOM","LitestandStream","NewsFeedTailloadPlaceholderTypedLogger","TailLoadLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("TailLoadLogger"));g=c&&c.prototype;function a(a,b){g.constructor.call(this,"feed",a,b),this.$NewsFeedTailLoadPlaceholderLogger1=!1}a.prototype.createLogger=function(){return new(b("NewsFeedTailloadPlaceholderTypedLogger"))()};a.prototype.getStoryCount=function(){return b("DOM").scry(b("LitestandStream").getStreamRoot(),b("LitestandStream").getStoriesSelector()).length};e.exports=a}),null);
__d("NewsFeedTailLoadController",["Arbiter","AsyncResponse","Bootloader","CSS","DOM","Event","FeedConsumptionController","FeedConsumptionRestorationLogger","FunnelLogger","IntersectionObserver","LitestandMessages","LitestandStream","LitestandStreamTailStoryPlaceholderVisibilityTracker","MainThreadPerformanceLoggerActions","MainThreadPerformanceMonitor","NavigationMessage","NewsFeedDedupeStoryController","NewsFeedOffscreenController","NewsFeedTailLoadPlaceholderLogger","NotificationListConfig","Run","SubscriptionsHandler","ge","getElementPosition","getOrCreateDOMID","getViewportDimensions","gkx"],(function(a,b,c,d,e,f){__p&&__p();var g=100,h=3e4,i={"streamload.tail.commence":!0,"streamload.tail.success":!0,"streamload_error.tail":!0,"streamload_error.tail.transport":!0,"streamload_error.tail.final":!0,"streamload.tail.retry":!0,"streamload_error.tail.retry":!0,"streamload.tail.retry.success":!0,"streamload_timeout.tail":!0},j,k,l={},m=null,n="WWW_NEWSFEED_TAILLOAD_FUNNEL";a=b("gkx")("AT7KK82E6JxaPx6oN4q-Vm9lp3uNcTVJR1JkFm9kz7Exm8LU2NQ95JrEznfGXvNo3sy8c5nRChJELHsdh7syPA88o6lc41pGHRPG_OgO5q8hBw");var o=2,p=null,q=null,r,s=null,t,u=null,v=0,w=0,x=null,y=new(b("FeedConsumptionController"))(function(){return b("DOM").scry(b("LitestandStream").getStreamRoot(),b("LitestandStream").getStoriesSelector()).length});a&&(m=new(b("FeedConsumptionRestorationLogger"))(y));var z=function(a){a.forEach(function(a){i[a]&&b("FunnelLogger").appendActionWithTag(n,w,a,"try_"+v)}),b("Bootloader").loadModules(["BanzaiODS"],function(b){a.forEach(function(a){b.bumpEntityKey("feed_load",a)})},"NewsFeedTailLoadController")},A=function(a,c){b("Arbiter").inform(b("LitestandMessages").STREAM_LOAD_ERROR,c);c=["streamload_error.tail"];v>0&&c.push("streamload_error.tail.retry");a&&v<o?(v++,D(a),c.push("streamload.tail.retry"),b("Arbiter").inform(b("LitestandMessages").STREAM_LOAD_RETRY)):(u&&b("CSS").removeClass(u,"async_saving"),q&&q.tailLoadFailed(),y.error(),b("MainThreadPerformanceMonitor").stop(b("MainThreadPerformanceLoggerActions").TAIL_LOAD));z(c)},B=function(){C(),r=setTimeout(function(){z(["streamload_timeout.tail"])},h)},C=function(){r&&clearTimeout(r)},D=function(a){__p&&__p();v<1&&(b("FunnelLogger").startFunnel(n,w),b("FunnelLogger").addFunnelTag(n,w,"NewsFeedTailLoadController"));z(["streamload.tail.commence"]);l[a]&&(z(["duplicate_cursor"]),b("Arbiter").inform(b("LitestandMessages").DUPLICATE_CURSOR_ERROR,a));l[a]=!0;var c={client_stories_count:b("DOM").scry(b("LitestandStream").getStreamRoot(),b("LitestandStream").getStoriesSelector()).length,cursor:a,feed_stream_id:b("LitestandStream").getFeedStreamID(),pager_config:t,scroll_count:w+1,story_id:b("LitestandStream").getStoryID()},d=function(b){A(a,b)},e=function(b){z(["streamload_error.tail.transport"]),A(a,b)},f=function(a){a.error?z(["streamload_error.tail.final"]):(z(["streamload.tail.success"]),w++)};!s?b("Bootloader").loadModules(["UIPagelet"],function(a){s=a.loadFromEndpoint("LitestandTailLoadPagelet",b("getOrCreateDOMID")(j),c,{append:!0,automatic:!0,constHeight:!0,crossPage:!0,errorHandler:d,finallyHandler:f,transportErrorHandler:e,usePipe:!0}),b("Arbiter").inform(b("LitestandMessages").STORIES_REQUESTED)},"NewsFeedTailLoadController"):(s.setErrorHandler(d).setTransportErrorHandler(e).go(c),b("Arbiter").inform(b("LitestandMessages").STORIES_REQUESTED))};function E(){p&&p.disconnect(),p=null,x&&x.release(),x=null,q&&q.tailLoadCancelled(),q&&q.destroy(),q=null,y.cancel(),y.destroy(),m&&m.destroy(),l={},s=null,w=0,C()}function F(){u&&b("CSS").addClass(u,"async_saving"),D(k),y.start(),q&&q.tailLoadStarted(),b("MainThreadPerformanceMonitor").start(b("MainThreadPerformanceLoggerActions").TAIL_LOAD)}function G(event){F(),event.preventDefault()}function H(a){var b=!1;a.forEach(function(a){if(a.target===u){a=a.isIntersecting||a.intersectionRatio>0;a&&(b=!0,F(),p&&u&&p.unobserve(u))}});return b}var I=function(a){return new(b("IntersectionObserver"))(function(a){H(a)},{rootMargin:"0px 0px "+a+"px 0px"})};function J(a,c){var d=g;a=b("getElementPosition")(a);var e=b("getViewportDimensions")();a=Math.max(a.y-d-e.height,0);return new(b("IntersectionObserver"))(function(a){H(a)&&(p&&p.disconnect(),p=I(c.bufferPixels))},{rootMargin:"0px 0px "+a+"px 0px"})}c={init:function(a,c,d,e,f,g){j=d,k=a,u=c,t=e,x=new(b("SubscriptionsHandler"))(),b("LitestandStreamTailStoryPlaceholderVisibilityTracker").setPlaceholderElement(u),f.useLoadEvent||f.useLoadEventIfPredicted&&f.predictionThreshold!=null&&b("NotificationListConfig").jewelClickPrediction!=null&&b("NotificationListConfig").jewelClickPrediction<f.predictionThreshold?p=I(f.bufferPixels):p=J(c,f),p&&u&&p.observe(u),x.addSubscriptions(b("Arbiter").subscribe(b("LitestandMessages").STORIES_REQUESTED,B),b("Arbiter").subscribe([b("LitestandMessages").STORIES_INSERTED,b("LitestandMessages").STREAM_LOAD_ERROR],C),b("Arbiter").subscribe(b("NavigationMessage").NAVIGATION_BEGIN,E),b("Event").listen(u,"click",G),b("Run").onLeave(E),b("Run").onUnload(function(){return q&&q.tailLoadCancelled()})),y.setPlaceholder(u),m&&m.reset(),g!=null&&(q=new(b("NewsFeedTailLoadPlaceholderLogger"))(g,u))},destroy:function(){E(),u&&b("CSS").hide(u)},tailloadCompleted:function(a,c){var d=b("LitestandStream").getStreamRoot();d&&b("NewsFeedDedupeStoryController").dedupe(d,b("LitestandStream").getStoriesSelector());u&&b("CSS").removeClass(u,"async_saving");k=a;p&&u&&p.observe(u);v=0;q&&q.tailLoadSuccessful(c);y.complete();b("MainThreadPerformanceMonitor").stop(b("MainThreadPerformanceLoggerActions").TAIL_LOAD)},setPagerConfig:function(a){t=a},moreStoriesInserted:function(a){b("Arbiter").inform(b("LitestandMessages").STORIES_INSERTED,{substream_id:a});a=b("ge")(a);a&&(b("NewsFeedOffscreenController").attachSubstream(a),v>0&&(v=0,z(["streamload.tail.retry.success"])))},handleErrorV2:function(a){A(a)}};e.exports=c}),null);
__d("ReminderStory",["Arbiter","AsyncRequest","Bootloader","DOMQuery","Event","FlexibleScrollableArea","LayerAutoFocus","ScrollableArea","SubscriptionsHandler","getActiveElement"],(function(a,b,c,d,e,f){__p&&__p();function a(a,c,d,e,f,g){"use strict";__p&&__p();this.$1=!1,this.$2=c,this.$3=a,b("Event").listen(a,"click",function(event){if(d&&b("DOMQuery").contains(d,event.target))return;c.show();e&&new(b("AsyncRequest"))("/growth/reminder/logging.php").setData({context_data:e,first_click:!this.$1}).send();this.$1=!0}.bind(this)),f&&c.subscribeOnce("show",function(){b("Bootloader").loadModules(["UIPagelet"],function(a){return a.loadFromEndpoint(f,c.getContent(),g)},"ReminderStory")}),c.disableBehavior(b("LayerAutoFocus")),c.subscribe("aftershow",function(){__p&&__p();var a=c.getRoot(),d=c.hide.bind(c);this.$4=new(b("SubscriptionsHandler"))();this.$4.addSubscriptions(b("Event").listen(window,"resize",d),b("Event").listen(window,"scroll",d));var e=b("DOMQuery").scry(a,".inlineReplyTextArea");e[0]&&e[0].focus();var f=b("DOMQuery").scry(a,".jewelItemNew"),g=[];f.forEach(function(a){a=f[a].getAttribute("id");a&&a.endsWith("_1_req")&&(g=g.concat(a.replace("_1_req","")))});g.length>0&&new(b("AsyncRequest"))("/friends/requests/log_impressions").setData({ids:g.join(","),ref:"reminder_box"}).send();var h=b("ScrollableArea").getInstance(b("DOMQuery").scry(c.getRoot(),".uiScrollableArea")[0]),i=b("FlexibleScrollableArea").getInstance(b("DOMQuery").scry(c.getRoot(),".flexibleScrollableArea")[0]),j=function(){i&&i.poke(),h&&(h.poke(),b("Event").fire(b("DOMQuery").scry(c.getRoot(),".scrollable")[0],"scroll"))};j();b("Arbiter").subscribe("reflow",function(){var c=b("DOMQuery").scry(a,".fbRemindersBirthdayList");if(e&&c)for(var d=0;d<e.length;++d)e[d]==b("getActiveElement")()&&b("DOMQuery").contains(c[0],e[d])&&j()})}.bind(this)),c.subscribe("beforehide",function(){this.$4&&(this.$4.release(),this.$4=null)}.bind(this))}a.prototype.getDialog=function(){"use strict";return this.$2};a.prototype.getRoot=function(){"use strict";return this.$3};e.exports=a}),null);
__d("FBRHCTabsManager",["AsyncRequest","KeyedCallbackManager"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new(b("KeyedCallbackManager"))(),h={};a={get:function(a,c){c=!g.executeOrEnqueue(a,c);if(c)return!0;if(h[a])return!1;new(b("AsyncRequest"))(a).send();h[a]=!0;return!1},set:function(a,b){var c;g.addResourcesAndExecute((c={},c[a]=b,c))}};e.exports=a}),null);
__d("FBRHCTabs",["cx","CSS","Event","FBRHCTabsManager","Focus","RTLKeys","Style","tidyEvent"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a,c,d,e,f){this.$7=function(a){var c=a.getAttribute("data-key");c&&(b("tidyEvent")(b("Event").listen(a,"click",this.$8.bind(this,c))),b("tidyEvent")(b("Event").listen(a,"keydown",this.$9.bind(this,c))))}.bind(this),this.$1=c,this.$3=d,this.$4=e,this.$5=a.reduce(function(a,b){a[b.key]=b.href;return a},{}),this.$6=Array.from(this.$1.children).map(function(a){return a.children[0]}),this.$2=a[0].key,b("FBRHCTabsManager").set(this.$5[this.$2],f),this.$6.forEach(this.$7)}a.prototype.$10=function(a){this.$6.forEach(function(c){c.getAttribute("data-key")===a?(b("CSS").addClass(c,"_4dfg"),b("Style").set(this.$3,"left",c.offsetLeft+"px"),c.setAttribute("aria-selected","true"),c.setAttribute("tabindex","0")):(b("CSS").removeClass(c,"_4dfg"),c.setAttribute("aria-selected","false"),c.setAttribute("tabindex","-1"))}.bind(this))};a.prototype.$9=function(a,event){__p&&__p();var c=b("Event").getKeyCode(event),d=this.$6.findIndex(function(b){return b.getAttribute("data-key")===a});switch(c){case b("RTLKeys").SPACE:case b("RTLKeys").RETURN:this.$6[d].click();b("Event").prevent(event);break;case b("RTLKeys").getLeft():case b("RTLKeys").UP:c=d>0?d-1:this.$6.length-1;b("Focus").set(this.$6[c]);break;case b("RTLKeys").getRight():case b("RTLKeys").DOWN:c=d<this.$6.length-1?d+1:0;b("Focus").set(this.$6[c]);break}};a.prototype.$8=function(a){this.$10(a),b("FBRHCTabsManager").get(this.$5[this.$2],function(c){var d=c.offsetHeight;b("CSS").hide(c);c=b("FBRHCTabsManager").get(this.$5[a],function(a){b("CSS").hide(this.$4),b("CSS").show(a)}.bind(this));c||(b("Style").set(this.$4,"height",d+"px"),b("CSS").show(this.$4));this.$2=a}.bind(this))};e.exports=a}),null);
__d("VideoHomeUserBlacklistSource",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({WWW_FEED_RHC:"www_feed_rhc"})}),null);
__d("XVideoHomeUserBlacklistAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/vh_user/blacklist/",{})}),null);
__d("VideoHomeRHCCloseButtonAction",["AsyncRequest","VideoHomeUserBlacklistSource","XVideoHomeUserBlacklistAsyncController"],(function(a,b,c,d,e,f){"use strict";e.exports={setupCloseAction:function(a,c,d,e){a.addEventListener("click",function(a){a.stopPropagation(),a.preventDefault(),c.parentNode&&c.parentNode.removeChild(c),new(b("AsyncRequest"))().setURI(b("XVideoHomeUserBlacklistAsyncController").getURIBuilder().getURI()).setMethod("POST").setData({target_id:d,section_id:e,source:b("VideoHomeUserBlacklistSource").WWW_FEED_RHC}).send()})}}}),null);