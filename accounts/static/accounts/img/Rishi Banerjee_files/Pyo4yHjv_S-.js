if (self.CavalryLogger) { CavalryLogger.start_js(["MsEVZ"]); }

__d("OGComposerConstants",[],(function(a,b,c,d,e,f){e.exports={EditAttachmentURI:"/ajax/composerx/attachment/edit/",ExercisesTypeID:718343998201893,TransitivityStateIntransitive:2}}),null);
__d("Token",["fbt","CSS","DataStore","DOM","Locale","UnicodeBidi"],(function(a,b,c,d,e,f,g){__p&&__p();function a(a,b){"use strict";this.info=a,this.paramName=b}a.prototype.getInfo=function(){"use strict";return this.info};a.prototype.getText=function(){"use strict";return this.info.text};a.prototype.getValue=function(){"use strict";return this.info.uid};a.prototype.isFreeform=function(){"use strict";return!!this.info.freeform};a.prototype.setSelected=function(a){"use strict";b("CSS").conditionClass(this.getElement(),"uiTokenSelected",a);return this};a.prototype.getElement=function(){"use strict";this.element||this.setElement(this.createElement());return this.element};a.prototype.setElement=function(a){"use strict";b("DataStore").set(a,"Token",this);this.element=a;return this};a.prototype.isRemovable=function(){"use strict";return b("CSS").hasClass(this.element,"removable")};a.prototype.getTextDirection=function(){"use strict";var a=b("UnicodeBidi").isDirectionRTL(this.getText()),c=b("Locale").isRTL();if(a&&!c)return"rtl";return!a&&c?"ltr":null};a.prototype.createElement=function(a,c){"use strict";__p&&__p();var d=this.paramName,e=this.getValue(),f=this.getText(),h=b("DOM").create("span",{className:"uiTokenText"},f),i=null;this.info.removable!==!1&&(i=b("DOM").create("a",{href:"#","aria-label":g._("Remove {item}",[g._param("item",f)]),className:"remove uiCloseButton uiCloseButtonSmall"}));a&&b("CSS").addClass(i,"uiCloseButtonSmallGray");e=b("DOM").create("input",{type:"hidden",value:e,name:d+"[]",autocomplete:"off"});f=b("DOM").create("input",{type:"hidden",value:f,name:"text_"+d+"[]",autocomplete:"off"});d={className:"removable uiToken"};var j=this.getTextDirection();j!==null&&(d.dir=j);j=b("DOM").create("span",d,[h,e,f,i]);a&&b("CSS").addClass(j,"uiTokenGray");if(c){d=b("DOM").create("i",{className:c});b("DOM").prependContent(j,d)}return j};e.exports=a}),null);
__d("WeakToken",["CSS","Token"],(function(a,b,c,d,e,f){__p&&__p();var g,h;g=babelHelpers.inherits(a,b("Token"));h=g&&g.prototype;a.prototype.createElement=function(){"use strict";var a=h.createElement.call(this,!0,"UFIWeakReferenceIcon");b("CSS").addClass(a,"uiTokenWeakReference");return a};function a(){"use strict";g.apply(this,arguments)}e.exports=a}),null);
__d("Tokenizer",["Arbiter","ArbiterMixin","CSS","DataStore","DOM","DOMQuery","Event","Focus","Input","Keys","Parent","StickyPlaceholderInput","Style","TextMetrics","Token","UserAgent_DEPRECATED","WeakToken","createObjectFrom","emptyFunction","mixin"],(function(a,b,c,d,e,f){__p&&__p();var g,h=20;c=babelHelpers.inherits(a,b("mixin")(b("ArbiterMixin")));g=c&&c.prototype;function a(a,c,d){"use strict";g.constructor.call(this),this.element=a,this.typeahead=c,this.input=c.getCore().getElement(),d&&this.init(d.tokenarea,d.param_name,d.initial_info,d.options),b("DataStore").set(this.element,"Tokenizer",this)}a.prototype.init=function(a,c,d,e){"use strict";this._handleEvents=this.handleEvents.bind(this),this.init=b("emptyFunction"),this.setTokenarea(a),this.paramName=c,this.placeholder||(this.placeholder=this.input.getAttribute("data-placeholder")||this.input.getAttribute("placeholder")||""),Object.assign(this,e),this.initEvents(),this.initTypeahead(),this.reset(d),this.initBehaviors(),setTimeout(this.adjustWidth.bind(this),0),b("Arbiter").inform("Tokenizer/init",this,b("Arbiter").BEHAVIOR_PERSISTENT),this.inform("init",{tokens:this.getTokens()})};a.prototype.reset=function(a){"use strict";this.tokens=[],this.unique={},a?this.populate(a):b("DOM").empty(this.tokenarea),this.updateTokenarea()};a.prototype.populate=function(a){"use strict";var c=[];this.tokens=this.getTokenElements().map(function(b,d){d=a[d];c.push(this._tokenKey(d));return this.createToken(d,b)},this);this.unique=b("createObjectFrom")(c,this.tokens)};a.prototype.setTokenarea=function(a){"use strict";__p&&__p();var c=!this.tokenarea;if(a!==this.tokenarea){if(this.tokenarea){b("DOM").remove(this.tokenarea);for(var d in this._tokenareaListeners)this._tokenareaListeners[d].remove()}this._tokenareaListeners=b("Event").listen(a,{click:this._handleEvents,keydown:this._handleEvents});this.tokenarea=a}c||this.reset()};a.prototype.getElement=function(){"use strict";return this.element};a.prototype.getTypeahead=function(){"use strict";return this.typeahead};a.prototype.getInput=function(){"use strict";return this.input};a.prototype.initBehaviors=function(){"use strict";this.behaviors=this.behaviors||[];if(this.behaviors instanceof Array)this.behaviors.forEach(function(a){a.behavior(this,a.config)}.bind(this));else for(var a in this.behaviors||{}){var b=window.TokenizerBehaviors&&window.TokenizerBehaviors[a];b.call(null,this,this.behaviors[a])}};a.prototype.initTypeahead=function(){"use strict";__p&&__p();var a=this.typeahead.getCore();a.resetOnSelect=!0;a.setValueOnSelect=!1;a.preventFocusChangeOnTab=!this.typeaheadTabNavigation;if(this.inline){a=this.typeahead.getView();b("CSS").addClass(a.getElement(),"uiInlineTokenizerView")}this.typeahead.subscribe("select",function(a,b){return this.handleSelect(b)}.bind(this));this.typeahead.subscribe("blur",this.handleBlur.bind(this))};a.prototype.handleBlur=function(event){"use strict";this.inform("blur",{event:event}),this.updatePlaceholder()};a.prototype.handleSelect=function(a){"use strict";var b=a.selected;a=a.query;"uid"in b&&(this.updateInput(),this.addToken(this.createToken(b),a))};a.prototype.initEvents=function(){"use strict";var a=b("UserAgent_DEPRECATED").firefox()<4?"keypress":"keydown";b("Event").listen(this.input,"paste",this.paste.bind(this));b("Event").listen(this.input,a,this.keydown.bind(this))};a.prototype.handleEvents=function(event){"use strict";var a=event.getTarget(),c=a&&this.getTokenElementFromTarget(a);if(!c)return;(event.type!="keydown"||b("Event").getKeyCode(event)==b("Keys").RETURN)&&this.processEvents(event,a,c)};a.prototype.processEvents=function(event,a,c){"use strict";__p&&__p();if(b("Parent").byClass(a,"remove")){var d=c.nextSibling;d=d&&b("DOMQuery").scry(c.nextSibling,".remove")[0];c=this.getTokenFromElement(c);c=this.addTokenData(c,a);this.removeToken(c);this.focusOnTokenRemoval(event,d);event.kill()}};a.prototype.focusOnTokenRemoval=function(event,a){"use strict";b("Focus").set(event.type=="keydown"&&a||this.input)};a.prototype.addTokenData=function(a,b){"use strict";return a};a.prototype.keydown=function(event){"use strict";this.inform("keydown",{event:event});var a=b("Event").getKeyCode(event),c=this.input;if(this.inline&&a==b("Keys").BACKSPACE&&b("Input").isEmpty(c)){a=this.getLastToken();a&&a.isRemovable()&&this.removeToken(a)}this.updateInput()};a.prototype.paste=function(event){"use strict";this.inform("paste",{event:event}),this.updateInput(!0)};a.prototype.focusInput=function(){"use strict";b("Focus").set(this.input)};a.prototype.updateInput=function(a){"use strict";if(!this.inline)return;setTimeout(function(){this.adjustWidth(this.input.value),a&&(this.input.value=this.input.value)}.bind(this),20);b("StickyPlaceholderInput").setPlaceholderText(this.input,"");this.inform("resize")};a.prototype.setStickyPlaceholder=function(a){"use strict";this.stickyPlaceholder=!0,this.setPlaceholder(a)};a.prototype.setPlaceholder=function(a){"use strict";this.placeholder=a,this.stickyPlaceholder&&b("StickyPlaceholderInput").setPlaceholderText(this.input,a),this.updatePlaceholder()};a.prototype.updatePlaceholder=function(){"use strict";if(!this.inline||this.input.value)return;var a=!this.tokens.length,c="";a||this.stickyPlaceholder?(this.adjustWidth(this.placeholder),c=this.placeholder):this.adjustWidth(this.input.value);b("StickyPlaceholderInput").setPlaceholderText(this.input,c)};a.prototype.adjustWidth=function(a){"use strict";__p&&__p();if(!this.inline||!this._getIsInDOM())return;!a&&this.input.value===""&&(a=this.placeholder);var c=h;if(a!==this.placeholder||!this.getTokens().length||this.stickyPlaceholder){var d=b("Style").getFloat(this.getElement(),"width");a=this._getMetrics().measure(a);c=a.width+this._getWidthOffset()+10;c=c>=d?d:c}b("Style").set(this.input,"width",c+"px");this.inform("resize");b("Arbiter").inform("reflow")};a.prototype.getToken=function(a){"use strict";return this.unique[a]||null};a.prototype.getTokens=function(){"use strict";return this.tokens||[]};a.prototype.getTokenElements=function(){"use strict";return b("DOMQuery").scry(this.tokenarea,"span.uiToken")};a.prototype.getTokenElementFromTarget=function(a){"use strict";return b("Parent").byClass(a,"uiToken")};a.prototype.getTokenFromElement=function(a){"use strict";return b("DataStore").get(a,"Token")};a.prototype.getTokenValues=function(){"use strict";return!this.tokens?[]:this.tokens.map(function(a){return a.getValue()})};a.prototype.getFirstToken=function(){"use strict";return this.tokens[0]||null};a.prototype.getLastToken=function(){"use strict";return this.tokens[this.tokens.length-1]||null};a.prototype.hasMaxTokens=function(){"use strict";return this.maxTokens&&this.maxTokens<=this.tokens.length};a.prototype.createToken=function(a,c){"use strict";var d=this.getToken(this._tokenKey(a));d||(d=a.weak_reference?new(b("WeakToken"))(a,this.paramName):new(b("Token"))(a,this.paramName));c&&d.setElement(c);return d};a.prototype.addToken=function(a,c){"use strict";__p&&__p();if(this.hasMaxTokens())return;var d=this._tokenKey(a.getInfo());if(d in this.unique)return;this.unique[d]=a;this.tokens.push(a);this.insertToken(a);this.updateTokenarea();this.inform("addToken",a);this.inform("addTokenWithQuery",{token:a,query:c});this.inform("changeTokens");b("Arbiter").inform("Form/change",{node:this.element})};a.prototype.insertToken=function(a){"use strict";b("DOM").appendContent(this.tokenarea,a.getElement())};a.prototype.removeToken=function(a){"use strict";__p&&__p();if(!a)return;var c=this.tokens.indexOf(a);if(c<0)return;this.tokens.splice(this.tokens.indexOf(a),1);delete this.unique[this._tokenKey(a.getInfo())];b("DOM").remove(a.getElement());this.updateTokenarea();this.inform("removeToken",a);this.inform("changeTokens");b("Arbiter").inform("Form/change",{node:this.element})};a.prototype.removeAllTokens=function(){"use strict";this.reset(),this.inform("changeTokens"),this.inform("removeAllTokens")};a.prototype.updateTokenarea=function(){"use strict";var a=this.typeahead.getCore(),c=this.getTokenValues();this.excludeDuplicates&&(this._exclusions||(this._exclusions=a.getExclusions()),a.setExclusions(c.concat(this._exclusions)));a.setEnabled(!this.hasMaxTokens());this.updateTokenareaVisibility();this.updatePlaceholder();this.inform("resize");b("Arbiter").inform("reflow")};a.prototype.updateTokenareaVisibility=function(){"use strict";b("CSS").conditionShow(this.tokenarea,this.tokens.length!==0)};a.prototype._tokenKey=function(a){"use strict";return a.uid+(a.freeform?":":"")};a.prototype._getWidthOffset=function(){"use strict";if(this._widthOffset===null){var a=this.input.clientWidth,c=b("Style").getFloat(this.input,"width");a==c?this._widthOffset=b("Style").getFloat(this.input,"paddingLeft")+b("Style").getFloat(this.input,"paddingRight"):this._widthOffset=0}return this._widthOffset};a.prototype._getMetrics=function(){"use strict";this._metrics||(this._metrics=new(b("TextMetrics"))(this.input,this.inline));return this._metrics};a.prototype._getIsInDOM=function(){"use strict";return this._isInDOM||(this._isInDOM=b("DOMQuery").contains(document.body,this.input))};a.getInstance=function(a){"use strict";a=b("Parent").byClass(a,"uiTokenizer");return a?b("DataStore").get(a,"Tokenizer"):null};a.init=function(a,b){"use strict";a.init(b.tokenarea,b.param_name,b.initial_info,b.options)};Object.assign(a.prototype,{inline:!1,maxTokens:null,excludeDuplicates:!0,placeholder:"",_widthOffset:null,_metrics:null});e.exports=a}),null);
__d("ComposerXTokenizer",["CSS","CurrentUser","DOM","DOMQuery","Token","Tokenizer"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("Tokenizer"));g=c&&c.prototype;function a(a,b,c){"use strict";g.constructor.call(this,a,b,c),this._loadingIndicatorText=""}a.prototype.createDecorativeToken=function(a,c){"use strict";var d=new(b("Token"))(a,this.paramName);c=d.createElement(!1,c);d.setElement(c);b("CurrentUser").getID()==a.uid&&b("DOMQuery").scry(c,'input[type="hidden"]').forEach(b("DOM").remove);return d};a.prototype.setLoadingIndicatorText=function(a){"use strict";this._loadingIndicatorText=a};a.prototype.addLoadingIndicator=function(){"use strict";if(this._loadingIndicator)return;this._loadingIndicator=this.createDecorativeToken({text:this._loadingIndicatorText},"loadingIndicator");b("DOM").appendContent(this.tokenarea,this._loadingIndicator.element);this.updateTokenarea()};a.prototype.removeToken=function(a){"use strict";a===this._loadingIndicator?(this.removeLoadingIndicator(),this.inform("removeLoadingIndicator")):g.removeToken.call(this,a)};a.prototype.removeLoadingIndicator=function(){"use strict";if(!this._loadingIndicator)return;b("DOM").remove(this._loadingIndicator.element);this._loadingIndicator=null;this.updateTokenarea()};a.prototype.updateTokenareaVisibility=function(){"use strict";b("CSS").conditionShow(this.tokenarea,this.tokens.length!==0||this._loadingIndicator)};a.prototype.findToken=function(a){"use strict";a=this._tokenKey(a);return a in this.unique?this.unique[a]:null};a.prototype.replaceToken=function(a){"use strict";__p&&__p();var c=this.findToken(a.getInfo());if(c){var d=c.getElement();c.setElement(a.getElement());b("DOM").replace(d,a.getElement());return!0}else{this.addToken(a);return!1}};e.exports=a}),null);
__d("ComposerXImplicitLocation",[],(function(a,b,c,d,e,f){__p&&__p();function a(a,b,c,d){"use strict";this._citySharer=a,this._placeTagger=b,this._hiddenInput=c,this._subscriptions=[],this._subscribeChangeCity(),this._subscribeSelect(),this._subscribeUnselect()}a.prototype.cleanup=function(){"use strict";while(this._subscriptions.length)this._subscriptions.pop().unsubscribe()};a.prototype.disable=function(){"use strict";this._placeTagger.getCore().getValue()||(this._disableImplicit=!0,this._citySharer.saveCityInfo(),this._citySharer.clearCity()),this._placeTagger.getData().setBootstrapEndpoint("/ajax/places/typeahead")};a.prototype.enable=function(){"use strict";this._placeTagger.getCore().getValue()||(this._citySharer.restoreCityInfo(),this._disableImplicit=!1),this._placeTagger.getData().resetBootstrapEndpoint()};a.prototype.selectPlace=function(a){"use strict";a.place_type=="city"&&(this._citySharer.changeCity(a.text,a.uid,a.city_id),this._placeTagger.getCore().setCity(a.city_id,!0)),a.city_id?!this._disableImplicit?this._citySharer.changeCity(a.city_name,a.city_page_id,a.city_id):this._citySharer.setCityData(a.city_name,a.city_page_id,a.city_id):this._citySharer.clearCity(),this._citySharer.addPlace(a)};a.prototype.unselectPlace=function(){"use strict";this._hiddenInput.value=this._citySharer.getValue(),this._citySharer.clearPlace(),this._disableImplicit&&this.disable()};a.prototype._subscribeChangeCity=function(){"use strict";this._subscriptions.push(this._citySharer.subscribe("change",function(a,b){this._placeTagger.getCore().getHiddenValue()||(this._hiddenInput.value=this._citySharer.getValue()),b&&b.city_id&&this._placeTagger.getCore().setCity(b.city_id,!0)}.bind(this)))};a.prototype._subscribeSelect=function(){"use strict";this._subscriptions.push(this._placeTagger.subscribe("select",function(a,b){this.selectPlace(b.selected)}.bind(this)))};a.prototype._subscribeUnselect=function(){"use strict";this._subscriptions.push(this._placeTagger.subscribe("unselect",this.unselectPlace.bind(this)))};e.exports=a}),null);
__d("PlaceTagType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CITY:"city",STATE_PROVINCE:"state_province",COUNTRY:"country",PLACE:"place",EVENT:"event",RESIDENCE:"residence",TEXT:"text"})}),null);
__d("PlaceUtils",["PlaceTagType"],(function(a,b,c,d,e,f){a={placesClose:function(a,b,c,d){a=a||0;b=b||0;c=c||0;d=d||0;return Math.abs(a-c)<1e-5&&Math.abs(b-d)<1e-5},isNonSpecificPlace:function(a){return a==b("PlaceTagType").CITY||a==b("PlaceTagType").STATE_PROVINCE||a==b("PlaceTagType").COUNTRY}};e.exports=a}),null);
__d("ComposerXStandardTagger",["cx","Arbiter","ArbiterMixin","AsyncRequest","ComposerXImplicitLocation","CSS","CurrentUser","DOM","Event","Focus","Input","Keys","Parent","PlaceUtils","StickyPlaceholderInput","WeakToken","getOrCreateDOMID","isEmpty","mixin"],(function(a,b,c,d,e,f,g){__p&&__p();var h;c=babelHelpers.inherits(a,b("mixin")(b("ArbiterMixin")));h=c&&c.prototype;function a(a){"use strict";h.constructor.call(this),this._listeners=[],this._subscriptions=[],this._onCleanup=[],this._config=a||{},this._taggers={},this._taggerIcons={},this._onTaggerShowCallbacks={},this._onTaggerHideCallbacks={},this._currentTagger=null,this._sponsorRelationshipSelector=null,this._sharedToSponsorCheckbox=null,this._taggerSideElements={},this._socialTextSelectors={}}a.prototype.init=function(a){"use strict";this._mentionsInput=a.getComponent("maininput"),this._withTagger=a.getComponent("withtagger"),this._withTaggerIcon=a.getComponent("withtaggericon"),this._placeTagger=a.getComponent("placetagger"),this._hiddenExplicitPlace=a.getComponent("explicitplaceinput"),this._citySharerIcon=a.getComponent("citysharericon"),this._hiddenPlaceInput=a.getComponent("hiddenplaceinput"),this._placeNameInput=a.getComponent("placenameinput"),this._sessionID=a.getComponent("hiddensessionid"),this._editParams=a.getComponent("editparams"),this._interestTagger=a.getComponent("interesttagger"),this._interestTaggerIcon=a.getComponent("pagestargetingicon"),this._hasMentionsInput()&&(this._input=b("DOM").scry(this._mentionsInput.element,"textarea.input")[0],b("Arbiter").subscribe("composer/ogCustomIconSelected",function(){b("Focus").set(this._input)}.bind(this))),this._withTagger&&this.initAndRegisterWithTagger(),this._placeTagger&&this.initAndRegisterPlaceTagger(),this._placeTagger&&this.registerAutoEventSuggestion(),this.initAndRegisterInterestTagger(),this._hasMentionsInput()&&this._listeners.push(b("Event").listen(this._mentionsInput.element,"mousedown",this._onMentionsInputClicked.bind(this)))};a.prototype.registerAutoEventSuggestion=function(){"use strict";this._subscriptions.push(b("Arbiter").subscribe("Events/autoSuggestionConfirmed",function(a,c){this._toggleTagger("place"),b("Arbiter").inform("Events/autoSuggestionSelected",c),b("Focus").set(this._input)}.bind(this)))};a.prototype.initAndRegisterPlaceTagger=function(){"use strict";this.registerTagger("place",this._placeTagger,this._citySharerIcon),this.initTaggerInput("place",this._placeTagger.instance.getCore().getElement()),this._initCitySharer(),this._initPlaceTagger()};a.prototype.initAndRegisterWithTagger=function(){"use strict";this.registerTagger("with",this._withTagger,this._withTaggerIcon),this.initTaggerInput("with",this._withTagger.instance.getInput()),this._initWithTagger(),this.isEditComposer()&&this._updateWithTaggerUI()};a.prototype.initAndRegisterInterestTagger=function(){"use strict";if(!this._interestTagger||!this._interestTaggerIcon)return;this.registerTagger("interest",this._interestTagger,this._interestTaggerIcon);this.initTaggerInput("interest",this._interestTagger.instance.getInput());this._subscriptions.push(this._interestTagger.instance.subscribe(["addToken","removeToken","init"],this._updateInterestTaggerUI.bind(this)))};a.prototype.cleanup=function(){"use strict";this.hideTaggers(),this._listeners.forEach(function(a){a.remove()}),this._listeners=[],this._subscriptions.forEach(function(a){a.unsubscribe()}),this._subscriptions=[],this._onCleanup.forEach(function(a){a()}),this._onCleanup=[],this._citySharerIcon&&this._implicitLocation.cleanup(),this._brComposerUpsell=null};a.prototype.reset=function(){"use strict";this._socialTextRequest&&this._socialTextRequest.abort()};a.prototype.registerTagger=function(a,c,d){"use strict";this._taggers[a]=c,this.hasIcons()&&(this._taggerIcons[a]=d,this._listeners.push(b("Event").listen(this._taggerIcons[a].element,"click",this._toggleTagger.bind(this,a))))};a.prototype.registerTaggerSideElement=function(a,b,c){"use strict";a in this._taggerSideElements||(this._taggerSideElements[a]={}),b in this._taggerSideElements[a]||(this._taggerSideElements[a][b]=c)};a.prototype.hideTaggerIcons=function(){"use strict";for(var a in this._taggers)b("CSS").hide(this._taggerIcons[a].element)};a.prototype.showTaggerIcons=function(){"use strict";for(var a in this._taggers)b("CSS").show(this._taggerIcons[a].element)};a.prototype.initTaggerInput=function(a,c){"use strict";var d=this._config.placeholders||{};d[a]&&b("StickyPlaceholderInput").setPlaceholderText(c,d[a]);this._onTaggerShowCallbacks[a]=b("Focus").set.bind(null,c);this._listeners.push(b("Event").listen(c,"keydown",function(a){b("Event").getKeyCode(a)==b("Keys").RETURN&&!b("Input").getValue(a.getTarget())&&(this.hideTaggers(),setTimeout(b("Focus").set.bind(null,this._input),0))}.bind(this)))};a.prototype.setTaggerCallback=function(a,b){"use strict";this._onTaggerShowCallbacks[a]=b};a.prototype.setTaggerHideCallback=function(a,b){"use strict";this._onTaggerHideCallbacks[a]=b};a.prototype._initCitySharer=function(){"use strict";this._implicitLocation=new(b("ComposerXImplicitLocation"))(this._citySharerIcon.instance,this._placeTagger.instance,this._hiddenPlaceInput.element),this._config.disableImplicitCity?this._implicitLocation.disable():this._implicitLocation.enable()};a.prototype.switchTaggerInResponseToClick=function(event){"use strict";var a=event.getTarget();b("Parent").byClass(a,"withToken")?this.switchToTagger("with"):b("Parent").byClass(a,"placeToken")?this.switchToTagger("place"):b("Parent").byClass(a,"og_composer_object")?this.switchToTagger("ogtagger"):this._hideTaggersFromMentionsInputClick()};a.prototype._onMentionsInputClicked=function(event){"use strict";this.switchTaggerInResponseToClick(event)};a.prototype._hideTaggersFromMentionsInputClick=function(){"use strict";this.hideTaggers()};a.prototype._initWithTagger=function(){"use strict";this._subscriptions.push(this._withTagger.instance.subscribe(["addToken","removeToken","init"],this._updateWithTaggerUI.bind(this))),this.refreshWithTaggerPlaceholder()};a.prototype.getWithTaggerPlaceholder=function(){"use strict";return this._config.placeholders?this._config.placeholders["with"]:null};a.prototype.getCitySharerIcon=function(){"use strict";return this._citySharerIcon};a.prototype.refreshWithTaggerPlaceholder=function(){"use strict";var a=this.getWithTaggerPlaceholder();a&&this._withTagger.instance.setPlaceholder(a)};a.prototype._initPlaceTagger=function(){"use strict";this._subscriptions.push(this._placeTagger.instance.subscribe("select",function(a,c){this._hiddenPlaceInput.element.value=c.selected.uid,this._placeNameInput.element.value=c.selected.text,this._hiddenExplicitPlace.element.value=!0,this._placeType=c.selected.place_type,this.updateTaggedText(),this.hideTaggers(),b("Focus").set(this._input)}.bind(this))),this._subscriptions.push(this._placeTagger.instance.subscribe("unselect",function(a,b){this._hiddenExplicitPlace.element.value=!1,this._placeNameInput.element.value="",this._placeType=null,this.updateTaggedText()}.bind(this)))};a.prototype.addSubscription=function(a){"use strict";this._subscriptions.push(a)};a.prototype.addListener=function(a){"use strict";this._listeners.push(a)};a.prototype.hasIcons=function(){"use strict";return!0};a.prototype._showTagger=function(a){"use strict";__p&&__p();b("Arbiter").inform("showTagger");this._currentTagger=a;b("CSS").show(this._taggers[a].element);this.hasIcons()&&b("CSS").addClass(this._taggerIcons[a].element,"_509o");a==="with"&&new(b("AsyncRequest"))().setURI("/ajax/fof/user_education.php").setData({increment:1}).send();this._onTaggerShowCallbacks[a]&&this._onTaggerShowCallbacks[a]();if(a in this._taggerSideElements)for(var c in this._taggerSideElements[a])b("CSS").show(this._taggerSideElements[a][c].element)};a.prototype._hideTagger=function(a){"use strict";b("CSS").hide(this._taggers[a].element);this.hasIcons()&&b("CSS").removeClass(this._taggerIcons[a].element,"_509o");this._onTaggerHideCallbacks[a]&&this._onTaggerHideCallbacks[a]();this._currentTagger===a&&(this._currentTagger=null);if(a in this._taggerSideElements)for(var c in this._taggerSideElements[a])b("CSS").hide(this._taggerSideElements[a][c].element)};a.prototype.hideTaggers=function(){"use strict";for(var a in this._taggers)this._hideTagger(a);this._currentTagger=null;this.inform("hidetaggers")};a.prototype.isAnyTaggerShown=function(){"use strict";return!!this._currentTagger};a.prototype.switchToTagger=function(a){"use strict";this.hideTaggers(),this._showTagger(a)};a.prototype._toggleTagger=function(a){"use strict";b("CSS").shown(this._taggers[a].element)?this.hideTaggers():this.switchToTagger(a)};a.prototype._getTaggedTextData=function(){"use strict";if(this._hasPlaceTagger())var a=this._placeTagger.instance.getCore(),c=a.getHiddenValue(),d=c&&a.getValue();a=(this._withTagger&&this._withTagger.instance.getTokens()||[]).filter(function(a){return a.info.uid!=b("CurrentUser").getID()});return!a.length&&!d?{}:{people:a.map(function(a){return a.info.uid}),weakReferences:a.filter(function(a,c,d){return a instanceof b("WeakToken")}).map(function(a){return a.info.uid}),place:d,placeID:c,isNonSpecificPlace:b("PlaceUtils").isNonSpecificPlace(this._placeType)}};a.prototype.updateTaggedText=function(){"use strict";__p&&__p();if(this._hasMentionsInput()){var a=this._getTaggedTextData();this.getExtraTaggedTextData&&(a=Object.assign(a,this.getExtraTaggedTextData()));++this._requestID;if(b("isEmpty")(a)){this._mentionsInput.instance.setAuxContent(null);b("Arbiter").inform("reflow");return}a.requestID=this._requestID;a.sessionID=this._sessionID.element.value;this._socialTextRequest=new(b("AsyncRequest"))();this._socialTextRequest.setURI("/ajax/metacomposer/social_text.php").setData(a).setHandler(this._handleSocialText.bind(this)).send()}};a.prototype._updateWithTaggerUI=function(){"use strict";if(!this._withTagger||!this._withTaggerIcon)return;setTimeout(b("StickyPlaceholderInput").update.bind(null,this._withTagger.instance.getInput()),0);b("CSS").conditionClass(this._withTaggerIcon.element,"_1dsa",this._withTagger.instance.getTokens().length>0);this.updateTaggedText()};a.prototype._updateInterestTaggerUI=function(){"use strict";b("CSS").conditionClass(this._interestTaggerIcon.element,"_21yl",this._interestTagger.instance.getTokens().length>0)};a.prototype._handleSocialText=function(a){"use strict";if(a.payload.requestID===this._requestID){var c=this._mentionsInput.instance;c.setAuxContent(a.payload.rendered);a=c.getAuxContentRoot();a&&this._input.setAttribute("aria-labelledby",b("getOrCreateDOMID")(a));b("Arbiter").inform("reflow")}};a.prototype._hasMentionsInput=function(){"use strict";return this._mentionsInput!==undefined};a.prototype._hasPlaceTagger=function(){"use strict";return this._placeTagger!==undefined};a.prototype.isEditComposer=function(){"use strict";return!!this._editParams};Object.assign(a.prototype,{_placeType:null,_requestID:0,_socialTextRequest:null});e.exports=a}),null);
__d("ComposerXOGTaggerBehavior",["csx","cx","Arbiter","ComposerXController","CSS","DOM","DOMQuery","MinutiaeVerbs","OGComposerConstants","URI"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i=null;a={initOGTagger:function(a){__p&&__p();this._attachmentRoot=a.getRoot();this._showPreview=a.allowOGTagPreview();this._ogTagger=a.getComponent("ogtagger");this._ogIcon=a.getComponent("ogtaggericon");this._removeUrl=a._config&&a._config.remove_url||"/ajax/composerx/attachment/status/";i=this._ogTagger.instance;this.registerTagger("ogtagger",this._ogTagger,this._ogIcon);this.setTaggerCallback("ogtagger",this._ogTagger.instance.showTagger.bind(this._ogTagger.instance));this.setTaggerHideCallback("ogtagger",this._ogTagger.instance.hideTagger.bind(this._ogTagger.instance));this.addSubscription(this._ogTagger.instance.subscribe("changed",this._handleOGActionChanged.bind(this)));this.addSubscription(this._ogTagger.instance.subscribe("unselect",this._handleOGActionRemoved.bind(this)));this._placeTagger&&this.addSubscription(this._placeTagger.instance.subscribe(["select","unselect"],this._handlePlaceChanged.bind(this)));this.addSubscription(b("Arbiter").subscribe("composer/initializedAttachment",function(){this._ogTagger.instance.isSet()&&b("Arbiter").inform("composer/deactivateDragdrop")}.bind(this)));this.addSubscription(b("Arbiter").subscribe("composer/ogCustomIconSelected",function(a,b){if(typeof b!=="object"){this._ogTagger.instance.setCustomIconID(b);return}this._ogTagger.instance.setCustomIconID(b.icon_id)}.bind(this)));this.addSubscription(b("Arbiter").subscribe("composer/ogIconPickerOpened",function(a,b){if(typeof b!=="object"){this._ogTagger.instance.markIconPickerOpened();return}this._ogTagger.instance.markIconPickerOpened()}.bind(this)));this.addSubscription(b("Arbiter").subscribe("composer/updateViewerLocationEstimate",function(a,b){return this._handleViewerLocationChanged(b)}.bind(this)));this.subscribe("hidetaggers",this.hideTypeaheadView.bind(this));this._updateOGIconState();this._updateWithTaggerUI();if(!this._config.preventUnfinishedPostAlert){var c=a.getComposerID();a=a.getRoot();while(a!=null){a=a.parentNode;if(a.id==c)break}b("ComposerXController").registerConditionForComposerCancel(a,function(){return i&&i.hasChanges&&i.hasChanges()})}},_handleOGActionChanged:function(){__p&&__p();this._ogTagger.instance.setCustomIconID("");this.updateTaggedText();this._updateOGIconState();if(this._showPreview&&this._ogTagger.instance.isSet()){b("Arbiter").inform("composer/deactivateDragdrop");var a=this._ogTagger.instance.getObjectID();if(a){var c=this._ogTagger.instance.getActionTypeID(),d=b("DOM").find(this._attachmentRoot,'input[name="hide_object_attachment"]');d.value=0;this._config.objectPreviewID==a&&this._showAttachmentPreview();if(this._config.hasShareScrape)return;this.isEditComposer()?d=new(b("URI"))(b("OGComposerConstants").EditAttachmentURI):d=new(b("URI"))(this._removeUrl);d.addQueryData({override_preview_object_id:!0,preview_object_id:a,preview_action_type_id:c,og_action_changed:!0});b("ComposerXController").getAttachment(this._attachmentRoot,d.toString());c==b("MinutiaeVerbs").COMPOSER_ATTENDS&&b("Arbiter").inform("composer/attendingMinutiaeAdded",{info:{original_id:a}})}}else b("Arbiter").inform("composer/reactivateDragdrop"),this._hideAttachmentPreview()},_handleOGActionRemoved:function(){b("Arbiter").inform("composer/attendingMinutiaeRemoved",{info:{}})},_updateOGIconState:function(){b("CSS").conditionClass(this._ogIcon.element,"_4-jh",this._ogTagger.instance.isSet()),this._ogTagger.instance.isSet()?(this._ogIcon.element.setAttribute("aria-selected","true"),this._ogIcon.element.removeAttribute("role"),this._hideTagger("ogtagger")):(this._ogIcon.element.setAttribute("aria-selected","false"),this._ogIcon.element.setAttribute("role","button"))},_handleViewerLocationChanged:function(a){if(!a.latitude||!a.longitude)return;this._ogTagger.instance.setViewerCoords&&this._ogTagger.instance.setViewerCoords(a)},_handlePlaceChanged:function(a,b){a=b.selected?b.selected.uid:0;this._ogTagger.instance.setPlaceID(a)},_showAttachmentPreview:function(){var a=b("DOM").scry(this._attachmentRoot,"div.fbComposerOGAttachmentPreview");a[0]&&b("CSS").show(a[0])},_hideAttachmentPreview:function(){var a=b("DOM").scry(this._attachmentRoot,"div.fbComposerOGAttachmentPreview");a[0]&&b("CSS").hide(a[0])},cleanupOGTagger:function(){this._showAttachmentPreview(),i=null},getExtraTaggedTextData:function(){var a={};this.getMoreExtraTaggedTextData&&(a=this.getMoreExtraTaggedTextData());if(!this._ogTagger||!this._ogTagger.instance.isSet())return a;a=Object.assign(a,{actionID:this._ogTagger.instance.getActionTypeID(),objectID:this._ogTagger.instance.getObjectID(),objectStr:this._ogTagger.instance.getObjectStr(),objectQuery:this._ogTagger.instance.getObjectQuery(),actionIconID:this._ogTagger.instance.getCustomIconID(),iconPickerOpened:this._ogTagger.instance.getIconPickerOpened()});return a},isOGTaggerSet:function(){return this._ogTagger&&this._ogTagger.instance.isSet()},hideTypeaheadView:function(){this._ogTagger.instance.getNounTypeahead().getView().hide()},updateSuggestion:function(a,c){__p&&__p();if(!a)return;var d=b("DOMQuery").find(this._ogIcon.element,"._5xlw");if(!d)return;var e=parseInt(d.innerText,10)||0;b("DOM").setContent(d,a+e);this._ogTagger.instance.suggestIconShown()||this._ogTagger.instance.showSuggestCount(d);c||(c="");this._ogTagger.instance.getVerbTypeahead().getData().bootstrapData.user_input=c},saveSuggestion:function(a,b){var c=this._ogTagger.instance.getVerbTypeahead().getData().bootstrapData.saved_suggestions||{};c[b]=a;this._ogTagger.instance.getVerbTypeahead().getData().bootstrapData.saved_suggestions=c}};e.exports=a}),null);
__d("ComposerXStandardTaggerWithOG",["ComposerXOGTaggerBehavior","ComposerXStandardTagger","classWithMixins","mixin"],(function(a,b,c,d,e,f){__p&&__p();var g,h;g=babelHelpers.inherits(a,b("classWithMixins")(b("ComposerXStandardTagger"),b("mixin")(b("ComposerXOGTaggerBehavior"))));h=g&&g.prototype;a.prototype.init=function(a){"use strict";h.init.call(this,a),this.initOGTagger(a)};a.prototype.cleanup=function(){"use strict";h.cleanup.call(this),this.cleanupOGTagger()};function a(){"use strict";g.apply(this,arguments)}e.exports=a}),null);
__d("BanzaiNectarSimple",["Banzai"],(function(a,b,c,d,e,f){function a(a){return{log:function(c,d,e){d={e:d,a:e};b("Banzai").post("nectar_simple:"+c,d,a)}}}c=a();c.create=a;e.exports=c}),null);
__d("OGComposerTagger",["csx","Arbiter","ArbiterMixin","BanzaiNectarSimple","CSS","DOM","Event","Input","QE","RTLKeys","StickyPlaceholderInput","areEqual","mixin","tidyEvent"],(function(a,b,c,d,e,f,g){__p&&__p();var h;c=babelHelpers.inherits(a,b("mixin")(b("ArbiterMixin")));h=c&&c.prototype;function a(a,c,d,e,f,g,i,j,k,l,m){"use strict";__p&&__p();h.constructor.call(this);this._verbTypeahead=a;this._nounTypeahead=c;this._hiddenObjectStr=d;this._suggestionMechanismInput=e;this._suggestionLoggingDataInput=j;this._nounTypeaheadDatasources=k;this._defaultNounTypeaheadDatasource=this._nounTypeahead.getData();this._customIconInput=f;this._objectQuery=null;this._suggestIconElement=null;this._suggestIconShown=!1;this._nounTypeaheadMetrics=i;this._iconPickerOpened=!1;this._placeSpecificVerbList=l;this._enableVerbPrefetching=m;this._initialObjectStr=this.getObjectStr();this._initialObjectID=this.getObjectID();g&&(b("DOM").setContent(this._getVerbSpan(),g),b("CSS").show(this._getVerbSpan()));this._prefetchVerbs();a.getCore().preventFocusChangeOnTab=!0;c.getCore().preventFocusChangeOnTab=!0;c.getCore().keepFocused=!1;this._watchCloseButton(c);d=c.getCore().getElement();e=a.getCore().getElement();b("tidyEvent")([a.subscribe("select",function(a,b){return this._handleVerbChange(b.selected)}.bind(this)),c.subscribe("select",function(a,b){return this._handleNounChange(b.selected)}.bind(this)),c.subscribe("unselect",function(){return this._handleNounUnselect()}.bind(this)),b("Event").listen(e,"keydown",function(event){(b("Event").getKeyCode(event)==b("RTLKeys").SPACE||b("Event").getKeyCode(event)==b("RTLKeys").getRight())&&(a.getView().select(!1),event.kill()),b("Event").getKeyCode(event)!=b("RTLKeys").BACKSPACE&&b("Event").getKeyCode(event)!=b("RTLKeys").DELETE&&b("Event").getKeyCode(event)!=b("RTLKeys").SPACE&&a.getData().value!==""&&b("BanzaiNectarSimple").log("og_composer_waterfall","verb_typeahead",{search_string:a.getData().value})}),b("Event").listen(d,"keydown",function(event){(b("Event").getKeyCode(event)==b("RTLKeys").BACKSPACE||b("Event").getKeyCode(event)==b("RTLKeys").getLeft())&&b("Input").isEmpty(this._getNounInput())&&this._showVerbTypeahead()}.bind(this)),b("Arbiter").subscribe("structuredSuggestion/add",function(a,b){this._handleVerbChange(b)}.bind(this)),b("Arbiter").subscribe("ogComposer/asyncSuggest",function(a,c){a=JSON.parse(c);if(!this.isSet()){this.setVerbandNoun(a.verb,a.noun);b("Arbiter").inform("ogComposer/asyncSuggest/display",c);var d=!1;this.subscribe("changed",function(event){d||(d=!0,b("Arbiter").inform("ogComposer/asyncSuggest/xout",c))})}}.bind(this)),b("Arbiter").subscribe("highConfSuggestion/saved",function(){this._verbTypeahead.getData().dirty(),this._verbTypeahead.getData().bootstrap()}.bind(this))])}a.prototype._prefetchVerbs=function(a){"use strict";if(this._enableVerbPrefetching){a=this._verbTypeahead.getData();a.bootstrapData.is_prefetching=!0;a.bootstrap();a.bootstrapData.is_prefetching=!1}};a.prototype._prefetchNouns=function(a,b){"use strict";__p&&__p();for(var c in this._nounTypeaheadDatasources)if(Object.prototype.hasOwnProperty.call(this._nounTypeaheadDatasources,c)){var d=this._nounTypeaheadDatasources[c];d.init();d.dirty();a!=null&&(d.bootstrapData[a]=b,d.queryData[a]=b);d.queryData.at_id=c;d.bootstrapData.at_id=c;d.bootstrapData.is_prefetching=!0;d.bootstrap();d.bootstrapData.is_prefetching=!1}};a.prototype._updateNounTypeahead=function(a,c){"use strict";var d=this._defaultNounTypeaheadDatasource;if(b("areEqual")(c,d.bootstrapData[a]))return;this._prefetchNouns(a,c);d.bootstrapData[a]=c;d.queryData[a]=c;d.bootstrapData.at_id&&(this._nounTypeaheadMetrics.init(this._nounTypeahead),d.dirty(),d.bootstrap())};a.prototype.showTagger=function(){"use strict";b("Arbiter").inform("showOGTagger"),this._nounTypeahead.getCore().setEnabled(!0),this._suggestionMechanismInput.value==="gk_based_production_prompt_classifier"&&(this._suggestion_logging_data&&(this._suggestion_logging_data.prompt_removed=!0,this._suggestionLoggingDataInput.value=JSON.stringify(this._suggestion_logging_data))),this.isSet()&&!this._suggestionMechanismInput.value?this._showNounTypeahead():this.isSet()?(this._verbTypeahead.getCore().reset(),this._nounTypeahead.getCore().reset(),this.inform("changed"),this._showVerbTypeahead()):this._showVerbTypeahead(),this._suggestIconElement&&(b("CSS").hide(this._suggestIconElement),this._suggestIconShown=!1,this._badgeClicked=!0),this._prefetchNouns(),b("QE").logExposure("www_react_composer")};a.prototype.hideTagger=function(){"use strict";this._nounTypeahead.getCore().setEnabled(!1)};a.prototype.isSet=function(){"use strict";return!!(this.getObjectID()||this.getObjectStr())};a.prototype.hasChanges=function(){"use strict";return this.getObjectID()!==this._initialObjectID||this.getObjectStr()!==this._initialObjectStr};a.prototype.reset=function(){"use strict";this._nounTypeahead.getCore().reset(),this._verbTypeahead.getCore().reset(),this._hiddenObjectStr.value="",this._objectQuery=null,this.setPlaceID(0),this.setCustomIconID(""),this._iconPickerOpened=!1};a.prototype.setVerbandNoun=function(a,b){"use strict";this._verbTypeahead.getCore().select(a),this._handleVerbChange(a),this._nounTypeahead.getCore().select(b),this._handleNounChange(b)};a.prototype.getActionTypeID=function(){"use strict";return this._verbTypeahead.getCore().getHiddenValue()};a.prototype.getObjectID=function(){"use strict";return this._nounTypeahead.getCore().getHiddenValue()};a.prototype.setViewerCoords=function(a){"use strict";a=JSON.stringify(a);this._updateNounTypeahead("coords",a)};a.prototype.setPlaceID=function(a){"use strict";this._updateNounTypeahead("place_id",a);var b=this._verbTypeahead.getData();this._placeSpecificVerbList&&a!=b.bootstrapData.place_id&&(b.bootstrapData.place_id=a,b.queryData!==undefined&&(b.queryData.place_id=a),b.dirty(),this._prefetchVerbs())};a.prototype.getObjectStr=function(){"use strict";return this._hiddenObjectStr.value};a.prototype.getObjectQuery=function(){"use strict";return this._objectQuery};a.prototype.getVerbTypeahead=function(){"use strict";return this._verbTypeahead};a.prototype.getNounTypeahead=function(){"use strict";return this._nounTypeahead};a.prototype._handleVerbChange=function(a){"use strict";__p&&__p();this._suggestionMechanismInput.value=a.suggestion_mechanism;a.suggestion_config?(this._suggestion_logging_data=a.suggestion_config,this._suggestionLoggingDataInput.value=JSON.stringify(this._suggestion_logging_data)):this._suggestion_logging_data&&(this._suggestion_logging_data.erased=!0,this._suggestionLoggingDataInput.value=JSON.stringify(this._suggestion_logging_data));if(a.type==="page"){this._nounTypeahead.getCore().setHiddenValue(a.uid);this._verbTypeahead.getCore().setHiddenValue(a.at_id);this.inform("changed");return}var c=null;Object.prototype.hasOwnProperty.call(this._nounTypeaheadDatasources,a.uid)?c=this._nounTypeaheadDatasources[a.uid]:(c=this._defaultNounTypeaheadDatasource,c.dirty(),c.queryData.at_id=a.uid,c.bootstrapData.at_id=a.uid);c!==this._nounTypeahead.getData()&&this._nounTypeahead.swapData(c);this._nounTypeaheadMetrics.resetWithData(this._nounTypeahead);c.bootstrap(!0);this._nounTypeahead.getView().setContext(a);b("StickyPlaceholderInput").setPlaceholderText(this._nounTypeahead.getCore().getElement(),a.prompt);a.prompt_text?(b("CSS").show(this._getVerbSpan()),b("DOM").setContent(this._getVerbSpan(),a.prompt_text)):b("CSS").hide(this._getVerbSpan());this._showNounTypeahead()};a.prototype._handleNounUnselect=function(){"use strict";this._hiddenObjectStr.value="",this.inform("changed"),this.inform("unselect")};a.prototype._handleNounChange=function(a){"use strict";this._suggestionMechanismInput.value="",a.uid?this._hiddenObjectStr.value="":(this._nounTypeahead.getCore().setHiddenValue(""),this._hiddenObjectStr.value=a.text.trim()),this._objectQuery=a.query,this.inform("changed")};a.prototype._getVerbSpan=function(){"use strict";this._verbSpan||(this._verbSpan=b("DOM").create("span",{className:"verbText"}),b("DOM").prependContent(this._nounTypeahead.getElement(),this._verbSpan),b("tidyEvent")(b("Event").listen(this._verbSpan,"click",function(){this._showVerbTypeahead();return!1}.bind(this))));return this._verbSpan};a.prototype._getNounInput=function(){"use strict";return this._nounTypeahead.getCore().getElement()};a.prototype._showVerbTypeahead=function(){"use strict";b("CSS").show(this._verbTypeahead.getElement());b("CSS").hide(this._nounTypeahead.getElement());this._verbTypeahead.getCore().reset();this._nounTypeahead.getCore().reset();this._verbTypeahead.getCore().getElement().focus();var a=this._verbTypeahead.getData();this._enableVerbPrefetching&&this._placeSpecificVerbList?a.bootstrap(!0):a.bootstrap()};a.prototype._showNounTypeahead=function(){"use strict";b("CSS").hide(this._verbTypeahead.getElement()),b("CSS").show(this._nounTypeahead.getElement()),this._nounTypeahead.getCore().getElement().focus()};a.prototype._watchCloseButton=function(a){"use strict";var c=b("DOM").scry(a.getElement(),".uiCloseButton")[0];c||(c=b("DOM").scry(a.getElement(),"._50zy")[0]);b("tidyEvent")(b("Event").listen(c,"click",function(){this._showVerbTypeahead();return!1}.bind(this)))};a.prototype.suggestIconShown=function(){"use strict";return this._suggestIconShown};a.prototype.showSuggestCount=function(a){"use strict";if(this._badgeClicked)return;this._suggestIconShown=!0;this._suggestIconElement=a;b("CSS").show(a)};a.prototype.setCustomIconID=function(a){"use strict";this._customIconInput.value=a};a.prototype.getCustomIconID=function(){"use strict";return this._customIconInput.value};a.prototype.markIconPickerOpened=function(){"use strict";this._iconPickerOpened=!0};a.prototype.getIconPickerOpened=function(){"use strict";return this._iconPickerOpened};e.exports=a;e.exports.asyncSuggest=function(a,c,d){var e=JSON.stringify(a);b("Arbiter").subscribe("ogComposer/asyncSuggest/display",function(a,b){e==b&&c()});b("Arbiter").subscribe("ogComposer/asyncSuggest/xout",function(a,b){e==b&&d()});b("Arbiter").inform("ogComposer/asyncSuggest",e)}}),null);
__d("OGComposerTaggerNounTypeaheadView",[],(function(a,b,c,d,e,f){function a(a){"use strict"}e.exports=a}),null);
__d("PlacesCitySharerX",["csx","cx","fbt","Arbiter","ArbiterMixin","AsyncRequest","CSS","DOM","Event","Parent","mixin"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j,k={};c=babelHelpers.inherits(a,b("mixin")(b("ArbiterMixin")));j=c&&c.prototype;function a(a,b,c,d,e,f,g,h,i,k,l,m,n,o){"use strict";j.constructor.call(this),this._root=a,this.setShareSetting(k),this.init(b,c,d,e,f,l,n),h&&this.setDefaultCity(g,h,i),this._shareDefaultCity&&this.useDefaultCity(),m&&this.toggleSelect()}a.prototype.init=function(a,c,d,e,f,g,h){"use strict";this._cityLink=a,this._closeButton=c,this._input=d,this._disableShareInput=e,this._options=f,this._targetId=g||0,this._cityName=b("DOM").find(this._cityLink,"._y8"),this._data={},this._resetTempInfo(),b("Event").listen(this._closeButton,"click",function(){this._resetTempInfo(),this._defaultCityData={},this.clearCity(),this._disableShareInput.value="true"}.bind(this)),k[this._root]=this,this.inform("init",null,b("Arbiter").BEHAVIOR_PERSISTENT),this._implicitLocationConfig=h};a.prototype.toggleSelect=function(){"use strict";this._placeSelected=!0,b("CSS").addClass(this._cityLink,"_1dsf"),b("CSS").addClass(this._root,"_1fa"),b("CSS").hide(this._closeButton)};a.prototype.addPlace=function(a){"use strict";this.toggleSelect(),this._resetTempInfo()};a.prototype.changeCity=function(a,b,c){"use strict";this.setCity(a,b,c),this.toggleLocationSharing(a,b,c,!1)};a.prototype.clearCity=function(){"use strict";__p&&__p();this._data={};this._input.value="";b("DOM").empty(this._cityName);var a=i._("Check in");this._cityLink.setAttribute("data-tooltip-content",a);b("CSS").removeClass(this._root,"_y7");b("CSS").hide(this._closeButton);b("CSS").removeClass(this._cityLink,"_1dsf");b("CSS").removeClass(this._root,"_1fa");this.inform("change",null,b("Arbiter").BEHAVIOR_PERSISTENT)};a.prototype.clearPlace=function(){"use strict";this._placeSelected=!1,b("CSS").removeClass(this._cityLink,"_1dsf"),b("CSS").removeClass(this._root,"_1fa"),b("CSS").conditionShow(this._closeButton,this.getValue()),this._implicitLocationConfig.enable_implicit_location?this.setDefaultCity(this._data.city_name,this._data.city_page_id,this._data.city_id):this.clearCity()};a.prototype.getIcon=function(){"use strict";return this._root};a.prototype.getValue=function(){"use strict";return this._input.value};a.prototype.restoreCityInfo=function(){"use strict";(this._placeSelected||this._shareDefaultCity)&&(this.changeCity(this._tempCityName,this._tempCityPid,this._tempCityId),this._resetTempInfo())};a.prototype.saveCityInfo=function(){"use strict";this._defaultCityData&&(this._tempCityName=this._defaultCityData.city_name,this._tempCityPid=this._defaultCityData.city_page_id,this._tempCityId=this._defaultCityData.city_id)};a.prototype.setCity=function(a,c,d){"use strict";c&&(this.setCityData(a,c,d),this._input.value=c,this.inform("change",this._data,b("Arbiter").BEHAVIOR_PERSISTENT))};a.prototype.setCityData=function(a,c,d){"use strict";__p&&__p();if(c){this._data={city_name:a,city_page_id:c,city_id:d};c=a.lastIndexOf(",");c!=-1&&(a=a.substring(0,c));a?d=i._("Currently in {city-name}. Check in",[i._param("city-name",a)]):d=i._("Check in");b("DOM").setContent(this._cityName,a);this._cityLink.setAttribute("aria-label",d);b("CSS").addClass(this._root,"_y7");b("CSS").conditionShow(this._closeButton,!this._placeSelected)}};a.prototype.setDefaultCity=function(a,b,c){"use strict";this._defaultCityData={city_id:c,city_page_id:b,city_name:a}};a.prototype.setSessionID=function(a){"use strict";this._options.session_id=a};a.prototype.setShareSetting=function(a){"use strict";this._shareDefaultCity=a};a.prototype.toggleLocationSharing=function(a,c,d,e){"use strict";c&&new(b("AsyncRequest"))().setURI("/ajax/places/toggle_location_sharing").setData({city_id:d,city_page_id:c,city_name:a,is_default:e,session_id:this._options.session_id}).send()};a.prototype.useDefaultCity=function(){"use strict";this._defaultCityData&&(this.setCity(this._defaultCityData.city_name,this._defaultCityData.city_page_id,this._defaultCityData.city_id),b("CSS").show(this._closeButton),this.toggleLocationSharing(this._defaultCityData.city_name,this._defaultCityData.city_page_id,this._defaultCityData.city_id,!0))};a.prototype._resetTempInfo=function(){"use strict";this._tempCityName=null,this._tempCityPid=null,this._tempCityId=null};a.getInstance=function(a){"use strict";a=b("Parent").byClass(a,"ComposerCitySharer");return a&&k[a]};a.prototype.getTargetID=function(){"use strict";return this._targetId};e.exports=a}),null);
__d("PlatformSharingWebFunnelAnalysisTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:PlatformSharingWebFunnelAnalysisLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:PlatformSharingWebFunnelAnalysisLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:PlatformSharingWebFunnelAnalysisLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setFunnelLoggingInputData=function(a){this.$1.funnel_logging_input_data=a.getJSON();return this};a.prototype.setFunnelLoggingReservedFunnelLoggingExtraData=function(a){this.$1.funnel_logging_reserved_funnel_logging_extra_data=b("GeneratedLoggerUtils").serializeMap(a);return this};c={funnel_logging_input_data:!0,funnel_logging_reserved_funnel_logging_extra_data:!0};e.exports=a}),null);
__d("ScrollableTypeaheadBehavior",["cx","CSS","DOM","Parent","Scroll","ScrollableArea","Style"],(function(a,b,c,d,e,f,g){__p&&__p();function a(a){"use strict";this._typeahead=a}a.prototype.enable=function(){"use strict";this._scrollableElems=b("ScrollableArea").renderDOM(),b("CSS").addClass(this._scrollableElems.root,"_ml"),b("DOM").appendContent(this._typeahead.getView().element,this._scrollableElems.root),this._typeahead.getView().content=this._scrollableElems.content,this._scrollableArea=b("ScrollableArea").fromNative(this._scrollableElems.root,{fade:!1}),this._subscriptions=[this._typeahead.getView().subscribe("reset",this._reset.bind(this)),this._typeahead.getView().subscribe("render",this._render.bind(this)),this._typeahead.getView().subscribe("beforeRender",this._beforeRender.bind(this)),this._typeahead.getView().subscribe("next",this._scrollHelper.bind(this)),this._typeahead.getView().subscribe("prev",this._scrollHelper.bind(this))],b("CSS").hide(this._scrollableElems.root),b("CSS").removeClass(this._scrollableElems.root,"_mm")};a.prototype.disable=function(){"use strict";while(this._subscriptions.length)this._subscriptions.pop().unsubscribe();this._subscriptions=null};a.prototype._reset=function(){"use strict";b("CSS").hide(this._scrollableElems.root),b("CSS").removeClass(this._scrollableElems.root,"_mm"),this._scrollableArea.scrollToTop()};a.prototype._render=function(){"use strict";this._scrollableArea.poke(),this._showScrollbar?this._scrollableArea.showScrollbar({hideAfterDelay:!1}):this._scrollableArea.hideScrollbar({hideAfterDelay:!1,shouldFade:!1}),b("CSS").addClass(this._scrollableElems.root,"_mm")};a.prototype._beforeRender=function(a,c){"use strict";a=5;this._typeahead.getView().maxResults<10&&(a=3);b("CSS").show(this._scrollableElems.root);b("Style").set(this._scrollableElems.body,"width",this._scrollableElems.wrap.offsetWidth+"px");c.results.length<a?(b("Style").set(this._scrollableElems.wrap,"height",38*c.results.length+4+"px"),this._showScrollbar=!1):(this._scrollableArea.showScrollbar({hideAfterDelay:!1}),b("Style").set(this._scrollableElems.wrap,"height",38*a+4+"px"),this._showScrollbar=!0)};a.prototype._scrollHelper=function(a,c){"use strict";__p&&__p();if(!b("Parent").byClass(c,"uiScrollableArea"))return;this._typeahead.getView().ignoreMouseover=!0;a=b("Parent").byClass(c,"uiScrollableAreaWrap");var d=c.offsetTop-a.offsetTop;if(d<b("Scroll").getTop(a)){b("Scroll").setTop(a,d);return}d=d+c.offsetHeight;d>b("Scroll").getTop(a)+a.offsetHeight&&b("Scroll").setTop(a,d-a.offsetHeight)};Object.assign(a.prototype,{_subscriptions:null,_scrollableElems:null,_scrollableArea:null,_showScrollbar:null});e.exports=a}),null);
__d("legacy:LegacyScrollableTypeaheadBehavior",["ScrollableTypeaheadBehavior"],(function(a,b,c,d,e,f){a.TypeaheadBehaviors||(a.TypeaheadBehaviors={}),a.TypeaheadBehaviors.scrollArea=function(a){a.enableBehavior(b("ScrollableTypeaheadBehavior"))}}),3);
__d("PlacesDataSource",["DataSource"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("DataSource"));g=c&&c.prototype;function a(a){"use strict";g.constructor.call(this,a),this._origBootstrapEndpoint=this.bootstrapEndpoint}a.prototype.shouldFetchMoreResults=function(a){"use strict";if(this.queryData.new_js_ranking)return!0;else return g.shouldFetchMoreResults.call(this,a)};a.prototype.mergeUids=function(a,b,c,d){"use strict";if(this.queryData.new_js_ranking){this._checkExtendedMatch(d,a);return this.deduplicateByKey(c.concat(b,a))}else return g.mergeUids.call(this,a,b,c,d)};a.prototype.resetBootstrapEndpoint=function(a){"use strict";this.setBootstrapEndpoint(this._origBootstrapEndpoint,a);return this};a.prototype.setBootstrapEndpoint=function(a,b){"use strict";this.bootstrapEndpoint!==a&&(this.bootstrapEndpoint=a,(this._bootstrapped||this._bootstrapping)&&(b=!0));b&&this.dirty().bootstrap();return this};a.prototype.getQueryEndpoint=function(){"use strict";return this.queryEndpoint};a.prototype.getBootstrapData=function(){"use strict";return this.bootstrapData};e.exports=a}),null);
__d("RemoveToken",["DOM","Event"],(function(a,b,c,d,e,f){a={init:function(a,c){b("Event").listen(a,"click",function(){b("DOM").remove(c)})}};e.exports=a}),null);
__d("PlacesTypeaheadCore",["Arbiter","CSS","Focus","Run","StickyPlaceholderInput","Style","TypeaheadCore"],(function(a,b,c,d,e,f){__p&&__p();var g,h;g=babelHelpers.inherits(a,b("TypeaheadCore"));h=g&&g.prototype;a.prototype.init=function(a,c,d){"use strict";h.init.call(this,a,c,d),this.arbiterTokens=[b("Arbiter").subscribe("Places/PlaceCreationCancel"+this.callbackID,function(b,a){this.view.allowPlaceCreation=!1,this.view.allowFreeformOption=!0,this.view.reset(),this.focusElement()}.bind(this))],b("Run").onLeave(function(){this.arbiterTokens.forEach(b("Arbiter").unsubscribe)}.bind(this)),this._typeaheadID=d.id,this._citySet=!1,this.data.subscribe("fetchComplete",this.update.bind(this))};a.prototype.initToggle=function(){"use strict";var a=this.root.parentNode,c=b("Style").get(a,"position")!="static"?a:this.root,d=this.view,e="PlacesTypeaheadFocused";this.subscribe("focus",function(){d.show(),b("CSS").addClass(c,e)});this.subscribe("blur",function(){d.hide(),b("CSS").removeClass(c,e)})};a.prototype.focusElement=function(){"use strict";b("Focus").set(this.element),this.value="",this.checkValue()};a.prototype.setValue=function(a){"use strict";h.setValue.call(this,a),b("StickyPlaceholderInput").update(this.element)};a.prototype.updateDataSource=function(a){"use strict";this.data.setQueryData({city_id:this._cityId,city_set:this._citySet}),this.data.setBootstrapData({city_id:this._cityId}),a&&(this.data.dirty(),this.data.bootstrap())};a.prototype.setCity=function(a,b){"use strict";this._citySet=b,this._cityId!==a&&(this._cityId=a,this.updateDataSource(b))};a.prototype.update=function(a,b){"use strict";a=b.response;if(!a)return;b=a.getPayload();b.cityId&&(this._citySet||this.setCity(b.cityId,!1))};a.prototype.setLocation=function(a){"use strict";if(!a||!a.latitude||!a.longitude)return;this.data.setQueryData({latitude:a.latitude,longitude:a.longitude,want_checkin_places:!0});this.data.setBootstrapData({latitude:a.latitude,longitude:a.longitude,want_checkin_places:!0});this.data.resetBootstrapEndpoint(!0)};function a(){"use strict";g.apply(this,arguments)}Object.assign(a.prototype,{resetOnKeyup:!1});e.exports=a}),null);
__d("PlacesTypeaheadView",["fbt","Arbiter","CSS","Dialog","DOM","Parent","Run","Scroll","ScrollableArea","Style","TypeaheadView"],(function(a,b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(a,b("TypeaheadView"));i=h&&h.prototype;a.prototype.init=function(){"use strict";this.content=b("DOM").find(this.element,"div.PlacesTypeaheadViewList"),i.init.call(this),this.subscribe(["render","reset"],this.renderBorders.bind(this)),this.arbiterTokens=[b("Arbiter").subscribe("Places/PlaceCreated"+this.callbackID,function(a,b){a={text:b.name,rawtext:b.name,uid:b.fbid,city_id:b.city_id,city_name:b.city_name,city_page_id:b.city_page_id};this.inform("select",{index:-1,clicked:!0,selected:a});this.inform("afterSelect")}.bind(this))],this.arbiterTokens.push(b("Arbiter").subscribe("Events/autoSuggestionSelected",function(a,b){this.inform("select",{index:-1,clicked:!0,selected:{text:b.event_name,rawtext:b.event_name,uid:b.event_fbid}}),this.inform("afterSelect")}.bind(this))),this.arbiterTokens.push(b("Arbiter").subscribe("Prompt/PrefillCheckin",function(a,b){this.inform("select",{index:-1,clicked:!0,selected:b}),this.inform("afterSelect")}.bind(this))),b("Run").onLeave(function(){this.arbiterTokens.forEach(b("Arbiter").unsubscribe)}.bind(this))};a.prototype.renderBorders=function(){"use strict";b("CSS").conditionClass(this.element,"PlacesTypeaheadViewPopulated",this.items.length)};a.prototype.show=function(){"use strict";i.show.call(this),(!this.results||!this.results.length)&&b("Style").set(this.element,"height",0)};a.prototype.render=function(a,c,d){"use strict";__p&&__p();c.forEach(function(b){b.value=a});if(this.allowFreeformOption&&a&&(!c||c.length===0||c[c.length-1].type!="freeform")){var e=g._("Just use \"{custom_location}\"",[g._param("custom_location",a)]);c.push({uid:"0",rawtext:a,text:e,type:"freeform"})}if(this.allowPlaceCreation&&a&&(!c||c.length===0||c[c.length-1].type!="placecreate")){e=g._("Add place \"{custom_location}\"",[g._param("custom_location",a)]);c.push({uid:"0",rawtext:a,text:e,type:"placecreate"})}i.render.call(this,a,c,d);this.element.style.visibility="hidden";this.visible&&this.results&&this.results.length&&b("Style").set(this.element,"height","");e=b("ScrollableArea").getInstance(this.content);e&&e.adjustGripper();this.inform("afterRender",c);this.element.style.visibility=""};a.prototype.select=function(a){"use strict";__p&&__p();var c=this.index;c=this.results[c];if(c){if(c.type==="placecreate"){b("Dialog").bootstrap("/ajax/places/create/dialog.php",{name:c.rawtext,callback_id:this.callbackID});return}c.type==="freeform"&&(c.text=c.rawtext);i.select.call(this,a)}};a.prototype.next=function(){"use strict";i.next.call(this),this._scrollIntoView(this.selected)};a.prototype.prev=function(){"use strict";i.prev.call(this),this._scrollIntoView(this.selected)};a.prototype._scrollIntoView=function(a){"use strict";__p&&__p();if(!b("Parent").byClass(a,"uiScrollableArea"))return;this.ignoreNextMouseover=!0;var c=b("Parent").byClass(a,"uiScrollableAreaWrap"),d=a.offsetTop-c.offsetTop;if(d<b("Scroll").getTop(c)){b("Scroll").setTop(c,d);return}d=d+a.offsetHeight;d>b("Scroll").getTop(c)+c.offsetHeight&&b("Scroll").setTop(c,d-c.offsetHeight)};a.prototype.mouseover=function(event){"use strict";this.ignoreNextMouseover||i.mouseover.call(this,event),this.ignoreNextMouseover=!1};a.prototype.highlight=function(a){"use strict";i.highlight.call(this,a,!0)};function a(){"use strict";h.apply(this,arguments)}Object.assign(a.prototype,{ignoreNextMouseover:!1});e.exports=a}),null);
__d("PlacesTypeaheadRendererUtil",[],(function(a,b,c,d,e,f){__p&&__p();var g=/[.,+*?$|#{}()\^\-\[\]\\\/!@%\"~=<>_:;]/g;function h(a,b){return a.end>b.end||a.start<b.start}function a(a,b){__p&&__p();if(!a)return[];var c=[];a=a.replace(g," ");a=a.split(" ");for(var d=0;d<a.length;d++){if(!a[d])continue;var e=a[d];d<a.length-1&&(e=e+"[ ,]");e=new RegExp(" "+e,"i");e=e.exec(" "+b+" ");if(e){e={start:e.index,end:e.index+a[d].length};c.every(h.bind(null,e))&&c.push(e)}else return[]}c.sort(function(a,b){return a.start-b.start});return c}b={match_positions:a};e.exports=b}),null);
__d("PlacesTypeaheadRenderer",["DOM","PlacesTypeaheadRendererUtil"],(function(a,b,c,d,e,f){__p&&__p();function a(a,c){__p&&__p();c=[];var d=a.photo;d&&c.push(b("DOM").create("img",{alt:"",src:d}));if(a.text){d=b("DOM").create("span",{className:"text"},"");var e=a.text;a.address&&(e=e+" \xb7 "+a.address);var f=[];a.value&&(f=b("PlacesTypeaheadRendererUtil").match_positions(a.value,e));if(f.length>0){var g=0;for(var h=0;h<f.length;h++){var i=f[h].start,j=f[h].end;b("DOM").appendContent(d,e.substr(g,i-g));b("DOM").appendContent(d,b("DOM").create("span",{className:"bold"},e.substr(i,j-i)));g=j}b("DOM").appendContent(d,e.substr(g))}else b("DOM").appendContent(d,b("DOM").create("span",{className:"bold"},a.text)),a.address&&b("DOM").appendContent(d," \xb7 "+a.address);c.push(b("DOM").create("span",{},d))}i=a.subtext;j=a.category;if(i||j){h=[];i&&h.push(i);j&&h.push(j);c.push(b("DOM").create("span",{className:"subtext"},h.join(" \xb7 ")))}return b("DOM").create("li",{className:a.type||""},c)}a.className="places";e.exports=a}),null);
__d("ComposerXComponents",[],(function(a,b,c,d,e,f){function a(a){"use strict";this.$1=a}a.prototype.getComponents=function(){"use strict";return this.$1};e.exports=a}),null);
__d("OpenGraphDialog",["ComposerXStandardTaggerWithOG","DOM","Focus"],(function(a,b,c,d,e,f){__p&&__p();function a(a,c){"use strict";__p&&__p();this.$1=a;if(arguments.length==2)this.$2=c.getComponents();else{this.$2={};for(var d=1;d<arguments.length;d++)this.$2=babelHelpers["extends"]({},this.$2,arguments[d].getComponents())}this.$3=new(b("ComposerXStandardTaggerWithOG"))({preventUnfinishedPostAlert:!0});this.$3.init(this);var e=this.getComponent("maininput").element;e=b("DOM").scry(e,"textarea")[0];b("Focus").set(e)}a.prototype.allowOGTagPreview=function(){"use strict";return!1};a.prototype.getRoot=function(){"use strict";return this.$1};a.prototype.getComponent=function(a){"use strict";return this.$2[a]};a.prototype.getComposerID=function(){"use strict";return""};e.exports=a}),null);
__d("OpenGraphTypeaheadBehavior",["ContextualLayerAutoFlip","DOMVector"],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";this.$1=a.getView(),this.$2=this.$1.element}a.prototype.enable=function(){"use strict";this.$1.layer?(this.$1.layer.setPosition("above"),this.$1.layer.disableBehavior(b("ContextualLayerAutoFlip"))):this.$3=this.$1.subscribe("afterRender",this.$4.bind(this))};a.prototype.disable=function(){"use strict";this.listener&&(this.$3.remove(),this.$3=null)};a.prototype.$4=function(){"use strict";var a=b("DOMVector").getElementDimensions(this.$2).y;a&&(this.$2.style.marginTop=-(a+28)+"px")};e.exports=a}),null);
__d("ExternalWebShareDialogObserver",["Arbiter","CSS","DOM"],(function(a,b,c,d,e,f){__p&&__p();a={setHidePrivacy:function(a){b("Arbiter").inform("setHidePrivacy",a,b("Arbiter").BEHAVIOR_STATE)},listenToHidePrivacy:function(a){b("Arbiter").subscribe("setHidePrivacy",function(c,d){d.hide?b("CSS").hide(a):b("CSS").show(a)})},setHideComposerTaggers:function(a){b("Arbiter").inform("setHideComposerTaggers",a,b("Arbiter").BEHAVIOR_STATE)},listenToHideComposerTaggers:function(a){b("Arbiter").subscribe("setHideComposerTaggers",function(c,d){d.hide?b("CSS").hide(a):b("CSS").show(a)})},setSubmitButtonActionText:function(a){b("Arbiter").inform("setSubmitButtonActionText",a,b("Arbiter").BEHAVIOR_STATE)},listenToChangeSubmitButtonActionText:function(a){b("Arbiter").subscribe("setSubmitButtonActionText",function(c,d){d.actionText&&b("DOM").setContent(a,d.actionText)})},setDisableSubmitButton:function(a){b("Arbiter").inform("setDisableSubmitButton",a,b("Arbiter").BEHAVIOR_STATE)},listenToDisableSubmitButton:function(a){b("Arbiter").subscribe("setDisableSubmitButton",function(b,c){a.disabled=c.disable})},setUserInfoVisibility:function(a){b("Arbiter").inform("setUserInfoVisibility",a,b("Arbiter").BEHAVIOR_STATE)},listenToSetUserInfoVisibility:function(a,c){b("Arbiter").subscribe("setUserInfoVisibility",function(d,e){e.hide?(b("CSS").hide(a),b("CSS").hide(c)):(b("CSS").show(a),b("CSS").show(c))})}};e.exports=a}),null);
__d("ShareDialogDataSources",["getObjectValues"],(function(a,b,c,d,e,f){__p&&__p();c={ACTION:"actionSource",EVENT:"event",FUNDRAISER:"fundraiserSource",GROUP:"groupSource",MENTIONS:"mentionsSource",MESSAGE:"messageSource",OBJECT:"objectSource",PAGE:"pageSource",PERSON:"personSource",PERSON_WALL:"personWallSource",PLACE:"placeSource"};var g=b("getObjectValues")(c);function a(){"use strict";this.$1={}}a.prototype.addSource=function(a,b){"use strict";g.some(function(b){return a===b})&&(this.$1[a]=b);return this};a.prototype.getSource=function(a){"use strict";return this.$1[a]};a.TYPES=c;e.exports=a}),null);
__d("ShareDialogAudience.react",["Bootloader","React","ReactComposerContextTypes","ShareDialogAudienceTypes","ShareDialogDataSources","emptyFunction"],(function(a,b,c,d,e,f){__p&&__p();var g=b("ShareDialogDataSources").TYPES,h,i,j,k,l,m;a=b("React").PropTypes;c=b("React").createClass({displayName:"ShareDialogAudience",contextTypes:b("ReactComposerContextTypes"),propTypes:{activeAudience:function(a){if(!b("ShareDialogAudienceTypes").isValid(a.activeAudience))return new Error("The active audience is invalid.")},customModules:a.shape({groupsAudience:a.arrayOf(a.func)}),sentEntryID:a.string,messageTargets:a.array,userId:a.string,dataSources:a.instanceOf(b("ShareDialogDataSources")),onClear:a.func,onChange:a.func,onPost:a.func,hideShareDialog:a.func,defaultPageTargetID:a.string,defaultPageActorID:a.string,defaultGroupTargetID:a.string,defaultFundraiserTargetID:a.string,preselectedID:a.string,preselectedTitle:a.string,enableGroupVoiceSwitcher:a.bool,hidePagePostingAs:a.bool,isOldForwardFlow:a.bool,setSectionName:a.func,maybeLogEvent:a.func},getDefaultProps:function(){return{customModules:{},dataSources:new(b("ShareDialogDataSources"))(),onClear:b("emptyFunction"),onChange:b("emptyFunction")}},getInitialState:function(){return{bootloaded:!1,bootloading:!1}},componentDidMount:function(){!this.state.bootloading&&!this.state.bootloaded&&(this.setState({bootloading:!0}),b("Bootloader").loadModules(["ShareDialogMessageAudience.react","ShareDialogGroupAudience.react","ShareDialogEventAudience.react","ShareDialogPersonAudience.react","ShareDialogPageAudience.react","ShareDialogFundraiserAudience.react"],function(a,b,c,d,e,f){h=a,i=b,j=c,k=d,l=e,m=f,this.setState({bootloading:!1,bootloaded:!0})}.bind(this),"ShareDialogAudience.react"))},render:function(){__p&&__p();if(this.state.bootloaded){var a=this.props.dataSources;if(a.getSource(g.MESSAGE)&&this.props.activeAudience===b("ShareDialogAudienceTypes").MESSAGE)return b("React").createElement(h,{userId:this.props.userId,onClear:this.props.onClear,onChange:this.props.onChange,onPost:this.props.onPost,ref:this.props.ref,messageTargets:this.props.messageTargets,lockMessageTargets:this.props.lockMessageTargets,sentEntryID:this.props.sentEntryID,isOldForwardFlow:this.props.isOldForwardFlow,hideShareDialog:this.props.hideShareDialog,setSectionName:this.props.setSectionName,maybeLogEvent:this.props.maybeLogEvent});if(a.getSource(g.PERSON_WALL)&&this.props.activeAudience===b("ShareDialogAudienceTypes").PERSON)return b("React").createElement(k,{userId:this.props.userId,onClear:this.props.onClear,onChange:this.props.onChange,preselectedID:this.props.preselectedID,preselectedTitle:this.props.preselectedTitle,ref:this.props.ref,searchSource:a.getSource(g.PERSON_WALL),lockPersonTargets:this.props.lockPersonTargets});if(a.getSource(g.GROUP)&&this.props.activeAudience===b("ShareDialogAudienceTypes").GROUP){var c=this.props.customModules?this.props.customModules.groupsAudience:null;return b("React").createElement(i,{customModules:c,onClear:this.props.onClear,onChange:this.props.onChange,ref:this.props.ref,searchSource:a.getSource(g.GROUP),pagesSource:a.getSource(g.PAGE),defaultGroupID:this.props.defaultGroupTargetID,userId:this.props.userId,enableGroupVoiceSwitcher:this.props.enableGroupVoiceSwitcher})}if(a.getSource(g.EVENT)&&this.props.activeAudience===b("ShareDialogAudienceTypes").EVENT)return b("React").createElement(j,{onClear:this.props.onClear,onChange:this.props.onChange,ref:this.props.ref,searchSource:a.getSource(g.EVENT)});if(a.getSource(g.PAGE)&&this.props.activeAudience===b("ShareDialogAudienceTypes").PAGE)return b("React").createElement(l,{onClear:this.props.onClear,onChange:this.props.onChange,ref:this.props.ref,pagesSource:a.getSource(g.PAGE),defaultPageID:this.props.defaultPageTargetID,defaultActorID:this.props.defaultPageActorID,hidePostingAs:this.props.hidePagePostingAs});if(a.getSource(g.FUNDRAISER)&&this.props.activeAudience===b("ShareDialogAudienceTypes").FUNDRAISER)return b("React").createElement(m,{defaultFundraiserID:this.props.defaultFundraiserTargetID,onChange:this.props.onChange,ref:this.props.ref,source:a.getSource(g.FUNDRAISER)})}return b("React").createElement("noscript",null)}});e.exports=c;e.exports.TYPES=b("ShareDialogAudienceTypes")}),null);
__d("ShareDialogAudienceText.react",["fbt","React","ShareDialogAudienceTypes","ShareDialogConfig","MercuryConfig","QE2Logger"],(function(a,b,c,d,e,f,g){__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.$1=function(){"use strict";__p&&__p();switch(this.props.audience){case b("ShareDialogAudienceTypes").OWN:return g._("Share on Your Timeline");case b("ShareDialogAudienceTypes").PERSON:return g._("Share on a Friend's Timeline");case b("ShareDialogAudienceTypes").GROUP:return g._("Share in a Group");case b("ShareDialogAudienceTypes").EVENT:return g._("Share in an Event");case b("ShareDialogAudienceTypes").PAGE:return g._("Share on a Page You Manage");case b("ShareDialogAudienceTypes").FUNDRAISER:return g._("Share on Your Fundraiser");case b("ShareDialogAudienceTypes").MESSAGE:if(b("ShareDialogConfig").share_in_separate_messages)return g._("Share in Separate Messages");else{b("QE2Logger").logExposureForUser("messenger_growth_www_share_flow");if(b("MercuryConfig").MNNDT)return g._("Send in a Group Message");else return g._("Share in a Private Message")}default:return b("React").createElement("noscript",null)}};a.prototype.render=function(){"use strict";return b("React").createElement("span",this.props,this.$1())};function a(){"use strict";h.apply(this,arguments)}a.propTypes={audience:function(a){if(!b("ShareDialogAudienceTypes").isValid(a.audience))return new Error("The audience is invalid.")}};a.defaultProps={audience:b("ShareDialogAudienceTypes").OWN};e.exports=a}),null);
__d("ShareDialogAudienceTextWebdriverTestDataIDs",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SHARE_ON_OWN:"share_on_own",SHARE_TO_PERSON:"share_to_person",SHARE_TO_GROUP:"share_to_group",SHARE_TO_EVENT:"share_to_event",SHARE_TO_PAGE:"share_to_page",SHARE_TO_FUNDRAISER:"share_to_fundraiser",SHARE_VIA_MESSAGE:"share_via_message"})}),null);
__d("ShareDialogAudienceSelector.react",["cx","React","ShareDialogAudienceText.react","ShareDialogAudienceTextWebdriverTestDataIDs","ShareDialogAudienceTypes","XUIMenuSeparator.react","XUISelector.react","emptyFunction"],(function(a,b,c,d,e,f,g){__p&&__p();var h;c=b("React").PropTypes;var i=b("XUISelector.react").Option,j="react_share_dialog_audience_selector";d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.state={activeAudience:this.props.activeAudience},this.onChange=function(a){this.setState({activeAudience:a.value}),this.props.onAudienceSelect(a.value)}.bind(this),b}a.prototype.UNSAFE_componentWillReceiveProps=function(a){"use strict";this.setState({activeAudience:a.activeAudience})};a.prototype.render=function(){"use strict";__p&&__p();var a=this.props.allowedAudiences,c=[];if(a.length==1)return b("React").createElement("div",{className:"_94t _1nb1"},b("React").createElement("div",{className:"_42ym _41kd"},b("React").createElement(b("ShareDialogAudienceText.react"),{audience:this.props.activeAudience,shareType:this.props.shareType})));a.includes(b("ShareDialogAudienceTypes").OWN)&&c.push(b("React").createElement(i,{className:"_42ym _42yn",value:b("ShareDialogAudienceTypes").OWN,key:b("ShareDialogAudienceTypes").OWN},b("React").createElement(b("ShareDialogAudienceText.react"),{audience:b("ShareDialogAudienceTypes").OWN,"data-testid":b("ShareDialogAudienceTextWebdriverTestDataIDs").SHARE_ON_OWN})));a.includes(b("ShareDialogAudienceTypes").PERSON)&&c.push(b("React").createElement(i,{className:"_42ym _42yp",value:b("ShareDialogAudienceTypes").PERSON,key:b("ShareDialogAudienceTypes").PERSON},b("React").createElement(b("ShareDialogAudienceText.react"),{audience:b("ShareDialogAudienceTypes").PERSON,"data-testid":b("ShareDialogAudienceTextWebdriverTestDataIDs").SHARE_TO_PERSON})));a.includes(b("ShareDialogAudienceTypes").GROUP)&&c.push(b("React").createElement(i,{className:"_42ym _2n3i",value:b("ShareDialogAudienceTypes").GROUP,key:b("ShareDialogAudienceTypes").GROUP},b("React").createElement(b("ShareDialogAudienceText.react"),{audience:b("ShareDialogAudienceTypes").GROUP,"data-testid":b("ShareDialogAudienceTextWebdriverTestDataIDs").SHARE_TO_GROUP})));a.includes(b("ShareDialogAudienceTypes").EVENT)&&c.push(b("React").createElement(i,{className:"_42ym _18sr",value:b("ShareDialogAudienceTypes").EVENT,key:b("ShareDialogAudienceTypes").EVENT},b("React").createElement(b("ShareDialogAudienceText.react"),{audience:b("ShareDialogAudienceTypes").EVENT,"data-testid":b("ShareDialogAudienceTextWebdriverTestDataIDs").SHARE_TO_EVENT})));a.includes(b("ShareDialogAudienceTypes").PAGE)&&c.push(b("React").createElement(i,{className:"_42ym _42y_",value:b("ShareDialogAudienceTypes").PAGE,key:b("ShareDialogAudienceTypes").PAGE},b("React").createElement(b("ShareDialogAudienceText.react"),{audience:b("ShareDialogAudienceTypes").PAGE,"data-testid":b("ShareDialogAudienceTextWebdriverTestDataIDs").SHARE_TO_PAGE})));a.includes(b("ShareDialogAudienceTypes").FUNDRAISER)&&c.push(b("React").createElement(i,{className:"_42ym _1a7k",value:b("ShareDialogAudienceTypes").FUNDRAISER,key:b("ShareDialogAudienceTypes").FUNDRAISER},b("React").createElement(b("ShareDialogAudienceText.react"),{audience:b("ShareDialogAudienceTypes").FUNDRAISER,"data-testid":b("ShareDialogAudienceTextWebdriverTestDataIDs").SHARE_TO_FUNDRAISER})));a.includes(b("ShareDialogAudienceTypes").MESSAGE)&&(c.length>0&&c.push(b("React").createElement(b("XUIMenuSeparator.react"),{key:"separator"})),c.push(b("React").createElement(i,{className:"_42ym _42z0",value:b("ShareDialogAudienceTypes").MESSAGE,key:b("ShareDialogAudienceTypes").MESSAGE},b("React").createElement(b("ShareDialogAudienceText.react"),{audience:b("ShareDialogAudienceTypes").MESSAGE,shareType:this.props.shareType,"data-testid":b("ShareDialogAudienceTextWebdriverTestDataIDs").SHARE_VIA_MESSAGE}))));a="_94t"+(this.state.activeAudience===b("ShareDialogAudienceTypes").OWN?" _47xt":"")+(this.state.activeAudience===b("ShareDialogAudienceTypes").PERSON?" _47xu":"")+(this.state.activeAudience===b("ShareDialogAudienceTypes").GROUP?" _47xv":"")+(this.state.activeAudience===b("ShareDialogAudienceTypes").EVENT?" _18ss":"")+(this.state.activeAudience===b("ShareDialogAudienceTypes").PAGE?" _47xw":"")+(this.state.activeAudience===b("ShareDialogAudienceTypes").FUNDRAISER?" _2afb":"")+(this.state.activeAudience===b("ShareDialogAudienceTypes").MESSAGE?" _47xx":"");return b("React").createElement(b("XUISelector.react"),{maxwidth:400,className:a,defaultValue:this.state.activeAudience,name:"mode",onChange:this.onChange,"data-testid":j},c)};a.propTypes={allowedAudiences:function(a){if(!a.allowedAudiences.every(function(a){return b("ShareDialogAudienceTypes").isValid(a)}))return new Error("The allowed audiences are not valid.")},activeAudience:function(a){if(!b("ShareDialogAudienceTypes").isValid(a.activeAudience)||!a.allowedAudiences.some(function(b){return b===a.activeAudience}))return new Error("The active audience is either invalid or not included in the allowed audience list.")},onAudienceSelect:c.func};a.defaultProps={onAudienceSelect:b("emptyFunction"),activeAudience:b("ShareDialogAudienceTypes").OWN,allowedAudiences:b("ShareDialogAudienceTypes").ALL};e.exports=a}),null);
__d("ExternalWebShareDialogAudienceHeader.react",["cx","fbt","Arbiter","CurrentUser","ExternalWebShareDialogObserver","React","ReactComposerContextConfig","ReactComposerContextProviderMixin","ShareDialogAudience.react","ShareDialogAudienceSelector.react","ShareDialogAudienceTypes","ShareDialogDataSources"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"ExternalWebShareDialogAudienceHeader",mixins:[b("ReactComposerContextProviderMixin")],propTypes:{contextConfig:b("ReactComposerContextConfig").isRequired,dataSources:a.shape({friend:a.object,page:a.object,group:a.object.isRequired,fundraiser:a.array}).isRequired,audience:a.oneOf(Object.keys(b("ShareDialogAudienceTypes")).map(function(a){return b("ShareDialogAudienceTypes")[a]})),disableMessage:a.bool,targetTitle:a.string,onChange:a.func,onAudienceSelect:a.func,defaultGroupTargetID:a.string,defaultFundraiserTargetID:a.string,defaultPageActorID:a.string,defaultPageTargetID:a.string,hidePagePostingAs:a.bool},getDefaultProps:function(){return{audience:b("CurrentUser").isWorkUser()?b("ShareDialogAudienceTypes").GROUP:b("ShareDialogAudienceTypes").OWN,disableMessage:!1}},getInitialState:function(){var a=this.props.dataSources,c=this.props.contextConfig.actorID,d=this.props.contextConfig.targetID;a={audience:this.props.audience,audienceDataSources:new(b("ShareDialogDataSources"))().addSource(b("ShareDialogDataSources").TYPES.PERSON_WALL,a.friend).addSource(b("ShareDialogDataSources").TYPES.GROUP,a.group).addSource(b("ShareDialogDataSources").TYPES.EVENT,a.event).addSource(b("ShareDialogDataSources").TYPES.PAGE,a.page).addSource(b("ShareDialogDataSources").TYPES.FUNDRAISER,a.fundraiser).addSource(b("ShareDialogDataSources").TYPES.MESSAGE,a.friend||a.message),disableMessage:this.props.disableMessage};c&&this.props.audience===b("ShareDialogAudienceTypes").PAGE?(a.audienceTargets=[c],a.actorId=c):d&&(a.audienceTargets=[d],a.targetTitle=this.props.targetTitle);return a},getCurrentAudience:function(){var a=this.state.audienceTargets;a||(a=[this.props.contextConfig.actorID]);return{audience:this.state.audience,audienceTargets:a,actorId:this.state.actorId}},UNSAFE_componentWillMount:function(){b("Arbiter").subscribe("isQuoteSet",function(a,b){this.setState({disableMessage:b})}.bind(this))},_onAudienceSelect:function(a){b("ExternalWebShareDialogObserver").setUserInfoVisibility({hide:a===b("ShareDialogAudienceTypes").PAGE}),this.setState({audience:a,audienceTargets:null,actorId:null,targetTitle:null}),this.props.onAudienceSelect&&this.props.onAudienceSelect(a)},_onChangeAudienceTargets:function(a){this.state.audience===b("ShareDialogAudienceTypes").PAGE?this.setState({audienceTargets:[a[0].pageId],actorId:a[0].actorId}):this.setState({audienceTargets:a,actorId:null});if(this.props.onChange){a||(a=[this.props.contextConfig.actorID]);a={audience:this.state.audience,audienceTargets:a,actorId:this.state.actorId};this.props.onChange(a)}},_onClearAudienceTargets:function(){this.setState({audienceTargets:null})},render:function(){__p&&__p();var a;if(this.state.audience===b("ShareDialogAudienceTypes").OWN)b("ExternalWebShareDialogObserver").setHidePrivacy({hide:!1}),a=null;else{b("ExternalWebShareDialogObserver").setHidePrivacy({hide:!0});var c=null,d=null,e=null;this.state.audience===b("ShareDialogAudienceTypes").PAGE?this.props.defaultPageTargetID?c=this.props.defaultPageTargetID:this.state.audienceTargets&&(c=this.state.audienceTargets[0]):this.state.audience===b("ShareDialogAudienceTypes").GROUP?this.props.defaultGroupTargetID?d=this.props.defaultGroupTargetID:this.state.audienceTargets&&(d=this.state.audienceTargets[0]):this.state.audienceTargets&&this.state.targetTitle&&(e=this.state.audienceTargets[0]);a=b("React").createElement("div",null,b("React").createElement(b("ShareDialogAudience.react"),{activeAudience:this.state.audience,dataSources:this.state.audienceDataSources,onChange:this._onChangeAudienceTargets,onClear:this._onClearAudienceTargets,defaultPageTargetID:c,defaultPageActorID:this.props.defaultPageActorID,defaultGroupTargetID:d,defaultFundraiserTargetID:this.props.defaultFundraiserTargetID,preselectedID:e,preselectedTitle:this.state.targetTitle,userId:this.props.contextConfig.actorID,hidePagePostingAs:this.props.hidePagePostingAs,isOldForwardFlow:!0}))}if(this.state.audience===b("ShareDialogAudienceTypes").MESSAGE)b("ExternalWebShareDialogObserver").setHideComposerTaggers({hide:!0}),b("ExternalWebShareDialogObserver").setSubmitButtonActionText({actionText:h._("Send Message")});else{b("ExternalWebShareDialogObserver").setHideComposerTaggers({hide:!1});c=b("CurrentUser").isWorkUser()?h._("Post to Workplace"):h._("Post to Facebook");b("ExternalWebShareDialogObserver").setSubmitButtonActionText({actionText:c})}b("ExternalWebShareDialogObserver").setDisableSubmitButton({disable:this.state.audience!==b("ShareDialogAudienceTypes").OWN&&(!Array.isArray(this.state.audienceTargets)||this.state.audienceTargets.length===0)});d=[b("ShareDialogAudienceTypes").OWN,b("ShareDialogAudienceTypes").GROUP];this.props.dataSources.friend&&d.push(b("ShareDialogAudienceTypes").PERSON);this.props.dataSources.page&&d.push(b("ShareDialogAudienceTypes").PAGE);this.props.dataSources.fundraiser&&d.push(b("ShareDialogAudienceTypes").FUNDRAISER);this.props.dataSources.event&&d.push(b("ShareDialogAudienceTypes").EVENT);this.state.disableMessage||d.push(b("ShareDialogAudienceTypes").MESSAGE);return b("React").createElement("div",{"data-testid":"share-dialog-audience"},b("React").createElement("div",{className:"_kz1"+(this.props.hidePagePostingAs?"":" _125y")},b("React").createElement(b("ShareDialogAudienceSelector.react"),{activeAudience:this.state.audience,onAudienceSelect:this._onAudienceSelect,allowedAudiences:d})),a,b("React").createElement("input",{type:"hidden",name:"audience_targets",value:this.state.audienceTargets}),b("React").createElement("input",{type:"hidden",name:"av",value:this.state.actorId}))}});e.exports=c}),null);
__d("PlatformShareDialogFunnelLogger",["FunnelLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="PLATFORM_SHARE_DIALOG_FUNNEL";a={_funnelStarted:!1,startFunnel:function(a,c,d,e,f,h,i){b("FunnelLogger").startFunnel(g),b("FunnelLogger").addFunnelTag(g,"domain:"+a),b("FunnelLogger").addFunnelTag(g,"browser:"+c),b("FunnelLogger").addFunnelTag(g,"req_dialog:"+d),b("FunnelLogger").addFunnelTag(g,"dialog:"+e),b("FunnelLogger").addFunnelTag(g,"controller:"+f),b("FunnelLogger").addFunnelTag(g,"req_display:"+h),b("FunnelLogger").addFunnelTag(g,"display:"+i),this._funnelStarted=!0},endFunnel:function(){b("FunnelLogger").endFunnel(g)},registerListenerForVisibility:function(a,b){if(!b)return;this._funnelStarted&&this.isElementVisible(b)?this.appendUserActionIfNew(a+":visible"):setTimeout(function(){return this.registerListenerForVisibility(a,b)}.bind(this),1e3)},registerListenerForUserKeyInput:function(a,b){__p&&__p();if(!b||!b.addEventListener)return;b.addEventListener("input",function(event){var b=event.target;if(b instanceof HTMLInputElement||b instanceof HTMLTextAreaElement){this.appendUserActionIfNew(a+":input");b=b.value;/(^|\s+)#\w\s/.test(b)&&this.appendUserActionIfNew(a+":hash_intended");/(^|\s+)@\w/.test(b)&&this.appendUserActionIfNew(a+":mention_intended")}}.bind(this))},registerListenerForUserClick:function(a,b){if(!b)return;var c=["click","touchstart","mousedown"],d=function(){this.appendUserActionIfNew(a+":click")}.bind(this);b.addEventListener?c.forEach(function(a){b&&b.addEventListener(a,d)}):b.attachEvent&&b.attachEvent("onclick",d)},registerListenerForUserClickAndVisibility:function(a,b){b&&(this.registerListenerForVisibility(a,b),this.registerListenerForUserClick(a,b))},appendUserActionIfNew:function(a,c){!c?b("FunnelLogger").appendActionIfNew(g,a):b("FunnelLogger").appendActionWithTagIfNew(g,a,c)},isElementVisible:function(a){if(!a)return!1;var b=a.getBoundingClientRect(),c=window.innerHeight||document.documentElement.clientHeight,d=window.innerWidth||document.documentElement.clientWidth;a=a.contains(document.elementFromPoint((b.left+b.right)/2,(b.top+b.bottom)/2));return!a?!1:b.top>=0&&b.bottom<=c&&b.left>=0&&b.right<=d}};e.exports=a}),null);
__d("ExternalWebShareDialogCloseConfirmation",["Event","PlatformDialog","PlatformShareDialogFunnelLogger","Run"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={init:function(a,c,d){this._cancelWasClicked=!1,this._confirmOnClose=a&&!!d,this._confirmOnCancel=c&&!!d,b("Run").onBeforeUnload(function(){var a=this._shouldShowConfirm()?d:null;this._cancelWasClicked=!1;return a}.bind(this)),b("Run").onAfterUnload(function(){b("PlatformShareDialogFunnelLogger").endFunnel()})},setCancelButton:function(a){b("Event").listen(a,"click",function(a){window.opener&&this._confirmOnCancel&&(this._cancelWasClicked=!0,a.kill(),window.close())}.bind(this))},_shouldShowConfirm:function(){if(b("PlatformDialog").getInstance().hasBeenSubmitted())return!1;return this._cancelWasClicked?this._confirmOnCancel:this._confirmOnClose}};e.exports=a}),null);
__d("ExternalWebShareDialogQuoteInformer",["Arbiter","MutationObserver"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={init:function(a){__p&&__p();a=a.getElementsByClassName("share-quote-text-text");if(!a||!a[0])return;a=a[0];if(a.childNodes.length>0)this._informQuoteState(a);else{var c=new(b("MutationObserver"))(function(a){this._informQuoteState(a[0].target)}.bind(this));c.observe(a,{childList:!0})}},_informQuoteState:function(a){b("Arbiter").inform("isQuoteSet",!!a.textContent,b("Arbiter").BEHAVIOR_STATE)}};e.exports=a}),null);
__d("PlatformSharingFunnelActions",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({DIALOG_REQUESTED:"dialog_requested",DIALOG_SERVER_RENDERED:"dialog_server_rendered",DIALOG_CLIENT_LOADED:"dialog_client_loaded"})}),null);
__d("PlatformSharingWebFunnelAnalysisLogging",["PlatformSharingFunnelActions","PlatformSharingWebFunnelAnalysisTypedLogger","SessionBoundaryBasedFunnelData"],(function(a,b,c,d,e,f){"use strict";a={logLoad:function(){var a=new(b("SessionBoundaryBasedFunnelData"))(b("PlatformSharingFunnelActions").DIALOG_CLIENT_LOADED);a.markSessionEnd();new(b("PlatformSharingWebFunnelAnalysisTypedLogger"))().setFunnelLoggingInputData(a).log()}};e.exports=a}),null);
__d("OGComposerActionTypeTypeaheadRenderer",["cx","CompactTypeaheadRenderer","CSS","DOM"],(function(a,b,c,d,e,f,g){__p&&__p();function a(a,c){c=b("CompactTypeaheadRenderer")(a,c);b("DOM").prependContent(c,a.icon);if(a.type=="action_type"){a=b("DOM").create("i",{className:"arrowRight"});b("DOM").prependContent(c,a)}a=b("DOM").scry(c,"span");a.length==1&&b("CSS").addClass(a[0],"_5lpy");return c}a.className="compact _47i9";e.exports=a}),null);
__d("OGComposerNounTypeaheadMetrics",["TypeaheadMetrics"],(function(a,b,c,d,e,f){__p&&__p();var g,h;g=babelHelpers.inherits(a,b("TypeaheadMetrics"));h=g&&g.prototype;a.prototype.submit=function(){"use strict";("log_all_sessions"in this.extraData||this.hasStats())&&(this.stats.at_id=this.data.queryData.at_id),h.submit.call(this)};function a(){"use strict";g.apply(this,arguments)}e.exports=a}),null);
__d("OGComposerObjectDataSource",["DataSource","createArrayFromMixed"],(function(a,b,c,d,e,f){__p&&__p();var g;g=babelHelpers.inherits(a,b("DataSource"));g&&g.prototype;a.prototype.addEntries=function(a,c){"use strict";a=this.processEntries(b("createArrayFromMixed")(a||[]),c);if(c){var d=this.getQueryCache();c=this.tokenizeCache(c).flatValue;d[c]=a}};function a(){"use strict";g.apply(this,arguments)}e.exports=a}),null);
__d("OGNounTypeaheadView",["csx","cx","fbt","CSS","DOM","HubsTypeaheadView","ScrollableArea","throttle","tidyEvent"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j,k,l;j=babelHelpers.inherits(a,b("HubsTypeaheadView"));k=j&&j.prototype;a.prototype._bindScrollListener=function(){"use strict";this._getScrollableArea()&&b("tidyEvent")(l.subscribe("scroll",b("throttle")(this._checkScroll.bind(this))))};a.prototype._checkScroll=function(){"use strict";var a=this._getLastItemID();l.isScrolledToBottom()&&this._lastItemID!==a&&(this._lastItemID=a,this.inform("scrolledtobottom",{scrollableArea:l}))};a.prototype._createFreeFormNode=function(a){"use strict";return{orig_text:a,icon:this.defaultIcon,text:a,type:"calltoaction"}};a.prototype._getScrollableArea=function(){"use strict";this._scrollableArea||(this._scrollableArea=b("ScrollableArea").getInstance(this.content));return l=this._scrollableArea};a.prototype._getLastItemID=function(){"use strict";var a=this.items[this.items.length-1];return a&&a.getAttribute("aria-label")};a.prototype.init=function(){"use strict";this.content=b("DOM").find(this.element,"div._52yd"),k.init.call(this),b("tidyEvent")([this.subscribe(["render","reset"],this._updateView.bind(this)),this.subscribe("highlight",this._scrollIntoView.bind(this)),this.subscribeOnce("render",this._bindScrollListener.bind(this))])};a.prototype._scrollIntoView=function(a,b){"use strict";this._getScrollableArea()&&(this.ignoreMouseover=!0,l.scrollIntoView(b.element,!1))};a.prototype.validateQuery=function(a){"use strict";return!this.actionTypeID?!1:this.minQueryLength?a.length>=this.minQueryLength:!0};a.prototype.setContext=function(a){"use strict";this.defaultIcon=a.default_icon;this.actionTypeID=a.uid;this.actionTypeID.indexOf(":")>-1&&(this.actionTypeID=a.action_type_id);a=(!this.actionTypeIDsWithNoFreeform||!this.actionTypeIDsWithNoFreeform[this.actionTypeID])&&this.actionTypeID!=="";this.alwaysRender=a;this.allowFreeform=a;this.allowFreeformEntry=a};a.prototype._updateView=function(){"use strict";this._lastItemID=null,b("CSS").conditionClass(this.element,"_52yc",this.items.length)};a.prototype._createCustomAddNode=function(){"use strict";return{text:String(i._("Add your own...")),type:"calltoaction customadd",icon:this.defaultIcon}};a.prototype._containCustomAddNode=function(a){"use strict";for(var b=0;b<a.length;b++)if(a[b].type==="calltoaction customadd")return!0;return!1};a.prototype._removeCustomAddNode=function(a){"use strict";for(var b=0;b<a.length;b++)a[b].type==="calltoaction customadd"&&a.splice(b,1)};a.prototype.render=function(a,b,c){"use strict";this.allowFreeform&&b.length&&a===""&&!this._containCustomAddNode(b)?b.push(this._createCustomAddNode()):this._removeCustomAddNode(b);return k.render.call(this,a,b,c)};a.prototype.select=function(a){"use strict";__p&&__p();var b=this.results[this.index];if(b&&b.type.match("customadd")){this.causalElement.focus();setTimeout(function(){return this.layer.hide()}.bind(this),0);return}b&&(b.actionTypeID=this.actionTypeID);return k.select.call(this,a)};function a(){"use strict";j.apply(this,arguments)}e.exports=a}),null);
__d("TypeaheadShowAllBootstrapOnFocus",["TypeaheadShowBootstrapOnFocus"],(function(a,b,c,d,e,f){__p&&__p();var g;g=babelHelpers.inherits(a,b("TypeaheadShowBootstrapOnFocus"));g&&g.prototype;a.prototype.getMaxBootstrapEntries=function(){"use strict";return undefined};a.prototype.cacheUids=function(){"use strict";return!1};function a(){"use strict";g.apply(this,arguments)}e.exports=a}),null);
__d("OGComposerObjectTypeaheadRenderer",["CompactTypeaheadRenderer","DOM"],(function(a,b,c,d,e,f){function a(a,c){c=b("CompactTypeaheadRenderer")(a,c);a=a.icon;a&&b("DOM").prependContent(c,a);return c}a.className=b("CompactTypeaheadRenderer").className;e.exports=a}),null);