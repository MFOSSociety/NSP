if (self.CavalryLogger) { CavalryLogger.start_js(["ucoe3"]); }

__d("AsyncRequestUtil",["Promise"],(function(a,b,c,d,e,f){"use strict";a={send:function(a){return new(b("Promise"))(function(b,c){return a.setHandler(b).setErrorHandler(c).send()})}};e.exports=a}),null);
__d("VideoChannelProgressCircle.react",["cx","React","ReactDOM","Style"],(function(a,b,c,d,e,f,g){__p&&__p();var h;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);h=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$1=null,this.$2=0,b}a.prototype.componentDidMount=function(){"use strict";this.drawProgressCircle(this.props)};a.prototype.componentWillUnmount=function(){"use strict";clearInterval(this.$1)};a.prototype.UNSAFE_componentWillReceiveProps=function(a){"use strict";(a.makeProgress!==this.props.makeProgress||a.timeoutSec!==this.props.timeoutSec)&&this.drawProgressCircle(a)};a.prototype.drawProgressCircle=function(a){"use strict";var c=b("ReactDOM").findDOMNode(this.refs.progressCircle),d=this.$2,e=d/100;b("Style").set(c,"stroke-dashoffset",d+"px");clearInterval(this.$1);a.makeProgress&&(this.$1=setInterval(function(){d-=e,b("Style").set(c,"stroke-dashoffset",d+"px"),d<=0&&(clearInterval(this.$1),b("Style").set(c,"stroke-dashoffset","0px"),a.onProgressDone&&a.onProgressDone())}.bind(this),a.timeoutSec*10))};a.prototype.render=function(){"use strict";var a=this.props.watchAndScroll?34:80,c=this.props.watchAndScroll?2:4;a=a/2;var d=a-c/2;this.$2=d*2*Math.PI;return b("React").createElement("div",null,b("React").createElement("svg",{className:"_20_8"},b("React").createElement("circle",{cx:a,cy:a,r:d,stroke:"#ffffff",strokeWidth:c,strokeDasharray:this.$2,fill:"transparent"}),b("React").createElement("circle",{ref:"progressCircle",cx:a,cy:a,r:d,stroke:"#5890ff",strokeWidth:c,strokeDasharray:this.$2,fill:"transparent"})),this.props.children)};a.propTypes={children:c.element,makeProgress:c.bool.isRequired,onProgressDone:c.func,timeoutSec:c.number.isRequired,watchAndScroll:c.bool};e.exports=a}),null);
__d("VideoChannelReplayImage.react",["cx","Image.react","React"],(function(a,b,c,d,e,f,g){__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){"use strict";return b("React").createElement(b("Image.react"),{onClick:this.props.onClick,className:"_4nxy"+(this.props.size==="small"?" _4nxz":""),src:"/images/video/channel_view/replay.svg"})};function a(){"use strict";h.apply(this,arguments)}a.defaultProps={size:"normal"};e.exports=a}),null);
__d("VideoChannelLoggerEvents",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SESSION_START:"session_start",SESSION_PAUSE:"session_pause",SESSION_RESUME:"session_resume",SESSION_END:"session_end",IMPRESSION:"impression",VPV:"vpv",CLICK:"click",WATCH_SUMMARY:"watch_summary",FOLLOW:"follow",UNFOLLOW:"unfollow",SUBSCRIBE:"subscribe",SUBSCRIBE_SOME:"subscribe_some",UNSUBSCRIBE:"unsubscribe",PIN_TOPIC:"pin_topic",UNPIN_TOPIC:"unpin_topic",MARK_VISIT:"mark_visit",AUTO_ADVANCE:"auto_advance",STORY_FETCH_RESULTS:"story_fetch_results",FETCH_FIRST_STORY:"fetch_first_story_success",FETCH_STORIES_FROM_ENTQUERY:"fetch_stories_from_entquery",FETCH_STORIES_FORWARD:"fetch_stories_forward",FETCH_STORIES_BACKWARD:"fetch_stories_backward",FETCH_CHANNEL_PIVOTS:"fetch_channel_pivots_success",APPEND_CHANNEL_PIVOTS:"append_channel_pivots",FETCH_FIRST_STORY_SUCCESS:"fetch_first_story_success",FETCH_FIRST_STORY_ERROR:"fetch_first_story_error",FETCH_STORIES_FROM_ENTQUERY_SUCCESS:"fetch_stories_from_entquery_success",FETCH_STORIES_FROM_ENTQUERY_ERROR:"fetch_stories_from_entquery_error",FETCH_STORIES_FORWARD_SUCCESS:"fetch_stories_forward_success",FETCH_STORIES_FORWARD_ERROR:"fetch_stories_forward_error",FETCH_STORIES_BACKWARD_SUCCESS:"fetch_stories_backward_success",FETCH_STORIES_BACKWARD_ERROR:"fetch_stories_backward_error"})}),null);
__d("VideoChannelLoggerFields",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({DEPTH_LEVEL:"depth_level",EVENT_TARGET:"event_target",EVENT_TARGET_INFO:"event_target_info",ENTRY_POINT:"entry_point",ENTRY_POINT_TYPE:"entry_point_type",ENTRY_POINT_VALUE:"entry_point_value",EXIT_POINT_TYPE:"exit_point_type",EXIT_POINT_VALUE:"exit_point_value",FOLLOW_SURFACE:"follow_surface",EVENT:"event",HAS_STORY_FETCH_CURSOR:"has_story_fetch_cursor",IS_AD:"is_ad",IS_EMPLOYEE:"is_employee",IS_TEST_USER:"is_test_user",PERF_TIME_MS:"perf_time_ms",REQUEST_STATUS:"request_status",HAS_NEXT_PAGE:"has_next_page",POSITION_IN_CHANNEL:"position_in_channel",SESSION_ID:"session_id",SUBSCRIPTION_SURFACE:"subscription_surface",STORY_ID:"story_id",STORY_FETCH_COUNT:"story_fetch_count",STORY_FETCH_CURSOR:"story_fetch_cursor",STORY_FETCH_LIMIT:"story_fetch_limit",TIME_SINCE_START:"time_since_start",TRACKING_DATA:"tracking_data",VIDEO_ID:"video",VIDEO_ID_OVERRIDE:"video_id_override",VIDEO_CHAINING_CALLER:"video_chaining_caller",VIDEO_CHANNEL_ID:"video_channel_id",VIDEO_CHANNEL_TYPE:"video_channel_type",VIDEO_CHANNEL_TITLE:"video_channel_title",VIDEO_HOME_SESSION_ID:"video_home_session_id",WATCH_TIME_S:"watch_time_s"})}),null);
__d("VideoChannelRequestStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SUCCEEDED:"succeeded",FAILED:"failed",ABORTED:"aborted"})}),null);
__d("XVideoChannelViewAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video/channel/view/async/{id}/",{id:{type:"String",required:!0},original_video_id:{type:"String",required:!0},cursor:{type:"String"},story_count:{type:"Int",defaultValue:3},caller:{type:"Enum",defaultValue:"channel_view_from_unknown",enumType:1}})}),null);
__d("XVideoChannelViewStoryAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video/channel/view/story/async/{root_video_id}/",{root_video_id:{type:"String",required:!0},video_ids:{type:"StringVector",defaultValue:[]},use_video_placeholder:{type:"Bool",defaultValue:!1},setup_interactions:{type:"Bool",defaultValue:!1},is_first_story:{type:"Bool",defaultValue:!1},feed_tracking_data:{type:"StringVector",defaultValue:[]},caller:{type:"Enum",defaultValue:"channel_view_from_unknown",enumType:1},channel_id:{type:"String"},ad_impression_token:{type:"String"},fetch_channel_pivots:{type:"Bool",defaultValue:!1}})}),null);
__d("VideoChannelStoryFetcher",["AsyncRequest","HTML","VideoChannelLoggerEvents","VideoChannelLoggerFields","VideoChannelRequestStatus","VideoChannelViewVariables","XVideoChannelViewAsyncController","XVideoChannelViewStoryAsyncController"],(function(a,b,c,d,e,f){__p&&__p();var g=b("VideoChannelViewVariables").channelPivots;function a(a,b,c,d,e,f,g){"use strict";__p&&__p();this.$7=a;this.$8=b;this.$4=c;this.$10=0;this.$2=null;this.$3=!0;this.$5=[];this.$6=[];this.$9={};if(e){this.$5=e.videoIDs;this.$6=e.feedTrackingData;this.$2=e.cursorInfo.cursor;this.$3=e.cursorInfo.hasNextPage;a=this.$5.indexOf(this.$7);this.$9.start=a;this.$9.end=a+1}if(f){this.$5=f;this.$3=!!g;b=this.$5.indexOf(this.$7);this.$9.start=b;this.$9.end=b+1}this.$11=d;this.$12=[];this.$13=[]}a.prototype.reset=function(a,b){"use strict";this.$7=a,this.$8=b,this.$10=0,this.$2=null,this.$3=!0,this.$5=[],this.$6=[],this.$9={},this.$12=[],this.$13=[]};a.prototype.abandonRequest=function(){"use strict";this.$1&&this.$1.abandon()};a.prototype.hasNext=function(){"use strict";var a=this.$5.length-this.$9.end>0;return this.$3||a};a.prototype.$14=function(event,a,c){"use strict";var d={};d[b("VideoChannelLoggerFields").EVENT]=event;d[b("VideoChannelLoggerFields").REQUEST_STATUS]=a;d[b("VideoChannelLoggerFields").PERF_TIME_MS]=Date.now()-c;g&&(d[b("VideoChannelLoggerFields").VIDEO_CHANNEL_ID]=this.$8)};a.prototype.fetchFirstStory=function(a,c,d){"use strict";__p&&__p();if(c===null&&this.$5.length!==0){var e=this.$5.indexOf(this.$7);c=this.$6[e]}e=b("XVideoChannelViewStoryAsyncController").getURIBuilder().setEnum("caller",this.$4).setStringVector("video_ids",[this.$7]).setString("root_video_id",this.$7).setBool("is_first_story",!0).setBool("use_video_placeholder",a).setBool("setup_interactions",d).setString("channel_id",this.$8).setString("ad_impression_token",this.$11);c&&e.setStringVector("feed_tracking_data",[JSON.stringify(c)]);var f=Date.now();a=new(b("AsyncRequest"))(e.getURI()).setAllowCrossPageTransition(!0).setHandler(function(){__p&&__p();this.$14(b("VideoChannelLoggerEvents").FETCH_FIRST_STORY,b("VideoChannelRequestStatus").SUCCEEDED,f);this.$15();if(g){var a=Date.now(),d=b("XVideoChannelViewStoryAsyncController").getURIBuilder().setEnum("caller",this.$4).setStringVector("video_ids",[this.$7]).setString("root_video_id",this.$7).setString("channel_id",this.$8).setBool("fetch_channel_pivots",!0);c&&d.setStringVector("feed_tracking_data",[JSON.stringify(c)]);d=new(b("AsyncRequest"))(d.getURI()).setAllowCrossPageTransition(!0).setHandler(function(){this.$14(b("VideoChannelLoggerEvents").FETCH_CHANNEL_PIVOTS,b("VideoChannelRequestStatus").SUCCEEDED,a),this.$15()}.bind(this)).setErrorHandler(function(){this.$14(b("VideoChannelLoggerEvents").FETCH_CHANNEL_PIVOTS,b("VideoChannelRequestStatus").FAILED,a),this.$15()}.bind(this)).setAbortHandler(function(){this.$14(b("VideoChannelLoggerEvents").FETCH_CHANNEL_PIVOTS,b("VideoChannelRequestStatus").ABORTED,a),this.$15()}.bind(this));this.$1=d;this.$10=Date.now();d.send()}}.bind(this)).setErrorHandler(function(){this.$14(b("VideoChannelLoggerEvents").FETCH_FIRST_STORY,b("VideoChannelRequestStatus").FAILED,f),this.$15()}.bind(this)).setAbortHandler(function(){this.$14(b("VideoChannelLoggerEvents").FETCH_FIRST_STORY,b("VideoChannelRequestStatus").ABORTED,f),this.$15()}.bind(this));this.$1=a;this.$10=Date.now();a.send()};a.prototype.getPreloadedData=function(){"use strict";return{stories:this.$12,thumbnails:this.$13}};a.prototype.$16=function(a,c){"use strict";__p&&__p();if(!this.$8)return;a=b("XVideoChannelViewAsyncController").getURIBuilder().setString("id",this.$8).setEnum("caller",this.$4).setString("original_video_id",this.$7).setInt("story_count",a);this.$2&&a.setString("cursor",this.$2.toString());var d=Date.now();a=a.getURI();a=new(b("AsyncRequest"))(a).setAllowCrossPageTransition(!0).setHandler(function(a){this.$14(b("VideoChannelLoggerEvents").FETCH_STORIES_FROM_ENTQUERY,b("VideoChannelRequestStatus").SUCCEEDED,d),this.$2=a.getPayload().cursor,this.$3=a.getPayload().hasNextPage,this.$15(),this.$17(a,function(a,b){this.$12=[].concat(this.$12,a);this.$13=[].concat(this.$13,b);return c(a,b)}.bind(this))}.bind(this)).setErrorHandler(function(){this.$14(b("VideoChannelLoggerEvents").FETCH_STORIES_FROM_ENTQUERY,b("VideoChannelRequestStatus").FAILED,d),this.$15()}.bind(this)).setAbortHandler(function(){this.$14(b("VideoChannelLoggerEvents").FETCH_STORIES_FROM_ENTQUERY,b("VideoChannelRequestStatus").ABORTED,d),this.$15()}.bind(this));this.$1=a;a.send()};a.prototype.$18=function(a,c,d){"use strict";__p&&__p();var e=this.$9.end,f=this.$5.length-e,g=e+Math.min(f,a);if(f>0){var h=this.$5.slice(e,g);e=this.$6.slice(e,g).map(function(a){return JSON.stringify(a)});h=b("XVideoChannelViewStoryAsyncController").getURIBuilder().setEnum("caller",this.$4).setString("channel_id",this.$8).setString("root_video_id",this.$7).setStringVector("video_ids",h).setStringVector("feed_tracking_data",e);var i=Date.now();this.$1=new(b("AsyncRequest"))(h.getURI()).setAllowCrossPageTransition(!0).setErrorHandler(function(){this.$14(b("VideoChannelLoggerEvents").FETCH_STORIES_FORWARD,b("VideoChannelRequestStatus").FAILED,i),this.$15()}.bind(this)).setAbortHandler(function(){this.$14(b("VideoChannelLoggerEvents").FETCH_STORIES_FORWARD,b("VideoChannelRequestStatus").ABORTED,i),this.$15()}.bind(this)).setHandler(function(a){this.$14(b("VideoChannelLoggerEvents").FETCH_STORIES_FORWARD,b("VideoChannelRequestStatus").SUCCEEDED,i),this.$9.end=g,this.$15(),this.$17(a,function(a,b){this.$12=[].concat(this.$12,a);this.$13=[].concat(this.$13,b);return c(a,b)}.bind(this))}.bind(this));this.$1.send();d&&d(f)}else this.$3&&(this.$16(a,c),d&&d(a))};a.prototype.$19=function(a,c,d){"use strict";__p&&__p();var e=this.$9.start;if(e>0){var f=Math.max(e-a,0);a=this.$5.slice(f,e);var g=this.$6.slice(f,e).map(function(a){return JSON.stringify(a)});a=b("XVideoChannelViewStoryAsyncController").getURIBuilder().setEnum("caller",this.$4).setString("channel_id",this.$8).setString("root_video_id",this.$7).setStringVector("video_ids",a).setStringVector("feed_tracking_data",g);var h=Date.now();this.$1=new(b("AsyncRequest"))(a.getURI()).setAllowCrossPageTransition(!0).setErrorHandler(function(){this.$14(b("VideoChannelLoggerEvents").FETCH_STORIES_BACKWARD,b("VideoChannelRequestStatus").FAILED,h),this.$15()}.bind(this)).setAbortHandler(function(){this.$14(b("VideoChannelLoggerEvents").FETCH_STORIES_BACKWARD,b("VideoChannelRequestStatus").ABORTED,h),this.$15()}.bind(this)).setHandler(function(a){this.$14(b("VideoChannelLoggerEvents").FETCH_STORIES_BACKWARD,b("VideoChannelRequestStatus").SUCCEEDED,h),this.$9.start=f,this.$15(),this.$17(a,c)}.bind(this));this.$1.send();d&&d(e-f)}};a.prototype.fetchStories=function(a,c,d){"use strict";var e=b("VideoChannelViewVariables").defaultStoriesToLoad;if(this.$1)return;a?this.$18(e,c,d):this.$19(e,c,d)};a.prototype.$17=function(a,c){"use strict";a=a.getPayload();var d=b("HTML").replaceJSONWrapper(a.stories).getNodes();a=a.thumbnails.map(function(a){return b("HTML").replaceJSONWrapper(a).getRootNode()});c(d,a)};a.prototype.$15=function(){"use strict";this.$1=null};e.exports=a}),null);
__d("LiveVideoExperiments",["QE2Logger","StreamingReactionsAnimationGK"],(function(a,b,c,d,e,f){"use strict";var g={UNIVERSE:{VERTICAL_REACTIONS:"www_live_video_vertical_reactions"},getParamsValueAndLogExposure:function(a){b("QE2Logger").logExposureForUser(a);switch(a){case g.UNIVERSE.VERTICAL_REACTIONS:return b("StreamingReactionsAnimationGK")}return{}}};e.exports=g}),null);
__d("VideoAutoplayControllerAbortLoadingHelper",["invariant","VideoPlayerAbortLoadingExperiment","VideoPlayerExperiments","VideoPlayerLoggerSource","VideoPlayerShakaGlobalConfig","getViewportDimensions"],(function(a,b,c,d,e,f,g){__p&&__p();function h(){"use strict";this.$1=new Set(),this.$2=new Map()}h.prototype.maybeAbortLoading=function(){"use strict";__p&&__p();for(var a=this.$1,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;var f=b("VideoPlayerShakaGlobalConfig").getString("defer_which_video_to_abort_loading_decisioning_logic","all"),i=e.getVideoPlayerController();i=i?i.isLiveVideo():null;if(i!==null&&(f==="vod"&&i||f==="live"&&!i))continue;if(!e.isState("playing")&&typeof e.abortLoading==="function"&&h.shouldAbortLoadingVideoUnit(e))b("VideoPlayerExperiments").abortLoadingHelperNegativeYAbortLoading?this.$3(e):this.$4(e);else if(b("VideoPlayerExperiments").abortLoadingHelperNegativeYAbortLoading&&e.isState("playing")){f=this.$2.get(e);!f&&g(0);f&&f.abortedLoading&&(f.abortedLoading=!1)}}};h.prototype.$3=function(a){"use strict";if(b("VideoPlayerExperiments").abortLoadingHelperBoundedReloading){var c=b("getViewportDimensions")().height/-2;a.getDistanceToViewport()<b("VideoPlayerExperiments").abortedLoadingPixelBoundary+c&&!a.isVisible()?this.$5(a):a.getDistanceToViewport()>b("VideoPlayerExperiments").reloadingPixelBoundary+c&&this.$6(a)}else a.getDistanceToViewport()<0&&!a.isVisible()&&this.$5(a)};h.prototype.addVideoUnit=function(a){"use strict";this.$1.has(a)||(this.$1.add(a),this.$2.set(a,{y:a.getDistanceToViewport(),timestamp:new Date().valueOf(),v:0,abortedLoading:!1}))};h.prototype.removeVideoUnit=function(a){"use strict";this.$1["delete"](a),this.$2["delete"](a)};h.prototype.calculateFutureScrollPosition=function(a){"use strict";var b=a.y1-a.y0,c=a.t1-a.t0;b=b/c;var d=b-a.v0;d=d/c;c=a.t;c=d*c*c/2+c*b+a.y1;return{v1:b,a:d,S:c}};h.prototype.preloadClosestVideoUnits=function(a){"use strict";this.$7(a).forEach(function(a){return this.$6(a)}.bind(this))};h.prototype.$7=function(a){"use strict";return Array.from(this.$1).filter(function(a){return a.getDistanceToViewport()>=0}).sort(function(a,b){return a.getDistanceToViewport()-b.getDistanceToViewport()}).slice(0,a)};h.prototype.$6=function(a){"use strict";var b=this.$2.get(a);!b&&g(0);var c;b&&(c=b.abortedLoading,b.abortedLoading=!1);c&&typeof a.preload==="function"&&a.preload()};h.prototype.$5=function(a){"use strict";var b=this.$2.get(a);!b&&g(0);var c;b&&(c=b.abortedLoading,b.abortedLoading=!0);!c&&typeof a.abortLoading==="function"&&a.abortLoading()};h.prototype.$4=function(a){"use strict";__p&&__p();var c=b("getViewportDimensions")().height,d=1600;c=c/2;var e=c+d;c=-c;c=c-d;d=this.$2.get(a);!d&&g(0);if(!d)return;var f=a.getDistanceToViewport(),h=d.y;d.y=f;var i=new Date().valueOf(),j=d.timestamp;d.timestamp=i;var k=d.v;if(c<=f&&e>=f){d.abortedLoading&&this.$6(a);return}var l=500;h=this.calculateFutureScrollPosition({y0:h,y1:f,t0:j,t1:i,v0:k,t:l});d.v=h.v1;j=h.S;d.abortedLoading?(f<c&&j>c||f>e&&j<e)&&this.$6(a):this.$5(a)};h.prototype.$8=function(a){"use strict";a=a.getVideoPlayerController();return a?a.getVideoPlayerID():null};h.shouldAbortLoadingVideoUnit=function(a){"use strict";var c=b("VideoPlayerShakaGlobalConfig").getBool("abort_loading_decisioning_logic",!1),d=!c,e=!0;if(a){typeof a.getIsInChannel==="function"&&(e=a.getIsInChannel());typeof a.getSource==="function"&&c&&(d=a.getSource()===b("VideoPlayerLoggerSource").TAHOE);return b("VideoPlayerAbortLoadingExperiment").canAbort&&!e&&!d}return!1};e.exports=h}),null);
__d("VideoAutoplayControllerBase",["Arbiter","DesktopHscrollUnitEventConstants","Event","SubscriptionsHandler","VideoAutoplayControllerAbortLoadingHelper","VideoPlayerExperiments","VideoPlayerReason","VideoPlayerShakaGlobalConfig","Visibility","clearTimeout","debounce","destroyOnUnload","emptyFunction","setTimeout","throttle"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VideoPlayerShakaGlobalConfig").getNumber("abort_loading_delay",3e3);function h(a,b){var c=[];return function(){var d=Date.now();c.unshift(d);var e=0;while(c[++e]+b>d);c=c.slice(0,e);return c.length<=a}}function i(a,c,d){__p&&__p();var e=null;return function(){__p&&__p();for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];if(c()){a.apply(undefined,g);return b("emptyFunction").thatReturnsFalse}else if(!e){var i=b("setTimeout")(function(){e=null,a.apply(undefined,g)},d);e=function(){if(!e)return!1;b("clearTimeout")(i);e=null;return!0}}return e}}function a(a){this.$8=b("emptyFunction"),this.$9=b("emptyFunction"),this.$3=null,this.$2=null,this.$10=[],this.$1=a,this.$4=null,this.$5=new(b("SubscriptionsHandler"))(),b("destroyOnUnload")(function(){this.$10=[],this.$3=null,this.$4&&(this.$4.remove(),this.$4=null),this.$5.release()}.bind(this)),b("VideoPlayerExperiments").autoplayMaxCallsPerWindow&&(this.$6=i(function(a){var b=this.$3;b&&b.playWithoutUnmute(a)}.bind(this),h(b("VideoPlayerExperiments").autoplayMaxCallsPerWindow,b("VideoPlayerExperiments").autoplayThrottleWindow),b("VideoPlayerExperiments").autoplayThrottleDelay)),this.$7=b("emptyFunction").thatReturnsFalse}a.prototype.getVideoUnits=function(){return this.$10};a.prototype.setVideoUnits=function(a){this.$10=a};a.prototype.addVideoUnit=function(a){this.$10.push(a)};a.prototype.removeVideoUnit=function(a){var b=this.$10.findIndex(function(b){return b===a});b>-1&&this.$10.splice(b,1)};a.prototype.getPlayingVideoUnit=function(){return this.$3};a.prototype.setPlayingVideoUnit=function(a){this.$3=a,this.$3&&this.setupPlayingVideoUnitSubscriptions()};a.prototype.playVideo=function(a,c){__p&&__p();if(b("VideoPlayerExperiments").disableAutoplayForInactiveTab&&b("Visibility").isHidden()){if(b("VideoPlayerExperiments").removeHiddenVideoTracking){this.setPlayingVideoUnit(null);return}this.$2=a;return}this.setPlayingVideoUnit(a);if(this.$3){a=this.$6;a?this.$7=a.call(this,c):this.$3.playWithoutUnmute(c)}};a.prototype.setupPlayingVideoUnitSubscriptions=function(){throw new Error("Should be overridden")};a.prototype.addSubscriberVideoUnit=function(){this.getVideoUnits().length||(this.$5.addSubscriptions(b("Event").listen(window,"resize",this.updateAutoplay.bind(this)),b("Event").listen(window,"blur",this.$11.bind(this)),b("Event").listen(window,"focus",this.$12.bind(this)),b("Visibility").addListener(b("Visibility").HIDDEN,this.$11.bind(this)),b("Visibility").addListener(b("Visibility").VISIBLE,this.$12.bind(this)),b("Arbiter").subscribe(b("DesktopHscrollUnitEventConstants").HSCROLL_ITEM_SHOWN_EVENT,this.updateAutoplay.bind(this))),this.$13()||this.$14())};a.prototype.$11=function(){b("VideoPlayerExperiments").removeHiddenVideoTracking?this.$15(b("VideoPlayerReason").PAGE_VISIBILITY):this.$2||(this.$2=this.getPlayingVideoUnit(),this.$15(b("VideoPlayerReason").PAGE_VISIBILITY))};a.prototype.$12=function(){b("VideoPlayerExperiments").removeHiddenVideoTracking?this.updateAutoplay():this.$2&&(this.playVideo(this.$2,b("VideoPlayerReason").PAGE_VISIBILITY),this.$2=null)};a.prototype.$14=function(){this.$4&&this.$4.remove();this.$8=b("throttle")(function(){return this.updateAutoplay()}.bind(this),this.$1);this.$9=b("debounce")(function(){return this.updateAutoplay()}.bind(this),this.$1);var a=b("VideoPlayerShakaGlobalConfig").getBool("autoplay_use_unthrottled_scroll_handler",!1)?function(){return this.updateAutoplay()}.bind(this):function(){this.$8(),b("VideoPlayerExperiments").useDebouncedScroll&&this.$9()}.bind(this);this.$4=b("Event").listen(window,"scroll",a)};a.prototype.$13=function(){return!!this.$4};a.prototype.getClosestVideoUnits=function(a){return this.$10.filter(function(a){return a.getDistanceToViewport()>=0}).sort(function(a,b){return a.getDistanceToViewport()-b.getDistanceToViewport()}).slice(0,a)};a.prototype.getVisibleUnits=function(){__p&&__p();var a=[];this.$10.forEach(function(b){if(b.isVisible())a.push(b),b.wasVisible||(b.wasVisible=!0,b.logDisplayed());else if(b.wasVisible){var c=b.getVideoPlayerController();c&&c.emit("becomeInvisible");b.wasVisible=!1}});return a};a.prototype.$16=function(a){var c=b("VideoPlayerShakaGlobalConfig").getString("defer_which_video_to_abort_loading_decisioning_logic","all"),d=a.getVideoPlayerController();d=d?d.isLiveVideo():null;return d!==null&&(c==="vod"&&d||c==="live"&&!d)?!1:b("VideoAutoplayControllerAbortLoadingHelper").shouldAbortLoadingVideoUnit(a)};a.prototype.pausePlayingVideo=function(a,c){__p&&__p();var d=this.$3;if(d){var e=function a(){if(!d.isState("playing")){if(b("VideoPlayerExperiments").abortLoadingReUpStillVisibleVideos&&d.isVisible()){b("setTimeout")(a,g);return}typeof d.abortLoading==="function"&&d.abortLoading()}};this.$7()||d.pause(a);b("VideoPlayerExperiments").decoupleAbortLoadingFromPause||this.$16(d)&&!c&&b("setTimeout")(e,g);this.$3=null}};a.prototype.$15=function(a){this.pausePlayingVideo(a,!0)};a.prototype.updateAutoplay=function(){throw new Error("Should be overridden")};e.exports=a}),null);
__d("XVideoAutoplayNuxAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video/autoplay/nux/",{})}),null);
__d("XVideoAutoplayNuxDismissAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video/autoplay/nux/dismiss/",{})}),null);
__d("XVideoAutoplayNuxLogViewAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video/autoplay/nux/log/view/",{})}),null);
__d("requestBoundedAnimationFrame",["cancelAnimationFrame","clearTimeout","performanceNow","requestAnimationFrame","setTimeout"],(function(a,b,c,d,e,f){a=function(a,c,d){var e=b("setTimeout")(function(){e=null,f!==null&&b("cancelAnimationFrame")(f),a(b("performanceNow")())},d),f=b("requestAnimationFrame")(function(c){f=null,e!==null&&b("clearTimeout")(e),a(c)},c);return function(){f!==null&&(b("cancelAnimationFrame")(f),f=null),e!==null&&(b("clearTimeout")(e),e=null)}};e.exports=a}),null);
__d("VideoAutoplayControllerX",["csx","AsyncRequest","DOM","Event","Network","Run","SubscriptionsHandler","VideoAutoplayControllerAbortLoadingHelper","VideoAutoplayControllerBase","VideoPlayerExperiments","VideoPlayerPreloadExperiment","VideoPlayerReason","VideoPlayerShakaGlobalConfig","XVideoAutoplayNuxAsyncController","XVideoAutoplayNuxDismissAsyncController","XVideoAutoplayNuxLogViewAsyncController","clearTimeout","destroyOnUnload","getViewportDimensions","requestBoundedAnimationFrame","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=null,j=b("VideoPlayerExperiments").videoPollingFrequency,k=!1;function l(){return!b("VideoPlayerExperiments").delayAutoplayUntilAfterLoad||k}a=babelHelpers.inherits(m,b("VideoAutoplayControllerBase"));h=a&&a.prototype;function m(){__p&&__p();h.constructor.call(this,j);this.$VideoAutoplayControllerX4=!1;this.$VideoAutoplayControllerX5=!1;this.$VideoAutoplayControllerX6=0;this.$VideoAutoplayControllerX17=new(b("VideoAutoplayControllerAbortLoadingHelper"))();this.$VideoAutoplayControllerX10=new(b("SubscriptionsHandler"))();this.$VideoAutoplayControllerX18=new(b("SubscriptionsHandler"))();this.$VideoAutoplayControllerX12=!0;this.$VideoAutoplayControllerX9=!0;this.$VideoAutoplayControllerX13=!0;this.$VideoAutoplayControllerX2=null;this.$VideoAutoplayControllerX1=null;this.$VideoAutoplayControllerX14=!1;this.$VideoAutoplayControllerX3=null;this.$VideoAutoplayControllerX7=!1;this.$VideoAutoplayControllerX16=!1;this.$VideoAutoplayControllerX15=!1;var a=b("XVideoAutoplayNuxAsyncController").getURIBuilder().getURI();new(b("AsyncRequest"))(a).setAllowCrossPageTransition().send();b("destroyOnUnload")(function(){this.$VideoAutoplayControllerX19(),b("VideoPlayerExperiments").disableAutoplayOnHomePgUpPgDownEnd&&(this.$VideoAutoplayControllerX11&&b("clearTimeout")(this.$VideoAutoplayControllerX11),this.$VideoAutoplayControllerX8.remove()),this===i&&(i=null)}.bind(this));b("Run").onAfterLoad(function(){k=!0,b("VideoPlayerExperiments").delayAutoplayUntilAfterLoad&&(i&&i.updateAutoplay()),document.hasFocus()||b("Event").fire(window,"blur"),b("VideoPlayerExperiments").disableAutoplayOnHomePgUpPgDownEnd&&this.$VideoAutoplayControllerX20()}.bind(this));b("VideoPlayerShakaGlobalConfig").getBool("use_two_frequency_update_autoplay",!1)&&this.$VideoAutoplayControllerX21(Date.now())}m.$VideoAutoplayControllerX22=function(a){return b("VideoPlayerExperiments").fixVPCCallBeforeLoaded?!(a.isState("fallback")||a.isState("loading")):!0};m.prototype.$VideoAutoplayControllerX20=function(){__p&&__p();var a=33,c=34,d=35,e=36;this.$VideoAutoplayControllerX11=null;var f=function(){this.$VideoAutoplayControllerX23(this.$VideoAutoplayControllerX9),b("clearTimeout")(this.$VideoAutoplayControllerX11),this.$VideoAutoplayControllerX11=null}.bind(this);this.$VideoAutoplayControllerX8=b("Event").listen(document.body,"keydown",function(g){var h=-1;switch(g.keyCode){case a:case c:h=b("VideoPlayerExperiments").pressPgUpPgDownAutoplayShutoffInterval;break;case d:case e:h=b("VideoPlayerExperiments").pressHomeEndAutoplayShutoffInterval;break;default:break}h>-1&&(this.$VideoAutoplayControllerX11?(b("clearTimeout")(this.$VideoAutoplayControllerX11),this.$VideoAutoplayControllerX11=b("setTimeout")(f,h)):this.$VideoAutoplayControllerX12&&(this.$VideoAutoplayControllerX23(!1),this.$VideoAutoplayControllerX11=b("setTimeout")(f,h)))}.bind(this))};m.prototype.$VideoAutoplayControllerX23=function(a){this.$VideoAutoplayControllerX12=a,this.updateAutoplay()};m.registerVideoUnit=function(a){__p&&__p();i==null&&(i=new m());i.addSubscriberVideoUnit();i.addVideoUnit(a);var c=new(b("SubscriptionsHandler"))();c.addSubscriptions.apply(c,i.$VideoAutoplayControllerX24(a));i.$VideoAutoplayControllerX25();a.isVisible()&&l()&&i.updateAutoplay();i.shouldRestoreAllSubsequentStreamBufferSizes()&&i.restoreStreamBufferSize();return function(){i&&i.removeVideoUnit(a),c.release(),i&&a===i.getPlayingVideoUnit()&&(i.$VideoAutoplayControllerX18.release(),i.setPlayingVideoUnit(null))}};m.setShouldAutoplay=function(a){i==null&&(i=new m()),i.$VideoAutoplayControllerX12=a,i.$VideoAutoplayControllerX13=a,i.$VideoAutoplayControllerX9=a,i.updateAutoplay()};m.prototype.$VideoAutoplayControllerX19=function(){this.$VideoAutoplayControllerX10.release(),this.$VideoAutoplayControllerX18.release()};m.setAutoplayNux=function(a,c){__p&&__p();var d=i;if(!d)return;d.$VideoAutoplayControllerX2=a;d.$VideoAutoplayControllerX1=c;d.$VideoAutoplayControllerX14=!0;a=b("DOM").find(c.getContentRoot(),"._5cqr");b("Event").listen(a,"click",function(){d.$VideoAutoplayControllerX26()});a=b("DOM").scry(c.getContentRoot(),"._36gl")[0];a&&b("Event").listen(a,"click",function(){d.$VideoAutoplayControllerX26()})};m.prototype.$VideoAutoplayControllerX26=function(){this.$VideoAutoplayControllerX1&&this.$VideoAutoplayControllerX1.hide();this.$VideoAutoplayControllerX14=!1;var a=b("XVideoAutoplayNuxDismissAsyncController").getURIBuilder().getURI();new(b("AsyncRequest"))(a).setAllowCrossPageTransition().send()};m.prototype.setupPlayingVideoUnitSubscriptions=function(){__p&&__p();var a=this.getPlayingVideoUnit();if(!a)return;a.addListener&&(this.$VideoAutoplayControllerX10.release(),this.$VideoAutoplayControllerX10.engage(),a.isLooping()||this.$VideoAutoplayControllerX10.addSubscriptions(a.addListener("finishPlayback",function(){this.setPlayingVideoUnit(null)}.bind(this))),this.$VideoAutoplayControllerX10.addSubscriptions(a.addListener("turnOffAutoplay",function(){this.setPlayingVideoUnit(null)}.bind(this)),a.addListener("pausePlayback",function(){this.$VideoAutoplayControllerX25()}.bind(this)),a.addListener("finishPlayback",function(){this.$VideoAutoplayControllerX25()}.bind(this)),b("Network").addListener("online",function(){this.$VideoAutoplayControllerX25()}.bind(this)),b("Network").addListener("offline",function(){this.$VideoAutoplayControllerX25()}.bind(this))))};m.prototype.$VideoAutoplayControllerX25=function(){__p&&__p();if(b("VideoPlayerExperiments").webVideosBlockAutoplayWhenOffline)if(b("Network").isOnline())this.$VideoAutoplayControllerX12=this.$VideoAutoplayControllerX13;else{this.$VideoAutoplayControllerX13=this.$VideoAutoplayControllerX12;this.$VideoAutoplayControllerX12=!1;return}var a=this.getVideoUnits();for(var c=0;c<a.length;c++){var d=a[c].getVideoPlayerController();d&&(d.getDataInsertionPosition()==="0"&&(this.$VideoAutoplayControllerX7=!0,this.$VideoAutoplayControllerX16===!1&&(m.$VideoAutoplayControllerX22(d)&&d.restoreStreamBufferSize(),d.once("beginPlayback",function(){this.$VideoAutoplayControllerX15=!0,this.restoreStreamBufferSize()}.bind(this)),this.$VideoAutoplayControllerX16=!0)),b("VideoPlayerExperiments").autoplayBlockBlacklist||d.updateAutoplayRestrained())}this.$VideoAutoplayControllerX7||this.restoreStreamBufferSize()};m.prototype.shouldRestoreAllSubsequentStreamBufferSizes=function(){return!this.$VideoAutoplayControllerX7?!0:this.$VideoAutoplayControllerX15};m.prototype.restoreStreamBufferSize=function(){var a=this.getVideoUnits();for(var b=0;b<a.length;b++){var c=a[b].getVideoPlayerController();c&&m.$VideoAutoplayControllerX22(c)&&c.restoreStreamBufferSize()}};m.prototype.$VideoAutoplayControllerX24=function(a){__p&&__p();var c;if(!a.addListener)return[];var d=function(){__p&&__p();if(!a.isMuted()&&a.isState("playing")){var c=this.$VideoAutoplayControllerX3;if(c&&c!==a){var d=c.getVideoPlayerController();if(d){var e=d.getOption("VideoWithLiveBroadcast","isLive");e?d.mute():d.pause(b("VideoPlayerReason").USER)}try{c.pause(b("VideoPlayerReason").USER)}catch(a){}}this.$VideoAutoplayControllerX3=a}}.bind(this);d=[a.addListener("beginPlayback",d),a.addListener("changeVolume",d),a.addListener("unmuteVideo",d)];(c=this.$VideoAutoplayControllerX18).addSubscriptions.apply(c,d);return d};m.prototype.$VideoAutoplayControllerX27=function(a){__p&&__p();var c=a.length,d=null;if(c===1)d=a[0],d=d.isAutoplayable()?d:null;else if(c>1){var e=b("getViewportDimensions")().height/2;a.forEach(function(a){if(!a.isAutoplayable())return;var b=a.getDOMPosition();b=b.y+b.height/2;b=Math.abs(b-e);a.playPriority=b;(!d||!d.playPriority||a.playPriority<d.playPriority)&&(d=a)})}return d};m.prototype.showAutoplayNUX=function(a){__p&&__p();var c=this.$VideoAutoplayControllerX1;if(c&&!c.isShown()){a=a.getVideoPlayerController();a=a?a.getRootNode():null;b("DOM").prependContent(a,this.$VideoAutoplayControllerX2);c.show();a=b("XVideoAutoplayNuxLogViewAsyncController").getURIBuilder().getURI();new(b("AsyncRequest"))(a).setAllowCrossPageTransition().send()}this.$VideoAutoplayControllerX14=!1};m.prototype.addVideoUnit=function(a){a&&h.addVideoUnit.call(this,a),b("VideoPlayerExperiments").decoupleAbortLoadingFromPause&&a&&this.$VideoAutoplayControllerX17.addVideoUnit(a)};m.prototype.removeVideoUnit=function(a){a&&h.removeVideoUnit.call(this,a),b("VideoPlayerExperiments").decoupleAbortLoadingFromPause&&a&&this.$VideoAutoplayControllerX17.removeVideoUnit(a)};m.prototype.$VideoAutoplayControllerX21=function(a){var c=b("VideoPlayerShakaGlobalConfig").getNumber("request_bounded_animation_frame_bound",50);this.$VideoAutoplayControllerX28();b("VideoPlayerShakaGlobalConfig").getBool("update_autoplay_lower_raf_cycle",!1)?b("setTimeout")(function(){b("requestBoundedAnimationFrame")(function(a){this.$VideoAutoplayControllerX21(a)}.bind(this),{priority:1},c)}.bind(this),j):b("requestBoundedAnimationFrame")(function(a){this.$VideoAutoplayControllerX21(a)}.bind(this),{priority:1},c)};m.prototype.$VideoAutoplayControllerX28=function(){__p&&__p();var a=this.$VideoAutoplayControllerX3,c=Date.now(),d=c-this.$VideoAutoplayControllerX6,e=b("VideoPlayerShakaGlobalConfig").getNumber("autoplay_start_video_interval",200);if(b("VideoPlayerShakaGlobalConfig").getBool("update_autoplay_no_high_frequency_ops",!1)&&d<e)return;this.$VideoAutoplayControllerX4&&b("VideoPlayerExperiments").pauseAudioUnitsOffscreen&&a&&a.shouldPauseWhenScrolledOffscreen()&&!a.isVisible()&&a.pause(b("VideoPlayerReason").AUTOPLAY);if(!this.$VideoAutoplayControllerX12){this.pausePlayingVideo(b("VideoPlayerReason").AUTOPLAY);return}a=this.getVideoUnits();var f=this.getPlayingVideoUnit(),g=this.$VideoAutoplayControllerX4?null:f;this.$VideoAutoplayControllerX4&&f&&f.isVisible()&&(g=this.$VideoAutoplayControllerX27([f]));f&&f!==g&&this.pausePlayingVideo(b("VideoPlayerReason").AUTOPLAY);if(d>=e){this.$VideoAutoplayControllerX6=c;if(this.$VideoAutoplayControllerX5){d=this.getVisibleUnits();for(var e=0;e<a.length;++e)a[e].isMuted()&&d.indexOf(a[e])===-1&&a[e].pause(b("VideoPlayerReason").AUTOPLAY);g=this.$VideoAutoplayControllerX27(d);g&&g!==f&&(f&&this.pausePlayingVideo(b("VideoPlayerReason").AUTOPLAY),this.playVideo(g,b("VideoPlayerReason").AUTOPLAY),this.$VideoAutoplayControllerX14&&this.showAutoplayNUX(g));this.getClosestVideoUnits(b("VideoPlayerExperiments").preloadVideosCount).forEach(function(a){return a.preload()});g&&b("VideoPlayerExperiments").adjustPriorityBasedOnAutoplayIndex&&this.$VideoAutoplayControllerX29(g)}this.$VideoAutoplayControllerX5=!1}this.$VideoAutoplayControllerX4=!1};m.prototype.updateAutoplay=function(){__p&&__p();if(b("VideoPlayerShakaGlobalConfig").getBool("use_two_frequency_update_autoplay",!1)){this.$VideoAutoplayControllerX4=!0;this.$VideoAutoplayControllerX5=!0;return}var a=this.getVideoUnits(),c;if(b("VideoPlayerExperiments").pauseOffscreenUnitsFirst){c=this.getVisibleUnits();if(b("VideoPlayerExperiments").pauseOffscreenMutedOnUpdateAutoplay)for(var d=0;d<a.length;++d)a[d].isMuted()&&c.indexOf(a[d])===-1&&a[d].pause(b("VideoPlayerReason").AUTOPLAY)}if(!this.$VideoAutoplayControllerX12){this.pausePlayingVideo(b("VideoPlayerReason").AUTOPLAY);return}d=this.$VideoAutoplayControllerX3;b("VideoPlayerExperiments").pauseAudioUnitsOffscreen&&d&&d.shouldPauseWhenScrolledOffscreen()&&!d.isVisible()&&d.pause(b("VideoPlayerReason").AUTOPLAY);!b("VideoPlayerExperiments").decoupleAbortLoadingFromPause?this.getClosestVideoUnits(b("VideoPlayerPreloadExperiment").preloadVideosCount).forEach(function(a){a.preload()}):b("VideoPlayerExperiments").abortLoadingHelperDefaultPreloading&&this.$VideoAutoplayControllerX17.preloadClosestVideoUnits(b("VideoPlayerPreloadExperiment").preloadVideosCount);c=this.getVisibleUnits();d=this.$VideoAutoplayControllerX27(c);var e=this.getPlayingVideoUnit();e?d!=e&&(this.pausePlayingVideo(b("VideoPlayerReason").AUTOPLAY),this.playVideo(d,b("VideoPlayerReason").AUTOPLAY),this.$VideoAutoplayControllerX14&&d&&this.showAutoplayNUX(d)):d&&(this.playVideo(d,b("VideoPlayerReason").AUTOPLAY),this.$VideoAutoplayControllerX14&&this.showAutoplayNUX(d));if(!b("VideoPlayerExperiments").pauseOffscreenUnitsFirst&&b("VideoPlayerExperiments").pauseOffscreenMutedOnUpdateAutoplay)for(var e=0;e<a.length;++e)a[e].isMuted()&&c.indexOf(a[e])===-1&&a[e].pause(b("VideoPlayerReason").AUTOPLAY);b("VideoPlayerExperiments").adjustPriorityBasedOnAutoplayIndex&&this.$VideoAutoplayControllerX29(d);b("VideoPlayerExperiments").decoupleAbortLoadingFromPause&&this.$VideoAutoplayControllerX17.maybeAbortLoading()};m.prototype.$VideoAutoplayControllerX29=function(a){__p&&__p();var c=-1,d=this.getVideoUnits();if(a){var e=d.findIndex(function(b){return b===a});e>=0&&(c=e+1)}else{e=b("getViewportDimensions")().height/2;for(var f=0;f<d.length;f++){var g=d[f];g=g.getDOMPosition();g=g.y+g.height/2;if(g-e>0){c=f;break}}}if(c===-1)return;for(var g=0;g<d.length;g++){f=d[g];e=f.getVideoPlayerController();if(!e)continue;g===c?e.setVideoPriorityAdjustment(.1):f===a?e.setVideoPriorityAdjustment(b("VideoPlayerExperiments").offsetToBestUnitPriority):b("VideoPlayerExperiments").dePrioritizeUpfoldVideos&&g<c?e.setVideoPriorityAdjustment(-.5):e.setVideoPriorityAdjustment(0)}};e.exports=m}),null);
__d("VideoAutoplayPlayerBase",["EventEmitter","FBLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("EventEmitter"));g=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.wasVisible=!1,b}a.prototype.isVisible=function(){throw new Error("Should be overridden")};a.prototype.getDistanceToViewport=function(){throw new Error("Should be overridden")};a.prototype.getVideoPlayerController=function(){b("FBLogger")("video").warn(["VideoAutoplayPlayerBase.getVideoPlayerController()","was called and returned null."].join(" "));return null};a.prototype.logDisplayed=function(){throw new Error("Should be overridden")};a.prototype.playWithoutUnmute=function(a){throw new Error("Should be overridden")};a.prototype.pause=function(a){throw new Error("Should be overridden")};a.prototype.isAutoplayable=function(){throw new Error("Should be overridden")};a.prototype.getDOMPosition=function(){throw new Error("Should be overridden")};a.prototype.isLooping=function(){throw new Error("Should be overridden")};a.prototype.isState=function(a){throw new Error("Should be overridden")};a.prototype.preload=function(){throw new Error("Should be overridden")};a.prototype.isMuted=function(){throw new Error("Should be overridden")};a.prototype.isPlaying=function(){throw new Error("Should be overridden")};a.prototype.shouldPauseWhenScrolledOffscreen=function(){throw new Error("Should be overridden")};e.exports=a}),null);
__d("ReactCSSTransitionGroupChild",["React","ReactDOM","ReactTransitionEvents","fbjs/lib/CSSCore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=17;a=b("React").createClass({displayName:"ReactCSSTransitionGroupChild",propTypes:{name:b("React").PropTypes.oneOfType([b("React").PropTypes.string,b("React").PropTypes.shape({enter:b("React").PropTypes.string,leave:b("React").PropTypes.string,active:b("React").PropTypes.string}),b("React").PropTypes.shape({enter:b("React").PropTypes.string,enterActive:b("React").PropTypes.string,leave:b("React").PropTypes.string,leaveActive:b("React").PropTypes.string,appear:b("React").PropTypes.string,appearActive:b("React").PropTypes.string})]).isRequired,appear:b("React").PropTypes.bool,enter:b("React").PropTypes.bool,leave:b("React").PropTypes.bool,appearTimeout:b("React").PropTypes.number,enterTimeout:b("React").PropTypes.number,leaveTimeout:b("React").PropTypes.number},transition:function(a,c,d){__p&&__p();var e=b("ReactDOM").findDOMNode(this);if(!e){c&&c();return}var f=this.props.name[a]||this.props.name+"-"+a,g=this.props.name[a+"Active"]||f+"-active",h=null;a=function a(d){if(d&&d.target!==e)return;clearTimeout(h);b("fbjs/lib/CSSCore").removeClass(e,f);b("fbjs/lib/CSSCore").removeClass(e,g);b("ReactTransitionEvents").removeEndEventListener(e,a);c&&c()};b("fbjs/lib/CSSCore").addClass(e,f);this.queueClassAndNode(g,e);d?(h=setTimeout(a,d),this.transitionTimeouts.push(h)):b("ReactTransitionEvents").addEndEventListener(e,a)},queueClassAndNode:function(a,b){this.classNameAndNodeQueue.push({className:a,node:b}),this.timeout||(this.timeout=setTimeout(this.flushClassNameAndNodeQueue,g))},flushClassNameAndNodeQueue:function(){this.isMounted()&&this.classNameAndNodeQueue.forEach(function(a){b("fbjs/lib/CSSCore").addClass(a.node,a.className)}),this.classNameAndNodeQueue.length=0,this.timeout=null},UNSAFE_componentWillMount:function(){this.classNameAndNodeQueue=[],this.transitionTimeouts=[]},componentWillUnmount:function(){this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach(function(a){clearTimeout(a)}),this.classNameAndNodeQueue.length=0},componentWillAppear:function(a){this.props.appear?this.transition("appear",a,this.props.appearTimeout):a()},componentWillEnter:function(a){this.props.enter?this.transition("enter",a,this.props.enterTimeout):a()},componentWillLeave:function(a){this.props.leave?this.transition("leave",a,this.props.leaveTimeout):a()},render:function(){return b("React").Children.only(this.props.children)}});e.exports=a}),null);
__d("ReactTransitionChildMapping",["React","emptyFunction","warning"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("emptyFunction");c={getChildMapping:function(a){if(!a)return a;var c={};b("React").Children.toArray(a).forEach(function(a){var b=a.key,d=c[b]===undefined;d&&(c[b]=a)});return c},mergeChildMappings:function(a,b){__p&&__p();a=a||{};b=b||{};function c(c){if(Object.prototype.hasOwnProperty.call(b,c))return b[c];else return a[c]}var d={},e=[];for(var f in a)Object.prototype.hasOwnProperty.call(b,f)?e.length&&(d[f]=e,e=[]):e.push(f);var g,h={};for(var i in b){if(Object.prototype.hasOwnProperty.call(d,i))for(g=0;g<d[i].length;g++){var j=d[i][g];h[d[i][g]]=c(j)}h[i]=c(i)}for(g=0;g<e.length;g++)h[e[g]]=c(e[g]);return h}};e.exports=c}),null);
__d("ReactTransitionGroup",["React","ReactTransitionChildMapping","fbjs/lib/emptyFunction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("React").Component);g=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.state={children:b("ReactTransitionChildMapping").getChildMapping(this.props.children)},this.performAppear=function(a){this.currentlyTransitioningKeys[a]=!0;var b=this.refs[a];b.componentWillAppear?b.componentWillAppear(this.$1.bind(this,a)):this.$1(a)}.bind(this),this.$1=function(a){var c=this.refs[a];c.componentDidAppear&&c.componentDidAppear();delete this.currentlyTransitioningKeys[a];c=b("ReactTransitionChildMapping").getChildMapping(this.props.children);(!c||!Object.prototype.hasOwnProperty.call(c,a))&&this.performLeave(a)}.bind(this),this.performEnter=function(a){this.currentlyTransitioningKeys[a]=!0;var b=this.refs[a];b.componentWillEnter?b.componentWillEnter(this.$2.bind(this,a)):this.$2(a)}.bind(this),this.$2=function(a){var c=this.refs[a];c.componentDidEnter&&c.componentDidEnter();delete this.currentlyTransitioningKeys[a];c=b("ReactTransitionChildMapping").getChildMapping(this.props.children);(!c||!Object.prototype.hasOwnProperty.call(c,a))&&this.performLeave(a)}.bind(this),this.performLeave=function(a){this.currentlyTransitioningKeys[a]=!0;var b=this.refs[a];b.componentWillLeave?b.componentWillLeave(this.$3.bind(this,a)):this.$3(a)}.bind(this),this.$3=function(a){var c=this.refs[a];c.componentDidLeave&&c.componentDidLeave();delete this.currentlyTransitioningKeys[a];c=b("ReactTransitionChildMapping").getChildMapping(this.props.children);c&&Object.prototype.hasOwnProperty.call(c,a)?this.performEnter(a):this.setState(function(b){b=Object.assign({},b.children);delete b[a];return{children:b}})}.bind(this),c}a.prototype.UNSAFE_componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]};a.prototype.componentDidMount=function(){var a=this.state.children;for(var b in a)a[b]&&this.performAppear(b)};a.prototype.UNSAFE_componentWillReceiveProps=function(a){__p&&__p();a=b("ReactTransitionChildMapping").getChildMapping(a.children);var c=this.state.children;this.setState({children:b("ReactTransitionChildMapping").mergeChildMappings(c,a)});var d;for(d in a){var e=c&&Object.prototype.hasOwnProperty.call(c,d);a[d]&&!e&&!this.currentlyTransitioningKeys[d]&&this.keysToEnter.push(d)}for(d in c){e=a&&Object.prototype.hasOwnProperty.call(a,d);c[d]&&!e&&!this.currentlyTransitioningKeys[d]&&this.keysToLeave.push(d)}};a.prototype.componentDidUpdate=function(){var a=this.keysToEnter;this.keysToEnter=[];a.forEach(this.performEnter);a=this.keysToLeave;this.keysToLeave=[];a.forEach(this.performLeave)};a.prototype.render=function(){__p&&__p();var a=[];for(var c in this.state.children){var d=this.state.children[c];d&&a.push(b("React").cloneElement(this.props.childFactory(d),{ref:c,key:c}))}d=Object.assign({},this.props);delete d.transitionLeave;delete d.transitionName;delete d.transitionAppear;delete d.transitionEnter;delete d.childFactory;delete d.transitionLeaveTimeout;delete d.transitionEnterTimeout;delete d.transitionAppearTimeout;delete d.component;return b("React").createElement(this.props.component,d,a)};a.displayName="ReactTransitionGroup";a.propTypes={component:b("React").PropTypes.any,childFactory:b("React").PropTypes.func};a.defaultProps={component:"span",childFactory:b("fbjs/lib/emptyFunction").thatReturnsArgument};e.exports=a}),null);
__d("ReactCSSTransitionGroup",["React","ReactCSSTransitionGroupChild","ReactTransitionGroup"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;function a(a){var b="transition"+a+"Timeout",c="transition"+a;return function(a){if(a[c])if(a[b]==null)return new Error(b+" wasn't supplied to ReactCSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");else if(typeof a[b]!=="number")return new Error(b+" must be a number (in milliseconds)")}}d=babelHelpers.inherits(c,b("React").Component);g=d&&d.prototype;function c(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.$1=function(a){return b("React").createElement(b("ReactCSSTransitionGroupChild"),{name:this.props.transitionName,appear:this.props.transitionAppear,enter:this.props.transitionEnter,leave:this.props.transitionLeave,appearTimeout:this.props.transitionAppearTimeout,enterTimeout:this.props.transitionEnterTimeout,leaveTimeout:this.props.transitionLeaveTimeout},a)}.bind(this),c}c.prototype.render=function(){return b("React").createElement(b("ReactTransitionGroup"),Object.assign({},this.props,{childFactory:this.$1}))};c.displayName="ReactCSSTransitionGroup";c.propTypes={transitionName:b("ReactCSSTransitionGroupChild").propTypes.name,transitionAppear:b("React").PropTypes.bool,transitionEnter:b("React").PropTypes.bool,transitionLeave:b("React").PropTypes.bool,transitionAppearTimeout:a("Appear"),transitionEnterTimeout:a("Enter"),transitionLeaveTimeout:a("Leave")};c.defaultProps={transitionAppear:!1,transitionEnter:!0,transitionLeave:!0};e.exports=c}),null);
__d("XVideoWnsUpNextAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video/wns/upnext/async/{video_id}/",{video_id:{type:"FBID",required:!0},viewed_videos:{type:"FBIDSet"}})}),null);
__d("VideoWatchAndScrollDrawer.react",["csx","cx","fbt","AsyncRequest","DOM","DOMContainer.react","FBLoadShimmer.react","React","XVideoWnsUpNextAsyncController"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j;c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=j.constructor).call.apply(a,[this].concat(d)),this.state={fetching:!0,upNext:null},b}a.prototype.componentDidMount=function(){"use strict";this.props.videoID&&this.$2(this.props.videoID)};a.prototype.componentWillUnmount=function(){"use strict";this.$1&&this.$1.abort()};a.prototype.$2=function(a){"use strict";__p&&__p();a=b("XVideoWnsUpNextAsyncController").getURIBuilder().setFBID("video_id",a).setFBIDSet("viewed_videos",this.props.viewedVideos);this.$1=new(b("AsyncRequest"))(a.getURI());this.$1.setHandler(function(a){a=a.getPayload();var c=a.upNextUnit&&a.upNextUnit.markup;if(c){c=b("DOM").create("div",{},c);var d=b("DOM").scry(c,"._3iqr");d.length&&(this.setState({upNext:c}),this.props.onLoadUpNext(c,a.canAutoplay))}this.setState({fetching:!1})}.bind(this)).send()};a.prototype.render=function(){"use strict";var a=null;if(this.state.upNext)a=b("React").createElement(b("DOMContainer.react"),null,this.state.upNext);else if(this.state.fetching)a=b("React").createElement("div",{className:"_2685"},b("React").createElement(b("FBLoadShimmer.react"),{height:70,width:124}),b("React").createElement("div",{className:"_63-r"},b("React").createElement(b("FBLoadShimmer.react"),{height:14,width:140,className:"_3-94"}),b("React").createElement(b("FBLoadShimmer.react"),{height:14,width:140,className:"_3-94"}),b("React").createElement(b("FBLoadShimmer.react"),{height:14,width:70,className:"_3-94"}),b("React").createElement(b("FBLoadShimmer.react"),{height:14,width:70})));else return null;return b("React").createElement("div",{className:"_3rq1 _60a7 _2tyk"},b("React").createElement("div",{className:"_3652"},b("React").createElement("div",{className:"_3653"},i._("Up Next"))),a)};e.exports=a}),null);
__d("VideoWatchAndScrollEndScreen.react",["ix","cx","fbt","Image.react","PopoverMenu.react","React","ReactXUIMenu","ShimButton.react","TooltipData","VideoChannelProgressCircle.react","VideoChannelReplayImage.react","VideoPlayerExperiments","fbglyph"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j,k=b("VideoPlayerExperiments").showWNSClose;c=b("React").PropTypes;var l=function(a){a=a.onClose;return b("React").createElement(b("ShimButton.react"),{className:"_3r7h",onClick:a},b("React").createElement(b("Image.react"),{src:g("114710")}))},m=function(a){a=a.onCollapse;return b("React").createElement("div",babelHelpers["extends"]({className:"_1dtq",onClick:a,role:"button",tabIndex:"1"},b("TooltipData").propsFor(i._("Collapse Video"))),b("React").createElement(b("Image.react"),{src:g("115705")}))},n=function(a){var c=a.onClose;a=b("React").createElement(b("ReactXUIMenu"),{onItemClick:function(a,b){a=b.item;a.getValue()==="close"&&c()}},b("React").createElement(b("ReactXUIMenu").Item,{value:"close"},"Close"));return b("React").createElement(b("PopoverMenu.react"),{className:"_ivg",menu:a},b("React").createElement("a",{href:"#"},b("React").createElement(b("Image.react"),{src:g("114186")})))};j=babelHelpers.inherits(a,b("React").Component);j&&j.prototype;a.prototype.render=function(){"use strict";return b("React").createElement("div",{className:"_5qdn _2se8"+(this.props.fadeOut?" _2gud":"")+" _1s-2"},b("React").createElement("div",{className:"_1szz _2se8"},b("React").createElement("div",{className:"_1szy _ww8",onClick:this.props.onReplay,role:"presentation"},b("React").createElement(b("VideoChannelProgressCircle.react"),{makeProgress:this.props.makeProgress,timeoutSec:this.props.endScreenDuration,watchAndScroll:!0},b("React").createElement(b("VideoChannelReplayImage.react"),{size:"small"})))),b("React").createElement("div",{className:"_ivh"},k?null:b("React").createElement(n,{onClose:this.props.onClose}),b("React").createElement(m,{onCollapse:this.props.onCollapse}),k?b("React").createElement(l,{onClose:this.props.onClose}):null))};function a(){"use strict";j.apply(this,arguments)}a.propTypes={endScreenDuration:c.number.isRequired,fadeOut:c.bool,makeProgress:c.bool.isRequired,onReplay:c.func.isRequired,onClose:c.func.isRequired};e.exports=a}),null);
__d("shouldWNSRenderToRHC",["ge"],(function(a,b,c,d,e,f){"use strict";function a(){return!!b("ge")("fbRHCVideoWNS-container")}e.exports=a}),null);
__d("VideoWatchAndScrollContainer.react",["csx","cx","Arbiter","CSS","DOM","DOMContainer.react","DOMDimensions","Event","Locale","Parent","React","ReactCSSTransitionGroup","Rect","SubscriptionsHandler","VideoChannelProgressCircle.react","VideoChannelReplayImage.react","VideoPlayerExperiments","VideoWatchAndScrollDrawer.react","VideoWatchAndScrollEndScreen.react","cancelAnimationFrame","clearTimeout","getViewportDimensions","requestAnimationFrame","setTimeoutAcrossTransitions","shallowCompare","shouldWNSRenderToRHC","throttle"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;var j=10,k=230,l=476,m=300,n=2e3,o=b("VideoPlayerExperiments").endScreenDuration,p=Object.freeze({NW:"nw",NE:"ne",SE:"se",SW:"sw"});d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(a,b){i.constructor.call(this,a,b),this.state=this.$3(this.props)}a.prototype.$3=function(a){a=this.$4();var b=this.$5(this.props.initialPosition,a);return{channelVideoElements:[this.props.initialVideoElement],containerBoundingBox:a,dragging:!1,draggingStartHeight:0,draggingStartLeft:0,draggingStartMousePositionX:0,draggingStartMousePositionY:0,draggingStartTop:0,draggingStartWidth:0,endScreenFadeOut:!1,endScreenShown:!1,fadeOut:!1,fadeOutPlaceholder:null,hasDrawer:!1,height:b.height,left:b.left,playbackFinished:!1,resizeDirection:null,showDrawer:!1,timeUntilNext:0,top:b.top,width:b.width,videoIndex:0}};a.prototype.shouldComponentUpdate=function(a,c){return!this.state.fadeOut&&b("shallowCompare")(this,a,c)};a.prototype.componentDidUpdate=function(a,c){__p&&__p();if(!c)return;!c.dragging&&this.state.dragging?(this.documentSubscriptions=new(b("SubscriptionsHandler"))(),this.documentSubscriptions.addSubscriptions(b("Event").listen(document,"mousemove",this.$6.bind(this)),b("Event").listen(document,"mouseup",this.$7.bind(this)))):c.dragging&&!this.state.dragging&&this.documentSubscriptions.release();c.playbackFinished!==this.state.playbackFinished&&this.state.playbackFinished&&this.state.timeUntilNext&&(b("clearTimeout")(this.$2),this.$8(),this.$2=b("setTimeoutAcrossTransitions")(function(){this.props.onPlayNext()}.bind(this),this.state.timeUntilNext*1e3));var d=["._23if","._23ig","._452w","._2i7a"],e=c.channelVideoElements||[];this.state.channelVideoElements.forEach(function(a){if(e.indexOf(a)!==-1)return;d.forEach(function(c){c=b("DOM").scry(a,c);c=c[0];c&&b("CSS").hide(c)});var c=b("DOM").scry(a,"._3pay");c=c[0];c&&(b("CSS").removeClass(c,"_3pay"),b("CSS").addClass(c,"_2337"))})};a.prototype.componentDidMount=function(){this.movementListeners=new(b("SubscriptionsHandler"))(),this.movementListeners.addSubscriptions(b("Event").listen(window,"resize",b("throttle")(this.$9.bind(this),100)),b("Arbiter").subscribe("sidebar/visibility",b("throttle")(this.$9.bind(this),100)))};a.prototype.componentWillUnmount=function(){this.documentSubscriptions&&this.documentSubscriptions.release(),this.movementListeners&&this.movementListeners.release(),this.$1&&b("clearTimeout")(this.$1),this.$2&&b("clearTimeout")(this.$2)};a.prototype.getFadeOutStatus=function(){return this.state.fadeOut};a.prototype.getChannelVideoElements=function(){return this.state.channelVideoElements};a.prototype.$9=function(){var a=this.$4(),b=this.$5({height:this.state.height,left:this.state.left,top:this.state.top,width:this.state.width},a);this.setState({containerBoundingBox:a,height:b.height,left:b.left,top:b.top,width:b.width})};a.prototype.$10=function(a,event){this.$11(event,a)};a.prototype.$12=function(event){if(b("Parent").bySelector(event.target,"._5-32")||!b("Parent").bySelector(event.target,"._3t-6"))return;this.$11(event,null)};a.prototype.$13=function(event){return event.button!==0||b("Parent").bySelector(event.target,"._3t-6")||b("Parent").bySelector(event.target,"._2se8")};a.prototype.$14=function(event){if(this.$13(event))return;this.props.onClick&&this.props.onClick()};a.prototype.$11=function(event,a){var c=event.button,d=event.target;if(c!==0)return;if(b("Parent").bySelector(d,"._360f"))return;this.props.onGrab();this.setState({containerBoundingBox:this.$4(),dragging:!0,draggingStartHeight:this.state.height,draggingStartLeft:this.state.left,draggingStartMousePositionX:event.screenX,draggingStartMousePositionY:event.screenY,draggingStartTop:this.state.top,draggingStartWidth:this.state.width,resizeDirection:a});event.preventDefault()};a.prototype.$4=function(){var a=0,c=b("DOM").scry(document.body,".fbChatSidebar");c.length===1&&(a=b("DOMDimensions").getElementDimensions(c[0]).width);c=b("getViewportDimensions").withoutScrollbars();var d=43+j,e=c.height-j,f=j;c=c.width-j;b("Locale").isRTL()?f+=a:c-=a;return new(b("Rect"))(d,c,e,f)};a.prototype.$5=function(a,c){a=new(b("Rect"))(a.top,a.left+a.width,a.top+a.height,a.left);a=a.boundWithin(c);return{height:a.h(),left:a.getLeft(),top:a.getTop(),width:a.w()}};a.prototype.$15=function(a,b,c){__p&&__p();var d=a.top,e=b.getTop();d=e-d;d>0&&((c===p.NE||c===p.NW)&&(a.height-=d),a.top=e);d=a.left;e=b.getLeft();d=e-d;d>0&&((c===p.NW||c===p.SW)&&(a.width-=d),a.left=e);c=a.top+a.height;d=b.getTop()+b.h();e=c-d;e>0&&(a.height=d-a.top);c=a.left+a.width;e=b.getLeft()+b.w();d=c-e;d>0&&(a.width=e-a.left)};a.prototype.$16=function(a,b,c){a.width<k&&((c===p.NW||c===p.SW)&&(a.left-=k-a.width),a.width=k),a.height<k&&((c===p.NE||c===p.NW)&&(a.top-=k-a.height),a.height=k)};a.prototype.$17=function(a,b,c){a.width>l&&((c===p.NW||c===p.SW)&&(a.left+=a.width-l),a.width=l),a.height>l&&((c===p.NE||c===p.NW)&&(a.top+=a.height-l),a.height=l)};a.prototype.$18=function(a,b,c){__p&&__p();var d=a.width/a.height;b=b.width/b.height;if(d>b){var e=a.height*b,f=a.height;e<k&&(f*=k/e,e=k,(c===p.NE||c===p.NW)&&(a.top+=a.height-f));(c===p.NW||c===p.SW)&&(a.left+=a.width-e);a.width=e;a.height=f}else if(d<b){e=a.width/b;(c===p.NE||c===p.NW)&&(a.top+=a.height-e);a.height=e}};a.prototype.$19=function(a,b,c,d){this.$15(a,c,d);this.$16(a,b,d);this.$17(a,b,d);this.$18(a,b,d);return{height:a.height,left:a.left,top:a.top,width:a.width}};a.prototype.$6=function(event){b("cancelAnimationFrame")(this.dragUpdateRequestAnimationFrameID),this.dragUpdateRequestAnimationFrameID=b("requestAnimationFrame")(this.$20.bind(this,event))};a.prototype.$21=function(a){(a.height!==this.state.height||a.width!==this.state.width)&&this.props.onInitialPositionUpdate(a)};a.prototype.$20=function(event){__p&&__p();if(!this.state.dragging)return;var a=event.screenX-this.state.draggingStartMousePositionX,b=event.screenY-this.state.draggingStartMousePositionY,c=this.state.resizeDirection,d;if(!c)d=this.$5({height:this.state.draggingStartHeight,left:this.state.draggingStartLeft+a,top:this.state.draggingStartTop+b,width:this.state.draggingStartWidth},this.state.containerBoundingBox),this.$21(d),this.setState({height:d.height,left:d.left,top:d.top,width:d.width});else{var e=this.state.draggingStartHeight,f=this.state.draggingStartLeft,g=this.state.draggingStartTop,h=this.state.draggingStartWidth;(c===p.NE||c===p.SE)&&(h+=a);(c===p.NW||c===p.SW)&&(f+=a,h-=a);(c===p.SE||c===p.SW)&&(e+=b);(c===p.NE||c===p.NW)&&(g+=b,e-=b);d=this.$19({height:e,left:f,top:g,width:h},{height:this.state.draggingStartHeight,left:this.state.draggingStartLeft,top:this.state.draggingStartTop,width:this.state.draggingStartWidth},this.state.containerBoundingBox,c);this.$21(d);this.setState({height:d.height,left:d.left,top:d.top,width:d.width})}event.preventDefault()};a.prototype.$7=function(event){b("cancelAnimationFrame")(this.dragUpdateRequestAnimationFrameID),this.props.onDrop(),this.setState({dragging:!1,draggingStartHeight:0,draggingStartLeft:0,draggingStartMousePositionX:0,draggingStartMousePositionY:0,draggingStartTop:0,draggingStartWidth:0,resizeDirection:null}),event.preventDefault()};a.prototype.$22=function(){this.$1&&(b("clearTimeout")(this.$1),this.$1=null),this.setState({showDrawer:!0})};a.prototype.$23=function(){this.state.showDrawer&&this.$8()};a.prototype.$24=function(){b("clearTimeout")(this.$2),this.setState({playbackFinished:!1}),this.props.onReplay()};a.prototype.$8=function(){this.$1?b("clearTimeout")(this.$1):this.setState({showDrawer:!0}),this.$1=b("setTimeoutAcrossTransitions")(function(){this.setState({showDrawer:!1}),this.$1=null}.bind(this),n)};a.prototype.$25=function(a,c){if(a>this.state.channelVideoElements.length)return null;a=this.state.channelVideoElements[a];return!a?null:b("React").createElement("div",{className:"_2yq3"+(c==="left"?" _2yq4":"")+(c==="center"?" _2yq5":"")+(c==="right"?" _2yq6":""),key:a.id},b("React").createElement(b("DOMContainer.react"),null,a))};a.prototype.$26=function(){return b("shouldWNSRenderToRHC")()?[]:[b("React").createElement("div",{className:"_52ua",onMouseDown:this.$10.bind(this,p.NW),key:p.NW}),b("React").createElement("div",{className:"_52uc",onMouseDown:this.$10.bind(this,p.NE),key:p.NE}),b("React").createElement("div",{className:"_52ui",onMouseDown:this.$10.bind(this,p.SE),key:p.SE}),b("React").createElement("div",{className:"_52uj",onMouseDown:this.$10.bind(this,p.SW),key:p.SW})]};a.prototype.getWidth=function(){return this.state.width};a.prototype.onLoadUpNext=function(a,b){this.props.onLoadUpNext(a,b),this.setState({hasDrawer:!0})};a.prototype.canPlayAnotherVideo=function(){var a=this.state.channelVideoElements;return this.state.videoIndex<a.length-1};a.prototype.render=function(){__p&&__p();var a=null;this.props.isDrawerEnabled||(a={height:Math.round(this.state.height)+"px",left:this.state.left+"px",top:this.state.top+"px",width:Math.round(this.state.width)+"px"});var c=this.state.channelVideoElements,d=c[this.state.videoIndex];d&&(b("CSS").addClass(d,"_1kfp"),b("CSS").conditionClass(d,"_1blk",this.state.width<m));this.state.endScreenShown&&b("React").createElement(b("VideoWatchAndScrollEndScreen.react"),{endScreenDuration:o/1e3,fadeOut:this.state.endScreenFadeOut,makeProgress:this.canPlayAnotherVideo(),onReplay:this.props.onReplay,onClose:function(){b("clearTimeout")(this.$2),this.$2=null,this.props.onClose()}.bind(this),onCollapse:this.props.onCollapse});d=null;this.state.fadeOutPlaceholder?d=b("React").createElement(b("DOMContainer.react"),null,this.state.fadeOutPlaceholder):d=b("React").createElement("ul",{className:"_2yq7"},c.map(function(a,c){(c>this.state.videoIndex+1||c<this.state.videoIndex-1)&&b("CSS").removeClass(a,"_1kfp");return c<=this.state.videoIndex+1?null:b("React").createElement("li",{key:a.id},b("React").createElement(b("DOMContainer.react"),null,a))}.bind(this)));c=null;this.state.playbackFinished&&(c=b("React").createElement("div",{role:"presentation",onClick:this.$24.bind(this),className:"_1szy _ww8"},b("React").createElement(b("VideoChannelProgressCircle.react"),{makeProgress:!!this.state.timeUntilNext,timeoutSec:this.state.timeUntilNext,watchAndScroll:!0},b("React").createElement(b("VideoChannelReplayImage.react"),{size:"small"}))));var e=null;this.props.isDrawerEnabled&&(e=b("React").createElement(b("VideoWatchAndScrollDrawer.react"),{videoID:this.props.videoID,viewedVideos:this.props.viewedVideos,onLoadUpNext:this.onLoadUpNext.bind(this)}));return b("React").createElement(b("ReactCSSTransitionGroup"),{transitionAppear:!0,transitionAppearTimeout:500,transitionEnter:!1,transitionLeave:!1,transitionName:{appear:"_tie",appearActive:"_tik"}},b("React").createElement("div",{className:"_360g"+(this.state.showDrawer?" _hzi":"")+(this.state.fadeOut?" _473b":"")+(this.state.hasDrawer?" _60a6":"")+(this.props.isLiveVideo()?" _29mh":""),onMouseLeave:this.$23.bind(this),onMouseMove:this.$22.bind(this),style:a},b("React").createElement("div",{className:"_52u8",onClick:this.$14.bind(this),onMouseDown:this.$12.bind(this),role:"presentation"},b("React").createElement("div",{className:"_hzj"},this.$25(this.state.videoIndex-1,"left"),this.$25(this.state.videoIndex,"center"),this.$25(this.state.videoIndex+1,"right"),c),e),this.$26(),d))};a.propTypes={initialPosition:c.object.isRequired,initialVideoElement:c.instanceOf(HTMLElement).isRequired,onChannelNavigation:c.func.isRequired,onClick:c.func.isRequired,onClose:c.func.isRequired,onDrop:c.func.isRequired,onGrab:c.func.isRequired,onInitialPositionUpdate:c.func.isRequired,onReplay:c.func.isRequired};e.exports=a}),null);
__d("Tahoe",[],(function(a,b,c,d,e,f){var g=null;a={get:function(){return g},set:function(a){g=a}};e.exports=a}),null);
__d("XVideoWNSSurveyController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video/wns_survey/",{__asyncDialog:{type:"Int"}})}),null);
__d("VideoWatchAndScrollController",["csx","cx","invariant","Arbiter","AsyncRequest","CSS","DOM","DOMDimensions","Event","EventListener","Locale","React","ReactDOM","SubscriptionsHandler","Tahoe","VideoAutoplayControllerX","VideoChainingCaller","VideoChannelStoryFetcher","VideoFrameBuffer","VideoPlayerExperiments","VideoPlayerLoggerEvent","VideoPlayerLoggerSource","VideoPlayerReason","VideoPlayerShakaGlobalConfig","VideoPlayerStates","VideoPlayerVolumeSettings","VideoWatchAndScrollContainer.react","VideoWatchAndScrollVariables","ViewportBounds","XVideoWNSSurveyController","cancelAnimationFrame","clearTimeout","destroyOnUnload","getViewportDimensions","ifRequired","setTimeoutAcrossTransitions","shouldWNSRenderToRHC","throttle"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j=158,k=280,l=10,m=42,n=m+l,o=476,p=230,q=[b("VideoPlayerReason").AUTOPLAY,b("VideoPlayerReason").PAGE_VISIBILITY],r=750,s=308,t=3,u=null,v=b("VideoPlayerExperiments").persistentWNSEnabled;function w(){return Math.max(b("getViewportDimensions")().height,400)-m-80}function x(a,c,d,e){__p&&__p();this.$31=new(b("SubscriptionsHandler"))();this.$32=new(b("SubscriptionsHandler"))();this.$1=!1;this.$2=null;this.$3=null;this.$4=!1;this.$35=d;this.$38=!1;this.$30=!1;this.$48=e;this.$49=e;this.$34=new(b("VideoChannelStoryFetcher"))(c,a,this.$35,null);this.$36=[];this.$37=0;this.$39=[];this.$40=[];this.$5=j;this.$6=k;this.$10=window.document.getElementById("leftCol");this.$11=window.document.getElementById("rightCol");this.$12=window.document.getElementById("pagelet_bluebar");this.$44={};this.$47=null;this.$53();(d=this.$31).addSubscriptions.apply(d,this.$54());v||b("destroyOnUnload")(function(){this.$55(),this.$4&&this.$56(),this.$31&&this.$31.release(),this===u&&(u=null)}.bind(this))}x.prototype.$54=function(){"use strict";__p&&__p();var a=[];a.push(b("Arbiter").subscribe("VideoChannelView/opened",function(a,b){this.$4&&(!b.controller||this.$16!==b.controller)&&this.$56()}.bind(this)));a.push(b("Arbiter").subscribe("fbVideoWatchAndScroll/closeWNS",function(){if(!this.$4)return;var a=this.$16,c=a.getOption("CommercialBreakVideoAdOverlay","videoController");c&&(a=c);a.logEvent(b("VideoPlayerLoggerEvent").WATCH_AND_SCROLL_EXITED);this.$57();c=b("XVideoWNSSurveyController").getURIBuilder().getURI();a=new(b("AsyncRequest"))().setURI(c);a.send()}.bind(this)));if(b("VideoPlayerExperiments").rhcWNSEnabled){a.push(b("Arbiter").subscribe("RHCVideoWNSController/collapseStart",function(){var a=this.$14;if(!a||!b("shouldWNSRenderToRHC")())return;a.setState({endScreenFadeOut:!0,endScreenShown:!1})}.bind(this)),b("Arbiter").subscribe("RHCVideoWNSController/collapseEnd",function(){var a=this.$14;if(!a||!b("shouldWNSRenderToRHC")())return;this.pauseActiveVideo(b("VideoPlayerReason").USER);a.setState({endScreenFadeOut:!1})}.bind(this)),b("Arbiter").subscribe("RHCVideoWNSController/expandStart",function(){var a=this.$14;if(!a||!this.isActiveVideoDonePlaying()||!b("shouldWNSRenderToRHC")())return;a.setState({endScreenShown:!0})}.bind(this)));if(v){var c=function(){var a=this.$16.getVideoNode();a instanceof HTMLVideoElement||i(0);a.currentTime=a.currentTime}.bind(this);a.push(b("Arbiter").subscribe("RHCVideoWNSController/eject",function(a,d){if(!b("shouldWNSRenderToRHC")())return;this.$2=d;b("DOM").appendContent(document.body,d);b("VideoPlayerShakaGlobalConfig").getBool("timeouts_persist_on_page_transition",!0)||c();this.$16.isState(b("VideoPlayerStates").PLAYING)&&this.playActiveVideo(b("VideoPlayerReason").USER)}.bind(this)),b("Arbiter").subscribe("RHCVideoWNSController/dock",function(){if(!b("shouldWNSRenderToRHC")())return;b("VideoPlayerShakaGlobalConfig").getBool("timeouts_persist_on_page_transition",!0)||c();this.$16.isState(b("VideoPlayerStates").PLAYING)&&this.playActiveVideo(b("VideoPlayerReason").USER)}.bind(this)),b("Event").listen(window,"resize",b("throttle")(function(){if(!b("shouldWNSRenderToRHC")())return;this.$58()}.bind(this))),b("Arbiter").subscribe("RHCVideoWNSController/mount",function(){this.$58()}.bind(this)))}}return a};x.prototype.$58=function(){"use strict";__p&&__p();var a=this.$14;if(!a||this.$38)return;var c=this.$16.getVideoNode();c=this.$59(c);this.$16.removeOffsetStylings();this.$16.setDimensions(c.width,c.height);a.setState({width:c.width,height:c.height});this.$47=c;b("Arbiter").inform("VideoWatchAndScrollController/resize")};x.prototype.isActiveVideoDonePlaying=function(){"use strict";var a=this.$16.getState();return a===b("VideoPlayerStates").FINISHED};x.isActiveVideoDonePlaying=function(){"use strict";return u?u.isActiveVideoDonePlaying():!1};x.prototype.$60=function(a,c,d){"use strict";__p&&__p();a||i(0);c.length||i(0);this.$48=!0;this.$38=!1;this.$32=new(b("SubscriptionsHandler"))();this.$37=d;this.$34=a;this.$39=a.getPreloadedData().thumbnails||[];this.$40=[];this.$36=c.slice(0);this.$36.forEach(function(a){this.$61(a),this.$62(a),a.updateSource(b("VideoPlayerLoggerSource").WATCH_SCROLL)}.bind(this));d=this.$36.shift();this.$63(d,b("VideoPlayerReason").USER)};x.prototype.$64=function(a,b,c,d,e){"use strict";this.$9=e,this.$47=this.$59(e.videoRootNode),this.$60(a,b,c),this.$14&&this.$14.setState({channelVideoElements:d},function(){this.$65()}.bind(this)),this.$9=null};x.registerVideoController=function(a,c,d,e){"use strict";__p&&__p();u==null&&(u=new x(a.getVideoChannelID(),a.getVideoID(),c,e));u.$31.addSubscriptions(a.addListener("enterWatchAndScroll",function(){u&&u.$66(a)}),a.addListener("crossfadeWatchAndScroll",function(){if(u){u.$67();var c=a.getVideoNode();u.$47=u.$59(c);u.$63(a,b("VideoPlayerReason").USER,!1,!0);a.unmute()}}),a.addListener("exitWatchAndScroll",function(){u&&u.$4&&u.$56()}),a.addListener("VideoChannelController/enterChannel",function(){u&&(u.$38=!0)}),a.addListener("VideoChannelController/exitChannel",function(){u&&(u.$38=!1)}));c===b("VideoChainingCaller").WNS&&u.$36.push(a);if(!d)return;e=["beginPlayback","changeVolume","muteVideo","toggleFullscreen","unmuteVideo","VideoChannelController/enterChannel"];e.forEach(function(event){u&&u.$31.addSubscriptions(a.addListener(event,function(b){u&&u.$68(a,event,b)}))})};x.isActive=function(){"use strict";return!u?!1:u.$4&&!u.$38};x.updateSlidingCalculations=function(){"use strict";if(!u)return;u.$19&&u.$69(u.$19)};x.registerChannelVideoController=function(a){"use strict";if(!u)return;a.updateSource(b("VideoPlayerLoggerSource").WATCH_SCROLL);u.$61(a);u.$62(a);u.$36.push(a)};x.getStoryFetcherData=function(){"use strict";return u&&u.$70()};x.prototype.$70=function(){"use strict";return{storyFetcher:this.$34,videoPlayerControllers:this.$36,channelVideoIndex:this.$37,rootVideoPlayerController:this.$17,channelInteractionsToRegister:this.$40,isFromWNS:!0}};x.getVideoPlaceholder=function(){"use strict";return!u?null:u.$18};x.getReactContainer=function(){"use strict";return!u?null:u.$14};x.registerChannelInteraction=function(a){"use strict";u&&u.$40.push(a)};x.onEnterTahoe=function(){"use strict";if(!u)return;u.$71()};x.prototype.$71=function(){"use strict";this.$38=!0,this.$34.abandonRequest()};x.onEnterChannel=function(){"use strict";if(!u)return;u.$72()};x.prototype.$72=function(){"use strict";__p&&__p();this.$38=!0;this.$34.abandonRequest();var a=this.$14;if(!a)return;var c=["._23if","._23ig","._452w","._2i7a"];a.getChannelVideoElements().forEach(function(a){c.forEach(function(c){c=b("DOM").scry(a,c);c=c[0];c&&b("CSS").show(c)});var d=b("DOM").scry(a,"._2337");d=d[0];d&&(b("CSS").removeClass(d,"_2337"),b("CSS").addClass(d,"_3pay"))})};x.resetFromChannelView=function(a,b,c){"use strict";if(!u)return;u.$60(a,b,c)};x.startFromChannelView=function(a,b,c,d,e){"use strict";if(!u)return;u.$64(a,b,c,d,e)};x.prototype.$68=function(a,event,c){"use strict";__p&&__p();if(this.$4){if(this.$16===a)return;if(c&&q.includes(c.reason))return;if(!a.isIntentionallyViewing())return;var d=this.$16.getOption("VideoWithLiveBroadcast","isLive");d?this.$16.mute():this.$16.pause(b("VideoPlayerReason").USER)}if(event==="toggleFullscreen"&&a.isFullscreen()||event==="VideoChannelController/enterChannel")this.$19&&this.$55();else if((event!=="beginPlayback"||c&&c.reason===b("VideoPlayerReason").USER||a.getSource()===b("VideoPlayerLoggerSource").PERMALINK)&&a.isIntentionallyViewing()&&!a.isFullscreen()&&!a.getIsInChannel()){d=this.$73(a.getVideoNode());d=d.top;(d>window.scrollY||event==="beginPlayback"&&c&&c.reason===b("VideoPlayerReason").AUTOPLAY)&&this.$69(a)}};x.prototype.$74=function(a){"use strict";if(this.$38||a!==this.$16)return;this.$14&&this.$14.setState({endScreenShown:!0,playbackFinished:!0,timeUntilNext:this.$51?t:0})};x.prototype.$75=function(a){"use strict";return a.addListener("finishPlayback",function(){return this.$74(a)}.bind(this))};x.prototype.$69=function(a){"use strict";var c=a.getVideoNode();if(!c.offsetParent)return;this.$19=a;this.$26=b("throttle")(this.$76.bind(this),100);window.addEventListener("resize",this.$26);this.$77(c);this.$78()};x.prototype.$76=function(){"use strict";this.$19&&(this.$77(this.$18||this.$19.getVideoNode()),this.$27&&this.$27())};x.prototype.$79=function(a){"use strict";__p&&__p();var b=this.$73(a),c=a.scrollWidth;a=a.scrollHeight;var d=p,e=o;c<a&&(d*=c/a,e*=c/a);c=d;if(this.$10&&this.$10.children.length){a=this.$73(this.$10);if(a.left<=b.left)c=Math.min(a.left-2*l,e);else if(this.$11&&this.$11.children.length){b=this.$73(this.$11);c=Math.min(b.left-2*l,e)}}else{a=document.getElementById("timeline_tab_content");if(a){b=this.$73(a).left;c=Math.min(b-2*l,e)}}return Math.max(c,d)};x.prototype.$73=function(a){"use strict";var b={left:0,top:0};do b.top+=a.offsetTop,b.left+=a.offsetLeft;while(a=a.offsetParent);return b};x.prototype.$80=function(){"use strict";__p&&__p();if(b("VideoPlayerExperiments").rhcWNSEnabled)return s;var a=0;if(this.$10&&this.$10.children.length){var c=this.$73(this.$10),d=window.getComputedStyle(this.$10);d=parseInt(d.width,10);v&&(d=d||k);a=d+c.left-l}else{d=document.getElementById("timeline_tab_content");if(!d){c=document.getElementById("pagelet_timeline_main_column");c?d=c.parentNode:d=document.getElementById("contentArea")}if(d){c=this.$73(d).left;a=c-2*l}}return a};x.prototype.$59=function(a){"use strict";__p&&__p();var c=!a&&this.$9;({left:0});var d=16,e=9;if(!c){this.$73(a);e=1;d=parseFloat(a.getAttribute("data-original-aspect-ratio"));a=a.parentElement;(!d||e===0)&&a&&(this.$73(a),d=a.scrollWidth,e=a.scrollHeight)}a=p;var f=o;d<e&&(a*=d/e,f*=d/e);var g=this.$80(),h=l;this.$12&&(h+=this.$12.scrollHeight);h=Math.max(h,n);var i=b("VideoPlayerExperiments").rhcWNSEnabled?g:Math.max(Math.min(g,f),p),j;b("VideoPlayerExperiments").rhcWNSEnabled?j=b("Locale").isRTL()?l+b("ViewportBounds").getRight():b("getViewportDimensions")().width-i-l:(j=g>f?g-f+l:l,j=Math.max(j,l));f=i*e/d;b("VideoPlayerExperiments").rhcWNSEnabled&&(f=Math.min(f,w()));return{hasEnoughSpace:!!c||g>=a,height:f,left:j,top:h,width:i}};x.hasEnoughSpaceToEnter=function(a){"use strict";__p&&__p();if(!u||!a||!a.getVideoNode())return!1;a=a.getVideoNode();var b=1,c=parseFloat(a.getAttribute("data-original-aspect-ratio"));a=a.parentElement;(!c||b===0)&&a&&(c=a.scrollWidth,b=a.scrollHeight);a=p;c<b&&(a*=c/b);return u.$80()>a};x.prototype.$77=function(a){"use strict";__p&&__p();this.$22=this.$73(a);this.$28=a.scrollWidth;this.$29=a.scrollHeight;var b=Math.max(this.$28,this.$29);if(b<p){b=p/b;this.$28*=b;this.$29*=b}this.$21=this.$22.top+this.$29*.5-m;this.$20=this.$22.top+this.$29*.5-window.innerHeight;this.$47=this.$59(a);this.$30=!this.$47.hasEnoughSpace};x.prototype.$78=function(){"use strict";this.$19.isIntentionallyViewing()?(this.$81(this.$82.bind(this)),this.$82()):this.$55()};x.isVideoAlmostFinished=function(a){"use strict";var c=a.getPlaybackDuration();a=a.getCurrentTimePosition();var d=b("VideoWatchAndScrollVariables").noWNSRemainingTime;if(c*.2<d)return a/c>.8;else return c-a<d};x.isSlidingEnabled=function(a){"use strict";__p&&__p();var c=u;if(c==null)return!1;var d=c.$19;if(d==null||d!==a)return!1;if(c.$30||!a.isIntentionallyViewing()||!a.getVideoNode().offsetParent||x.isVideoAlmostFinished(a)||a.getSource()===b("VideoPlayerLoggerSource").TAHOE||a.hasLooped()){c.$55();return!1}return!0};x.prototype.$82=function(){"use strict";var a=this.$19;if(a==null)return;if(!a.isIntentionallyViewing()||!a.getVideoNode().offsetParent){this.$55();return}(window.scrollY>this.$21||window.scrollY<this.$20)&&x.isSlidingEnabled(a)&&a!==this.$16&&!a.isFullscreen()&&!this.$38&&(b("VideoPlayerExperiments").rhcWNS&&b("VideoPlayerExperiments").responsiveRHC&&window.innerWidth<Number(b("VideoPlayerExperiments").ResponsiveRHCMinWidth)?a.pause(b("VideoPlayerReason").USER):(this.$67(),b("VideoPlayerExperiments").fixFeedVideosPlayOffscreen&&a.emit("enterWatchAndScroll"),this.$63(a,b("VideoPlayerReason").AUTOPLAY,!1,!0)),this.$55())};x.prototype.$67=function(){"use strict";this.$48=this.$49};x.prototype.$81=function(a){"use strict";window.removeEventListener("scroll",this.$27),this.$27=a||null,window.addEventListener("scroll",this.$27),b("cancelAnimationFrame")(this.$33),delete this.$33};x.prototype.$55=function(){"use strict";window.removeEventListener("resize",this.$26),this.$81(),delete this.$19,this.$30=!1};x.prototype.$66=function(a){"use strict";this.$55(),this.$4&&this.$16!==a?this.$83(a):(this.$47=this.$59(a.getVideoNode()),this.$67(),this.$63(a,b("VideoPlayerReason").USER))};x.prototype.$83=function(a){"use strict";this.$23=a,this.$84()};x.prototype.$63=function(a,c,d,e){"use strict";__p&&__p();if(a.getSource()===b("VideoPlayerLoggerSource").TAHOE){this.$38=!1;var f=b("Tahoe").get();f&&f.onExit("wns")}f=!!this.$46;this.$46&&(b("clearTimeout")(this.$46),this.$46=null,b("ReactDOM").unmountComponentAtNode(this.$85()),this.$86());e=this.$1&&(d||e)&&!!this.$17&&this.$17!==a;e&&(this.$37=0,this.$36=[],this.$39=[],this.$42=this.$17,this.$44=babelHelpers["extends"]({},this.$8),this.$45=this.$18,this.$41=this.$14,this.$43=this.$2,this.$2=null,this.$13&&this.$13.remove(),this.$32.release(),this.$32=new(b("SubscriptionsHandler"))());this.$17=a;this.$87(this.$14&&this.$37>0?this.$88(this.$37):a);this.$50?this.$50.add(a.getVideoID()):this.$50=new Set([a.getVideoID()]);this.$14&&this.$36.length>this.$37&&this.$88(this.$37+1).preload();this.$15=this.$16.getRootNode();var g=!this.$1||!this.$16.isMuted(),h=!this.$1||this.$16.isState("playing"),i=this.$1&&this.$16.isState("finished");if(!this.$1||e){(!d||f)&&(f&&(this.$47=this.$59(this.$15)),this.$53(this.$15));if(this.$9){this.$8=this.$9;if(this.$8.videoRootNode){this.$18=this.$89(this.$8.dimensions,this.$17.getVideoNode());b("DOM").appendContent(this.$8.videoRootNode,this.$18);d=b("DOM").scry(this.$8.videoRootNode,"._344x");f=d[0];f&&b("DOM").remove(f)}}else this.$8={videoRootNode:this.$15.parentNode,dimensions:b("DOMDimensions").getElementDimensions(this.$15),source:this.$16.getSource()},this.$18=this.$89(this.$8.dimensions,this.$16.getVideoNode()),b("DOM").insertAfter(this.$15,this.$18);d=null;this.$9&&(d=this.$9.videoRootNode);!d&&this.$15&&(d=this.$15.parentNode);d&&(this.$13=b("EventListener").listen(d,"click",function(){this.$57(),a.play(b("VideoPlayerReason").USER),b("setTimeoutAcrossTransitions")(function(){this.$68(a,"beginPlayback",{reason:b("VideoPlayerReason").USER})}.bind(this),r)}.bind(this)));this.$16.pause(b("VideoPlayerReason").USER);this.$16.isPlayerVersion("silvercity")&&this.$16.detachRootNode();f=this.$7?this.$7.width:this.$6;d=this.$7?this.$7.height:this.$5;this.$16.removeOffsetStylings();this.$16.setDimensions(f,d);this.$4=!0;e&&this.$90();this.$14=this.$91();!this.$1&&b("shouldWNSRenderToRHC")()&&b("Arbiter").inform("VideoWatchAndScrollController/init");i&&this.$74(this.$16)}else this.$16.pause(b("VideoPlayerReason").USER),this.$65();h&&this.$16.play(c);if(g){this.$16.unmute();if(this.$16.getVolume()===0){f=b("VideoPlayerVolumeSettings").getLastVolumeBeforeMute()||1;this.$16.setVolume(f);this.$16.emit("unmuteVideo")}}this.$16.updateSource(b("VideoPlayerLoggerSource").WATCH_SCROLL);d=this.$34;(!this.$1||e)&&d&&(d.abandonRequest(),this.$9||d.reset(a.getVideoID(),a.getVideoChannelID()),this.$92(),this.$61(a),this.$62(a));this.$1=!0;b("shouldWNSRenderToRHC")()&&b("Arbiter").inform("VideoWatchAndScrollController/start")};x.prototype.$61=function(a){"use strict";a.hasOption("WatchAndScroll","isActive")||a.registerOption("WatchAndScroll","isActive",x.isActive)};x.prototype.$62=function(a){"use strict";this.$32.addSubscriptions(this.$75(a),a.addListener("VideoChannelController/enterChannel",function(){this.$32.release()}.bind(this)),a.addListener("WatchAndScroll/close",function(){this.$57();var a=b("XVideoWNSSurveyController").getURIBuilder().getURI();a=new(b("AsyncRequest"))().setURI(a);a.send()}.bind(this)))};x.prototype.$93=function(){"use strict";if(!this.$14)return;this.$14.setState({endScreenShown:!1});this.$16&&this.$16.play(b("VideoPlayerReason").USER)};x.prototype.$92=function(){"use strict";__p&&__p();if(!this.$48)return;this.$34.fetchStories(!0,function(a,c){var d=this.$14;if(!a||!a.length||!d)return;a=d.getChannelVideoElements().concat(a);d.setState({channelVideoElements:a},function(){b("setTimeoutAcrossTransitions")(function(){this.$88(this.$37+1).preload()}.bind(this))}.bind(this));this.$39=this.$39.concat(c)}.bind(this))};x.prototype.$88=function(a){"use strict";var b=this.$14?this.$14.getChannelVideoElements():[],c=[this.$17].concat(this.$36),d=null;c.forEach(function(c){b[a].contains(c.getRootNode())&&(d=c)});d||i(0);return d};x.prototype.$94=function(){"use strict";if(u&&u.$51)for(var a=0;a<u.$36.length;a++){var b=u.$36[a];if(u.$51.contains(b.getRootNode()))return b}return null};x.prototype.$65=function(){"use strict";__p&&__p();var a=this.$16.isMuted();this.$16.pause(b("VideoPlayerReason").USER);this.$16!==this.$17&&this.$16.abortLoading();this.$87(this.$88(this.$37));this.$15=this.$16.getRootNode();var c=this.$16.getVideoNode(),d=parseFloat(c.getAttribute("data-original-aspect-ratio"));d||(d=16/9);var e=this.$47;e||(e=this.$59(c));this.$14&&(e.width=this.$14.getWidth());e.height=e.width/d;b("VideoPlayerExperiments").rhcWNSEnabled?e.height=Math.min(e.height,w()):e.height>o&&(e.height=o,e.width=e.height*d);this.$16.removeOffsetStylings();this.$16.setDimensions(e.width,e.height);this.$53(c);this.$14&&this.$14.setState({playbackFinished:!1,videoIndex:this.$37,width:e.width,height:e.height},function(){b("shouldWNSRenderToRHC")()&&b("Arbiter").inform("VideoWatchAndScrollController/resize")});this.$47=e;this.$16.play(b("VideoPlayerReason").AUTOPLAY);a&&this.$16.mute();this.$36.length<=this.$37?this.$92():this.$88(this.$37+1).preload()};x.prototype.$95=function(){"use strict";var a=l;this.$12&&(a+=this.$12.scrollHeight);return Math.max(a,n)};x.prototype.$53=function(a){"use strict";__p&&__p();if(this.$47){this.$7={height:this.$47.height,left:this.$47.left,top:this.$47.top,width:this.$47.width};return}if(a){var b=a.scrollWidth,c=a.scrollHeight;a=this.$79(a);c=a*c/b;this.$7.height=c;this.$7.width=a}else this.$7={height:this.$5,left:l,top:this.$95(),width:this.$6}};x.prototype.$89=function(a,c){"use strict";__p&&__p();var d=b("DOM").create("canvas",{className:"_57n6"});d.height=a.height;d.width=a.width;if(d.getContext&&d.getContext("2d"))if(c.scrollHeight===0){a=b("DOM").scry(c.parentNode,"._3t5i");a=a[0];if(a){var e=d.getContext("2d");e.drawImage(a,0,0)}}else if(c instanceof window.HTMLVideoElement){e=new(b("VideoFrameBuffer"))(d,c);e.updateFrameBuffer()}a=b("DOM").create("div");a.appendChild(d);c=b("DOM").create("i",{className:"_1jto _bsl _3htz"});a.appendChild(c);return a};x.prototype.$57=function(){"use strict";this.$19&&this.$55();this.$16.pause(b("VideoPlayerReason").USER);if(b("VideoPlayerExperiments").pauseUpNextControllerWNS){var a=this.$94();a&&a.pause(b("VideoPlayerReason").USER);u&&(u.$51=null)}this.$84()};x.prototype.$96=function(){"use strict";this.$16.emit("WatchAndScroll/collapse")};x.prototype.$97=function(){"use strict";var a=this.$89(this.$7,this.$16.getVideoNode(),!0);this.$14&&this.$14.setState({fadeOut:!0,fadeOutPlaceholder:a});this.$98(this.$17,this.$8);this.$18&&(b("DOM").remove(this.$18),this.$18=null);this.$13&&(this.$13.remove(),this.$13=null)};x.prototype.$98=function(a,c,d){"use strict";__p&&__p();a.getOption("VideoWithLiveBroadcast","isLive");a.pause(b("VideoPlayerReason").USER);a.isPlayerVersion("silvercity")&&a.detachRootNode();d&&b("ReactDOM").unmountComponentAtNode(d);c.dimensions&&c.dimensions.width&&c.dimensions.height&&(a.addOffsetStylings(),a.setDimensions(c.dimensions.width,c.dimensions.height));c.videoRootNode&&b("DOM").prependContent(c.videoRootNode,a.getRootNode());a.emit("WatchAndScroll/positionUpdated");a.updateSource(c.source||b("VideoPlayerLoggerSource").INLINE);d=this.$73(a.getVideoNode());c=d.top;d=b("getViewportDimensions")().height;a.getSource()!==b("VideoPlayerLoggerSource").PERMALINK&&a.mute();c<window.scrollY||c>window.scrollY+d||this.$52===!1?(a.pause(b("VideoPlayerReason").AUTOPLAY),a.emit("resumeAutoplay")):a.play(b("VideoPlayerReason").USER)};x.prototype.$90=function(){"use strict";this.$4||i(0),this.$41||i(0),this.$41.setState({fadeOut:!0}),this.$46=b("setTimeoutAcrossTransitions")(function(){this.$42||i(0),this.$43||i(0),this.$98(this.$42,this.$44,this.$43),this.$45&&(b("DOM").remove(this.$45),this.$45=null),this.$46=null}.bind(this),r)};x.prototype.$56=function(){"use strict";this.$4||i(0),this.$14||i(0),!this.$23&&b("shouldWNSRenderToRHC")()&&b("Arbiter").inform("VideoWatchAndScrollController/exit"),this.$36.forEach(function(a){return a.abortLoading()}),this.$97(),this.$46=b("setTimeoutAcrossTransitions")(function(){b("ReactDOM").unmountComponentAtNode(this.$85()),this.$86()}.bind(this),r)};x.prototype.$86=function(){"use strict";this.$4||i(0),this.$34&&this.$34.abandonRequest(),this.$37=0,this.$1=!1,this.$32.release(),this.$32=new(b("SubscriptionsHandler"))(),this.$8={},this.$16=null,this.$17=null,this.$4=!1,this.$36=[],this.$39=[],this.$14=null,b("clearTimeout")(this.$46),this.$46=null,this.$42&&this.$43&&this.$44&&this.$98(this.$42,this.$44,this.$43),this.$42=null,this.$44={},this.$45&&(b("DOM").remove(this.$45),this.$45=null),b("VideoAutoplayControllerX").setShouldAutoplay(!0),this.$2=null,this.$23&&(this.$47=this.$59(this.$23.getVideoNode()),this.$67(),this.$63(this.$23,b("VideoPlayerReason").USER),this.$23=null),this.$30=!1,this.$47=null};x.prototype.$91=function(){"use strict";return b("ReactDOM").render(b("React").createElement(b("VideoWatchAndScrollContainer.react"),{isDrawerEnabled:b("VideoPlayerExperiments").rhcWNSDrawerEnabled&&b("shouldWNSRenderToRHC")()&&b("VideoPlayerExperiments").rhcWNSExpandToTahoe,isLiveVideo:function(){return this.$16.isLiveVideo()}.bind(this),initialPosition:this.$7,initialVideoElement:this.$15,onChannelNavigation:this.$99.bind(this),onClick:this.$100.bind(this),onClose:this.$57.bind(this),onCollapse:this.$96.bind(this),onDrop:this.$101.bind(this),onGrab:this.$102.bind(this),onInitialPositionUpdate:this.$103.bind(this),onLoadUpNext:this.registerUpNextUnit.bind(this),onPlayNext:this.$104.bind(this),onReplay:this.$93.bind(this),viewedVideos:Array.from(this.$50),videoID:this.$16.getVideoID()}),this.$85())};x.prototype.$84=function(){"use strict";this.$17&&this.$17.emit("exitWatchAndScroll");if(b("VideoPlayerExperiments").pauseUpNextControllerWNS){var a=this.$94();a&&a.emit("exitWatchAndScroll")}};x.prototype.$99=function(a){"use strict";if(a>0&&this.$36.length<=this.$37){b("shouldWNSRenderToRHC")()||this.$57();return}this.$37+=a;this.$65()};x.prototype.$104=function(){"use strict";var a=this.$94();a&&(this.$51=null,a.emit("crossfadeWatchAndScroll"),this.$52?a.play(b("VideoPlayerReason").AUTOPLAY):(a.preload(),a.emit("showOverlay")))};x.prototype.$102=function(){"use strict";this.$19&&this.$55();var a=this.$16.getOption("VideoWithLiveBroadcast","isLive");if(a)return;this.$24=this.$16.isState("playing");this.$16.pause(b("VideoPlayerReason").USER)};x.prototype.$101=function(){"use strict";var a=this.$16.getOption("VideoWithLiveBroadcast","isLive");if(a)return;this.$24&&this.$16.play(b("VideoPlayerReason").USER);this.$24=null};x.prototype.$100=function(){"use strict";var a=this.$16.getOption("VideoWithLiveBroadcast","isLive");if(this.$19||a)return;this.$16.isState("playing")?this.$16.pause(b("VideoPlayerReason").USER):(this.$16.isState("paused")||this.$16.isState("finished")||this.$16.isState("ready"))&&this.$16.play(b("VideoPlayerReason").USER)};x.prototype.$87=function(a){"use strict";__p&&__p();if(this.$16===a)return;b("VideoPlayerExperiments").rhcWNSEnabled&&a.addListener("WatchAndScroll/collapse",function(){if(a!=this.$16){a.removeCurrentListener();return}if(!b("shouldWNSRenderToRHC")())return;b("Arbiter").inform("VideoWatchAndScrollController/collapse")}.bind(this));this.$16=a};x.prototype.pauseActiveVideo=function(a){"use strict";if(!this.$16)return;this.$16.pause(a)};x.pauseActiveVideo=function(a){a===void 0&&(a=b("VideoPlayerReason").USER);if(!u)return;u.pauseActiveVideo(a)};x.prototype.playActiveVideo=function(a){"use strict";if(!this.$16)return;this.$16.play(a)};x.prototype.registerUpNextUnit=function(a,c){"use strict";__p&&__p();var d=b("DOM").find(a,"._3iqr");if(!u||!d)return;u.$51=a;u.$52=c;b("EventListener").listen(d,"click",function(event){if(!u)return;var a=u.$94();a&&(event.preventDefault(),event.stopPropagation(),u.$51=null,a.emit("crossfadeWatchAndScroll"),a.play(b("VideoPlayerReason").USER))})};x.playActiveVideo=function(a){a===void 0&&(a=b("VideoPlayerReason").USER);if(!u)return;u.playActiveVideo(a)};x.prototype.$103=function(a){"use strict";this.$7=a,this.$14&&!this.$14.getFadeOutStatus()&&(this.$16.removeOffsetStylings(),this.$16.setDimensions(a.width,a.height),this.$16.emit("WatchAndScroll/positionUpdated"))};x.prototype.$105=function(){"use strict";var a=b("DOM").create("div");b("shouldWNSRenderToRHC")()?b("ifRequired")("RHCVideoWNSController",function(b){return b.mount(a)}):b("DOM").appendContent(document.body,a);return a};x.prototype.$85=function(){"use strict";this.$2||(this.$2=this.$105());return this.$2};e.exports=x}),null);
__d("XTahoeVideoDataAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video/tahoe/video_data/",{video_ids:{type:"FBIDSet",required:!0}})}),null);