if (self.CavalryLogger) { CavalryLogger.start_js(["1X3fo"]); }

__d("BrowseWebSLRPELoggerClickType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ITEM_IN_MODULE_TAPPED:"graph_search_results_item_in_module_tapped",ITEM_TAPPED:"graph_search_results_item_tapped",SEE_MORE_TAPPED:"graph_search_results_see_more_on_module_tapped",INLINE_FRIEND_REQUEST:"inline_friend_request",INLINE_PAGE_LIKE_REQUEST:"inline_page_like_request",MODULE_TAPPED:"graph_search_results_module_tapped",TAP_MODULE:"graph_search_results_module_tapped",VIEW_PORT_VIEWS_ON_SEARCH_RESULTS:"view_port_views_on_search_results",INLINE_ACTION:"inline_action"})}),null);
__d("SearchFunnelLoggerEvents",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SEARCH_BOX_TAPPED:"search_box_tapped",TA_SUGGESTION_CLICKED:"ta_suggestion_clicked",SERP_INLINE_ACTION:"serp_inline_action",SERP_RESULTS_LOADED:"serp_results_loaded",SERP_RESULT_CLICKED:"serp_result_clicked",SERP_SEE_MORE_CLICKED:"serp_see_more_clicked",SERP_SCROLL_RESULTS:"serp_scroll_results",SERP_TAB_CLICKED:"serp_tab_clicked",VIEW_PORT_VIEWS_ON_SEARCH_RESULTS:"view_port_views_on_search_results"})}),null);
__d("SearchFunnelLogger",["BrowseWebSLRPELoggerClickType","FunnelLogger","SearchFunnelLoggerConfig","SearchFunnelLoggerEvents"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="SEARCH_FUNNEL",h=null;a={_startFunnel:function(){if(b("FunnelLogger").getFunnelInstance(g)||!b("SearchFunnelLoggerConfig").isEnabled)return;b("FunnelLogger").startFunnel(g);b("FunnelLogger").setFunnelTimeout(g,5*60);window.addEventListener("beforeunload",function(){return this.endFunnel()}.bind(this))},logSERPResultClick:function(a,c,d,e,f){this._appendAction(e===b("BrowseWebSLRPELoggerClickType").SEE_MORE_TAPPED?b("SearchFunnelLoggerEvents").SERP_SEE_MORE_CLICKED:b("SearchFunnelLoggerEvents").SERP_RESULT_CLICKED,{logging_unit_id:d,query:a,serp_sid:c,typeahead_sid:this.getTypeaheadID(c),client_position:f})},logSERPResultVPV:function(a,c){this._appendAction(b("SearchFunnelLoggerEvents").VIEW_PORT_VIEWS_ON_SEARCH_RESULTS,{logging_unit_id:a.unit_id,query:a.query,serp_sid:a.session_id,typeahead_sid:this.getTypeaheadID(a.session_id),client_position:a.position,item_height:c.story_height,screen_height:c.viewport_height,overall_start_time:c.vpvd_start_timestamp,overall_time_spent:c.vpvd_time_delta,focus_start_time:c.vpvd_start_timestamp,focus_time_spent:c.vpvd_time_delta})},logSERPInlineAction:function(a,c,d,e,f,g){this._appendAction(b("SearchFunnelLoggerEvents").SERP_INLINE_ACTION,{query:a,inline_action_name:f,serp_sid:c,typeahead_sid:d,logging_unit_id:e,result_type:g})},logSERPLoaded:function(a,c,d,e,f,g){h={session_id:a,typeahead_id:c},this._appendAction(b("SearchFunnelLoggerEvents").SERP_RESULTS_LOADED,{query:d,serp_sid:a,typeahead_sid:c,logging_unit_id:e,filter_type:f,entry_point_scope:g})},logTabClicked:function(a,c,d,e,f,g){this._appendAction(b("SearchFunnelLoggerEvents").SERP_TAB_CLICKED,{query:c,typeahead_sid:a,destination_serp_sid:d,serp_sid:e,destination_filter_type:f,source_filter_type:g})},logSearchOpen:function(){this._appendAction(b("SearchFunnelLoggerEvents").SEARCH_BOX_TAPPED)},logTypeaheadClick:function(a,c,d,e){this._appendAction(b("SearchFunnelLoggerEvents").TA_SUGGESTION_CLICKED,{selected_text:a.text,selected_type:a.type,typeahead_sid:c,typed_query:d,last_state:e})},_appendAction:function(event,a){a===void 0&&(a={}),this._startFunnel(),b("FunnelLogger").appendActionWithPayload(g,event,a)},endFunnel:function(){if(!b("FunnelLogger").getFunnelInstance(g))return;b("FunnelLogger").endFunnel(g)},getTypeaheadID:function(a){return h==null||h.session_id!=a?null:h.typeahead_id}};e.exports=a}),null);
__d("BrowseClientEventLogger",["csx","Banzai","DOMQuery","SearchFunnelLogger","SearchLoggingOptions","ge","gkx","ifRequired"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="browse_client_event_session",i="search_www_click_error",j="21.";a={logData:function(event,a,c,d){__p&&__p();d===void 0&&(d={});if(!event||!a)return;d.event=event;d.client_time=Math.floor(Date.now());d.client_time_2=Date.now()/1e3;d.session_id=a;d.vertical=c;this.processedSessions=this.processedSessions||[];if(this.processedSessions.indexOf(a)!==-1)return;c=d.event==="click"&&d.clicked_href!=null&&b("SearchLoggingOptions").signalLinkClicks;b("Banzai").post(h,[d],{delay:0,retry:!0,signal:c})},logClick:function(a){a.gt.event="click",this.maybeLogVisiblityEvent(a,!0),b("gkx")("AT7fx-jPihczeM0-tKa0Qqtv49c-WE3lGPusT_C-NZJB2j5Deqwxeuc_YX4XZDiu7Jwrol8_zfy5dwq2KxMZ-eYFbVL6XCDG8HvdiI_n2wP2UA")&&b("ifRequired")("FacebarTypeaheadRefreshNullstate",function(a){a.setIsNullstateStale(!0)})},maybeLogClientViewEvent:function(a){a.event="client_view",this.maybeLogVisiblityEvent(a)},maybeLogVisiblityEvent:function(a,c){__p&&__p();c===void 0&&(c=!1);var d=null;c&&(d=a,a=a.gt);if(!a||!a.xt||a.xt.indexOf(j)!==0){c&&b("Banzai").post(i,[d],{delay:0,retry:!0});return}var e=JSON.parse(a.xt.substring(3));c&&(e.click_type=a.click_type,e.tn=a.tn,e.clicked_href=a.clicked_href,d&&d.bt&&d.bt.ct&&(b("SearchFunnelLogger").logSERPInlineAction(e.query,e.session_id,e.typeahead_sid,e.unit_id,d.bt.ct,d.bt.result_type),d.bt.ct=="feedback"&&(e.feedback_score=d.bt.feedback_score,e.feedback_type=d.bt.feedback_type)));var event=a.event;c=this._getPositionForCurrentDOMNode(e.unit_id);e.position=c;event=="click"&&b("SearchFunnelLogger").logSERPResultClick(e.query,e.session_id,e.unit_id,e.unit_id_click_type,e.position);if(e.display_style==="context_hscroll"&&(event==="client_view"||event==="vpvd"||event==="visible"||event==="hidden"))return;if(event==="vpvd"){if(!a.ft)return;e.vpvd_time=a.ft.vpvd_time_delta;b("SearchFunnelLogger").logSERPResultVPV(e,a.ft)}this.logData(event,e.session_id,e.vertical,e)},_getPositionForCurrentDOMNode:function(a){__p&&__p();if(a==null||a==undefined)return null;var c=0,d=b("ge")("browse_result_area");if(d==null||d==undefined)return null;d=b("DOMQuery").scry(d,"._401d");for(var e=0;e<d.length;e++){var f=d[e];f=f.getAttribute("data-gt");if(f!==null||f!==undefined){f=JSON.parse(JSON.parse(f).xt.substring(3));if(f.item_type=="result"&&f.id!==""&&f.id!==null){if(f.unit_id==a)return c;c++}}}return null},logImpression:function(a){a.event="impression",this.maybeLogVisiblityEvent(a)}};e.exports=a}),null);
__d("XBrowseLoggerController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/browse/logger/",{data:{type:"HackType",required:!0}})}),null);
__d("BrowseLogger",["AsyncRequest","Banzai","Run","XBrowseLoggerController","mapObject"],(function(a,b,c,d,e,f){__p&&__p();var g="browse",h="browse_aggr",i=null,j={},k={},l=function(a){if(a==null)return"undefined";var b=a.tagName.toLowerCase(),c=a.id;a=a.className;c&&(b+="#"+c);a&&(b+="."+a);return b};function m(){i=null,j={},k={}}function n(a){return Object.assign(a,{clientSessionID:i})}function o(a){b("Banzai").post(g,n(a))}function p(a){a=b("XBrowseLoggerController").getURIBuilder().setHackType("data",n(a)).getURI();new(b("AsyncRequest"))().setURI(a).send()}function q(){if(i===null)return;k.aggregated=j;b("Banzai").post(h,n(k));m()}function r(a){j[a]=(j[a]||0)+1}function s(a){Object.assign(k,a)}b("Run").onUnload(q);a={newSession:function(){q(),i=Math.random().toString(),k.start_time||(k.start_time=Math.round(Date.now()/1e3))},logResultClick:function(a,c,d,e,f,g,h){g===void 0&&(g=null);h={action:"result_click",click_type:a.ct||"result",section:a.section||"unknown",id:a.id||-1,path:a.path||"unknown",rank:a.rank||0,referrer:a.referrer||"unknown",result_type:a.result_type||"unknown",session_id:a.session_id||0,query_time:a.query_time||null,abtest_version:a.abtest_version||"NONE",abtest_params:a.abtest_params||null,typeahead_sid:a.typeahead_sid||"",source_module_role:a.source_module_role||"",result_title:a.result_title||"unknown",result_href:a.result_href||"unknown",result_semantic:a.result_semantic||"unknown",type:a.experience_type||"unknown",click_action:d||null,sub_id:a.sub_id||null,owner_id:a.owner_id||null,browse_location:a.browse_location||"unknown",query_data:a.query_data||"unknown",is_headline:a.is_headline||!1,qid:c.qid||0,mf_story_key:c.mf_story_key||0,module:a.module||"NONE",view:a.view||null,clicked_href:f||null,bt_key:g};c.tn&&(h.tn=c.tn);a.cst&&(h.click_subtype=a.cst);r("result_click_"+h.click_type);s({path:h.path,referrer:h.referrer,result_type:h.result_type,session_id:h.session_id,abtest_version:h.abtest_version,abtest_params:h.abtest_params,typeahead_sid:h.typeahead_sid});g?p(h):o(h);!a.id&&a.browse_location!=="browse_location:mf_trending"&&!g&&o({action:"logging_error",click_action:d,click_type:h.click_type,attributes:JSON.stringify(a),element:b("mapObject")({srcElement:e.srcElement,target:e.target,toElement:e.toElement},l),event:{button:e.button,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,layerX:e.layerX,layerY:e.layerY,offsetX:e.offsetX,offsetY:e.offsetY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY,shiftKey:e.shiftKey,type:e.type,x:e.x,y:e.y}})},logControlsClick:function(a,b){var c={action:"controls_click",click_type:b,path:a.path||"unknown",referrer:a.referrer||"unknown",session_id:a.session_id||0,query_time:a.query_time,filter_name:a.name||"unknown",typeahead_sid:a.typeahead_sid||"",result_type:a.result_type||"unknown",type:a.experience_type||"unknown"};a.cst&&(c.click_subtype=a.cst);r("controls_click_"+b);s({path:c.path,referrer:c.referrer,session_id:c.session_id,typeahead_sid:c.typeahead_sid});o(c)},logResultHover:function(a,b,c){c===void 0&&(c=null);b={action:"result_hover",id:a.id||0,path:a.path||"unknown",rank:a.rank||null,result_type:a.result_type||"unknown",session_id:a.session_id||0,query_time:a.query_time||null,time_elapsed:b||null,typeahead_sid:a.typeahead_sid||0,type:a.experience_type||"unknown",module:a.module||"NONE",view:a.view||null,bt_key:c};r("result_hover");s({path:b.path,session_id:b.session_id,typeahead_sid:b.typeahead_sid});c?p(b):o(b)},logScroll:function(a,b,c,d){a={action:"scroll",encoded_query:a,fragments:b,position:c,session_id:d||0};o(a)},logNUXStep:function(a){a={action:"nux_step",step:a};o(a)},logDisambiguationImpression:function(a,b,c,d,e){d={action:"disambiguation_imp",ids:d,name:a,path:c,type:b,typeahead_sid:e};o(d)},logDisambiguationClick:function(a,b,c,d,e,f){e={action:"disambiguation_clk",id:e,index:d,name:a,path:c,type:b,typeahead_sid:f};o(e)},logDYMLinkClick:function(a,b,c,d){b={action:"dym_click",path:a.path||"unknown",referrer:a.referrer||"unknown",session_id:a.session_id||0,query_time:a.query_time,abtest_version:a.abtest_version||"NONE",abtest_params:a.abtest_params,typeahead_sid:a.typeahead_sid||"",type:a.experience_type||"unknown",click_action:c,sub_id:a.sub_id,owner_id:a.owner_id,browse_location:a.browse_location||"unknown",query_data:a.query_data||"unknown",module:a.module||"NONE",view:a.view,dym_confidence:a.dym_confidence||"NONE",dym_query:a.dym_query||"",dym_correction:a.dym_correction||"",dym_clicked:a.dym_clicked||""};o(b)}};e.exports=a}),null);
__d("BrowseClickLogger",["BanzaiODS","BrowseClientEventLogger","BrowseLogger","DOMQuery","Event","Parent","collectDataAttributes"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c){__p&&__p();var d=a.target,e=b("collectDataAttributes")(d,["bt","ft","gt"],["data-bt-key"]);e.bt&&e.bt.path&&(e.bt.path+=document.location.search);e.gt.tn=e.ft.tn;e.gt.click_type=e.bt.ct||"result";var f=b("Parent").byAttribute(d,"href");f=f!=null?f.href:null;e.gt.clicked_href=f;b("BrowseClientEventLogger").logClick(e);if(e.bt==null||e.ft==null)return;b("DOMQuery").scry(d,"^.recourse-link").length>0?c==="left_click"&&b("BrowseLogger").logDYMLinkClick(e.bt,e.ft,c,a):b("BrowseLogger").logResultClick(e.bt,e.ft,c,a,f,e.normal["data-bt-key"],e.gt.xt)}var h=!1;a={init:function(a){h?b("BanzaiODS").bumpEntityKey("search.www.browse_click_logger","duplicate_initialization"):h=!0,b("Event").listen(a,"mousedown",function(a){var b=a.button===2||a.which===3?"right_click":"left_click";a.shiftKey&&(b+="_shift");a.altKey&&(b+="_alt");(a.metaKey||a.ctrlKey)&&(b+="_ctrl");g(a,b)}.bind(this))},logClick:g};e.exports=a}),null);
__d("ViewableImpressionUtils",["csx","CSS"],(function(a,b,c,d,e,f,g){a={isHorizontallyOffscreen:function(a,c,d){var e=Math.max(c.x,0);d=Math.min(c.x+c.width,d.width);return d-e<c.width||b("CSS").matchesSelector(a,".desktop_hscroll_offscreen")}};e.exports=a}),null);
__d("VisibilityTrackingHelper",["Arbiter","DesktopHscrollUnitEventConstants","Event","getViewportDimensions"],(function(a,b,c,d,e,f){a={getEventListeners:function(a){return[b("Event").listen(document,"DOMContentLoaded",a),b("Event").listen(window,"scroll",a),b("Event").listen(window,"resize",a),b("Arbiter").subscribe(b("DesktopHscrollUnitEventConstants").HSCROLL_ITEM_SHOWN_EVENT,a)]},getViewportInfo:function(){return b("getViewportDimensions")()}};e.exports=a}),null);
__d("SearchResultPageNavigationPerfTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:SearchResultPageNavigationPerfLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:SearchResultPageNavigationPerfLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:SearchResultPageNavigationPerfLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAppID=function(a){this.$1.appid=a;return this};a.prototype.setBemDisplayTime=function(a){this.$1.bem_display_time=a;return this};a.prototype.setBrowseLayoutPageletDisplayTime=function(a){this.$1.browse_layout_pagelet_display_time=a;return this};a.prototype.setCaller=function(a){this.$1.caller=a;return this};a.prototype.setFilterType=function(a){this.$1.filter_type=a;return this};a.prototype.setIemDisplayTime=function(a){this.$1.iem_display_time=a;return this};a.prototype.setNavType=function(a){this.$1.nav_type=a;return this};a.prototype.setNavigationStartTime=function(a){this.$1.navigation_start_time=a;return this};a.prototype.setReferrer=function(a){this.$1.referrer=a;return this};a.prototype.setSessionID=function(a){this.$1.session_id=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={appid:!0,bem_display_time:!0,browse_layout_pagelet_display_time:!0,caller:!0,filter_type:!0,iem_display_time:!0,nav_type:!0,navigation_start_time:!0,referrer:!0,session_id:!0,vc:!0};e.exports=a}),null);
__d("FullViewLogger",["Banzai","ScriptPath","SubscriptionsHandler","URI"],(function(a,b,c,d,e,f){__p&&__p();g.logFromViewableImpressionTracker=function(a){"use strict";var b=new g();b.subscribeToTrackerEvents(a)};g.prototype.subscribeToTrackerEvents=function(a){"use strict";this.subscriptionsHandler=new(b("SubscriptionsHandler"))(),this.subscriptionsHandler.addSubscriptions(a.addListener("full_view",this.onFullView,this))};g.prototype.onFullView=function(a){"use strict";this.$1()&&this.$2(a);a={token:a.token,fullViewType:a.fullViewType,scriptPath:b("ScriptPath").getTopViewEndpoint()};b("Banzai").post("xtrackable:full_view",a);this.$1()&&this.$3(a)};g.prototype.$1=function(){"use strict";return 0};g.prototype.$2=function(a){"use strict";!1};g.prototype.$3=function(a){"use strict";!1};function g(){"use strict"}e.exports=g}),null);
__d("FBSiteWhiteOps",["ControlledReferer","Style","URI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={appendToWindow:function(a,b){g.render(a,b,window.document.body)},appendToComponent:function(a,b,c){g.render(a,b,c)},render:function(a,c,d){__p&&__p();try{var e="fbsbx-sig-iframe-detection";if(d.getElementsByClassName(e).length!==0)return;var f=window.document.createElement("iframe");b("Style").apply(f,{height:"1px",width:"1px",opacity:"0",position:"relative",zIndex:"-9999999"});f.id="fbsbx-sig-iframe-"+a;f.className=e;f.referrerPolicy="no-referrer";b("ControlledReferer").useFacebookReferer(f,function(){__p&&__p();f.sandbox="allow-scripts allow-same-origin";var d=new(b("URI"))("https://s.update.fbsbx.com/2/843748/analytics.html?ti="+a+"&di=facebook.com&bt="+c+"&dt=8437481520966594402012"),e=f.contentWindow.document,g="fbsbx-sig-iframe-form-"+a;e.body.innerHTML='<form method="GET" id='+g+"></form>";var h=e.getElementById(g);h.action=d.toString();d=d.getQueryData();for(var i in d)if(Object.prototype.hasOwnProperty.call(d,i)){var j=e.createElement("input");j.name=i;j.value=d[i];j.autocomplete="off";j.type="hidden";h.appendChild(j)}e.body.innerHTML+='<iframe height="100%" width="100%" onload=\'document.getElementById("'+g+"\").submit()'/>;"});d.appendChild(f)}catch(a){}}};e.exports=g}),null);
__d("FullViewType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ENTIRE_UNIT:1})}),null);
__d("PercentVisible",[],(function(a,b,c,d,e,f){e.exports={NO_VISIBLE:-1,VISIBLE_0_PCT:0,VISIBLE_50_PCT:50,VISIBLE_100_PCT:100}}),null);
__d("VisibilityState",[],(function(a,b,c,d,e,f){"use strict";e.exports={TOP:"TOP",BOTTOM:"BOTTOM",FULL:"FULL",NULL:"NULL"}}),null);
__d("ViewableImpressionTracker",["csx","AdDelayedHiddenCheckConfiguration","AdImpressionLoggingConfig","Banzai","BrowseClientEventLogger","DataAttributeUtils","DOM","FBSiteWhiteOps","FullViewType","NonBlockingIFrame","PercentVisible","Style","URI","ViewableImpressionUtils","Visibility","VisibilityState","ge","getElementPosition","getViewportDimensions","mixInEventEmitter","randomInt"],(function(a,b,c,d,e,f,g){__p&&__p();function a(a,b,c){"use strict";this.id=a,this.element=b,this.config=c,this.iframe=null,this.viewableTimeout=null,this.clearSubsequentTimeout=null,this.waitForSubsequent=!1,this.waitForLogged=!1,this.isNonViewableLogged=!1,this.isVisible=!1,this.iframeLogged=!1,this.banzaiLogged=!1,this.topLeftInViewport=!1,this.bottomRightInViewport=!1}a.prototype.getID=function(){"use strict";return this.id};a.prototype.getConfig=function(){"use strict";return this.config};a.prototype.getPercentInViewport=function(){"use strict";var a=b("getViewportDimensions")(),c=b("getElementPosition")(this.element);return this.$1(a,c)};a.prototype.$2=function(a,c,d){__p&&__p();d===void 0&&(d=0);if(c.x<a.width&&c.x+c.width>0&&c.y<a.height&&c.y+c.height>d&&b("Style").get(this.element,"visibility")!=="hidden"&&b("Style").get(this.element,"opacity")!=="0"){var e=Math.max(c.x,0),f=Math.min(c.x+c.width,a.width);d=Math.max(c.y,d);a=Math.min(c.y+c.height,a.height);if(c.height*c.width===0)return 100;f=100*(f-e)*(a-d)/(c.height*c.width);return f}return 0};a.prototype.$1=function(a,c){"use strict";return this.config.require_horizontally_onscreen&&b("ViewableImpressionUtils").isHorizontallyOffscreen(this.element,c,a)?0:this.$2(a,c)};a.prototype.$3=function(a,c,d){"use strict";a=this.$2(a,c,d);if(a===0)return b("PercentVisible").NO_VISIBLE;else if(a<50)return b("PercentVisible").VISIBLE_0_PCT;else if(a<100)return b("PercentVisible").VISIBLE_50_PCT;else return b("PercentVisible").VISIBLE_100_PCT};a.prototype.$4=function(a,c,d){d===void 0&&(d=0);var e=Math.max(c.y,d);c=Math.min(c.y+c.height,a.height);c=100*(c-e)/(a.height-d);if(c<50)return b("PercentVisible").VISIBLE_0_PCT;else if(c<100)return b("PercentVisible").VISIBLE_50_PCT;else return b("PercentVisible").VISIBLE_100_PCT};a.prototype.$5=function(a,c){"use strict";__p&&__p();var d=0,e=b("ge")("pagelet_bluebar");e&&e.offsetHeight&&(d=e.offsetHeight+e.offsetTop);if(this.config.should_log_viewport_duration){e=this.$4(a,c,d);switch(e){case b("PercentVisible").VISIBLE_0_PCT:case b("PercentVisible").VISIBLE_50_PCT:case b("PercentVisible").VISIBLE_100_PCT:this.emit("viewport_viewability",{tracker:this,id:this.getID(),token:this.getToken(),percentVisible:e});break;default:break}}e=this.$3(a,c,d);switch(e){case b("PercentVisible").VISIBLE_0_PCT:case b("PercentVisible").VISIBLE_50_PCT:case b("PercentVisible").VISIBLE_100_PCT:this.emit("viewability",{tracker:this,id:this.getID(),token:this.getToken(),percentVisible:e});break;default:this.emit("hidden",{id:this.getID(),token:this.getToken()});break}};a.prototype.$6=function(a,c){"use strict";if(b("Style").get(this.element,"visibility")==="hidden"||b("Style").get(this.element,"opacity")==="0")return!1;var d=c.x,e=c.y,f=c.x+c.width;c=c.y+c.height;this.topLeftInViewport=this.topLeftInViewport||d>=0&&d<=a.width&&e>=0&&e<=a.height;this.bottomRightInViewport=this.bottomRightInViewport||f>=0&&f<=a.width&&c>=0&&c<=a.height;return this.topLeftInViewport&&this.bottomRightInViewport};a.prototype.$7=function(a,c){"use strict";if(this.hasEmittedFullViewEvent)return;this.$6(a,c)&&(this.emit("full_view",{tracker:this,id:this.getID(),token:this.getToken(),fullViewType:b("FullViewType").ENTIRE_UNIT}),this.hasEmittedFullViewEvent=!0)};a.prototype.$8=function(a,c){"use strict";var d=c.y;c=c.y+c.height;d=d>=0&&d<=a.height;c=c>=0&&c<=a.height;d&&c?a=b("VisibilityState").FULL:d?a=b("VisibilityState").TOP:c?a=b("VisibilityState").BOTTOM:a=b("VisibilityState").NULL;this.emit("viewability_debug",{tracker:this,id:this.getID(),token:this.getToken(),visibleState:a})};a.prototype.onVisible=function(event){"use strict";__p&&__p();this.isVisible=!0;var a=b("getViewportDimensions")(),c=b("getElementPosition")(this.element),d=this.$1(a,c),e=d>this.config.pixel_in_percentage;this.emit("visible",{tracker:this,id:this.getID(),token:this.getToken(),percentInViewport:d});this.config.should_log_viewability_duration&&this.$5(a,c);this.config.should_log_debug_duration&&this.$8(a,c);this.$7(a,c);if(!e){this.$9();return}this.isLogged()?this.$10():this.$11();!this.waitForLogged&&!this.isLogged()&&!(b("AdImpressionLoggingConfig").blockInvisible&&b("Visibility").isHidden())&&(this.waitForLogged=!0,this.viewableTimeout=setTimeout(function(){__p&&__p();this.waitForLogged=!1;if(b("AdImpressionLoggingConfig").blockInvisible&&b("Visibility").isHidden())return;var a=this.getPercentInViewport();a=a>this.config.pixel_in_percentage;if(!a){this.$12();return}if(b("AdDelayedHiddenCheckConfiguration").getEnabled()){a=b("AdImpressionLoggingConfig").maxHiddenCheckDelay;a=a-this.config.duration_in_ms;a<0&&(a=0);setTimeout(function(){var a=this.$13();if(a){this.$12();b("AdImpressionLoggingConfig").logForHiddenAds&&this.logImpression(1,!0,{});return}this.logImpression(1,!1,{});this.$10()}.bind(this),a)}else this.logImpression(1,!1,{}),this.$10()}.bind(this),this.config.duration_in_ms))};a.prototype.onHidden=function(){"use strict";this.emit("hidden",{id:this.getID(),token:this.getToken()}),this.config.log_initial_nonviewable&&!this.isLogged()&&!this.isNonViewableLogged?this.logNonViewableImpression():!this.config.log_initial_nonviewable&&!this.isLogged()&&this.isVisible&&this.logNonViewableImpression(),this.isVisible=!1,this.waitForLogged&&(this.waitForLogged=!1,clearTimeout(this.viewableTimeout)),this.isLogged()&&!this.waitForSubsequent&&this.config.subsequent_gap_in_ms>=0&&(this.waitForSubsequent=!0,this.clearSubsequentTimeout=setTimeout(function(){this.waitForSubsequent=!1,this.reset(),this.isVisible&&this.onVisible()}.bind(this),this.config.subsequent_gap_in_ms)),this.$12()};a.prototype.onRemoved=function(){"use strict";this.isVisible=!1};a.prototype.getToken=function(){"use strict";return b("DataAttributeUtils").getDataAttribute(this.element,"data-xt")};a.prototype.logImpression=function(a,c,d){"use strict";__p&&__p();if(this.isLogged())return;var e=this.getToken(),f=Math.floor(Date.now()/1e3),g=this.$14(),h=Date.now()+"_"+(b("randomInt")(0,4294967295)+1);e={xt:e,isv:a,cts:f,csp:g,hba:c,etid:h};if(b("Banzai").isEnabled("xtrackable_clientview_batch")&&this.config.should_batch||this.config.vital_mode_for_ss||this.config.signal_mode_for_ss){a=this.config.vital_mode_for_ss?b("Banzai").VITAL:{};a.signal=this.config.signal_mode_for_ss;this.logWithBanzai(e,a);b("AdImpressionLoggingConfig").runBotDetection&&b("FBSiteWhiteOps").appendToComponent(h,"FACEBOOK_WEB_ADS",this.element)}else this.logWithIFrame(Object.assign(e,d))};a.prototype.logNonViewableImpression=function(){"use strict";if(this.config.nonviewableEnabled){var a=this.getToken();b("Banzai").post("xtrackable:nonviewable",{xt:a})}this.isNonViewableLogged=!0};a.prototype.isLogged=function(){"use strict";return this.iframeLogged||this.banzaiLogged};a.prototype.reset=function(){"use strict";this.iframeLogged&&(this.iframeLogged=!1),this.iframe&&(b("DOM").remove(this.iframe),this.iframe=null),this.banzaiLogged&&(this.banzaiLogged=!1),this.isNonViewableLogged=!1,this.isVisible=!1,this.waitForLogged=!1,this.waitForSubsequent=!1};a.prototype.logWithBanzai=function(a,c){"use strict";this.banzaiLogged=!0,b("BrowseClientEventLogger").maybeLogClientViewEvent(a),b("Banzai").post("xtrackable:clientview_batch",a,c)};a.prototype.logWithIFrame=function(a){"use strict";this.iframeLogged=!0,this.config.is_instream_story?b("NonBlockingIFrame").loadIFrame(new(b("URI"))(this.config.impressionURL).addQueryData(a).toString()):(this.iframe=b("DOM").create("iframe",{src:new(b("URI"))(this.config.impressionURL).addQueryData(a),width:0,height:0,frameborder:0,scrolling:"no",className:"fbEmuTracking"}),this.iframe.setAttribute("aria-hidden","true"),b("DOM").appendContent(this.element,this.iframe))};a.prototype.$13=function(){"use strict";__p&&__p();if(b("AdImpressionLoggingConfig").disableActualCheck)return!1;var a=!1;if(b("AdImpressionLoggingConfig").checkWholeAdUnit){var c=b("getElementPosition")(this.element);c=c.width>0||c.height>0;a=c}c=this.element.querySelectorAll("img");if(c.length>0){var d=!1;for(var e=0;e<c.length;e++){var f=c[e];f=b("getElementPosition")(f);if(f.width>0||f.height>0){d=!0;break}}a=a||d}if(!a){f=this.element;e=0;while(f!==null){if(e++>50)break;if(f){if(f.classList.contains("hidden_elem")||f.classList.contains("holdoutAdStory")||f.classList.contains("ego_ads_holdout"))return!1;f=f.parentElement}}return!0}return!1};a.prototype.$14=function(){"use strict";__p&&__p();var a=b("DataAttributeUtils").getDataAttribute(this.element,"data-dedupekey");if(a===null)return null;var c=this.$15();if(c===null||c.length===0)return null;var d=c.length;while(--d>=0){var e=b("DataAttributeUtils").getDataAttribute(c[d],"data-dedupekey");if(e!==null&&a===e)break}return d+1};a.prototype.$15=function(){"use strict";__p&&__p();var a=b("ge")("contentArea");if(a){var c="._5jmm";a=b("DOM").scry(a,c);return a.filter(function(a){return b("DataAttributeUtils").getDataAttribute(a,"data-dedupekey")})}else{c=b("ge")("m_newsfeed_stream");return c===null?null:c.getElementsByTagName("article")}};a.prototype.$16=function(){"use strict";return 0};a.prototype.$9=function(){"use strict";this.$16()&&(b("Style").set(this.element,"background-color","#abab9a"),b("Style").set(this.element,"outline","3px solid #abab9a"))};a.prototype.$11=function(){"use strict";this.$16()&&(b("Style").set(this.element,"background-color","#e4f70a"),b("Style").set(this.element,"outline","3px solid #e4f70a"))};a.prototype.$12=function(){"use strict";this.$16()&&(b("Style").set(this.element,"background-color",null),b("Style").set(this.element,"outline",null))};a.prototype.$10=function(){"use strict";this.$16()&&(b("Style").set(this.element,"background-color","#047515"),b("Style").set(this.element,"outline","3px solid #047515"))};b("mixInEventEmitter")(a,{visible:!0,hidden:!0,full_view:!0,viewability:!0,viewport_viewability:!0,viewability_debug:!0});e.exports=a}),null);
__d("ViewabilityDebugLogger",["Banzai","ViewableImpressionTracker","VisibilityState","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({top_enter_viewport:null,top_exit_viewport:null,bottom_enter_viewport:null,bottom_exit_viewport:null});h.logFromViewableImpressionTracker=function(a){var b=new h();b.subscribeToTrackerEvents(a)};function h(){this.$1=new Map(),this.$2=new Map(),this.$3=new Map()}h.prototype.subscribeToTrackerEvents=function(a){a.addListener("viewability_debug",this.onView.bind(this)),a.addListener("hidden",this.onHidden.bind(this))};h.prototype.onView=function(event){__p&&__p();var a=event.id,c=event.visibleState,d=Date.now(),e=this.$1.get(a),f=this.$2.get(a);switch(c){case b("VisibilityState").TOP:this.$1.has(a)||this.$4(event,d,b("VisibilityState").TOP);if(f){c={token:f.token,start_ts:f.start_ts,event_type:g.bottom_exit_viewport,event_time:d};this.$5(c,a,b("VisibilityState").BOTTOM)}break;case b("VisibilityState").FULL:this.$3.has(a)||this.$4(event,d,b("VisibilityState").FULL);break;case b("VisibilityState").BOTTOM:this.$2.has(a)||this.$4(event,d,b("VisibilityState").BOTTOM);if(e){c={token:e.token,start_ts:e.start_ts,event_type:g.top_exit_viewport,event_time:d};this.$5(c,a,b("VisibilityState").TOP)}break;case b("VisibilityState").NULL:if(e){c={token:e.token,start_ts:e.start_ts,event_type:g.top_exit_viewport,event_time:d};this.$5(c,a,b("VisibilityState").TOP)}if(f){e={token:f.token,start_ts:f.start_ts,event_type:g.bottom_exit_viewport,event_time:d};this.$5(e,a,b("VisibilityState").BOTTOM)}}};h.prototype.onHidden=function(event){var a=event.id,c=Date.now(),d=this.$1.get(a),e=this.$2.get(a);if(d){d={token:d.token,start_ts:d.start_ts,event_type:g.top_exit_viewport,event_time:c};this.$5(d,a,b("VisibilityState").TOP)}if(e){d={token:e.token,start_ts:e.start_ts,event_type:g.bottom_exit_viewport,event_time:c};this.$5(d,a,b("VisibilityState").BOTTOM)}};h.prototype.$4=function(event,a,c){__p&&__p();var d={token:event.token,start_ts:a,event_time:a};switch(c){case b("VisibilityState").TOP:d.event_type=g.top_enter_viewport;this.$1.set(event.id,d);this.$6(d);break;case b("VisibilityState").BOTTOM:d.event_type=g.bottom_enter_viewport;this.$2.set(event.id,d);this.$6(d);break;case b("VisibilityState").FULL:this.$3.set(event.id,d);if(!this.$1.has(event.id)){c={token:d.token,start_ts:a,event_time:a,event_type:g.top_enter_viewport};this.$1.set(event.id,c);this.$6(c)}if(!this.$2.has(event.id)){c={token:d.token,start_ts:a,event_time:a,event_type:g.bottom_enter_viewport};this.$2.set(event.id,c);this.$6(c)}break}};h.prototype.$6=function(a){b("Banzai").post("xtrackable:viewability_debug",a)};h.prototype.$5=function(a,c,d){b("Banzai").post("xtrackable:viewability_debug",a);switch(d){case b("VisibilityState").BOTTOM:this.$2["delete"](c);break;case b("VisibilityState").TOP:this.$1["delete"](c);break}this.$3["delete"](c)};e.exports=h}),null);
__d("VisibilityUnitType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({FEED_UNIT:"feed_unit",VIEWPORT:"viewport"})}),null);
__d("ViewabilityDurationSegmentLogger",["Banzai","PercentVisible","ViewableImpressionTracker","VisibilityUnitType"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=8e3;h.logFromViewableImpressionTracker=function(a){var b=new h();b.subscribeToTrackerEvents(a)};function h(){this.$1=new Map(),this.$2=new Map(),this.$3=new Map(),this.$4=new Map(),this.$5=new Map()}h.prototype.subscribeToTrackerEvents=function(a){a.addListener("viewability",this.onViewable.bind(this)),a.addListener("viewport_viewability",this.onViewport.bind(this)),a.addListener("hidden",this.onHidden.bind(this))};h.prototype.onViewable=function(event){__p&&__p();var a=event.id,c=event.percentVisible,d=Date.now(),e;switch(c){case b("PercentVisible").VISIBLE_0_PCT:c=this.$1.get(a);!c?this.$6(event,b("PercentVisible").VISIBLE_0_PCT,d,b("VisibilityUnitType").FEED_UNIT):this.$7(c,a,d);c=this.$2.get(a);c&&(e=this.$8(c,a,d,!0),this.$9(e,a));c=this.$4.get(a);c&&(e=this.$8(c,a,d,!0),this.$9(e,a));break;case b("PercentVisible").VISIBLE_50_PCT:c=this.$1.get(a);!c?this.$6(event,b("PercentVisible").VISIBLE_0_PCT,d,b("VisibilityUnitType").FEED_UNIT):this.$7(c,a,d);c=this.$2.get(a);!c?this.$6(event,b("PercentVisible").VISIBLE_50_PCT,d,b("VisibilityUnitType").FEED_UNIT):this.$7(c,a,d);c=this.$4.get(a);c&&(e=this.$8(c,a,d,!0),this.$9(e,a));break;case b("PercentVisible").VISIBLE_100_PCT:c=this.$1.get(a);!c?this.$6(event,b("PercentVisible").VISIBLE_0_PCT,d,b("VisibilityUnitType").FEED_UNIT):this.$7(c,a,d);c=this.$2.get(a);!c?this.$6(event,b("PercentVisible").VISIBLE_50_PCT,d,b("VisibilityUnitType").FEED_UNIT):this.$7(c,a,d);c=this.$4.get(a);!c?this.$6(event,b("PercentVisible").VISIBLE_100_PCT,d,b("VisibilityUnitType").FEED_UNIT):this.$7(c,a,d);break}};h.prototype.onViewport=function(event){__p&&__p();var a=event.id,c=event.percentVisible,d=Date.now(),e;switch(c){case b("PercentVisible").VISIBLE_0_PCT:c=this.$3.get(a);c&&(e=this.$8(c,a,d,!0),this.$9(e,a));c=this.$5.get(a);c&&(e=this.$8(c,a,d,!0),this.$9(e,a));break;case b("PercentVisible").VISIBLE_50_PCT:c=this.$3.get(a);!c?this.$6(event,b("PercentVisible").VISIBLE_50_PCT,d,b("VisibilityUnitType").VIEWPORT):this.$7(c,a,d);c=this.$5.get(a);c&&(e=this.$8(c,a,d,!0),this.$9(e,a));break;case b("PercentVisible").VISIBLE_100_PCT:c=this.$3.get(a);!c?this.$6(event,b("PercentVisible").VISIBLE_50_PCT,d,b("VisibilityUnitType").VIEWPORT):this.$7(c,a,d);c=this.$5.get(a);!c?this.$6(event,b("PercentVisible").VISIBLE_100_PCT,d,b("VisibilityUnitType").VIEWPORT):this.$7(c,a,d);break}};h.prototype.onHidden=function(event){var a=event.id,b=Date.now(),c=this.$1.get(a),d=this.$2.get(a),e=this.$3.get(a),f=this.$4.get(a),g=this.$5.get(a);c&&this.$9(this.$8(c,a,b,!0),a);d&&this.$9(this.$8(d,a,b,!0),a);e&&this.$9(this.$8(e,a,b,!0),a);f&&this.$9(this.$8(f,a,b,!0),a);g&&this.$9(this.$8(g,a,b,!0),a)};h.prototype.$6=function(event,a,c,d){c={token:event.token,startedTrackingTS:c,percentVisible:a,visibilityUnit:d,intervalMs:0,cumulativeMs:0,segmentIdx:0};switch(a){case b("PercentVisible").VISIBLE_0_PCT:this.$1.set(event.id,c);break;case b("PercentVisible").VISIBLE_50_PCT:d===b("VisibilityUnitType").FEED_UNIT?this.$2.set(event.id,c):this.$3.set(event.id,c);break;case b("PercentVisible").VISIBLE_100_PCT:d===b("VisibilityUnitType").FEED_UNIT?this.$4.set(event.id,c):this.$5.set(event.id,c);break}};h.prototype.$8=function(a,c,d,e){__p&&__p();d=d-a.startedTrackingTS;var f=d-a.cumulativeMs,g=a.percentVisible;f={token:a.token,startedTrackingTS:a.startedTrackingTS,percentVisible:g,visibilityUnit:a.visibilityUnit,intervalMs:f,cumulativeMs:d,segmentIdx:++a.segmentIdx};e&&(f.duration=d);switch(g){case b("PercentVisible").VISIBLE_0_PCT:this.$1.set(c,f);break;case b("PercentVisible").VISIBLE_50_PCT:a.visibilityUnit===b("VisibilityUnitType").FEED_UNIT?this.$2.set(c,f):this.$3.set(c,f);break;case b("PercentVisible").VISIBLE_100_PCT:a.visibilityUnit===b("VisibilityUnitType").FEED_UNIT?this.$4.set(c,f):this.$5.set(c,f);break}return f};h.prototype.$7=function(a,c,d){var e=a.intervalMs,f=d-a.startedTrackingTS-a.cumulativeMs;if(this.$10(e,f)){e=this.$8(a,c,d,!1);b("Banzai").post("xtrackable:viewability",e,b("Banzai").VITAL)}};h.prototype.$10=function(a,b){if(a>=g)return!1;if(a==0)return!0;if(a<1e3)return b>=1e3;a=a/1e3;b=b/1e3;return b>=2*a};h.prototype.$9=function(a,c){var d=a.percentVisible;switch(d){case b("PercentVisible").VISIBLE_0_PCT:this.$1["delete"](c);break;case b("PercentVisible").VISIBLE_50_PCT:a.visibilityUnit===b("VisibilityUnitType").FEED_UNIT?this.$2["delete"](c):this.$3["delete"](c);break;case b("PercentVisible").VISIBLE_100_PCT:a.visibilityUnit===b("VisibilityUnitType").FEED_UNIT?this.$4["delete"](c):this.$5["delete"](c);break}b("Banzai").post("xtrackable:viewability",a,b("Banzai").VITAL)};e.exports=h}),null);
__d("ViewableImpressionDurationLogger",["Banzai"],(function(a,b,c,d,e,f){"use strict";__p&&__p();g.logFromViewableImpressionTracker=function(a){var b=new g();b.subscribeToTrackerEvents(a)};function g(){this.$1=new Map()}g.prototype.subscribeToTrackerEvents=function(a){a.addListener("visible",this.onElementVisible.bind(this)),a.addListener("hidden",this.onElementHidden.bind(this))};g.prototype.onElementVisible=function(event){if(this.$1.get(event.id))return null;var a={token:event.token,startedTrackingTS:this.getTimeNow()};this.$1.set(event.id,a);return a};g.prototype.onElementHidden=function(event){var a=this.$1.get(event.id);if(!a)return!1;a.trackingDuration=this.getTimeNow()-a.startedTrackingTS;return this.sendLog(event.id)};g.prototype.sendLog=function(a){var c=this.$1.get(a);if(!c||!c.trackingDuration)return!1;b("Banzai").post("xtrackable:duration",c);this.$1["delete"](a);return!0};g.prototype.getTimeNow=function(){return parseFloat((Date.now()/1e3).toFixed(2))};e.exports=g}),null);
__d("ViewableImpressionHeatmapLogger",["Banzai"],(function(a,b,c,d,e,f){__p&&__p();g.logFromViewableImpressionTracker=function(a,b){"use strict";b=new g(b);b.subscribeToTrackerEvents(a)};function g(a){"use strict";this.loggingDurationMS=a,this.trackingEntries={}}g.prototype.subscribeToTrackerEvents=function(a){"use strict";this.visibleSubscription=a.addListener("visible",this.onElementVisible,this),this.hiddenSubscription=a.addListener("hidden",this.onElementHidden,this)};g.prototype.onElementVisible=function(a){"use strict";var b=this.getCurrentTimestamp(),c=this.trackingEntries[a.id];c||(c=this.createTrackingEntry(a),this.beginTracking(a.id,c),b=c.startedTrackingTS);c.viewportProgressEvents.push({timestamp:b,percentInViewport:a.percentInViewport.toFixed(2)})};g.prototype.onElementHidden=function(a){"use strict";var b=this.getCurrentTimestamp();a=this.trackingEntries[a.id];if(!a)return;a.viewportProgressEvents.push({timestamp:b,percentInViewport:0})};g.prototype.onTrackingCompleted=function(a){"use strict";var b=this.trackingEntries[a];b.viewportProgressEvents.push({timestamp:this.getCurrentTimestamp(),percentInViewport:b.tracker.getPercentInViewport().toFixed(2)});this.$1()&&this.$2(a,b);this.logToServer(b);delete this.trackingEntries[a]};g.prototype.logToServer=function(a){"use strict";a=a;delete a.tracker;b("Banzai").post("xtrackable:heatmap",a)};g.prototype.beginTracking=function(a,b){"use strict";this.trackingEntries[a]=b,setTimeout(function(){return this.onTrackingCompleted(a)}.bind(this),this.loggingDurationMS)};g.prototype.createTrackingEntry=function(a){"use strict";return{tracker:a.tracker,token:a.token,startedTrackingTS:this.getCurrentTimestamp(),viewportProgressEvents:[]}};g.prototype.getCurrentTimestamp=function(){"use strict";return(Date.now()/1e3).toFixed(2)};g.prototype.$1=function(){"use strict";return 0};g.prototype.$2=function(a,b){"use strict";var c="Completed tracking for id "+a+" token="+b.token+" startedTrackingTS="+b.startedTrackingTS+"\n";b.viewportProgressEvents.forEach(function(a){c+="% in view: "+a.percentInViewport+" timestamp="+a.timestamp+"\n"});!1};e.exports=g}),null);
__d("VisibilityTracking",["Banzai","BrowseClientEventLogger","DataAttributeUtils","ErrorUtils","ScriptPath","SubscriptionsHandler","Visibility","VisibilityTrackingHelper","collectDataAttributes","getElementPosition","pageID","throttle"],(function(a,b,c,d,e,f){__p&&__p();var g="visibility_tracking",h="[data-vistracking]",i=500,j=50,k=50,l=50,m=50,n=0;function o(a){"use strict";__p&&__p();a=a||{};if(!a.bypass_banzai_check&&!b("Banzai").isEnabled(g))return;this.visibleElementInfo={};this.getDataFromConfig(a);b("Visibility").addListener(b("Visibility").VISIBLE,b("ErrorUtils").guard(function(){return this.fireEvent("browser")}.bind(this),"VisibilityTracking:visible",this));b("Visibility").addListener(b("Visibility").HIDDEN,b("ErrorUtils").guard(function(){return this.clearAllVisibleElements("browser")}.bind(this),"VisibilityTracking:hidden",this));b("ScriptPath").subscribe(b("ErrorUtils").guard(function(){return this.updateVisibleElements()}.bind(this),"VisibilityTracking:scriptPath",this));b("Banzai").subscribe(b("Banzai").SHUTDOWN,b("ErrorUtils").guard(function(){return this.onUnload()}.bind(this),"VisibilityTracking:banzaiShutdown",this));this.fireEventCallback=b("throttle").acrossTransitions(b("ErrorUtils").guard(function(event){return this.fireEvent(event)}.bind(this),"VisibilityTracking:fireEventCallback",this),this.timeout,this);this.listeners=new(b("SubscriptionsHandler"))();b("VisibilityTrackingHelper").getEventListeners(function(){return this.fireEventCallback()}.bind(this)).forEach(function(a){this.listeners.addSubscriptions(a)},this);this.extraInit&&b("ErrorUtils").applyWithGuard(this.extraInit.bind(this))}o.prototype.getDataFromConfig=function(a){"use strict";this.config=a,this.root=a.root||document.documentElement,this.selector=a.selector||h,this.visibleEventCallBack=a.visibleEventCallBack||function(){},this.timeout=a.timeout!==undefined?a.timeout:i,this.minOffsetVisibleFromBottom=a.minOffsetVisibleFromBottom!==undefined?a.minOffsetVisibleFromBottom:j,this.minOffsetVisibleFromTop=a.minOffsetVisibleFromTop!==undefined?a.minOffsetVisibleFromTop:k,this.minOffsetVisibleFromLeft=a.minOffsetVisibleFromLeft!==undefined?a.minOffsetVisibleFromLeft:l,this.minOffsetVisibleFromRight=a.minOffsetVisibleFromRight!==undefined?a.minOffsetVisibleFromRight:m,this.handleAllHiddenEvents=a.handleAllHiddenEvents!==undefined?a.handleAllHiddenEvents:!1,this.handleAllVisibleEvents=a.handleAllVisibleEvents!==undefined?a.handleAllVisibleEvents:!1,this.cacheTrackedElements=a.cacheTrackedElements!==undefined?a.cacheTrackedElements:!1};o.prototype.getAllTrackedElements=function(){"use strict";__p&&__p();if(!this.allTrackedElements){this.allTrackedElements={};var a=[];this.config.is_xtrackable?a=b("DataAttributeUtils").getXTrackableElements():this.root&&this.root.querySelectorAll&&(a=this.root.querySelectorAll(this.selector));for(var c=0;c<a.length;c++){var d=this.getElementID(a[c]);this.allTrackedElements[d.toString()]=a[c]}}return this.allTrackedElements};o.prototype.refreshAllTrackedElements=function(){"use strict";delete this.allTrackedElements;return this.getAllTrackedElements()};o.prototype.getDataToLog=function(a){"use strict";a=Object.assign(b("collectDataAttributes")(a,["gt"]).gt,{client_time:Date.now()/1e3,time_spent_id:b("pageID"),script_path:b("ScriptPath").getScriptPath()});return a};o.prototype.getElementID=function(a){"use strict";var b=a.$1;if(b)return b;a.$1=++n;return n};o.prototype.sendDataToLog=function(a){"use strict";b("BrowseClientEventLogger").maybeLogVisiblityEvent(a),b("Banzai").post(g,a)};o.prototype.isInstreamAdStoryElement=function(a){"use strict";return!1};o.prototype.fireEvent=function(a){a===void 0&&(a="default");var c=this.cacheTrackedElements?this.allTrackedElements:this.refreshAllTrackedElements();for(var d in c){var e=c[d],f=b("VisibilityTrackingHelper").getViewportInfo();f=this.isVisible(e,f);!f&&(d in this.visibleElementInfo||this.handleAllHiddenEvents)?this.handleEvent(e,{name:"hidden",cause:a}):f&&(!(d in this.visibleElementInfo)||this.handleAllVisibleEvents)&&this.handleEvent(e,{name:"visible",cause:a})}this.clearUntrackedVisibleElements()};o.prototype.isVisible=function(a,c){"use strict";if(a==null)return!1;a=b("getElementPosition")(a);return a.y+a.height>=this.minOffsetVisibleFromTop&&a.y<=c.height-this.minOffsetVisibleFromBottom&&a.x+a.width>=this.minOffsetVisibleFromLeft&&a.x<=c.width-this.minOffsetVisibleFromRight};o.prototype.handleEvent=function(a,event){"use strict";__p&&__p();var c=this.getElementID(a).toString(),d=this.getDataToLog(a),e;if(event.name==="visible"){var f=Math.floor(Date.now()/1e3);e=b("pageID").concat(":",f.toString(),":",this.getElementID(a).toString());this.visibleElementInfo[c]={visibility_id:e,elem:a}}else if(event.name==="hidden"){c in this.visibleElementInfo&&(e=this.visibleElementInfo[c].visibility_id,delete this.visibleElementInfo[c]);if(event.cause==="browser")return}this.sendDataToLog(Object.assign(d,{event:event.name,visibility_id:e}))};o.prototype.clearUntrackedVisibleElements=function(){"use strict";var a=this.getAllTrackedElements();for(var b in this.visibleElementInfo)if(!(b in a)){var c=this.visibleElementInfo[b];c.elem&&this.handleEvent(c.elem,{name:"hidden",cause:"removed"})}};o.prototype.clearAllVisibleElements=function(a){a===void 0&&(a="default");var b=this.getAllTrackedElements();for(var c in b)c in this.visibleElementInfo&&this.handleEvent(b[c],{name:"hidden",cause:a});this.clearUntrackedVisibleElements()};o.prototype.updateVisibleElements=function(){"use strict";this.clearAllVisibleElements(),this.fireEvent()};o.prototype.refreshAndFireEvent=function(event){"use strict";this.refreshAllTrackedElements(),this.fireEventCallback(event)};o.prototype.onUnload=function(){"use strict";this.clearAllVisibleElements(),this.listeners&&(this.listeners.release(),this.listeners=null),this.extraCleanup&&b("ErrorUtils").applyWithGuard(this.extraCleanup.bind(this))};o.init=function(a){"use strict";return new o(a)};e.exports=o}),null);
__d("ViewableImpressionEventHandler",["DataAttributeUtils","FullViewLogger","ViewabilityDebugLogger","ViewabilityDurationSegmentLogger","ViewableImpressionDurationLogger","ViewableImpressionHeatmapLogger","ViewableImpressionTracker","VisibilityTracking"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h,i=1;g=babelHelpers.inherits(a,b("VisibilityTracking"));h=g&&g.prototype;a.prototype.extraInit=function(){this.impressionTrackers={}};a.prototype.getDataFromConfig=function(a){h.getDataFromConfig.call(this,a),this.doHeatmapLogging=a.doHeatmapLogging,this.heatmapLoggingDurationMS=a.heatmapLoggingDurationMS,a.impressionURL=a.impressionURL!==undefined?a.impressionURL:"/xti.php",a.nonviewableEnabled=a.nonviewableEnabled!==undefined?a.nonviewableEnabled:!1};a.prototype.getImpressionTracking=function(a){__p&&__p();var c=this.getElementID(a),d=this.impressionTrackers[c];if(!d){var e=babelHelpers["extends"]({},this.getConfigFromElement(a),this.config);d=new(b("ViewableImpressionTracker"))(c,a,e);this.impressionTrackers[c]=d;e.log_impression_duration&&b("ViewableImpressionDurationLogger").logFromViewableImpressionTracker(d);this.doHeatmapLogging&&b("ViewableImpressionHeatmapLogger").logFromViewableImpressionTracker(d,this.heatmapLoggingDurationMS);e.should_log_full_views&&b("FullViewLogger").logFromViewableImpressionTracker(d);e.should_log_viewability_duration&&b("ViewabilityDurationSegmentLogger").logFromViewableImpressionTracker(d);e.should_log_debug_duration&&b("ViewabilityDebugLogger").logFromViewableImpressionTracker(d)}return d};a.prototype.handleEvent=function(a,event){var b=this.getImpressionTracking(a);if(!b)return;if(event.name==="visible")b.onVisible(event),this.visibleElementInfo[b.getID()]||(this.visibleElementInfo[b.getID()]={elem:a});else if(event.name==="hidden"){a=b.getConfig();event.cause==="default"||a.log_visibility_hidden_when_browser_inactive&&event.cause==="browser"?(b.onHidden(),delete this.visibleElementInfo[b.getID()]):event.cause==="removed"&&(b.onRemoved(),delete this.visibleElementInfo[b.getID()],delete this.impressionTrackers[b.getID()])}};a.prototype.isInstreamAdStoryElement=function(a){a=babelHelpers["extends"]({},this.getConfigFromElement(a),this.config);return!!a.is_instream_story};a.prototype.getConfigFromElement=function(a){return JSON.parse(b("DataAttributeUtils").getDataAttribute(a,"data-xt-vimp"))};a.prototype.getElementID=function(a){a.getAttribute("id")||a.setAttribute("id","xt_uniq_"+i++);return a.getAttribute("id")};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("ViewableImpressionTracking",["Arbiter","DesktopHscrollUnitEventConstants","ErrorUtils","LitestandMessages","Run","ViewableImpressionEventHandler","ViewableImpressionConfig"],(function(a,b,c,d,e,f){a={init:function(){b("ViewableImpressionEventHandler").instance===undefined&&(b("ViewableImpressionEventHandler").instance=new(b("ViewableImpressionEventHandler"))(b("ViewableImpressionConfig")),b("ViewableImpressionEventHandler").instance.listeners.addSubscriptions(b("Arbiter").subscribe([b("LitestandMessages").STORIES_INSERTED,"AdsRefreshHandler/AdsLoaded","MPPInsights/ChartView","PhotoSnowliftAds/displayUnits","WebMessengerAdsControl/adjustAds",b("DesktopHscrollUnitEventConstants").HSCROLL_ITEM_INSERTED_EVENT,"WebVideoChannelAds/AdsLoaded"],b("ErrorUtils").guard(function(event){b("ViewableImpressionEventHandler").instance.refreshAndFireEvent(event)},"ViewableImpressionTracking")))),b("Run").onLoad(function(){b("ViewableImpressionEventHandler").instance.refreshAndFireEvent()})}};e.exports=a}),null);
__d("QuickPipeRequest",["AjaxPipeRequest","Arbiter","ArtilleryOnUntilOffLogging","DocumentTitle","PageNavigationStageLogger","Quickling","QuicklingConfig","QuicklingFetchStreamConfig","QuicklingRefreshOverheadUtil","RoyalBluebar","RoyalBluebarTransitions","URI","UserAgent_DEPRECATED","goOrReplace","ifRequired"],(function(a,b,c,d,e,f){__p&&__p();var g,h=b("QuicklingConfig").version,i,j="";c=babelHelpers.inherits(a,b("AjaxPipeRequest"));g=c&&c.prototype;function a(a,c){"use strict";__p&&__p();var d={version:h};g.constructor.call(this,a,c,{quickling:d});this._processFirstResponse=function(a){var c=a.getPayload();k(c.title);window.scrollTo(0,0);a=a.getRequest();a&&document.body&&(document.body.className=c.body_class||"");b("Arbiter").inform("quickling/response");b("ArtilleryOnUntilOffLogging").onNewPageLoad()};this._isQuickling=!0}a.prototype._preBootloadFirstResponse=function(a){"use strict";return!0};a.prototype._fireDomContentCallback=function(){"use strict";this._request&&this._request.cavalry&&this._request.cavalry.setTimeStamp("t_domcontent"),b("ifRequired")("PageTransitions",function(a){a.transitionComplete()}),g._fireDomContentCallback.call(this)};a.prototype._fireOnloadCallback=function(){"use strict";var a=this._request;a!=null&&a.cavalry&&(a.cavalry.setTimeStamp("t_hooks"),a.cavalry.setTimeStamp("t_layout"),a.cavalry.setTimeStamp("t_onload"));g._fireOnloadCallback.call(this)};a.prototype.isPageActive=function(a){"use strict";return b("Quickling").isPageActive(a)};a.prototype._versionCheck=function(a){"use strict";__p&&__p();if(a.version==h){b("QuicklingRefreshOverheadUtil").onQuicklingVersionMatch();return!0}var c=["quickling","ajaxpipe","ajaxpipe_token","ajaxpipe_fetch_stream"];b("PageNavigationStageLogger").setCookieForNavigation(a.uri);b("PageNavigationStageLogger").setNote("quickling_version");b("PageNavigationStageLogger").updateCookie();b("QuicklingRefreshOverheadUtil").onQuicklingRefreshStart();b("goOrReplace")(window.location,new(b("URI"))(a.uri).removeQueryData(c),!0);b("RoyalBluebar").stopTransitionAnimation();return!1};a.prototype.getSanitizedParameters=function(){"use strict";return["quickling"]};a.prototype._getAsyncRequestType=function(){"use strict";return b("QuicklingFetchStreamConfig").experimentName!==b("RoyalBluebarTransitions").OFF?"useFetchWithIframeFallback":"useIframeTransport"};function k(a){a=a||"Facebook",b("DocumentTitle").set(a),b("UserAgent_DEPRECATED").ie()&&(j=a,i||(i=window.setInterval(function(){var a=j,c=b("DocumentTitle").get();a!=c&&b("DocumentTitle").set(a)},5e3,!1)))}e.exports=a}),null);
__d("QuicklingAugmenter",["URI"],(function(a,b,c,d,e,f){__p&&__p();var g=[];a={addHandler:function(a){g.push(a)},augmentURI:function(a){var c=[],d=new(b("URI"))(a);g.forEach(function(a){var b=a(d);if(!b)return d;c.push(a);d=d.addQueryData(b)});g=c;return d}};e.exports=a}),null);
__d("Quickling",["AjaxPipeRequest","Arbiter","BigPipe","ContextualComponent","PageEvents","PageHooks","PageNavigationStageLogger","PageTransitionsRegistrar","PHPQuerySerializer","QuicklingAugmenter","QuicklingConfig","QuicklingRefreshOverheadUtil","QuickPipeRequest","RoyalBluebar","Run","TimerStorage","URI","cancelAnimationFrame","cancelIdleCallback","clearImmediate","clearInterval","clearTimeout","ge","isEmpty"],(function(a,b,c,d,e,f){__p&&__p();var g=b("QuicklingConfig").sessionLength,h=new RegExp(b("QuicklingConfig").inactivePageRegex),i=0,j=!1,k={init:function(){if(j)return;j=!0;b("Run").onAfterLoad(function(){b("PageTransitionsRegistrar").registerHandler(m,1)})},isActive:function(){return j},isPageActive:function(a){__p&&__p();if(a==="#")return!1;a=new(b("URI"))(a);if(a.getDomain()&&a.getDomain()!=new(b("URI"))(window.location.href).getDomain())return!1;if(a.getPath()=="/l.php"){var c=a.getQueryData().u;if(c){c=new(b("URI"))(unescape(c)).getDomain();if(c&&c!=new(b("URI"))(window.location.href).getDomain())return!1}}c=a.getPath();a=a.getQueryData();b("isEmpty")(a)||(c+="?"+b("PHPQuerySerializer").serialize(a));return Object.keys(a).reduce(function(a,c){return a||b("QuicklingConfig").badRequestKeys.includes(c)},!1)?!1:!h.test(c)},getLoadCount:function(){return i},transitionHandler_DO_NOT_USE:m};function l(){i++;return i>=g}function m(a){__p&&__p();b("AjaxPipeRequest").setCurrentRequest(null);if(l()){b("PageNavigationStageLogger").setNote("quickling_refresh");return!1}a=b("QuicklingAugmenter").augmentURI(a);if(!k.isPageActive(a)){b("PageNavigationStageLogger").setNote("quickling_inactive");return!1}b("TimerStorage").clearAll(b("TimerStorage").ANIMATION_FRAME,b("cancelAnimationFrame"));b("TimerStorage").clearAll(b("TimerStorage").IDLE_CALLBACK,b("cancelIdleCallback"));b("TimerStorage").clearAll(b("TimerStorage").IMMEDIATE,b("clearImmediate"));b("TimerStorage").clearAll(b("TimerStorage").INTERVAL,b("clearInterval"));b("TimerStorage").clearAll(b("TimerStorage").TIMEOUT,b("clearTimeout"));window.ExitTime=Date.now();b("QuicklingRefreshOverheadUtil").onQuicklingStart();b("Run").__removeHook(b("PageHooks").ONLOAD_HOOK);b("Run").__removeHook(b("PageHooks").DOMREADY_HOOK);b("Arbiter").inform(b("PageEvents").AJAXPIPE_ONUNLOAD,{transition_type:"quickling"});var c="content";n(c);b("RoyalBluebar").startTransitionAnimation();c=new(b("QuickPipeRequest"))(c,a).setResetHandler(b("RoyalBluebar").stopTransitionAnimation).setFinallyHandler(b("RoyalBluebar").stopTransitionAnimation).send();c.getArbiter().subscribeOnce(b("BigPipe").Events.displayed,b("RoyalBluebar").stopTransitionAnimation);a=window.__bodyWrapper;a.getCodeUsage&&a.clearCodeUsage();return b("PageTransitionsRegistrar").DELAY_HISTORY}function n(a){var c=function(){var c=b("ge")(a);c=b("ContextualComponent").forNode(c);c&&c.cleanup();b("PageHooks").runHooks("onleavehooks")};c()}e.exports=k;a.Quickling=k}),null);
__d("SearchResultPageElementID",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({BOOTSTRAP_ENTITY_MODULE:"bootstrap_entity_module",LAYOUT_PAGELET:"initial_browse_result",LAYOUT_PAGELET_DISPLAY_DEPENDENCY:"pagelet_loader_initial_browse_result",INDEPENDENT_MODULE:"browse:independent:modules:pagelet",INDEPENDENT_MODULE_DISPLAY_DEPENDENCY:"pagelet_loader_browse:independent:modules:pagelet",LHC_CONTAINER:"browse_lhc_container",LHC_TABS_PAGELET:"pagelet_lhc_tabs",LHC_FILTERS_PAGELET:"pagelet_lhc_filters",LHC_NAV_PAGELET:"pagelet_lhc_nav",LHC_PLACES_PAGELET:"pagelet_lhc_places",CONTENT_CONTAINER:"browse_result_area",RHC_CONTAINER:"browse_rhc_container",RHC_RELATED_SEARCHES_PAGELET:"pagelet_rhc_related_searches",RHC_TRENDING_PAGELET:"pagelet_rhc_trending",RHC_PLACES_PAGELET:"pagelet_rhc_places"})}),null);
__d("SearchResultPageNavigation",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({NORMAL:"normal",INITIAL_QUICKLING:"initial_quickling",QUICKLING:"quickling",ASYNC:"async"})}),null);
__d("SearchResultPageNavigationPerfMetrics",["Arbiter","SearchResultPageElementID","SearchResultPageNavigation","SearchResultPageNavigationPerfTypedLogger","SubscriptionsHandler","URI","performanceAbsoluteNow"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=/\/search\/.+/g,h=[b("SearchResultPageElementID").INDEPENDENT_MODULE_DISPLAY_DEPENDENCY,b("SearchResultPageElementID").LAYOUT_PAGELET_DISPLAY_DEPENDENCY],i=null,j=null,k=null;function l(a){__p&&__p();this.$1=null;this.$2=null;this.$3=!1;this.$4=0;i=this;k=new(b("SearchResultPageNavigationPerfTypedLogger"))();this.$4=this.$5();a=new(b("URI"))(window.location).getPath();a.match(g)&&this.$6();this.$7(a)}l.prototype.enable=function(){this.$1=new(b("SubscriptionsHandler"))(),this.$1.addSubscriptions(b("Arbiter").subscribe("pre_page_transition",function(event,a){this.$3=j!=null,this.$4=b("performanceAbsoluteNow")(),j=null,k=new(b("SearchResultPageNavigationPerfTypedLogger"))(),this.$7(a.to.getPath())}.bind(this)))};l.prototype.disable=function(){this.$8(),this.$1!=null&&(this.$1.release(),this.$1=null)};l.prototype.$6=function(){var a=function(){var a=h[c];b("Arbiter").subscribeOnce(a+"_displayed",function(event,b){l.setElementDisplayEndTime(a)},b("Arbiter").SUBSCRIBE_NEW)};for(var c=0;c<h.length;c++)a()};l.prototype.$9=function(){if(this.$2==null)return;this.$2.addSubscriptions(b("Arbiter").subscribe("BigPipe/init",function(event,a){var c=function(){var c=h[d];a.arbiter.subscribe(c+"_displayed",function(event,a){l.setElementDisplayEndTime(c)},b("Arbiter").SUBSCRIBE_NEW)};for(var d=0;d<h.length;d++)c()},b("Arbiter").SUBSCRIBE_NEW))};l.prototype.$7=function(a){!a.match(g)?this.$8():this.$2==null&&(this.$2=new(b("SubscriptionsHandler"))(),this.$9())};l.prototype.$5=function(){var a=window.performance||window.msPerformance;return!a||!a.timing?0:a.timing.navigationStart};l.prototype.$8=function(){k=null,j=null,this.$3=!1,this.$4=0,this.$2!=null&&(this.$2.release(),this.$2=null)};l.prototype.logSessionNavigationStats=function(){if(j==null||k==null)return;j.nav_type==b("SearchResultPageNavigation").QUICKLING&&(this.$3||(j.nav_type=b("SearchResultPageNavigation").INITIAL_QUICKLING));k.setVC().setAppID(j.app_id).setReferrer(j.ref).setCaller(j.callsite).setFilterType(j.filter_type).setSessionID(j.session_id).setNavType(j.nav_type).setNavigationStartTime(Math.floor(this.$4)).log()};l.setElementDisplayEndTime=function(a){__p&&__p();if(i==null||k==null)return;var c=Math.floor(b("performanceAbsoluteNow")());switch(a){case b("SearchResultPageElementID").BOOTSTRAP_ENTITY_MODULE:k.setBemDisplayTime(c);break;case b("SearchResultPageElementID").INDEPENDENT_MODULE_DISPLAY_DEPENDENCY:k.setIemDisplayTime(c);break;case b("SearchResultPageElementID").LAYOUT_PAGELET_DISPLAY_DEPENDENCY:k.setBrowseLayoutPageletDisplayTime(c);i.logSessionNavigationStats();break;default:break}};l.setSessionStats=function(a){j=a};e.exports=l}),null);