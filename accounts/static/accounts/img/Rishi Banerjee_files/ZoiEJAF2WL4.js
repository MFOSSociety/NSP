if (self.CavalryLogger) { CavalryLogger.start_js(["YADZr"]); }

__d("BrowsePhotoActions",["csx","cx","Arbiter","AsyncRequest","CSS","DOMQuery","Event","Parent","SelectorDeprecated","requestAnimationFrame"],(function(a,b,c,d,e,f,g,h){__p&&__p();function a(a,b){this.element=a,this.target=b,this.init()}Object.assign(a.prototype,{init:function(){if(this.element){b("Event").listen(this.element,"click",this.handleClick.bind(this));var a=b("DOMQuery").scry(this.element,".uiSelector")[0];a&&this.initDeprecatedSelector(a)}b("Arbiter").subscribe(["UFI/CommentAddedActive","UFI/CommentDeletedActive","UFI/LikeActive"],this.handleUFIActions.bind(this))},initDeprecatedSelector:function(a){b("SelectorDeprecated").listen(a,["open","close"],function(c){var d=b("CSS").toggleClass.bind(null,b("Parent").bySelector(a,"._4313"),"_424_",c==="open");c==="open"?d():b("requestAnimationFrame")(d)})},handleClick:function(event){var a=event.getTarget();if(b("Parent").bySelector(a,"._ai7"))return this.handleLike(event)},handleLike:function(event,a){b("CSS").toggleClass(this.element,"_ai5");a=b("DOMQuery").scry(this.element,"_53z").length>0;new(b("AsyncRequest"))().setURI("/ajax/browse/photo_actions.php").setData({fbid:this.element.getAttribute("data-fbid"),action:"like",noupdate:!a}).setRelativeTo(this.element).setErrorHandler(function(){b("CSS").toggleClass(this.element,"_ai5")}.bind(this)).send()},handleUFIActions:function(a,c){if(parseInt(this.element.getAttribute("data-fbid"),10)!==c)return;a==="UFI/LikeActive"&&b("CSS").toggleClass(this.element,"_ai5");new(b("AsyncRequest"))().setURI("/ajax/browse/photo_actions.php").setData({fbid:this.element.getAttribute("data-fbid"),action:"comment"}).setRelativeTo(this.element).send()}});e.exports=a}),null);
__d("BrowseSlidePhoto",["ArbiterMixin","BrowseMouse","Style","Vector"],(function(a,b,c,d,e,f){__p&&__p();function a(a,b,c,d){this._root=a,this._bio=b,this._contents=c,this._hovercardOn=!1,this.target=d&&d.target,this.initEvents(),this.expand()}Object.assign(a.prototype,b("ArbiterMixin"),{initEvents:function(){b("BrowseMouse").onMouseOver(this._root,this.mouseenter.bind(this)),this.target&&(this.target.subscribe("showhovercard",this.showhovercard.bind(this)),this.target.subscribe("hidehovercard",this.hidehovercard.bind(this)))},expand:function(){var a=b("Vector").getElementDimensions(this._contents).y;a>0&&(b("Style").set(this._bio,"height",a-1+"px"),b("Style").set(this._contents,"opacity",1))},collapse:function(){b("Style").set(this._bio,"height",0),b("Style").set(this._contents,"opacity",0)},mouseenter:function(){this._hovercardOn||clearTimeout(this._hovercardTimeout)},showhovercard:function(){this._hovercardOn=!0,b("Style").set(this._contents,"opacity",1)},hidehovercard:function(){this._hovercardOn=!1}});e.exports=a}),null);
__d("AlbumFeedGridSwitcher",["cx","Arbiter","CSS","Event","PageTransitions","ReactComposerEvents","Run","SimpleNUXMessage","SimpleNUXMessageTypes","SubscriptionsHandler","URI","ge"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=7;function a(a,c,d,e){__p&&__p();this.$6=function(a){var c=b("URI").getRequestURI(!1).getQueryData();if(c.needsRefresh==="true"&&a.getQueryData().feed!==c.feed||!Object.prototype.hasOwnProperty.call(a.getQueryData(),"feed")&&!Object.prototype.hasOwnProperty.call(a.getQueryData(),"needsRefresh")){Object.prototype.hasOwnProperty.call(a.getQueryData(),"theater")&&b("Arbiter").subscribeOnce("PhotoSnowlift.CLOSE",function(){return b("PageTransitions").registerHandler(this.$6,h)}.bind(this));return!1}b("PageTransitions").transitionComplete();return!0}.bind(this);this.activateFeedView=function(){b("URI").getMostRecentURI().getQueryData().needsRefresh!=="true"&&(b("CSS").addClass(b("ge")("album_photos_pagelet"),"hidden_elem"),b("CSS").removeClass(this.$3,"_aqp"),b("CSS").removeClass(b("ge")("album_feed_pagelet"),"hidden_elem"),b("CSS").addClass(this.$2,"_aqp"),b("CSS").addClass(b("ge")("album_feedback_pagelet"),"hidden_elem"),b("CSS").addClass(b("ge")("shared_album_nux"),"hidden_elem")),this.updateFeedURI("true")}.bind(this);this.activateGridView=function(){b("URI").getMostRecentURI().getQueryData().needsRefresh!=="true"&&(b("CSS").addClass(b("ge")("album_feed_pagelet"),"hidden_elem"),b("CSS").removeClass(this.$2,"_aqp"),b("CSS").removeClass(b("ge")("album_photos_pagelet"),"hidden_elem"),b("CSS").addClass(this.$3,"_aqp"),b("CSS").removeClass(b("ge")("album_feedback_pagelet"),"hidden_elem"),b("CSS").removeClass(b("ge")("shared_album_nux"),"hidden_elem")),this.updateFeedURI("false")}.bind(this);this.$1=a;this.$2=c;this.$3=d;this.$4=e;this.$5=new(b("SubscriptionsHandler"))();this.$5.addSubscriptions(b("Event").listen(this.$2,"click",this.activateFeedView),b("Event").listen(this.$3,"click",this.activateGridView));this.$2.removeAttribute("disabled");this.$3.removeAttribute("disabled");b("CSS").removeClass(this.$3,"_42fr");b("CSS").removeClass(this.$2,"_42fr");b("Arbiter").subscribeOnce(b("ReactComposerEvents").POST_FINALLY,function(){var a=b("URI").getMostRecentURI(),c=a.getQueryData();c.needsRefresh="true";a.setQueryData(c);b("PageTransitions").go(a)});this.$4&&(this.$4.subscribe("hide",function(){b("SimpleNUXMessage").markMessageSeenByUser(b("SimpleNUXMessageTypes").ALBUMSV2_FEED_VIEW_SWITCHER)}),this.$4&&this.$4.show());b("Run").onLeave(this.cleanUp.bind(this));b("PageTransitions").registerHandler(this.$6,h);a=b("URI").getRequestURI(!1);c=a.getQueryData();c.needsRefresh&&(delete c.needsRefresh,b("PageTransitions").go(a.setQueryData(c)))}a.prototype.cleanUp=function(){this.$5&&this.$5.release(),b("PageTransitions").removeHandler(this.$6)};a.prototype.updateFeedURI=function(a){var c=b("URI").getMostRecentURI(),d=c.getQueryData();d.feed=a;c.setQueryData(d);b("PageTransitions").go(c)};e.exports=a}),null);
__d("GroupSellProductDetailActionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:GroupSellProductDetailActionsLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:GroupSellProductDetailActionsLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:GroupSellProductDetailActionsLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setClientTimeStr=function(a){this.$1.client_time_str=a;return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setExceptionMessage=function(a){this.$1.exception_message=a;return this};a.prototype.setGroupID=function(a){this.$1.group_id=a;return this};a.prototype.setIsEmployee=function(a){this.$1.is_employee=a;return this};a.prototype.setReferralSurface=function(a){this.$1.referral_surface=a;return this};a.prototype.setStoryID=function(a){this.$1.story_id=a;return this};a.prototype.setSurface=function(a){this.$1.surface=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};var g={client_time_str:!0,event:!0,exception_message:!0,group_id:!0,is_employee:!0,referral_surface:!0,story_id:!0,surface:!0,vc:!0};e.exports=a}),null);
__d("GroupSellProductDetailsEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PHOTO_CLICK:"photo_click",SHOW_DIALOG:"show_dialog",HIDE_DIALOG:"hide_dialog",PROFILE_LINK_CLICK:"profile_link_click",GROUP_LINK_CLICK:"group_link_click",PERMALINK_CLICK:"permalink_click",ASYNC_DATA_REQUEST_FAIL:"async_data_request_fail",DIALOG_INSTANCE_NULL:"dialog_instance_null",MESSAGE_SELLER_CLICK:"message_seller_click",UFI_CLICK:"ufi_click",MARK_AS_SOLD_CLICK:"mark_as_sold_click",FAILED_SALE_POST_GEN:"failed_sale_post_gen",PHOTO_SWIPE:"photo_swipe",GROUP_POST_LIKE:"group_post_like",GROUP_POST_COMMENT:"group_post_comment",SUGGESTED_ITEM_VPV:"suggested_item_vpv",SUGGESTED_ITEM_CLICK:"suggested_item_click",GROUP_POST_COMMENT_ERROR:"group_post_comment_error",GROUP_POST_COMMENT_TEXT_ENTERED:"group_post_comment_text_entered",GROUP_POST_COMMENT_INPUT_FOCUS:"group_post_comment_input_focus",GROUP_POST_COMMENT_WITH_PHOTO:"group_post_comment_with_photo",GROUP_POST_COMMENT_WITH_STICKER:"group_post_comment_with_sticker",GROUP_POST_COMMENT_INPUT_PREDICTIVE_TEXT_PRESS:"group_post_comment_input_predictive_text_press",GROUP_POST_SHARE_CLICK:"group_post_share_click",PDP_INITIAL_LOAD:"pdp_initial_load",PDP_NETWORK_FAILURE:"pdp_network_failure",PDP_RECOMMENDED_ITEMS_GRID_SEE_ALL_PRESS:"pdp_recommended_items_grid_see_all_press",PDP_RECOMMENDED_ITEMS_GRID_ITEM_PRESS:"pdp_recommended_items_grid_item_press",PDP_RECOMMENDED_ITEMS_HSCROLL_SEE_ALL_PRESS:"pdp_recommended_items_hscroll_see_all_press",PDP_RECOMMENDED_ITEMS_HSCROLL_ITEM_PRESS:"pdp_recommended_items_hscroll_item_press"})}),null);
__d("GroupSellProductDetailsImageAspect",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({HORIZONTAL:"horizontal",VERTICAL:"vertical",WIDE_HORIZONTAL:"wide_horizontal",WIDE_VERTICAL:"wide_vertical",SQUARE:"square",HEIGHT_BOUND:"height_bound"})}),null);
__d("GroupCommerceProductDetailImageContainer.react",["cx","DOM","Event","GroupSellProductDetailActionsTypedLogger","GroupSellProductDetailsEvent","GroupSellProductDetailsImageAspect","Image.react","React","ScaledImage.react","ScrollableArea.react","Style","Vector"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=38,j=483;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(a,c){__p&&__p();h.constructor.call(this,a,c),this.$6=function(event){__p&&__p();var a=event.target;if(a.nodeName==="INPUT"||a.nodeName==="TEXTAREA")return;while(a){if(a.id===this.props.ufiID)return;a=a.parentElement}switch(event.keyCode){case 37:case 38:event.stopPropagation();this.$9();break;case 39:case 40:event.stopPropagation();this.$10();break}}.bind(this),this.$11=function(a){new(b("GroupSellProductDetailActionsTypedLogger"))().setEvent(b("GroupSellProductDetailsEvent").PHOTO_CLICK).setStoryID(this.props.storyID).setGroupID(this.props.group.id).log(),this.$7(a,this.props.media),this.setState({currentIndex:a})}.bind(this),this.state={currentIndex:0,stageWidth:j,stageHeight:558}}a.prototype.render=function(){return b("React").createElement("div",null,b("React").createElement("div",{className:"_57xm"},this.$2()),b("React").createElement("div",{className:"_57xn"},this.props.media.length?this.$3():this.$4()))};a.prototype.componentDidUpdate=function(a,c){this.props.media&&this.props.media.length>1&&this.props.media!==a.media?(this.$5(),this.$1=b("Event").listen(document.body,"keydown",this.$6)):(!this.props.media||this.props.media.length<1)&&this.$5()};a.prototype.componentWillUnmount=function(){this.$5()};a.prototype.UNSAFE_componentWillReceiveProps=function(a){__p&&__p();if(this.props.media!==a.media){var b=0;if(a.media.length<1)this.setState({stageWidth:j});else{var c=this.props.query;c&&c.fbid&&(b=a.media.findIndex(function(a){return a.id.toString()===c.fbid}),b==-1&&(b=0));this.$7(b,a.media)}this.setState({currentIndex:b})}};a.prototype.$4=function(){__p&&__p();var a=this.props.elem;if(!a)return null;var c=b("DOM").scry(a,"img")[0];a=b("DOM").scry(a,"i")[0];if(c){var d=b("Vector").from(c.naturalWidth,c.naturalHeight);return b("React").createElement(b("Image.react"),{className:"_580_",width:d.x,height:d.y,src:c.src,style:this.$8(d.x,d.y)})}else if(a){c=b("Style").get(a,"backgroundImage").replace(/.*url\(\"?([^\"]*)\"?\).*/,"$1");return b("React").createElement(b("Image.react"),{className:"_580_",src:c})}return null};a.prototype.$5=function(){this.$1&&(this.$1.remove(),this.$1=null)};a.prototype.$7=function(a,c){__p&&__p();c=c[a];a=this.state.stageWidth;switch(c.aspect){case b("GroupSellProductDetailsImageAspect").HORIZONTAL:case b("GroupSellProductDetailsImageAspect").WIDE_HORIZONTAL:a=744;break;case b("GroupSellProductDetailsImageAspect").WIDE_VERTICAL:a=314;break;case b("GroupSellProductDetailsImageAspect").VERTICAL:a=419;break;case b("GroupSellProductDetailsImageAspect").SQUARE:a=558;break;case b("GroupSellProductDetailsImageAspect").HEIGHT_BOUND:a=c.width;break}this.props.onResize(c.aspect,a);this.setState({stageWidth:a})};a.prototype.$10=function(){var a=this.state.currentIndex+1,b=this.props.media.length-1;a>b&&(a=0);this.$11(a)};a.prototype.$9=function(){var a=this.state.currentIndex-1,b=this.props.media.length-1;a<0&&(a=b);this.$11(a)};a.prototype.$3=function(){var a=[],c=this.props.media.length;for(var d=0;d<c;d++){var e=this.props.media[d];a.push(b("React").createElement(b("Image.react"),{className:(this.state.currentIndex!=d?"_5810":"")+" _580_",width:e.width,height:e.height,src:e.uri,key:"stage"+e.id+("_"+d),style:this.$8(e.width,e.height)}))}return a};a.prototype.$8=function(a,b){var c;a>this.state.stageWidth&&(c=this.state.stageWidth/a,a*=c,b*=c);b>this.state.stageHeight&&(c=this.state.stageHeight/b,a*=c,b*=c);return{paddingTop:(this.state.stageHeight-b)/2+"px",paddingLeft:(this.state.stageWidth-a)/2+"px",maxWidth:this.state.stageWidth,maxHeight:this.state.stageHeight}};a.prototype.$2=function(){var a=[],c=this.props.media.length;for(var d=0;d<c;d++){var e=this.props.media[d];a.push(b("React").createElement(b("ScaledImage.react"),{className:"_5811"+(this.state.currentIndex==d?" _5812":""),width:i,height:i,imageSize:{height:e.height,width:e.width},src:e.uriThumb,onClick:this.$11.bind(this,d),key:"thumbnail"+e.id+("_"+d)}))}return b("React").createElement("div",null,b("React").createElement(b("ScrollableArea.react"),{height:this.props.maxHeight,shadow:!1},a),b("React").createElement("div",{className:"_2dh4",style:{width:i}}))};e.exports=a}),null);
__d("GroupCommerceProductDetailPivotItem.react",["cx","Image.react","Link.react","React","RelayClassic_DEPRECATED","XUICard.react","XUICardSection.react","XUIText.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=148;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){var a=this.props.pivotItem.primary_photo,c=a?this.props.pivotItem.snowlift_uri:null,d=a?null:this.props.pivotItem.story.url;a=a?"theater":undefined;return b("React").createElement("div",{className:"_179c"},b("React").createElement(b("Link.react"),{ajaxify:c,href:d,rel:a},b("React").createElement(b("XUICard.react"),{className:"_3-8h",style:{width:i}},this.renderImage(),b("React").createElement(b("XUICardSection.react"),{className:"_2pi8 _2pi2 _4bqg"},b("React").createElement(b("XUIText.react"),{className:"_4bqh",display:"block",weight:"bold",size:"meta1"},this.props.pivotItem.group_commerce_item_title),b("React").createElement(b("XUIText.react"),{className:"_179d _4bqh",display:"block",size:"meta1"},this.props.pivotItem.formatted_price.text)))))};a.prototype.renderImage=function(){return this.props.pivotItem.primary_photo?b("React").createElement(b("Image.react"),{width:i,height:i,src:this.props.pivotItem.primary_photo.image.uri}):b("React").createElement("div",{className:"_5xvt",style:{width:i,height:i}})};function a(){h.apply(this,arguments)}e.exports=b("RelayClassic_DEPRECATED").createContainer(a,{initialVariables:{image_size:i},fragments:{pivotItem:function(){return function(){return{children:[{fieldName:"group_commerce_item_title",kind:"Field",metadata:{},type:"String"},{children:[{fieldName:"text",kind:"Field",metadata:{},type:"String"}],fieldName:"formatted_price",kind:"Field",metadata:{canHaveSubselections:!0},type:"TextWithEntities"},{children:[{calls:[{kind:"Call",metadata:{type:"Int"},name:"width",value:{kind:"CallVariable",callVariableName:"image_size"}},{kind:"Call",metadata:{type:"Int"},name:"height",value:{kind:"CallVariable",callVariableName:"image_size"}},{kind:"Call",metadata:{},name:"sizing",value:{kind:"CallValue",callValue:"cover-fill"}}],children:[{fieldName:"uri",kind:"Field",metadata:{},type:"Url"}],fieldName:"image",kind:"Field",metadata:{canHaveSubselections:!0},type:"Image"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],fieldName:"primary_photo",kind:"Field",metadata:{canHaveSubselections:!0,inferredRootCallName:"node",inferredPrimaryKey:"id"},type:"Photo"},{fieldName:"snowlift_uri",kind:"Field",metadata:{},type:"Url"},{children:[{fieldName:"url",kind:"Field",metadata:{},type:"Url"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],fieldName:"story",kind:"Field",metadata:{canHaveSubselections:!0,inferredRootCallName:"node",inferredPrimaryKey:"id"},type:"Story"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],id:b("RelayClassic_DEPRECATED").QL.__id(),kind:"Fragment",metadata:{},name:"GroupCommerceProductDetailPivotItem_PivotItemRelayQL",type:"GroupCommerceProductItem"}}()}}})}),null);
__d("GroupCommerceProductDetailPivots.react",["cx","fbt","ix","GroupCommerceProductDetailPivotItem.react","Image.react","Layout.react","React","RelayClassic_DEPRECATED","XUICarousel.react","XUICarouselAnimator","XUICarouselArrow.react","XUICarouselItem.react","XUIGrayText.react"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;b("Layout.react").Column;c=b("React").PropTypes;var k=12,l=8;j=babelHelpers.inherits(a,b("React").Component);j&&j.prototype;a.prototype.render=function(){if(!this.props.groupCommerceProductItem||!this.props.groupCommerceProductItem.top_related_products||!this.props.groupCommerceProductItem.top_related_products.edges||this.props.groupCommerceProductItem.top_related_products.edges.length<k)return null;var a=this.props.groupCommerceProductItem.top_related_products.edges.map(function(a){return b("React").createElement(b("XUICarouselItem.react"),{className:"_3-8_",key:a.node.id},b("React").createElement(b("GroupCommerceProductDetailPivotItem.react"),{pivotItem:a.node}))}),c=b("React").createElement(b("XUICarouselArrow.react"),null,b("React").createElement(b("Image.react"),{alt:h._("Previous"),src:i("101565")})),d=b("React").createElement(b("XUICarouselArrow.react"),null,b("React").createElement(b("Image.react"),{alt:h._("Next"),src:i("101566")}));return b("React").createElement("div",{className:"_2pie _39ha"},b("React").createElement(b("XUIGrayText.react"),{className:"_3-94",shade:"light",size:"meta1",weight:"bold",display:"block"},h._("SEE MORE ITEMS")),b("React").createElement(b("XUICarousel.react"),{animator:new(b("XUICarouselAnimator"))({type:"horizontal",centered:!1,firstAndLastAligned:!0}),arrows:[c,d],initialAutoplay:!1,viewportWidth:this.props.width-l*2,wrapAround:!1},a))};function a(){j.apply(this,arguments)}a.propTypes={width:c.number.isRequired};e.exports=b("RelayClassic_DEPRECATED").createContainer(a,{initialVariables:{count:k},fragments:{groupCommerceProductItem:function(){return function(a){return{children:[{fieldName:"id",kind:"Field",metadata:{isRequisite:!0},type:"ID"},{calls:[{kind:"Call",metadata:{type:"Int"},name:"first",value:{kind:"CallVariable",callVariableName:"count"}}],children:[{fieldName:"count",kind:"Field",metadata:{},type:"Int"},{children:[{children:[].concat.apply([],[{fieldName:"id",kind:"Field",metadata:{isRequisite:!0},type:"ID"},b("RelayClassic_DEPRECATED").QL.__frag(a)]),fieldName:"node",kind:"Field",metadata:{canHaveSubselections:!0,inferredRootCallName:"node",inferredPrimaryKey:"id",isRequisite:!0},type:"GroupCommerceProductItem"},{fieldName:"cursor",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],fieldName:"edges",kind:"Field",metadata:{canHaveSubselections:!0,isPlural:!0},type:"ProductToTopRelatedProductsEdge"},{children:[{fieldName:"has_next_page",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"Boolean"},{fieldName:"has_previous_page",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"Boolean"}],fieldName:"page_info",kind:"Field",metadata:{canHaveSubselections:!0,isGenerated:!0,isRequisite:!0},type:"PageInfo"}],fieldName:"top_related_products",kind:"Field",metadata:{canHaveSubselections:!0,isConnection:!0,isFindable:!0},type:"ProductToTopRelatedProductsConnection"}],id:b("RelayClassic_DEPRECATED").QL.__id(),kind:"Fragment",metadata:{},name:"GroupCommerceProductDetailPivots_GroupCommerceProductItemRelayQL",type:"GroupCommerceProductItem"}}(b("GroupCommerceProductDetailPivotItem.react").getFragment("pivotItem"))}}})}),null);
__d("GroupCommerceProductDetailPivotsRoute",["RelayClassic_DEPRECATED"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("RelayClassic_DEPRECATED").Route);g&&g.prototype;function a(){g.apply(this,arguments)}a.routeName="GroupCommerceProductDetailPivotsRoute";a.path="/product_details/top_related_products/{id}";a.paramDefinitions={id:{type:"Number",required:!0}};a.queries={groupCommerceProductItem:function(a){return function(a){return{calls:[{kind:"Call",metadata:{type:"ID!"},name:"id",value:{kind:"CallVariable",callVariableName:"id"}}],children:[].concat.apply([],[{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"},{fieldName:"__typename",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"String"},b("RelayClassic_DEPRECATED").QL.__frag(a)]),fieldName:"node",kind:"Query",metadata:{isAbstract:!0,identifyingArgName:"id",identifyingArgType:"ID!"},name:"GroupCommerceProductDetailPivotsRoute",type:"Node"}}(a.getFragment("groupCommerceProductItem"))}};e.exports=a}),null);
__d("GroupCommerceProductDetailPivotsRelayContainer.react",["GroupCommerceProductDetailPivots.react","GroupCommerceProductDetailPivotsRoute","React","react-relay/classic/container/RelayRootContainer"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.render=function(){var a=new(b("GroupCommerceProductDetailPivotsRoute"))({id:this.props.groupCommerceProductID});return b("React").createElement(b("react-relay/classic/container/RelayRootContainer"),{Component:b("GroupCommerceProductDetailPivots.react"),route:a,renderFetched:function(a){return b("React").createElement(b("GroupCommerceProductDetailPivots.react"),babelHelpers["extends"]({},a,{width:this.props.width}))}.bind(this)})};function a(){g.apply(this,arguments)}a.propTypes={groupCommerceProductID:c.number.isRequired,width:c.number.isRequired};e.exports=a}),null);
__d("GroupCommerceProductDetailRHCContent.react",["cx","fbt","ix","GroupSellProductDetailActionsTypedLogger","GroupSellProductDetailsEvent","Image.react","React","XUIGrayText.react","XUIText.react"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;c=b("React").PropTypes;j=babelHelpers.inherits(a,b("React").Component);j&&j.prototype;a.prototype.render=function(){return b("React").createElement("div",{className:"_4g63"+(this.props.actor.profilePicURI?"":" _34xy")},b("React").createElement("div",{className:"_4g65"},this.$1(),this.$2(),this.$3(),b("React").createElement("div",{className:"_4g67"},this.props.description),b("React").createElement("div",{className:"_4g68"},this.props.actionButton)),b("React").createElement("div",{className:"_4g6d",onClick:function(){new(b("GroupSellProductDetailActionsTypedLogger"))().setEvent(b("GroupSellProductDetailsEvent").UFI_CLICK).setStoryID(this.props.storyID).setGroupID(this.props.group.id).log()}.bind(this),ref:"ufi",role:"presentation"},this.props.ufi))};a.prototype.$1=function(){var a=this.props.product.statusText?this.props.product.statusText+" "+this.props.product.title:this.props.product.title;return b("React").createElement(b("XUIText.react"),{id:this.props.titleID,className:"_4g6e"},a)};a.prototype.$3=function(){var a=this.props.product.price;this.props.product.previousPrice!==null&&this.props.product.priceDropEnabled&&(a=h._("Now {current_price}",[h._param("current_price",a)]));var c=null;this.props.product.priceDropEnabled&&(c=b("React").createElement(b("XUIText.react"),null,b("React").createElement(b("XUIGrayText.react"),{className:"_3crf",shade:"light",size:"meta1"},this.props.product.previousPrice)," "));return b("React").createElement("div",{className:"_4g66"},c,a)};a.prototype.$2=function(){var a=this.props.product.deliveryNote?b("React").createElement(b("XUIText.react"),{display:"inline"},this.props.product.deliveryNote):null,c=a?b("React").createElement(b("Image.react"),{className:"_4g6g",src:i("75362")}):null;return b("React").createElement("div",{className:"_4g6h"},c,b("React").createElement(b("XUIText.react"),null,a))};function a(){j.apply(this,arguments)}a.propTypes={actor:c.object.isRequired,product:c.object.isRequired,group:c.object.isRequired,feedback:c.object.isRequired,ufi:c.any.isRequired,actionButton:c.any.isRequired,storyID:c.string,description:c.any.isRequired,titleID:c.string};e.exports=a}),null);
__d("GroupCommerceProductDetailRHCHeader.react",["cx","ix","GroupSellProductDetailActionsTypedLogger","GroupSellProductDetailsEvent","Image.react","Link.react","React","ReactLayeredComponentMixin_DEPRECATED","XUIContextualDialog.react","XUIContextualDialogBody.react","classWithMixins","isEmpty","mixin"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;var j=104,k=40;i=babelHelpers.inherits(a,b("classWithMixins")(b("React").Component,b("mixin")(b("ReactLayeredComponentMixin_DEPRECATED"))));i&&i.prototype;a.prototype.renderLayers=function(){return{actorDialog:b("React").createElement(b("XUIContextualDialog.react"),{contextRef:function(){return this.refs.actorName}.bind(this),shown:!0,hoverContextRef:function(){return this.refs.actorName}.bind(this),hideOnEscape:!0,hoverHideDelay:0,hoverShowDelay:500,autoFocus:!1,width:b("XUIContextualDialog.react").WIDTH.WIDE,position:"below"},b("React").createElement(b("XUIContextualDialogBody.react"),null,b("React").createElement("div",{id:this.props.actorHoverID}))),actorImageDialog:b("React").createElement(b("XUIContextualDialog.react"),{contextRef:function(){return this.refs.actorImage}.bind(this),shown:!0,hoverContextRef:function(){return this.refs.actorImage}.bind(this),hideOnEscape:!0,hoverHideDelay:0,hoverShowDelay:500,autoFocus:!1,width:b("XUIContextualDialog.react").WIDTH.WIDE,position:"below"},b("React").createElement(b("XUIContextualDialogBody.react"),null,b("React").createElement("div",{id:this.props.actorImageHoverID}))),groupDialog:b("React").createElement(b("XUIContextualDialog.react"),{contextRef:function(){return this.refs.groupName}.bind(this),shown:!0,hoverContextRef:function(){return this.refs.groupName}.bind(this),hideOnEscape:!0,hoverHideDelay:0,hoverShowDelay:500,autoFocus:!1,width:b("XUIContextualDialog.react").WIDTH.WIDE,position:"below"},b("React").createElement(b("XUIContextualDialogBody.react"),null,b("React").createElement("div",{id:this.props.groupHoverID})))}};a.prototype.render=function(){return b("React").createElement("div",{className:"_34xx"+(this.props.actor.profilePicURI?"":" _34xy")},b("React").createElement(b("Image.react"),{className:"_34xz",width:k,height:k,src:this.props.actor.profilePicURI,ref:"actorImage"}),b("React").createElement("div",{className:"_34x-"},b("React").createElement("div",{className:"_34x_"},b("React").createElement("div",{ref:"actorName",className:"_34y0"},b("React").createElement(b("Link.react"),{href:this.props.actor.uri,onClick:function(){new(b("GroupSellProductDetailActionsTypedLogger"))().setEvent(b("GroupSellProductDetailsEvent").PROFILE_LINK_CLICK).setStoryID(this.props.storyID).setGroupID(this.props.group.id).log(),this.props.hideDialog()}.bind(this)},this.props.actor.name)),b("isEmpty")(this.props.group)?null:b("React").createElement(b("Image.react"),{className:"_34y1",src:h("82443")}),b("React").createElement("div",{ref:"groupName",className:"_34y0"},b("React").createElement(b("Link.react"),{href:this.props.group.uri,onClick:function(){new(b("GroupSellProductDetailActionsTypedLogger"))().setEvent(b("GroupSellProductDetailsEvent").GROUP_LINK_CLICK).setStoryID(this.props.storyID).setGroupID(this.props.group.id).log(),this.props.hideDialog()}.bind(this)},this.props.group.name))),b("React").createElement("div",{className:"_4g6i"},b("React").createElement(b("Link.react"),{href:this.props.product.uri,onClick:function(){new(b("GroupSellProductDetailActionsTypedLogger"))().setEvent(b("GroupSellProductDetailsEvent").PERMALINK_CLICK).setStoryID(this.props.storyID).setGroupID(this.props.group.id).log(),this.props.hideDialog()}.bind(this)},this.props.timestamp))),b("React").createElement("div",{id:this.props.chevronID}))};a.prototype.componentDidUpdate=function(a,b){a=this.refs.actorName.offsetWidth;b=j-a;this.refs.groupName.style.maxWidth=j+b+"px"};function a(){i.apply(this,arguments)}a.propTypes={actor:c.object.isRequired,group:c.object.isRequired,storyID:c.string,actorHoverID:c.string.isRequired,actorImageHoverID:c.string.isRequired,groupHoverID:c.string.isRequired,chevronID:c.string.isRequired,product:c.object.isRequired,timestamp:c.any.isRequired};e.exports=a}),null);
__d("MarketplaceUpsellIconLink.react",["ix","cx","fbt","CenteredContainer.react","Image.react","Layout.react","Link.react","MarketplaceFIGSpectrumColorsEnum","React","XUIText.react","fbglyph"],(function(a,b,c,d,e,f,g,h,i){var j=b("Layout.react").Column,k=32,l=5;function a(a){var c={borderRadius:"50%",paddingTop:l,backgroundColor:b("MarketplaceFIGSpectrumColorsEnum").LIME,height:k-l,width:k};return b("React").createElement(b("Link.react"),{className:a.className,href:a.href},b("React").createElement(b("XUIText.react"),{className:"_15t5",size:"header4"},b("React").createElement(b("Layout.react"),null,b("React").createElement(j,{className:"_2pij"},b("React").createElement(b("CenteredContainer.react"),{style:c,vertical:!0},b("React").createElement(b("Image.react"),{src:g("140856")}))),b("React").createElement(j,{className:"_2pid"},i._("View More Items for Sale on Marketplace")),b("React").createElement(j,{className:"_15t6 _2pit"},b("React").createElement(b("Image.react"),{src:g("125812")})))))}e.exports=a}),null);
__d("XGroupCommerceMarketplaceProductDetailController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/marketplace/product_detail/",{sale_post_id:{type:"FBID",required:!0},ufi_id:{type:"String",required:!0},date_time_id:{type:"String",required:!0},action_button_id:{type:"String",required:!0},actor_dialog_id:{type:"String",required:!0},actor_image_dialog_id:{type:"String",required:!0},description_id:{type:"String",required:!0},title_id:{type:"String",required:!0},group_hover_id:{type:"String",required:!0},ufi_instance_id:{type:"String",required:!0},chevron_id:{type:"String",required:!0}})}),null);
__d("XGroupCommerceMarketplaceSimilarProductsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/marketplace/similar_products/",{rid:{type:"Int"},rt:{type:"Enum",enumType:0},location:{type:"Enum",enumType:1},share_id:{type:"Int"},sale_post_id:{type:"FBID",required:!0},post_dom_id:{type:"String",required:!0},render_location:{type:"Enum",required:!0,enumType:1}})}),null);
__d("GroupCommerceProductDetail.react",["csx","cx","fbt","Arbiter","AsyncRequest","GroupCommerceProductDetailImageContainer.react","GroupCommerceProductDetailPivotsRelayContainer.react","GroupCommerceProductDetailRHCContent.react","GroupCommerceProductDetailRHCHeader.react","GroupSellProductDetailActionsTypedLogger","GroupSellProductDetailsEvent","GroupSellProductDetailsImageAspect","LayerFadeOnHide","LayerHideOnEscape","LeftRight.react","MarketplaceUpsellIconLink.react","Parent","React","ReactRenderer","ResponsiveBlock.react","ScrollableArea.react","WorkModeConfig","XGroupCommerceMarketplaceProductDetailController","XGroupCommerceMarketplaceSimilarProductsController","XMarketplaceHomePageController","XUIDialog.react","XUIDialogBody.react","XUIDialogTitle.react","XUISpinner.react","guid"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=543,l=530,m=891;a=babelHelpers.inherits(n,b("React").Component);j=a&&a.prototype;function n(a,c){__p&&__p();j.constructor.call(this,a,c);this.hideDialog=function(){this.$3(!1)}.bind(this);this.$6=function(a,c){__p&&__p();var d=this.state.width;switch(a){case b("GroupSellProductDetailsImageAspect").HORIZONTAL:case b("GroupSellProductDetailsImageAspect").WIDE_HORIZONTAL:d=1153;break;case b("GroupSellProductDetailsImageAspect").WIDE_VERTICAL:d=723;break;case b("GroupSellProductDetailsImageAspect").VERTICAL:d=828;break;case b("GroupSellProductDetailsImageAspect").SQUARE:d=967;break;case b("GroupSellProductDetailsImageAspect").HEIGHT_BOUND:d=c+409;break}this.setState({width:d})}.bind(this);this.$4=function(a,b){b>k&&(b=k),this.setState({rhcHeight:b})}.bind(this);this.$3=function(a){n.$9!==null&&this.setState({isDialogShown:a}),a||(new(b("GroupSellProductDetailActionsTypedLogger"))().setEvent(b("GroupSellProductDetailsEvent").HIDE_DIALOG).setStoryID(this.state.payload.storyID).setGroupID(this.state.payload.group.id).log(),this.props.onHide&&this.props.onHide(),n.$9!==null&&setTimeout(function(){this.setState({payload:this.$7(),query:null,elem:null})}.bind(this)))}.bind(this);this.$5=function(a){new(b("GroupSellProductDetailActionsTypedLogger"))().setEvent(b("GroupSellProductDetailsEvent").SHOW_DIALOG).setStoryID(a.payload.storyID).setGroupID(a.payload.group.id).log(),this.setState({payload:a.payload,isDialogShown:!0,isLoading:!1})}.bind(this);a=this;a.hideDialog=this.hideDialog.bind(this);a.showDialog=this.showDialog.bind(this);a.$3=this.$3.bind(this);a.$4=this.$4.bind(this);a.$5=this.$5.bind(this);a.$6=this.$6.bind(this);this.$2={};this.state={isDialogShown:!1,isLoading:!1,width:m,rhcHeight:200,payload:this.$7(),ufiID:"ufi_detail_"+b("guid")(),datetimeID:"datetime_"+b("guid")(),actionButtonID:"actionButton"+b("guid")(),actorHoverID:"actorHoverID"+b("guid")(),actorImageHoverID:"actorImageHoverID"+b("guid")(),descriptionID:"descriptionID"+b("guid")(),titleID:"titleID"+b("guid")(),groupHoverID:"groupHoverID"+b("guid")(),ufiInstanceID:"ufiInstanceID"+b("guid")(),chevronID:"chevronID"+b("guid")(),query:null,elem:null,salePostID:null}}n.prototype.componentDidMount=function(){this.$1=b("Arbiter").subscribe("XComposerEditDialog/doneEditing",function(){this.state.salePostID&&this.$8(this.state.salePostID)}.bind(this))};n.prototype.componentWillUnmount=function(){var a=this.refs.modal;a!=null&&a.layer.hide();n.$9=null;this.$1&&this.$1.unsubscribe();this.$1=null};n.prototype.render=function(){if(!this.state.isDialogShown)return null;var a=b("React").createElement("span",{id:this.state.datetimeID}),c=b("React").createElement("div",{id:this.state.ufiID}),d=b("React").createElement("div",{id:this.state.actionButtonID}),e=b("React").createElement("div",{className:"_3g5q",id:this.state.descriptionID}),f=b("XMarketplaceHomePageController").getURIBuilder().setString("ref","sale_groups").getURI();f=b("React").createElement(b("MarketplaceUpsellIconLink.react"),{className:"_1mle _2pie",href:f});return b("React").createElement(b("XUIDialog.react"),{shown:!0,onToggle:this.$3,ref:"modal",width:this.state.width,behaviors:{LayerFadeOnHide:b("LayerFadeOnHide"),LayerHideOnEscape:b("LayerHideOnEscape")},className:"_1mlf"},b("React").createElement(b("XUIDialogTitle.react"),null,i._("Item Details")),b("React").createElement(b("XUIDialogBody.react"),null,b("React").createElement("div",{className:"_3g6d"},b("React").createElement(b("LeftRight.react"),null,b("React").createElement("div",{className:"_3g6e"},b("React").createElement(b("GroupCommerceProductDetailImageContainer.react"),{elem:this.state.elem,group:this.state.payload.group,maxHeight:l,media:this.state.payload.media,onResize:this.$6,query:this.state.query,storyID:this.state.payload.storyID,ufiID:this.state.ufiID})),b("React").createElement("div",{className:"_3g6f"},b("React").createElement(b("ScrollableArea.react"),{className:"_3g6g",height:this.state.rhcHeight},b("React").createElement(b("ResponsiveBlock.react"),{className:"_3g6h",onResize:this.$4},this.$10(),b("React").createElement(b("GroupCommerceProductDetailRHCHeader.react"),{actor:this.state.payload.actor,group:this.state.payload.group,hideDialog:this.hideDialog,storyID:this.state.payload.storyID,actorHoverID:this.state.actorHoverID,actorImageHoverID:this.state.actorImageHoverID,groupHoverID:this.state.groupHoverID,chevronID:this.state.chevronID,product:this.state.payload.product,timestamp:a}),b("React").createElement(b("GroupCommerceProductDetailRHCContent.react"),{actor:this.state.payload.actor,product:this.state.payload.product,group:this.state.payload.group,feedback:this.state.payload.feedback,actionButton:d,ufi:c,hideDialog:this.hideDialog,storyID:this.state.payload.storyID,description:e,titleID:this.state.titleID}))))),this.$11())),b("WorkModeConfig").is_work_user?null:f)};n.prototype.showDialog=function(a,b,c){this.$8(a),this.setState({payload:this.$7(),salePostID:a,query:b,elem:c,isDialogShown:!0,isLoading:!0,width:m}),this.$12(a,c)};n.prototype.$10=function(){return!this.state.isLoading?null:b("React").createElement("div",{className:"_msc"},b("React").createElement(b("XUISpinner.react"),{size:"large"}))};n.prototype.$11=function(){var a=this.state.payload.product;return!a.id||!a.showPivots?null:b("React").createElement(b("GroupCommerceProductDetailPivotsRelayContainer.react"),{groupCommerceProductID:a.id,width:this.state.width})};n.prototype.$8=function(a){var c=b("XGroupCommerceMarketplaceProductDetailController").getURIBuilder().setFBID("sale_post_id",a).setString("ufi_id",this.state.ufiID).setString("date_time_id",this.state.datetimeID).setString("action_button_id",this.state.actionButtonID).setString("actor_dialog_id",this.state.actorHoverID).setString("actor_image_dialog_id",this.state.actorImageHoverID).setString("description_id",this.state.descriptionID).setString("title_id",this.state.titleID).setString("group_hover_id",this.state.groupHoverID).setString("ufi_instance_id",this.state.ufiInstanceID).setString("chevron_id",this.state.chevronID).getURI();new(b("AsyncRequest"))().setURI(c).setMethod("GET").setHandler(this.$5).setErrorHandler(function(c){new(b("GroupSellProductDetailActionsTypedLogger"))().setEvent(b("GroupSellProductDetailsEvent").ASYNC_DATA_REQUEST_FAIL).setStoryID(a.toString()).log()}).setReadOnly(!0).send()};n.prototype.$12=function(a,c){var d=c&&b("Parent").bySelector(c,"._4-u2");if(!c||!c.dataset.renderLocation||!d)return;d=d.id;if(!d||this.$2[d])return;this.$2[d]=!0;a=b("XGroupCommerceMarketplaceSimilarProductsController").getURIBuilder().setFBID("sale_post_id",a).setString("post_dom_id",d).setEnum("render_location",c.dataset.renderLocation).getURI();new(b("AsyncRequest"))().setURI(a).setMethod("GET").setHandler(this.$13).setErrorHandler(function(a){}).setReadOnly(!0).send()};n.prototype.$13=function(a){a=a.getPayload();if(!a||!a.length)return};n.prototype.$7=function(){return{actor:{profilePicURI:null},group:{},product:{},feedback:{},media:[],ufi:{}}};n.init=function(a){var c=b("ReactRenderer").constructAndRenderComponent(n,{},a);n.$14=a;n.$9=c;n.$15&&(n.showDialog(n.$15,n.$16,n.$17),n.$15=null,n.$16=null,n.$17=null)};n.showDialog=function(a,c,d){__p&&__p();if(!n.$9){if(!n.$14){n.$15=a;n.$16=c;n.$17=d;return}n.init(n.$14)}if(!n.$9){new(b("GroupSellProductDetailActionsTypedLogger"))().setEvent(b("GroupSellProductDetailsEvent").DIALOG_INSTANCE_NULL).setStoryID(a.toString()).log();return}n.$9.showDialog(a,c,d)};n.$9=null;n.$15=null;n.$14=null;n.$17=null;n.$16=null;e.exports=n}),null);
__d("GroupCommerceProductDetailLayer",["GroupCommerceProductDetail.react","Layer"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("Layer"));g&&g.prototype;a.prototype._buildWrapper=function(a,c){b("GroupCommerceProductDetail.react").init(c);return c};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("OGHovercardLayerHideOnBlur",["ContextualThing","DOM","Event"],(function(a,b,c,d,e,f){__p&&__p();function a(a){this._layer=a}Object.assign(a.prototype,{_subscriptions:null,_clickListener:null,enable:function(){this._subscriptions=[this._layer.subscribe("show",this._attach.bind(this)),this._layer.subscribe("hide",this._detach.bind(this))],this._layer.isShown()&&this._attach()},disable:function(){this._detach();while(this._subscriptions.length)this._subscriptions.pop().unsubscribe();this._subscriptions=null},_detach:function(){this._clickListener&&this._clickListener.remove(),this._clickListener=null},_attach:function(){setTimeout(function(){this._clickListener=b("Event").listen(document.documentElement,"click",this._maybeHide.bind(this))}.bind(this),0)},_maybeHide:function(event){var a=event.getTarget();if(b("DOM").contains(this._layer.getContent(),a)||b("ContextualThing").containsIncludingLayers(this._layer.getContentRoot(),a))return;this._shouldHide(event)&&this._layer.hide()},_shouldHide:function(event){return!0}});e.exports=a}),null);
__d("OGAggregationHovercardTarget",["cx","fbt","ArbiterMixin","AsyncRequest","ContextualDialog","ContextualDialogArrow","CSS","DOM","Event","LayerHideOnBlur","LayerHideOnEscape","OGHovercardLayerHideOnBlur"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i=350,j={};function k(a){return new(b("ContextualDialog"))({addedBehaviors:[b("LayerHideOnBlur"),b("LayerHideOnEscape")],arrowBehavior:b("ContextualDialogArrow"),classNames:[a]},b("DOM").create("div",{className:"_4q1"},h._("Loading..."))).setWidth(i)}Object.assign(a,{setHovercard:function(a,b){a=j[a];a&&a.setHovercard(b)}});function a(a,b,c,d,e,f,g,h,i){__p&&__p();j[b]=this;this._targetID=b;this._endpoint=c;this._preventClose=e||[];this._position=g||"below";this._dialogClass=h||"";this._fetchOnHover=i;this.init(a);for(var b=0,c=d.length;b<c;b++){e=d[b];this.addTrigger(e.element,e.trigger_class,e.context)}f&&this.showHovercard(null,null)}Object.assign(a.prototype,b("ArbiterMixin"),{init:function(a){__p&&__p();this._hovercardShown=!1;this._hovercardScheduled=!1;this._target=a;this._triggers=[];this._hovercard=null;this._fetching=!1;this._placeholder=null;this._placeholderListener=null;this._shownClass="hover_shown";this._triggerClass=null;this._currentTrigger=null;this._context=null;return this},addTrigger:function(a,c,d){this._triggers.push(a),b("Event").listen(a,"click",this._onTriggerClick.bind(this,a,c,d)),this._fetchOnHover&&b("Event").listen(a,"mouseover",this._onTriggerMouseOver.bind(this))},_onTriggerMouseOver:function(){this._fetch()},_onTriggerClick:function(a,b,c){c=c||this._target;if(this._hovercardShown&&this._hovercard.getContext()===c||this._hovercardScheduled&&this._placeholder.getContext()===c||(this._hovercardShown||this._hovercardScheduled)&&this._currentTrigger===a){this._currentTrigger=null;this.hideHovercard();return}this.hideHovercard();this._currentTrigger=a;this.showHovercard(b,c)},_fetch:function(){if(this._hovercard!=null||this._fetching)return;this._fetching=!0;var a=function(){this._fetching=!1},c=function(){this.hideHovercard()};new(b("AsyncRequest"))(this._endpoint).setData({hover_target:this._targetID}).setMethod("GET").setReadOnly(!0).setErrorHandler(c.bind(this)).setTransportErrorHandler(c.bind(this)).setFinallyHandler(a.bind(this)).send()},setHovercard:function(a){__p&&__p();var c,d=this;this._hovercard=a;c=babelHelpers.inherits(e,b("OGHovercardLayerHideOnBlur"));c&&c.prototype;e.prototype.$conditionalHideOnBlur1=function(event){"use strict";var a=event.getTarget();for(var c=0,e=d.$conditionalHideOnBlur2.length;c<e;c++)if(b("DOM").contains(d.$conditionalHideOnBlur2[c],a))return!1;return!0};function e(){"use strict";c.apply(this,arguments)}this._hovercard.setPosition(this._position).setAlignment("center").enableBehaviors([e,b("LayerHideOnEscape")]);this._hovercard.subscribe("aftershow",this._onHovercardShow.bind(this));this._hovercard.subscribe("hide",this._onHovercardHide.bind(this));this._hovercard.subscribe("destroy",this._onHovercardDestroy.bind(this));this._hovercardScheduled&&this.showHovercard(this._triggerClass,this._context)},showHovercard:function(a,c){b("CSS").addClass(this._target,this._shownClass),this._triggerClass&&this._triggerClass!==a&&b("CSS").removeClass(this._target,this._triggerClass),this._triggerClass=a,this._triggerClass&&b("CSS").addClass(this._target,this._triggerClass),this._context=c,this._hovercard?(this._hovercard.setContext(c||this._target).show(),this._hovercardShown=!0,this._hovercardScheduled=!1,this._hidePlaceholder()):(this._hovercardScheduled=!0,this._fetch(),this._showPlaceholder()),this.inform("showhovercard")},hideHovercard:function(){this._hovercardScheduled=!1,this._hidePlaceholder(),this._hovercard?this._hovercard.hide():this._onHovercardHide()},_showPlaceholder:function(){this._placeholder||(this._placeholder=k(this._dialogClass),this._placeholder.setContext(this._context||this._target).setPosition(this._position).setAlignment("center").show(),this._placeholderListener=this._placeholder.subscribe("hide",this._onPlaceholderHide.bind(this)))},_hidePlaceholder:function(){this._placeholder&&this._placeholder.hide()},_onPlaceholderHide:function(){this._placeholder&&(this._hovercardScheduled=!1,this._placeholderListener&&this._placeholder.unsubscribe(this._placeholderListener),this._placeholder=null,this._hovercardShown||this._removeTriggerClasses())},_onHovercardShow:function(){var a=this._hovercard.getContent();a=b("DOM").scry(a,"textarea.mentionsTextarea")[0];a&&a.focus()},_onHovercardHide:function(){this._hovercardShown=!1,this._removeTriggerClasses(),this.inform("hidehovercard")},_onHovercardDestroy:function(){this._hovercard=null},_removeTriggerClasses:function(){b("CSS").removeClass(this._target,this._shownClass),this._triggerClass&&b("CSS").removeClass(this._target,this._triggerClass)}});e.exports=a}),null);
__d("PhotoMultiPhotosThumb",["Event","Style"],(function(a,b,c,d,e,f){__p&&__p();var g=1200;a={init:function(a,c){__p&&__p();var d=null,e=0;function f(a){e=a,c.forEach(function(c,d){b("Style").set(c,"opacity",d===a?1:0)})}function h(){f((e+1)%c.length),d=setTimeout(h,g)}b("Event").listen(a,"mouseenter",function(){if(d)return;e=0;h()});b("Event").listen(a,"mouseleave",function(){f(0),window.clearTimeout(d),d=null})}};e.exports=a}),null);
__d("BulkTagLoader",["AsyncRequest","emptyFunction"],(function(a,b,c,d,e,f){var g=!1;function a(){}Object.assign(a,{loadForSet:function(a){g||(g=!0,new(b("AsyncRequest"))("/ajax/photos/sets/tags_fetch.php").setHandler(b("emptyFunction")).setData({set:a}).send())},loadForAlbum:function(a){g||(g=!0,new(b("AsyncRequest"))("/ajax/photos/album/tags_fetch.php").setHandler(b("emptyFunction")).setData({fbid:a}).send())},reset:function(){g=!1}});e.exports=a}),null);
__d("FlexGrid",["csx","DOM","PageTransitions","URI"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={removePhoto:function(a){a=b("DOM").scry(document.body,'._vor[data-fbid="'+a+'"]')[0];if(a){b("DOM").remove(a);a=b("URI").getMostRecentURI();var c=a.getQueryData();c.needsRefresh="true";a.setQueryData(c);b("PageTransitions").go(a)}}};e.exports=a}),null);
__d("PhotoCurationControl",["csx","Event","Parent","Toggler"],(function(a,b,c,d,e,f,g){a={init:function(a){a=b("Parent").bySelector(a,"._vor, .fbPhotoStarGridElement");b("Event").listen(a,"mouseleave",function(){b("Toggler").hide()})}};e.exports=a}),null);
__d("PhotoInlineActions",["csx","cx","Arbiter","AsyncRequest","CSS","Event","Nectar","Parent"],(function(a,b,c,d,e,f,g,h){__p&&__p();a={init:function(a,c,d,e,f,g,h,i,j,k){__p&&__p();var l=!1;b("Arbiter").subscribe(["UFI/CommentAddedActive","UFI/CommentDeletedActive","UFI/LikeActive"],function(c,d){if(parseInt(a.getAttribute("data-fbid"),10)!==d)return;c==="UFI/LikeActive"&&b("CSS").toggleClass(a,"_53a");new(b("AsyncRequest"))().setURI("/ajax/photos/photo/refresh.php").setData({fbid:a.getAttribute("data-fbid")}).setRelativeTo(a).send()});b("Event").listen(a,"click",function(event){__p&&__p();var m=event.getTarget();if(l||!b("Parent").bySelector(m,"._53b"))return;event.prevent();b("CSS").toggleClass(a,"_53a");m={};b("Nectar").addModuleData(m,a);l=new(b("AsyncRequest"))().setURI("/ajax/photos/photo/like.php").setData(babelHelpers["extends"]({fbid:a.getAttribute("data-fbid"),relatedid:c,hovercardendpoint:d,includecommentlink:e,hovercardposition:f,includeleadingseparator:g,dialogClass:h,fetchOnHover:i,includeSocialContext:j,tagURI:k},m)).setRelativeTo(a).setErrorHandler(function(){b("CSS").toggleClass(a,"_53a")}).setFinallyHandler(function(){l=!1}).send()})}};e.exports=a}),null);
__d("StarGridLayout",["Vector","removeFromArray"],(function(a,b,c,d,e,f){__p&&__p();function g(a){"use strict";Object.assign(this,a)}g.prototype.getShortestColumn=function(a){"use strict";return a[0]<=a[1]?0:1};g.prototype.getDangling=function(a){"use strict";a=a.filter(function(a){return!this.isStarred(a)}.bind(this));return a.length%2===1?a[a.length-1]:null};g.prototype.mangleOrder=function(a){"use strict";__p&&__p();if(a.length<3||!(this.isFixed(a[0])&&this.isStarred(a[1])))return a;var c=this.nextNonStarred(a,2);if(!c)return a;a=a.concat();b("removeFromArray")(a,c);a.splice(1,0,c);return a};g.prototype.layout=function(a){"use strict";var c=[0,0],d=0,e=this.getDangling(a),f=[];a=this.mangleOrder(a);for(var g=0;g<a.length;++g){var h=this.getShortestColumn(c),i=a[g];this.isStarred(i)?(this.renderStarred(this._grid,c,h,i),c[h]+=2,d=Math.max(d,h*2+2)):(f.push(i),(f.length===2||i===e)&&(this.renderNonStarred(this._grid,c,h,f),d=Math.max(d,h*2+f.length),f=[],c[h]+=1))}return new(b("Vector"))(d,Math.max.apply(null,c))};g.prototype.inNonStarredBlock=function(a,b,c,d){"use strict";return b===c[d]&&Math.floor(a/2)===d};g.prototype.inStarredBlock=function(a,b,c,d){"use strict";return(b===c[d]||b===c[d]+1)&&Math.floor(a/2)===d};g.prototype.nextNonStarred=function(a,b){"use strict";for(;b<a.length;++b)if(!this.isStarred(a[b]))return a[b];return null};g.prototype.layoutReorder=function(a,c,d,e){"use strict";__p&&__p();a=a.concat();d=Math.max(0,Math.min(3,d));e=Math.max(0,e);b("removeFromArray")(a,c);a.push(c);var f=[0,0],g=this.getDangling(a),h=!1,i=[];for(var j=0;j<a.length;++j){var k=this.getShortestColumn(f),l=a[j];if(this.isStarred(l)){l===c&&(h=!0);!h&&this.isStarred(c)&&this.inStarredBlock(d,e,f,k)&&this.inNonStarredBlock(d,e,f,k)&&(b("removeFromArray")(a,c),this.renderStarred(this._grid,f,k,c),f[k]+=2,k=this.getShortestColumn(f),h=!0);if(!h&&!this.isStarred(c)&&this.inStarredBlock(d,e,f,k)&&this.inNonStarredBlock(d,e,f,k)){b("removeFromArray")(a,c);if(i.length===1)i.splice(d%2,0,c);else{var m=this.nextNonStarred(a,j);m?(b("removeFromArray")(a,m),i.push(m),i.splice(d%2,0,c)):i.push(c)}this.renderNonStarred(this._grid,f,k,i);i=[];f[k]+=1;g=this.getDangling(a.slice(j+1));k=this.getShortestColumn(f);h=!0}if(!h&&this.inStarredBlock(d,e,f,k)&&!this.inNonStarredBlock(d,e,f,k)){b("removeFromArray")(a,c);var m=this.nextNonStarred(a,j);a.push(c);if(m){b("removeFromArray")(a,m);a.splice(j,0,m);j--;continue}e-=1;j--;continue}this.renderStarred(this._grid,f,k,l);f[k]+=2}else i.push(l),(i.length===2||l===g)&&(!h&&!this.isStarred(c)&&this.inNonStarredBlock(d,e,f,k)&&(b("removeFromArray")(i,c),b("removeFromArray")(a,c),i.splice(d%2,0,c),i.length===3&&(b("removeFromArray")(a,i[2]),a.splice(j,0,i[2]),j=a.indexOf(i[2])-1,i.pop()),g=this.getDangling(a.slice(j+1)),h=!0),!h&&this.isStarred(c)&&this.inNonStarredBlock(d,e,f,k)&&(b("removeFromArray")(a,c),this.renderStarred(this._grid,f,k,c),f[k]+=2,k=this.getShortestColumn(f),h=!0),this.renderNonStarred(this._grid,f,k,i),i=[],f[k]+=1)}};g.prototype.getStoringLayout=function(a){"use strict";return new g({grid:this._grid,isStarred:this.isStarred,isFixed:this.isFixed,renderStarred:function(b,c,d,e){a.push(e)},renderNonStarred:function(b,c,d,e){a.push(e[0]),e.length>1&&a.push(e[1])}})};g.prototype.reorder=function(a,b,c,d){"use strict";var e=[];this.getStoringLayout(e).layoutReorder(a,b,c,d);return e};g.prototype.canonicalize=function(a){"use strict";var b=[];this.getStoringLayout(b).layout(a);return b};e.exports=g}),null);
__d("StarGrid",["Arbiter","CSS","DataStore","DOM","Locale","Parent","StarGridLayout","Style","removeFromArray"],(function(a,b,c,d,e,f){__p&&__p();var g={MARGIN:5,isStarred:function(a){return b("CSS").hasClass(a,"fbPhotoStarGridStarred")},isFixed:function(a){return b("CSS").hasClass(a,"fbPhotoStarGridFixed")},setPosition:function(a,c,d){var e=b("Locale").isRTL()?"margin-right":"margin-left";b("Style").set(a,"position","absolute");b("Style").set(a,"margin-top",c+"px");b("Style").set(a,e,d+"px")},renderNonStarred:function(a,b,c,d){for(var e=0;e<d.length;++e){var f=b[c]*g.getSize(a),h=(c*2+e)*g.getSize(a);g.setPosition(d[e],f,h)}},renderStarred:function(a,b,c,d){b=b[c]*g.getSize(a);c=c*2*g.getSize(a);g.setPosition(d,b,c)},mergeWithPreviousGrid:function(a){var c=a.previousSibling;if(c&&b("CSS").hasClass(c,"fbStarGrid")){b("CSS").addClass(c,"fbStarGridAppendedTo");while(a.firstChild)c.appendChild(a.firstChild);b("DOM").remove(a);a=c}return a},addPhotos:function(a){var c=b("DOM").scry(document.body,".fbStarGrid")[0];if(!c)return;b("DOM").prependContent(c,a);a=this.getSize(c);this.mergeAndLayoutGrid(c,a)},removeFromGrid:function(a){var c=b("Parent").byClass(a,"fbStarGrid"),d=g.getElements(c);b("removeFromArray")(d,a);b("DOM").remove(a);g.layoutGrid(c,d);b("Arbiter").inform("StarGrid/UPDATE",c)},removePhoto:function(a){a=b("DOM").scry(document.body,'.fbPhotoStarGridElement[data-fbid="'+a+'"]')[0];a&&this.removeFromGrid(a)},removeUntaggedPhoto:function(a){a=b("DOM").scry(document.body,'.fbPhotoStarGridElement[data-fbid="'+a+'"][data-in-photos-of="1"]');a.length>0&&this.removeFromGrid(a[0])},removePhotos:function(a){__p&&__p();var c,d;for(var e=0;e<a.length;e++){var f=a[e];f=b("DOM").scry(document.body,'.fbPhotoStarGridElement[data-fbid="'+f+'"]')[0];c=b("Parent").byClass(f,"fbStarGrid");d=g.getElements(c);b("removeFromArray")(d,f);b("DOM").remove(f)}g.layoutGrid(c,d);b("Arbiter").inform("StarGrid/UPDATE",c)},layoutGrid:function(a,c){var d=new(b("StarGridLayout"))({_grid:a,isStarred:g.isStarred,isFixed:g.isFixed,renderNonStarred:g.renderNonStarred,renderStarred:g.renderStarred});g.setElements(a,c);d=d.layout(c);b("Style").set(a,"width",d.x*g.getSize(a)+"px");b("Style").set(a,"height",d.y*g.getSize(a)+"px")},mergeAndLayoutGrid:function(a,c){var d=b("DOM").scry(a,".fbPhotoStarGridElement"),e=g.mergeWithPreviousGrid(a),f=d;a!==e&&(f=g.getElements(e).concat(d));g.setElements(a,f);b("DataStore").set(a,"size",c);g.layoutGrid(e,f);b("Arbiter").subscribe("PhotosBulkEditablePhoto.MOVED",function(a,b){g.removePhoto(b)}.bind(this));b("Arbiter").inform("StarGrid/UPDATE",a)},getSize:function(a){return b("DataStore").get(a,"size")}};Object.assign(g,{getElements:function(a){var c=b("DataStore").get(a,"elements");c||(c=b("DOM").scry(a,"div.fbPhotoStarGridElement"),g.setElements(a,c));return c},setElements:function(a,c){b("DataStore").set(a,"elements",c)}});e.exports=g}),null);
__d("TagSuggestionsDrawer",["AsyncRequest","PhotosAppSection"],(function(a,b,c,d,e,f){var g=!1,h={init:function(){if(g)return;g=!0;b("PhotosAppSection").subscribe("toggle_drawer",h._onToggle)},_onToggle:function(a,b){b.button_clicked=="show"?h._notify(!1):h._notify(!0)},_notify:function(a){new(b("AsyncRequest"))("/ajax/medley/tag_suggestions_drawer.php").setData({is_closed:a}).send()}};e.exports=h}),null);
__d("ScrollLoader",["AsyncRequest","OnVisible"],(function(a,b,c,d,e,f){function a(a,c,d,e){"use strict";this.$1=new(b("OnVisible"))(a,function(){new(b("AsyncRequest"))(c).setRelativeTo(a).send()},d,e)}a.prototype.destroy=function(){"use strict";this.$1.remove(),this.$1=null};e.exports=a}),null);